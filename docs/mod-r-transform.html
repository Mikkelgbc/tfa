<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 13 Transforming data | Tools for Analytics (TFA)</title>
  <meta name="description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 13 Transforming data | Tools for Analytics (TFA)" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />
  <meta property="og:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="github-repo" content="bss-osca/tfa" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 13 Transforming data | Tools for Analytics (TFA)" />
  
  <meta name="twitter:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="twitter:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />

<meta name="author" content="Lars Relund Nielsen" />


<meta name="date" content="2022-11-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="mod-r-io.html"/>
<link rel="next" href="mod-r-plot.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/minichart-0.2.2/minicharts.css" rel="stylesheet" />
<script src="libs/minichart-0.2.2/leaflet.minicharts.min.js"></script>
<link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<html>
<head>
<script>
  $(document).ready(function() {

  // Section anchors
  $('.section h1, .section h2, .section h3, .section h4, .section h5').each(function() {
    anchor = '#' + $(this).parent().attr('id');
    $(this).addClass("hasAnchor").prepend('<a href="' + anchor + '" class="anchor"></a>');
  });
});
</script>
<script src="https://hypothes.is/embed.js" async></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
</html>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="img/logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the course</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lo-intro"><i class="fa fa-check"></i><b>1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> Purpose for the course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-vs-vba"><i class="fa fa-check"></i><b>1.3</b> R vs Excel/VBA</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#computer"><i class="fa fa-check"></i><b>1.4</b> How a computer works</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i><b>1.5</b> How the notes are organized</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ack"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#ex-intro"><i class="fa fa-check"></i><b>1.7</b> Exercises</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#ex-annotate"><i class="fa fa-check"></i><b>1.7.1</b> Exercise - How to annotate</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I VBA</b></span></li>
<li class="chapter" data-level="2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html"><i class="fa fa-check"></i><b>2</b> An introduction to VBA</a><ul>
<li class="chapter" data-level="2.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#lo-vba-intro"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-what"><i class="fa fa-check"></i><b>2.2</b> What is VBA</a></li>
<li class="chapter" data-level="2.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-setup"><i class="fa fa-check"></i><b>2.3</b> Setup Excel for VBA</a></li>
<li class="chapter" data-level="2.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-hello"><i class="fa fa-check"></i><b>2.4</b> Your first program</a></li>
<li class="chapter" data-level="2.5" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-macro"><i class="fa fa-check"></i><b>2.5</b> The macro recorder</a></li>
<li class="chapter" data-level="2.6" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-overview"><i class="fa fa-check"></i><b>2.6</b> VBA - A short overview</a><ul>
<li class="chapter" data-level="2.6.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#variables"><i class="fa fa-check"></i><b>2.6.1</b> Variables</a></li>
<li class="chapter" data-level="2.6.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#procedures"><i class="fa fa-check"></i><b>2.6.2</b> Procedures</a></li>
<li class="chapter" data-level="2.6.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#input-and-output"><i class="fa fa-check"></i><b>2.6.3</b> Input and output</a></li>
<li class="chapter" data-level="2.6.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#conditional-statements"><i class="fa fa-check"></i><b>2.6.4</b> Conditional statements</a></li>
<li class="chapter" data-level="2.6.5" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#loops"><i class="fa fa-check"></i><b>2.6.5</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-coding-practice"><i class="fa fa-check"></i><b>2.7</b> Good coding pratice</a></li>
<li class="chapter" data-level="2.8" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#rc-vba-intro"><i class="fa fa-check"></i><b>2.8</b> Recap</a></li>
<li class="chapter" data-level="2.9" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-intro"><i class="fa fa-check"></i><b>2.9</b> Exercises</a><ul>
<li class="chapter" data-level="2.9.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-hello"><i class="fa fa-check"></i><b>2.9.1</b> Exercise - Hello</a></li>
<li class="chapter" data-level="2.9.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-macro"><i class="fa fa-check"></i><b>2.9.2</b> Exercise - Record a macro</a></li>
<li class="chapter" data-level="2.9.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-user-input"><i class="fa fa-check"></i><b>2.9.3</b> Exercise - User input</a></li>
<li class="chapter" data-level="2.9.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-max-min"><i class="fa fa-check"></i><b>2.9.4</b> Exercise - Max and min number</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html"><i class="fa fa-check"></i><b>3</b> Loops and conditional statements</a><ul>
<li class="chapter" data-level="3.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#lo-vba-loops-cond"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-operators"><i class="fa fa-check"></i><b>3.2</b> Relational and logical operators</a></li>
<li class="chapter" data-level="3.3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-loops"><i class="fa fa-check"></i><b>3.3</b> Loops</a></li>
<li class="chapter" data-level="3.4" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-cond"><i class="fa fa-check"></i><b>3.4</b> Conditional statements</a></li>
<li class="chapter" data-level="3.5" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-ex-jen"><i class="fa fa-check"></i><b>3.5</b> Example - Find Jen</a></li>
<li class="chapter" data-level="3.6" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-ex-dist-mat"><i class="fa fa-check"></i><b>3.6</b> Example - A distance matrix</a></li>
<li class="chapter" data-level="3.7" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#recap"><i class="fa fa-check"></i><b>3.7</b> Recap</a></li>
<li class="chapter" data-level="3.8" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops-cond"><i class="fa fa-check"></i><b>3.8</b> Exercises</a><ul>
<li class="chapter" data-level="3.8.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops"><i class="fa fa-check"></i><b>3.8.1</b> Exercise - Loops</a></li>
<li class="chapter" data-level="3.8.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-cond"><i class="fa fa-check"></i><b>3.8.2</b> Exercise - Conditional statements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html"><i class="fa fa-check"></i><b>4</b> Procedures</a><ul>
<li class="chapter" data-level="4.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#lo-vba-procedures"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-subs-functions"><i class="fa fa-check"></i><b>4.2</b> Subs and functions - The basics</a></li>
<li class="chapter" data-level="4.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-optional-arg"><i class="fa fa-check"></i><b>4.3</b> Optional arguments</a></li>
<li class="chapter" data-level="4.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-pub-priv"><i class="fa fa-check"></i><b>4.4</b> Public and private procedures</a></li>
<li class="chapter" data-level="4.5" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-byref"><i class="fa fa-check"></i><b>4.5</b> Passing arguments by reference or by value</a><ul>
<li class="chapter" data-level="4.5.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#return-values-from-a-sub"><i class="fa fa-check"></i><b>4.5.1</b> Return values from a sub</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-built-in"><i class="fa fa-check"></i><b>4.6</b> Built-in functions</a></li>
<li class="chapter" data-level="4.7" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-test-persons"><i class="fa fa-check"></i><b>4.7</b> Example - Selection of test persons</a></li>
<li class="chapter" data-level="4.8" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#recap-1"><i class="fa fa-check"></i><b>4.8</b> Recap</a></li>
<li class="chapter" data-level="4.9" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-procedures"><i class="fa fa-check"></i><b>4.9</b> Exercises</a><ul>
<li class="chapter" data-level="4.9.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-subs"><i class="fa fa-check"></i><b>4.9.1</b> Exercise - Subs</a></li>
<li class="chapter" data-level="4.9.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#exercise---temperatures"><i class="fa fa-check"></i><b>4.9.2</b> Exercise - Temperatures</a></li>
<li class="chapter" data-level="4.9.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-functions"><i class="fa fa-check"></i><b>4.9.3</b> Exercise - Functions</a></li>
<li class="chapter" data-level="4.9.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-worksheet-functions"><i class="fa fa-check"></i><b>4.9.4</b> Exercise - Worksheet functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html"><i class="fa fa-check"></i><b>5</b> Advanced data types and usage</a><ul>
<li class="chapter" data-level="5.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#lo-vba-datatypes"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-strings"><i class="fa fa-check"></i><b>5.2</b> Strings</a></li>
<li class="chapter" data-level="5.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-objects"><i class="fa fa-check"></i><b>5.3</b> Objects</a></li>
<li class="chapter" data-level="5.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-wst"><i class="fa fa-check"></i><b>5.4</b> The Worksheet object</a></li>
<li class="chapter" data-level="5.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#wst-rng"><i class="fa fa-check"></i><b>5.5</b> The Range object</a><ul>
<li class="chapter" data-level="5.5.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#current-region-of-a-range"><i class="fa fa-check"></i><b>5.5.1</b> Current region of a range</a></li>
<li class="chapter" data-level="5.5.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#input-and-output-1"><i class="fa fa-check"></i><b>5.5.2</b> Input and output</a></li>
<li class="chapter" data-level="5.5.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#sorting-a-range"><i class="fa fa-check"></i><b>5.5.3</b> Sorting a range</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-ary"><i class="fa fa-check"></i><b>5.6</b> Arrays</a><ul>
<li class="chapter" data-level="5.6.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#multi-dimensional-arrays"><i class="fa fa-check"></i><b>5.6.1</b> Multi-dimensional arrays</a></li>
<li class="chapter" data-level="5.6.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#dynamic-arrays"><i class="fa fa-check"></i><b>5.6.2</b> Dynamic arrays</a></li>
<li class="chapter" data-level="5.6.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#input-and-output-2"><i class="fa fa-check"></i><b>5.6.3</b> Input and output</a></li>
<li class="chapter" data-level="5.6.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#sorting-arrays"><i class="fa fa-check"></i><b>5.6.4</b> Sorting arrays</a></li>
<li class="chapter" data-level="5.6.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#use-arrays-instead-of-ranges"><i class="fa fa-check"></i><b>5.6.5</b> Use arrays instead of ranges</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-coll"><i class="fa fa-check"></i><b>5.7</b> Collections</a></li>
<li class="chapter" data-level="5.8" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-ex-job-seq"><i class="fa fa-check"></i><b>5.8</b> Example - Job sequencing</a></li>
<li class="chapter" data-level="5.9" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#recap-2"><i class="fa fa-check"></i><b>5.9</b> Recap</a></li>
<li class="chapter" data-level="5.10" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-datatypes"><i class="fa fa-check"></i><b>5.10</b> Exercises</a><ul>
<li class="chapter" data-level="5.10.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-equal"><i class="fa fa-check"></i><b>5.10.1</b> Exercise - Equal entries</a></li>
<li class="chapter" data-level="5.10.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-products"><i class="fa fa-check"></i><b>5.10.2</b> Exercise - Product search</a></li>
<li class="chapter" data-level="5.10.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-collections"><i class="fa fa-check"></i><b>5.10.3</b> Exercise - Read collections</a></li>
<li class="chapter" data-level="5.10.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-arrays"><i class="fa fa-check"></i><b>5.10.4</b> Exercise - Read arrays</a></li>
<li class="chapter" data-level="5.10.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-process"><i class="fa fa-check"></i><b>5.10.5</b> Exercise - Process numbers</a></li>
<li class="chapter" data-level="5.10.6" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-pay"><i class="fa fa-check"></i><b>5.10.6</b> Exercise - Search payments</a></li>
<li class="chapter" data-level="5.10.7" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-flight"><i class="fa fa-check"></i><b>5.10.7</b> Exercise - Flight search</a></li>
<li class="chapter" data-level="5.10.8" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-table"><i class="fa fa-check"></i><b>5.10.8</b> Exercise - Search table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html"><i class="fa fa-check"></i><b>6</b> Generating random numbers</a><ul>
<li class="chapter" data-level="6.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#lo-vba-random-numbers"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-random-numbers"><i class="fa fa-check"></i><b>6.2</b> Generating random numbers</a></li>
<li class="chapter" data-level="6.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-simulation"><i class="fa fa-check"></i><b>6.3</b> Simulation</a><ul>
<li class="chapter" data-level="6.3.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#sec-vba-tsp"><i class="fa fa-check"></i><b>6.3.1</b> Example - Traveling salesman problem</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#recap-3"><i class="fa fa-check"></i><b>6.4</b> Recap</a></li>
<li class="chapter" data-level="6.5" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-random-numbers"><i class="fa fa-check"></i><b>6.5</b> Exercises</a><ul>
<li class="chapter" data-level="6.5.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-random-int"><i class="fa fa-check"></i><b>6.5.1</b> Exercise - Two random integers</a></li>
<li class="chapter" data-level="6.5.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-swap"><i class="fa fa-check"></i><b>6.5.2</b> Exercise - Swap entries</a></li>
<li class="chapter" data-level="6.5.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-bakery"><i class="fa fa-check"></i><b>6.5.3</b> Exercise - Dan’s bakery</a></li>
<li class="chapter" data-level="6.5.4" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-generate"><i class="fa fa-check"></i><b>6.5.4</b> Exercise - Generating random numbers</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II R</b></span></li>
<li class="chapter" data-level="7" data-path="mod-r-install.html"><a href="mod-r-install.html"><i class="fa fa-check"></i><b>7</b> Setting up R</a><ul>
<li class="chapter" data-level="7.1" data-path="mod-r-install.html"><a href="mod-r-install.html#lo-r-install"><i class="fa fa-check"></i><b>7.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="mod-r-install.html"><a href="mod-r-install.html#r-install"><i class="fa fa-check"></i><b>7.2</b> Install R and RStudio</a><ul>
<li class="chapter" data-level="7.2.1" data-path="mod-r-install.html"><a href="mod-r-install.html#test-your-installation"><i class="fa fa-check"></i><b>7.2.1</b> Test your installation</a></li>
<li class="chapter" data-level="7.2.2" data-path="mod-r-install.html"><a href="mod-r-install.html#add-on-packages"><i class="fa fa-check"></i><b>7.2.2</b> Add-on packages</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="mod-r-install.html"><a href="mod-r-install.html#r-cloud"><i class="fa fa-check"></i><b>7.3</b> Setup and test RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html"><i class="fa fa-check"></i><b>8</b> R basics and workflows</a><ul>
<li class="chapter" data-level="8.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#lo-r-workflow"><i class="fa fa-check"></i><b>8.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="8.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#working-with-r-at-the-command-line-in-rstudio"><i class="fa fa-check"></i><b>8.2</b> Working with R at the command line in RStudio</a></li>
<li class="chapter" data-level="8.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#your-first-datacamp-course"><i class="fa fa-check"></i><b>8.3</b> Your first DataCamp course</a></li>
<li class="chapter" data-level="8.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#pipes"><i class="fa fa-check"></i><b>8.4</b> Pipes</a></li>
<li class="chapter" data-level="8.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rprojs"><i class="fa fa-check"></i><b>8.5</b> RStudio projects</a><ul>
<li class="chapter" data-level="8.5.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#storing-your-code-in-a-script-file"><i class="fa fa-check"></i><b>8.5.1</b> Storing your code in a script file</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rc-r-workflow"><i class="fa fa-check"></i><b>8.6</b> Recap</a></li>
<li class="chapter" data-level="8.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-r-workflow"><i class="fa fa-check"></i><b>8.7</b> Exercises</a><ul>
<li class="chapter" data-level="8.7.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-group-work"><i class="fa fa-check"></i><b>8.7.1</b> Exercise (group work)</a></li>
<li class="chapter" data-level="8.7.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-piping"><i class="fa fa-check"></i><b>8.7.2</b> Exercise (piping)</a></li>
<li class="chapter" data-level="8.7.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-working-dir"><i class="fa fa-check"></i><b>8.7.3</b> Exercise (working dir)</a></li>
<li class="chapter" data-level="8.7.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-vectors"><i class="fa fa-check"></i><b>8.7.4</b> Exercise (vectors)</a></li>
<li class="chapter" data-level="8.7.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-matrices"><i class="fa fa-check"></i><b>8.7.5</b> Exercise (matrices)</a></li>
<li class="chapter" data-level="8.7.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-data-frames"><i class="fa fa-check"></i><b>8.7.6</b> Exercise (data frames)</a></li>
<li class="chapter" data-level="8.7.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-lists"><i class="fa fa-check"></i><b>8.7.7</b> Exercise (lists)</a></li>
<li class="chapter" data-level="8.7.8" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-strings"><i class="fa fa-check"></i><b>8.7.8</b> Exercise (string management)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html"><i class="fa fa-check"></i><b>9</b> Loops and conditionals</a><ul>
<li class="chapter" data-level="9.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#lo-loops"><i class="fa fa-check"></i><b>9.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="9.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-dc-loops-cond"><i class="fa fa-check"></i><b>9.2</b> Conditionals and control flow</a></li>
<li class="chapter" data-level="9.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-loops"><i class="fa fa-check"></i><b>9.3</b> Loops</a></li>
<li class="chapter" data-level="9.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#rc-r-loops-cond"><i class="fa fa-check"></i><b>9.4</b> Recap</a></li>
<li class="chapter" data-level="9.5" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-loops-cond"><i class="fa fa-check"></i><b>9.5</b> Exercises</a><ul>
<li class="chapter" data-level="9.5.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-conditional-expressions"><i class="fa fa-check"></i><b>9.5.1</b> Exercise (conditional expressions)</a></li>
<li class="chapter" data-level="9.5.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-loops"><i class="fa fa-check"></i><b>9.5.2</b> Exercise (loops)</a></li>
<li class="chapter" data-level="9.5.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-search-vector"><i class="fa fa-check"></i><b>9.5.3</b> Exercise (search vector)</a></li>
<li class="chapter" data-level="9.5.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-dist"><i class="fa fa-check"></i><b>9.5.4</b> Exercise (calculating distances)</a></li>
<li class="chapter" data-level="9.5.5" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-expand"><i class="fa fa-check"></i><b>9.5.5</b> Exercise (expand_grid)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mod-r-functions.html"><a href="mod-r-functions.html"><i class="fa fa-check"></i><b>10</b> Functions</a><ul>
<li class="chapter" data-level="10.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#lo-r-functions"><i class="fa fa-check"></i><b>10.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-dc-functions"><i class="fa fa-check"></i><b>10.2</b> DataCamp course</a></li>
<li class="chapter" data-level="10.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-extra"><i class="fa fa-check"></i><b>10.3</b> Functions returning multiple objects</a></li>
<li class="chapter" data-level="10.4" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-arg"><i class="fa fa-check"></i><b>10.4</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="10.5" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-doc"><i class="fa fa-check"></i><b>10.5</b> Documenting your functions</a></li>
<li class="chapter" data-level="10.6" data-path="mod-r-functions.html"><a href="mod-r-functions.html#example---job-sequencing"><i class="fa fa-check"></i><b>10.6</b> Example - Job sequencing</a></li>
<li class="chapter" data-level="10.7" data-path="mod-r-functions.html"><a href="mod-r-functions.html#rc-functions"><i class="fa fa-check"></i><b>10.7</b> Recap</a></li>
<li class="chapter" data-level="10.8" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-functions"><i class="fa fa-check"></i><b>10.8</b> Exercises</a><ul>
<li class="chapter" data-level="10.8.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-def-func"><i class="fa fa-check"></i><b>10.8.1</b> Exercise (defining functions)</a></li>
<li class="chapter" data-level="10.8.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-euclidean-distances"><i class="fa fa-check"></i><b>10.8.2</b> Exercise (euclidean distances)</a></li>
<li class="chapter" data-level="10.8.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#exercise-scope"><i class="fa fa-check"></i><b>10.8.3</b> Exercise (scope)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html"><i class="fa fa-check"></i><b>11</b> Introduction to tidyverse and RMarkdown</a><ul>
<li class="chapter" data-level="11.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#lo-tidyverse-intro"><i class="fa fa-check"></i><b>11.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="11.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tidyverse-intro"><i class="fa fa-check"></i><b>11.2</b> The tidyverse package</a></li>
<li class="chapter" data-level="11.3" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-markdown-intro"><i class="fa fa-check"></i><b>11.3</b> Writing reproducible reports</a></li>
<li class="chapter" data-level="11.4" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tibbles-intro"><i class="fa fa-check"></i><b>11.4</b> Tibbles</a></li>
<li class="chapter" data-level="11.5" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#rc-tidyverse-intro"><i class="fa fa-check"></i><b>11.5</b> Recap</a></li>
<li class="chapter" data-level="11.6" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#ex-tidyverse-intro"><i class="fa fa-check"></i><b>11.6</b> Exercises</a><ul>
<li class="chapter" data-level="11.6.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-your-first-rmarkdown-exercise"><i class="fa fa-check"></i><b>11.6.1</b> Exercise (your first RMarkdown exercise)</a></li>
<li class="chapter" data-level="11.6.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-tibbles"><i class="fa fa-check"></i><b>11.6.2</b> Exercise (tibbles)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="mod-r-io.html"><a href="mod-r-io.html"><i class="fa fa-check"></i><b>12</b> Importing and exporting data</a><ul>
<li class="chapter" data-level="12.1" data-path="mod-r-io.html"><a href="mod-r-io.html#lo-r-io"><i class="fa fa-check"></i><b>12.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="12.2" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-csv"><i class="fa fa-check"></i><b>12.2</b> CSV files</a><ul>
<li class="chapter" data-level="12.2.1" data-path="mod-r-io.html"><a href="mod-r-io.html#reading-a-csv-file"><i class="fa fa-check"></i><b>12.2.1</b> Reading a CSV file</a></li>
<li class="chapter" data-level="12.2.2" data-path="mod-r-io.html"><a href="mod-r-io.html#writing-to-csv-files"><i class="fa fa-check"></i><b>12.2.2</b> Writing to CSV files</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-excel"><i class="fa fa-check"></i><b>12.3</b> Excel</a></li>
<li class="chapter" data-level="12.4" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-google"><i class="fa fa-check"></i><b>12.4</b> Google Sheets</a></li>
<li class="chapter" data-level="12.5" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-text"><i class="fa fa-check"></i><b>12.5</b> Text files</a></li>
<li class="chapter" data-level="12.6" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-r"><i class="fa fa-check"></i><b>12.6</b> R’s native binary format</a></li>
<li class="chapter" data-level="12.7" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-json"><i class="fa fa-check"></i><b>12.7</b> Json</a></li>
<li class="chapter" data-level="12.8" data-path="mod-r-io.html"><a href="mod-r-io.html#rc-r-io"><i class="fa fa-check"></i><b>12.8</b> Recap</a></li>
<li class="chapter" data-level="12.9" data-path="mod-r-io.html"><a href="mod-r-io.html#ex-r-io"><i class="fa fa-check"></i><b>12.9</b> Exercises</a><ul>
<li class="chapter" data-level="12.9.1" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-statistikbanken"><i class="fa fa-check"></i><b>12.9.1</b> Exercise (Statistikbanken)</a></li>
<li class="chapter" data-level="12.9.2" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-tuples-in-opl"><i class="fa fa-check"></i><b>12.9.2</b> Exercise (tuples in OPL)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="mod-r-transform.html"><a href="mod-r-transform.html"><i class="fa fa-check"></i><b>13</b> Transforming data</a><ul>
<li class="chapter" data-level="13.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#lo-r-transform"><i class="fa fa-check"></i><b>13.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="13.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-tidyverse"><i class="fa fa-check"></i><b>13.2</b> Working with data in the tidyverse</a></li>
<li class="chapter" data-level="13.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-joins"><i class="fa fa-check"></i><b>13.3</b> Mutating joins</a></li>
<li class="chapter" data-level="13.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#rc-r-transform"><i class="fa fa-check"></i><b>13.4</b> Recap</a></li>
<li class="chapter" data-level="13.5" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-r-transform"><i class="fa fa-check"></i><b>13.5</b> Exercises</a><ul>
<li class="chapter" data-level="13.5.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-gapminder1"><i class="fa fa-check"></i><b>13.5.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="13.5.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-babynames1"><i class="fa fa-check"></i><b>13.5.2</b> Exercise (babynames)</a></li>
<li class="chapter" data-level="13.5.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-profit1"><i class="fa fa-check"></i><b>13.5.3</b> Exercise (profit)</a></li>
<li class="chapter" data-level="13.5.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-fish"><i class="fa fa-check"></i><b>13.5.4</b> Exercise (fisheries)</a></li>
<li class="chapter" data-level="13.5.5" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-company"><i class="fa fa-check"></i><b>13.5.5</b> Exercise (company ranking)</a></li>
<li class="chapter" data-level="13.5.6" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-titanic"><i class="fa fa-check"></i><b>13.5.6</b> Exercise (Titanic)</a></li>
<li class="chapter" data-level="13.5.7" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-r-covid"><i class="fa fa-check"></i><b>13.5.7</b> Exercise (covid)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="mod-r-plot.html"><a href="mod-r-plot.html"><i class="fa fa-check"></i><b>14</b> Data visualization using ggplot</a><ul>
<li class="chapter" data-level="14.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#lo-plot"><i class="fa fa-check"></i><b>14.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="14.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-intro"><i class="fa fa-check"></i><b>14.2</b> Introduction to data visualization</a></li>
<li class="chapter" data-level="14.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-multi"><i class="fa fa-check"></i><b>14.3</b> Combining plots into one using <em>patchwork</em></a></li>
<li class="chapter" data-level="14.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-save"><i class="fa fa-check"></i><b>14.4</b> Saving graphics</a></li>
<li class="chapter" data-level="14.5" data-path="mod-r-plot.html"><a href="mod-r-plot.html#rc-r-plot"><i class="fa fa-check"></i><b>14.5</b> Recap</a></li>
<li class="chapter" data-level="14.6" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-r-plot"><i class="fa fa-check"></i><b>14.6</b> Exercises</a><ul>
<li class="chapter" data-level="14.6.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-gapminder2"><i class="fa fa-check"></i><b>14.6.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="14.6.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-profit2"><i class="fa fa-check"></i><b>14.6.2</b> Exercise (profit)</a></li>
<li class="chapter" data-level="14.6.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-covid19"><i class="fa fa-check"></i><b>14.6.3</b> Exercise (COVID-19)</a></li>
<li class="chapter" data-level="14.6.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-lego"><i class="fa fa-check"></i><b>14.6.4</b> Exercise (Lego and sales)</a></li>
<li class="chapter" data-level="14.6.5" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-company-plot"><i class="fa fa-check"></i><b>14.6.5</b> Exercise (company ranking)</a></li>
<li class="chapter" data-level="14.6.6" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-titanic-plot"><i class="fa fa-check"></i><b>14.6.6</b> Exercise (Titanic)</a></li>
<li class="chapter" data-level="14.6.7" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-r-covid-plot"><i class="fa fa-check"></i><b>14.6.7</b> Exercise (covid)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Extra R</b></span></li>
<li class="chapter" data-level="15" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html"><i class="fa fa-check"></i><b>15</b> Fitting probability distributions</a><ul>
<li class="chapter" data-level="15.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#lo-r-dist-fit"><i class="fa fa-check"></i><b>15.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="15.2" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-intro"><i class="fa fa-check"></i><b>15.2</b> Introduction</a></li>
<li class="chapter" data-level="15.3" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-cont"><i class="fa fa-check"></i><b>15.3</b> Fitting distributions to continuous data</a><ul>
<li class="chapter" data-level="15.3.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#example-breakdown-times"><i class="fa fa-check"></i><b>15.3.1</b> Example: breakdown times</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-r-dist-fit-discrete"><i class="fa fa-check"></i><b>15.4</b> Fitting distributions to discrete data</a><ul>
<li class="chapter" data-level="15.4.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#example-sales-of-lottery-tickets"><i class="fa fa-check"></i><b>15.4.1</b> Example: sales of lottery tickets</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#sec-dist-fit-pois"><i class="fa fa-check"></i><b>15.5</b> The Poisson process</a></li>
<li class="chapter" data-level="15.6" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#rc-r-dist-fit"><i class="fa fa-check"></i><b>15.6</b> Recap</a></li>
<li class="chapter" data-level="15.7" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#ex-r-dist-fit"><i class="fa fa-check"></i><b>15.7</b> Exercises</a><ul>
<li class="chapter" data-level="15.7.1" data-path="mod-r-dist-fit.html"><a href="mod-r-dist-fit.html#exercise---call-center"><i class="fa fa-check"></i><b>15.7.1</b> Exercise - Call center</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="mod-r-maps.html"><a href="mod-r-maps.html"><i class="fa fa-check"></i><b>16</b> Spatial data and maps</a><ul>
<li class="chapter" data-level="16.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#lo-maps"><i class="fa fa-check"></i><b>16.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="16.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#sec-map-api-key"><i class="fa fa-check"></i><b>16.2</b> Services for obtatining spatial data</a></li>
<li class="chapter" data-level="16.3" data-path="mod-r-maps.html"><a href="mod-r-maps.html#calculating-distances"><i class="fa fa-check"></i><b>16.3</b> Calculating distances</a><ul>
<li class="chapter" data-level="16.3.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps"><i class="fa fa-check"></i><b>16.3.1</b> Using Google Maps</a></li>
<li class="chapter" data-level="16.3.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-bing-maps"><i class="fa fa-check"></i><b>16.3.2</b> Using Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="mod-r-maps.html"><a href="mod-r-maps.html#geocoding-and-reverse-geocoding"><i class="fa fa-check"></i><b>16.4</b> Geocoding and reverse geocoding</a><ul>
<li class="chapter" data-level="16.4.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps-1"><i class="fa fa-check"></i><b>16.4.1</b> Using Google maps</a></li>
<li class="chapter" data-level="16.4.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#use-bing-maps"><i class="fa fa-check"></i><b>16.4.2</b> Use Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="mod-r-maps.html"><a href="mod-r-maps.html#adding-markers-and-routes-to-a-map"><i class="fa fa-check"></i><b>16.5</b> Adding markers and routes to a map</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="groups.html"><a href="groups.html"><i class="fa fa-check"></i><b>A</b> Working in groups</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#using-git"><i class="fa fa-check"></i>Using Git together with GitHub</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#register-a-free-github-account"><i class="fa fa-check"></i>Register a free GitHub account</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#check-your-installation"><i class="fa fa-check"></i>Check your installation</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#setup-projects-using-git-and-github"><i class="fa fa-check"></i>Setup projects using Git and GitHub</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="annotate.html"><a href="annotate.html"><i class="fa fa-check"></i><b>B</b> Annotate the course notes</a></li>
<li class="chapter" data-level="C" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>C</b> Getting help</a></li>
<li class="chapter" data-level="D" data-path="coding-convention.html"><a href="coding-convention.html"><i class="fa fa-check"></i><b>D</b> Coding/naming convention</a><ul>
<li class="chapter" data-level="D.1" data-path="coding-convention.html"><a href="coding-convention.html#commenting-your-code"><i class="fa fa-check"></i><b>D.1</b> Commenting your code</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="apdx-vba.html"><a href="apdx-vba.html"><i class="fa fa-check"></i><b>E</b> VBA specific topics</a><ul>
<li class="chapter" data-level="E.1" data-path="apdx-vba.html"><a href="apdx-vba.html#vba-debug"><i class="fa fa-check"></i><b>E.1</b> Debugging your code</a></li>
<li class="chapter" data-level="E.2" data-path="apdx-vba.html"><a href="apdx-vba.html#error-handling"><i class="fa fa-check"></i><b>E.2</b> Error handling</a></li>
<li class="chapter" data-level="E.3" data-path="apdx-vba.html"><a href="apdx-vba.html#vba-course-procedures"><i class="fa fa-check"></i><b>E.3</b> Course procedures</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="lg-course.html"><a href="lg-course.html"><i class="fa fa-check"></i><b>F</b> Learning goals</a></li>
<li class="chapter" data-level="G" data-path="ba.html"><a href="ba.html"><i class="fa fa-check"></i><b>G</b> Business Analytics</a></li>
<li class="chapter" data-level="H" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i><b>H</b> Colophon</a></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#ack">
    License: CC BY-NC-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-nc fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tools for Analytics (TFA)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mod-r-transform" class="section level1 hasAnchor">
<h1><span class="header-section-number">Module 13</span> Transforming data<a href="mod-r-transform.html#mod-r-transform" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this module, we consider transformation of data. In general raw data may be messy and need to be structured in a <strong>tidy</strong> way. Tidying your data means storing it in a structured form suitable for analysis. This is done using a tibble (data frame) where each column is a variable, and each row is an observation. Tidy data is important because the consistent structure lets you focus your struggle on questions about the data.</p>
<p>Given a raw dataset the first step is to clean it and and transform it to a tidy format. Given tidy data, you next often need to <strong>transform</strong> it. Transformation includes narrowing in on observations of interest (e.g. only observations from a specific year or warehouse), creating new variables based on existing variables (like the cost of using the machine that day given idle time). Together, tidying and transforming are called <strong>wrangling</strong>, because it can be a hard process to get your data in the right form.</p>
<p>In this chapter, you will learn how to work with tibbles using the <a href="https://dplyr.tidyverse.org/">dplyr package</a> which is a part of the <a href="https://www.tidyverse.org">tidyverse</a>.</p>
<p>A template project for this module is given on <a href="https://rstudio.cloud/spaces/274292/content/4411760">RStudio Cloud</a> (open it and use it while reading the notes).</p>
<div id="learning-path-diagram-12" class="section level4 unnumbered hasAnchor">
<h4>Learning path diagram<a href="mod-r-transform.html#learning-path-diagram-12" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="htmlwidget-c5b7ceccc096f0402050" style="width:100%;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-c5b7ceccc096f0402050">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"💡 Transform\\n(dplyr)\", URL = \"#r-transform-tidyverse\", tooltip = \"Working with data in the tidyverse\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"0,2!\"] \n  \"2\" [label = \"📖 Joins\", URL = \"#r-transform-joins\", tooltip = \"Mutating and filtering joins\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"2,2!\"] \n  \"3\" [label = \"💻 Exercises\", URL = \"#ex-r-transform\", tooltip = \"Exercises\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"4,2!\"] \n  \"4\" [label = \"🎬 dplyr\", URL = \"https://www.youtube.com/watch?v=aywFompr1F4\", tooltip = \"Roger Peng provides a good introduction to the dplyr R package\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"-0.75,4!\"] \n  \"5\" [label = \"📖 dplyr\", URL = \"https://bookdown.org/rdpeng/rprogdatascience/managing-data-frames-with-the-dplyr-package.html\", tooltip = \"Chapter 12 in Peng (2018) provides a nice introduction to dplyr\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", width = \"0.5\", fillcolor = \"DarkOrange4\", pos = \"0.75,4!\"] \n  \"6\" [label = \"💡 Working\\nwith data\", URL = \"https://app.datacamp.com/learn/courses/working-with-data-in-the-tidyverse\", tooltip = \"An alternative interactive DataCamp course is Working with Data in the Tidyverse which may be good to take if you need more training.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"2.5,4!\"] \n  \"7\" [label = \"\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"0.5\", fontname = \"Helvetica\", shape = \"rect\", height = \"1\", width = \"6\", fillcolor = \"#F0F8FF\", pos = \"1.9,-0.09!\"] \n  \"8\" [label = \"Color:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", height = \"0\", width = \"0.8\", fillcolor = \"#FFFFFE\", pos = \"-0.73,0.25!\"] \n  \"9\" [label = \"mandatory\", URL = \"\", tooltip = \"Mandatory syllabus.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"DarkSeaGreen4\", pos = \"-0.5,-0.15!\"] \n  \"10\" [label = \"alternative\", URL = \"\", tooltip = \"Alternative syllabus if you prefer another learning style.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"DarkOrange4\", pos = \"0.5,-0.15!\"] \n  \"11\" [label = \"extra\", URL = \"\", tooltip = \"Extra learning if you are interested (not part of syllabus).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"0.8\", fillcolor = \"PeachPuff3\", pos = \"1.5,-0.15!\"] \n  \"12\" [label = \"Shape:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", height = \"0\", width = \"1\", fillcolor = \"#FFFFFE\", pos = \"2.7,0.25!\"] \n  \"13\" [label = \"non-interactive\", URL = \"\", tooltip = \"Non-interactive learning content (e.g. reading).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", width = \"1\", fillcolor = \"Grey40\", pos = \"3,-0.15!\"] \n  \"14\" [label = \"interactive\", URL = \"\", tooltip = \"Interactive learning content (tutorial, exercises etc.).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"egg\", width = \"1\", fillcolor = \"Grey40\", pos = \"4.25,-0.15!\"] \n\"1\"->\"2\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"4\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"5\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"6\" [color = \"black\", arrowhead = \"vee\"] \n\"2\"->\"3\" [color = \"black\", arrowhead = \"vee\"] \n\"2\"->\"6\" [color = \"black\", arrowhead = \"vee\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<div>It is recommended that you follow the green learning path; however, you may like a different learning style. In the learning path diagram, there are links to alternative online content (video or reading). Note this is an alternative to the standard learning path that you may use instead (you should not do both). The learning path may also have extra content, that is NOT a part of syllabus (only look at it if you want more info)!</div>
<!-- * Roger Peng provides a good video giving an [Introduction to the dplyr R package][video-dplyr].  -->
<!-- * [Chapter 12](https://bookdown.org/rdpeng/rprogdatascience/managing-data-frames-with-the-dplyr-package.html) in @rdpeng provides a nice introduction to dplyr.  -->
<!-- * An alternative interactive DataCamp course is [Working with Data in the Tidyverse][datacamp-r-dplyr-bakeoff] which may be good to take if you need more training. -->
</div>
<div id="lo-r-transform" class="section level2 hasAnchor">
<h2><span class="header-section-number">13.1</span> Learning outcomes<a href="mod-r-transform.html#lo-r-transform" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By the end of this module, you are expected to be able to:</p>
<ul>
<li>Describe what tidy and wangling is.</li>
<li>Apply the most common string functions.</li>
<li>Apply tidy operations to data.</li>
<li>Transform data.</li>
<li>Clean data.</li>
</ul>
<p>The learning outcomes relate to the <a href="lg-course.html#lg-course">overall learning goals</a> number 7, 11-14 and 18 of the course.</p>
<!-- SOLO increasing: identify · memorise · name · do simple procedure · collect data · -->
<!-- enumerate · describe · interpret · formulate · list · paraphrase · combine · do -->
<!-- algorithms · compare · contrast · explain causes · analyse · relate · derive · -->
<!-- evaluate · apply · argue · theorise · generalise · hypothesise · solve · reflect -->
</div>
<div id="r-transform-tidyverse" class="section level2 hasAnchor">
<h2><span class="header-section-number">13.2</span> Working with data in the tidyverse<a href="mod-r-transform.html#r-transform-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An excellent introduction on how to transform data using the tidyverse is given in the interactive DataCamp course <a href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr">Data Manipulation with dplyr</a>. Please complete the course before continuing.</p>
<!-- ## Tidy  -->
<!-- ## Wangling -->
<!-- https://learn.datacamp.com/projects/758 -->
<!-- https://learn.datacamp.com/courses/dealing-with-missing-data-in-r -->
<!-- https://learn.datacamp.com/courses/introduction-to-the-tidyverse -->
</div>
<div id="r-transform-joins" class="section level2 hasAnchor">
<h2><span class="header-section-number">13.3</span> Mutating joins<a href="mod-r-transform.html#r-transform-joins" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Mutating joins allow you to combine variables from multiple tables. There are four types of mutating join, which differ in their behavior when a match is not found. We’ll illustrate each with a simple example:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="mod-r-transform.html#cb440-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</span>
<span id="cb440-2"><a href="mod-r-transform.html#cb440-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">a =</span> <span class="dv">10</span>, <span class="dt">b =</span> <span class="st">&quot;a&quot;</span>)</span>
<span id="cb440-3"><a href="mod-r-transform.html#cb440-3"></a>df1</span>
<span id="cb440-4"><a href="mod-r-transform.html#cb440-4"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb440-5"><a href="mod-r-transform.html#cb440-5"></a><span class="co">#&gt;       x     y</span></span>
<span id="cb440-6"><a href="mod-r-transform.html#cb440-6"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb440-7"><a href="mod-r-transform.html#cb440-7"></a><span class="co">#&gt; 1     1     2</span></span>
<span id="cb440-8"><a href="mod-r-transform.html#cb440-8"></a><span class="co">#&gt; 2     2     1</span></span>
<span id="cb440-9"><a href="mod-r-transform.html#cb440-9"></a>df2</span>
<span id="cb440-10"><a href="mod-r-transform.html#cb440-10"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb440-11"><a href="mod-r-transform.html#cb440-11"></a><span class="co">#&gt;       x     a b    </span></span>
<span id="cb440-12"><a href="mod-r-transform.html#cb440-12"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb440-13"><a href="mod-r-transform.html#cb440-13"></a><span class="co">#&gt; 1     3    10 a    </span></span>
<span id="cb440-14"><a href="mod-r-transform.html#cb440-14"></a><span class="co">#&gt; 2     1    10 a</span></span></code></pre></div>
<p>Note that column <code>x</code> is present in both tables and used when joining them.</p>
<ul>
<li><p><code>inner_join(df1, df2)</code> only includes observations that match in both <code>df1</code> and <code>df2</code>.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="mod-r-transform.html#cb441-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb441-2"><a href="mod-r-transform.html#cb441-2"></a><span class="st">  </span><span class="kw">inner_join</span>(df2) </span>
<span id="cb441-3"><a href="mod-r-transform.html#cb441-3"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb441-4"><a href="mod-r-transform.html#cb441-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb441-5"><a href="mod-r-transform.html#cb441-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb441-6"><a href="mod-r-transform.html#cb441-6"></a><span class="co">#&gt; 1     1     2    10 a</span></span></code></pre></div>
<ul>
<li><p><code>left_join(df1, df2)</code> includes all observations in <code>df1</code>, regardless of whether
they match or not. This is the most commonly used join because it ensures
that you don’t lose observations from your primary table.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="mod-r-transform.html#cb442-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb442-2"><a href="mod-r-transform.html#cb442-2"></a><span class="st">  </span><span class="kw">left_join</span>(df2)</span>
<span id="cb442-3"><a href="mod-r-transform.html#cb442-3"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb442-4"><a href="mod-r-transform.html#cb442-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb442-5"><a href="mod-r-transform.html#cb442-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb442-6"><a href="mod-r-transform.html#cb442-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb442-7"><a href="mod-r-transform.html#cb442-7"></a><span class="co">#&gt; 2     2     1    NA &lt;NA&gt;</span></span></code></pre></div></li>
<li><p><code>right_join(df1, df2)</code> includes all observations in <code>df2</code>. It’s equivalent to
<code>left_join(df2, df1)</code>, but the columns and rows will be ordered differently.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="mod-r-transform.html#cb443-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb443-2"><a href="mod-r-transform.html#cb443-2"></a><span class="st">  </span><span class="kw">right_join</span>(df2)</span>
<span id="cb443-3"><a href="mod-r-transform.html#cb443-3"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb443-4"><a href="mod-r-transform.html#cb443-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb443-5"><a href="mod-r-transform.html#cb443-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb443-6"><a href="mod-r-transform.html#cb443-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb443-7"><a href="mod-r-transform.html#cb443-7"></a><span class="co">#&gt; 2     3    NA    10 a</span></span>
<span id="cb443-8"><a href="mod-r-transform.html#cb443-8"></a>df2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb443-9"><a href="mod-r-transform.html#cb443-9"></a><span class="st">  </span><span class="kw">left_join</span>(df1)</span>
<span id="cb443-10"><a href="mod-r-transform.html#cb443-10"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb443-11"><a href="mod-r-transform.html#cb443-11"></a><span class="co">#&gt;       x     a b         y</span></span>
<span id="cb443-12"><a href="mod-r-transform.html#cb443-12"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb443-13"><a href="mod-r-transform.html#cb443-13"></a><span class="co">#&gt; 1     3    10 a        NA</span></span>
<span id="cb443-14"><a href="mod-r-transform.html#cb443-14"></a><span class="co">#&gt; 2     1    10 a         2</span></span></code></pre></div></li>
<li><p><code>full_join()</code> includes all observations from <code>df1</code> and <code>df2</code>.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="mod-r-transform.html#cb444-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb444-2"><a href="mod-r-transform.html#cb444-2"></a><span class="st">  </span><span class="kw">full_join</span>(df2)</span>
<span id="cb444-3"><a href="mod-r-transform.html#cb444-3"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb444-4"><a href="mod-r-transform.html#cb444-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb444-5"><a href="mod-r-transform.html#cb444-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb444-6"><a href="mod-r-transform.html#cb444-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb444-7"><a href="mod-r-transform.html#cb444-7"></a><span class="co">#&gt; 2     2     1    NA &lt;NA&gt; </span></span>
<span id="cb444-8"><a href="mod-r-transform.html#cb444-8"></a><span class="co">#&gt; 3     3    NA    10 a</span></span></code></pre></div></li>
</ul></li>
</ul>
<p>The left, right and full joins are collectively know as <strong>outer joins</strong>. When a row doesn’t match in an outer join, the new variables are filled in with missing values.</p>
<p>While mutating joins are primarily used to add new variables, they can also generate new observations. If a match is not unique, a join will add all possible combinations (the Cartesian product) of the matching observations:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="mod-r-transform.html#cb445-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</span>
<span id="cb445-2"><a href="mod-r-transform.html#cb445-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb445-3"><a href="mod-r-transform.html#cb445-3"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb445-4"><a href="mod-r-transform.html#cb445-4"></a><span class="st">  </span><span class="kw">left_join</span>(df2)</span>
<span id="cb445-5"><a href="mod-r-transform.html#cb445-5"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb445-6"><a href="mod-r-transform.html#cb445-6"></a><span class="co">#&gt;       x     y z    </span></span>
<span id="cb445-7"><a href="mod-r-transform.html#cb445-7"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;</span></span>
<span id="cb445-8"><a href="mod-r-transform.html#cb445-8"></a><span class="co">#&gt; 1     1     1 a    </span></span>
<span id="cb445-9"><a href="mod-r-transform.html#cb445-9"></a><span class="co">#&gt; 2     1     1 b    </span></span>
<span id="cb445-10"><a href="mod-r-transform.html#cb445-10"></a><span class="co">#&gt; 3     1     2 a    </span></span>
<span id="cb445-11"><a href="mod-r-transform.html#cb445-11"></a><span class="co">#&gt; 4     1     2 b    </span></span>
<span id="cb445-12"><a href="mod-r-transform.html#cb445-12"></a><span class="co">#&gt; 5     2     3 a</span></span></code></pre></div>
<p>Filtering joins match observations in the same way as mutating joins, but affect the observations, not the variables. There are two types:</p>
<ul>
<li><code>semi_join(df1, df2)</code> <strong>keeps</strong> all observations in <code>df1</code> that have a match in <code>df2</code>.</li>
<li><code>anti_join(df1, df2)</code> <strong>drops</strong> all observations in <code>df1</code> that have a match in <code>df2</code>.</li>
</ul>
<p>These are most useful for diagnosing join mismatches. If you’re worried about what observations your joins will match, start with a <code>semi_join()</code> or <code>anti_join()</code>. <code>semi_join()</code> and <code>anti_join()</code> never duplicate; they only remove observations.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="mod-r-transform.html#cb446-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb446-2"><a href="mod-r-transform.html#cb446-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb446-3"><a href="mod-r-transform.html#cb446-3"></a></span>
<span id="cb446-4"><a href="mod-r-transform.html#cb446-4"></a><span class="co"># Four rows to start with:</span></span>
<span id="cb446-5"><a href="mod-r-transform.html#cb446-5"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb446-6"><a href="mod-r-transform.html#cb446-6"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb446-7"><a href="mod-r-transform.html#cb446-7"></a><span class="co"># And we get four rows after the join</span></span>
<span id="cb446-8"><a href="mod-r-transform.html#cb446-8"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(df2, <span class="dt">by =</span> <span class="st">&quot;x&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb446-9"><a href="mod-r-transform.html#cb446-9"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb446-10"><a href="mod-r-transform.html#cb446-10"></a><span class="co"># But only two rows actually match</span></span>
<span id="cb446-11"><a href="mod-r-transform.html#cb446-11"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">semi_join</span>(df2, <span class="dt">by =</span> <span class="st">&quot;x&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb446-12"><a href="mod-r-transform.html#cb446-12"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div id="rc-r-transform" class="section level2 hasAnchor">
<h2><span class="header-section-number">13.4</span> Recap<a href="mod-r-transform.html#rc-r-transform" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>We consider transformation of tidy data where data are stored using a tibble (data frame) where each column is a variable, and each row is an observation/case.</p></li>
<li><p>Tidy data is important because the consistent structure lets you focus your struggle on questions about the data.</p></li>
<li><p>Transformation includes narrowing in on observations of interest (e.g. only observations from a specific year or warehouse), creating new variables based on existing variables (like the cost of using the machine that day given idle time).</p></li>
<li><p>Tidying and transforming are called wrangling, because it can be a hard process to get your data in the right form.</p></li>
<li><p>The package dplyr provides a consistent set of verbs that helps you solve the most common data manipulation challenges:</p>
<ul>
<li>The <code>filter</code> function chooses rows (cases/observations) that meet a specific criteria.</li>
<li>The <code>select</code> function chooses columns (variables) based on their names.</li>
<li>The <code>arrange</code> function reorders the rows.</li>
<li>The <code>transmute</code> function adds/modifies columns (variables) and drops existing ones.</li>
<li>The <code>mutate</code> function adds/modifies columns (variables).</li>
<li>The <code>group_by</code> function groups variables for groupwise operations.</li>
<li>The <code>ungroup</code> function removes the current grouping.</li>
<li>The <code>count</code> function counts rows based on a grouping.</li>
<li>The <code>summarise</code> function reduces multiple values down to a single summary.</li>
<li>The <code>distinct</code> function selects unique/distinct rows.</li>
<li>The <code>pull</code> function can be used to extract columns as vectors (it is similar to $).</li>
</ul></li>
<li><p>Some nice to know functions to use inside e.g. <code>summarise</code> or <code>mutate</code> are</p>
<ul>
<li>The <code>n()</code> function counts the number of rows in a group.</li>
<li>The <code>n_distinct</code> counts the number of unique rows in a group.</li>
<li>The <code>first</code> function considers the first row in a group (remember to order it as needed).</li>
<li>The <code>slice_min</code> and <code>slice_max</code> functions select rows with highest or lowest values of a variable.</li>
<li>The <code>across</code> function makes it easy to apply the same transformation to multiple columns.</li>
</ul></li>
<li><p>Use <code>print(n = Inf)</code> in a pipe to print all rows.</p></li>
<li><p>Use the pipe operator <code>%&gt;%</code> to connect operations.</p></li>
<li><p>Use functions <code>glimpse</code>, <code>tail</code>, <code>head</code>, <code>View</code> to have a look at the data.</p></li>
<li><p>The <code>skim</code> function in the skimr package provides an approach to summary statistics.</p></li>
<li><p>Use <code>as.character</code>, <code>as.numeric</code>, etc. to convert data to a different type.</p></li>
<li><p>Use <code>nrow</code> and <code>ncol</code> functions to get the number of rows and columns of the data.</p></li>
<li><p>The ‘Data transformation with dplyr’ cheatsheet is very useful. Find the newest version in RStudio <strong>Help &gt; Cheatsheets</strong>.</p></li>
</ul>
<p>You may also have a look at the <a href="https://bss-osca.github.io/tfa/slides/07-03_r-transform-slides.html">slides for this module</a>.</p>
</div>
<div id="ex-r-transform" class="section level2 hasAnchor">
<h2><span class="header-section-number">13.5</span> Exercises<a href="mod-r-transform.html#ex-r-transform" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below you will find a set of exercises. Always have a look at the exercises before you meet in your study group and try to solve them yourself. Are you stuck, see the <a href="help.html#help">help page</a>. Some of the solutions to each exercise can be seen by pressing the button at each question. Beware, you will not learn by giving up too early. Put some effort into finding a solution! Always practice using shortcuts in RStudio (see <strong>Tools &gt; Keyboard Shortcuts Help</strong>).</p>
<p>Go to the <a href="https://rstudio.cloud/spaces/274292/join?access_code=iLqcFGfYZ43En9-eMNzu7zPusybjK7Mdj0vyazWH">Tools for Analytics</a> workspace and download/export the TM13 project. Open it on your laptop and have a look at the files in the <code>exercises</code> folder which can be used as a starting point.</p>
<div id="ex-gapminder1" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.1</span> Exercise (gapminder)<a href="mod-r-transform.html#ex-gapminder1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The gapminder data set provides values for life expectancy, GDP per capita, and population, every five years, from 1952 to 2007 for 142 countries. The data can be loaded using the gapminder package:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="mod-r-transform.html#cb447-1"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb447-2"><a href="mod-r-transform.html#cb447-2"></a><span class="kw">data</span>(gapminder, <span class="dt">package =</span> <span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb447-3"><a href="mod-r-transform.html#cb447-3"></a>gapminder</span>
<span id="cb447-4"><a href="mod-r-transform.html#cb447-4"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb447-5"><a href="mod-r-transform.html#cb447-5"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb447-6"><a href="mod-r-transform.html#cb447-6"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb447-7"><a href="mod-r-transform.html#cb447-7"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb447-8"><a href="mod-r-transform.html#cb447-8"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb447-9"><a href="mod-r-transform.html#cb447-9"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb447-10"><a href="mod-r-transform.html#cb447-10"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb447-11"><a href="mod-r-transform.html#cb447-11"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb447-12"><a href="mod-r-transform.html#cb447-12"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb447-13"><a href="mod-r-transform.html#cb447-13"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb447-14"><a href="mod-r-transform.html#cb447-14"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb447-15"><a href="mod-r-transform.html#cb447-15"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb447-16"><a href="mod-r-transform.html#cb447-16"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb447-17"><a href="mod-r-transform.html#cb447-17"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb447-18"><a href="mod-r-transform.html#cb447-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>Let us try to examine the dataset (use pipes <code>%&gt;%</code> as much as possible).</p>
<div id="oSMpVjqRPqjchkGHCwGU" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oSMpVjqRPqjchkGHCwGU-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oSMpVjqRPqjchkGHCwGU-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="mod-r-transform.html#cb448-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</span>
<span id="cb448-2"><a href="mod-r-transform.html#cb448-2"></a><span class="co">#&gt; Rows: 1,704</span></span>
<span id="cb448-3"><a href="mod-r-transform.html#cb448-3"></a><span class="co">#&gt; Columns: 6</span></span>
<span id="cb448-4"><a href="mod-r-transform.html#cb448-4"></a><span class="co">#&gt; $ country   &lt;fct&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afgh…</span></span>
<span id="cb448-5"><a href="mod-r-transform.html#cb448-5"></a><span class="co">#&gt; $ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Europe, …</span></span>
<span id="cb448-6"><a href="mod-r-transform.html#cb448-6"></a><span class="co">#&gt; $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, 2002, 2007, 1952, 19…</span></span>
<span id="cb448-7"><a href="mod-r-transform.html#cb448-7"></a><span class="co">#&gt; $ lifeExp   &lt;dbl&gt; 28.8, 30.3, 32.0, 34.0, 36.1, 38.4, 39.9, 40.8, 41.7, 41.8, 42.1, 43.8, 55.2, 59…</span></span>
<span id="cb448-8"><a href="mod-r-transform.html#cb448-8"></a><span class="co">#&gt; $ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12881816, 13867957, 16…</span></span>
<span id="cb448-9"><a href="mod-r-transform.html#cb448-9"></a><span class="co">#&gt; $ gdpPercap &lt;dbl&gt; 779, 821, 853, 836, 740, 786, 978, 852, 649, 635, 727, 975, 1601, 1942, 2313, 27…</span></span>
<span id="cb448-10"><a href="mod-r-transform.html#cb448-10"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb448-11"><a href="mod-r-transform.html#cb448-11"></a><span class="co">#&gt;         country        continent        year         lifeExp          pop          </span></span>
<span id="cb448-12"><a href="mod-r-transform.html#cb448-12"></a><span class="co">#&gt;  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.6   Min.   :6.00e+04  </span></span>
<span id="cb448-13"><a href="mod-r-transform.html#cb448-13"></a><span class="co">#&gt;  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.2   1st Qu.:2.79e+06  </span></span>
<span id="cb448-14"><a href="mod-r-transform.html#cb448-14"></a><span class="co">#&gt;  Algeria    :  12   Asia    :396   Median :1980   Median :60.7   Median :7.02e+06  </span></span>
<span id="cb448-15"><a href="mod-r-transform.html#cb448-15"></a><span class="co">#&gt;  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.5   Mean   :2.96e+07  </span></span>
<span id="cb448-16"><a href="mod-r-transform.html#cb448-16"></a><span class="co">#&gt;  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.8   3rd Qu.:1.96e+07  </span></span>
<span id="cb448-17"><a href="mod-r-transform.html#cb448-17"></a><span class="co">#&gt;  Australia  :  12                  Max.   :2007   Max.   :82.6   Max.   :1.32e+09  </span></span>
<span id="cb448-18"><a href="mod-r-transform.html#cb448-18"></a><span class="co">#&gt;  (Other)    :1632                                                                  </span></span>
<span id="cb448-19"><a href="mod-r-transform.html#cb448-19"></a><span class="co">#&gt;    gdpPercap     </span></span>
<span id="cb448-20"><a href="mod-r-transform.html#cb448-20"></a><span class="co">#&gt;  Min.   :   241  </span></span>
<span id="cb448-21"><a href="mod-r-transform.html#cb448-21"></a><span class="co">#&gt;  1st Qu.:  1202  </span></span>
<span id="cb448-22"><a href="mod-r-transform.html#cb448-22"></a><span class="co">#&gt;  Median :  3532  </span></span>
<span id="cb448-23"><a href="mod-r-transform.html#cb448-23"></a><span class="co">#&gt;  Mean   :  7215  </span></span>
<span id="cb448-24"><a href="mod-r-transform.html#cb448-24"></a><span class="co">#&gt;  3rd Qu.:  9325  </span></span>
<span id="cb448-25"><a href="mod-r-transform.html#cb448-25"></a><span class="co">#&gt;  Max.   :113523  </span></span>
<span id="cb448-26"><a href="mod-r-transform.html#cb448-26"></a><span class="co">#&gt; </span></span>
<span id="cb448-27"><a href="mod-r-transform.html#cb448-27"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>()</span>
<span id="cb448-28"><a href="mod-r-transform.html#cb448-28"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb448-29"><a href="mod-r-transform.html#cb448-29"></a><span class="co">#&gt;   country  continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb448-30"><a href="mod-r-transform.html#cb448-30"></a><span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb448-31"><a href="mod-r-transform.html#cb448-31"></a><span class="co">#&gt; 1 Zimbabwe Africa     1982    60.4  7636524      789.</span></span>
<span id="cb448-32"><a href="mod-r-transform.html#cb448-32"></a><span class="co">#&gt; 2 Zimbabwe Africa     1987    62.4  9216418      706.</span></span>
<span id="cb448-33"><a href="mod-r-transform.html#cb448-33"></a><span class="co">#&gt; 3 Zimbabwe Africa     1992    60.4 10704340      693.</span></span>
<span id="cb448-34"><a href="mod-r-transform.html#cb448-34"></a><span class="co">#&gt; 4 Zimbabwe Africa     1997    46.8 11404948      792.</span></span>
<span id="cb448-35"><a href="mod-r-transform.html#cb448-35"></a><span class="co">#&gt; 5 Zimbabwe Africa     2002    40.0 11926563      672.</span></span>
<span id="cb448-36"><a href="mod-r-transform.html#cb448-36"></a><span class="co">#&gt; 6 Zimbabwe Africa     2007    43.5 12311143      470.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oSMpVjqRPqjchkGHCwGU">
Solution
</button>
<ol class="example" style="list-style-type: decimal">
<li><p>Use <code>glimpse</code>, <code>summary</code> and <code>tail</code> to examine the data.</p></li>
<li><p>Use <code>count</code> to count the number of</p></li>
</ol>
<div id="2nPSvOkmC3Kglev0Nd60" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2nPSvOkmC3Kglev0Nd60-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2nPSvOkmC3Kglev0Nd60-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="mod-r-transform.html#cb449-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb449-2"><a href="mod-r-transform.html#cb449-2"></a><span class="st">  </span><span class="kw">count</span>(country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb449-3"><a href="mod-r-transform.html#cb449-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span>
<span id="cb449-4"><a href="mod-r-transform.html#cb449-4"></a><span class="co">#&gt; [1] 142</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2nPSvOkmC3Kglev0Nd60">
Solution
</button>
<p>        a) countries,</p>
<div id="9kqKGFxUhubGui2dq7x2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="9kqKGFxUhubGui2dq7x2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="9kqKGFxUhubGui2dq7x2-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="mod-r-transform.html#cb450-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb450-2"><a href="mod-r-transform.html#cb450-2"></a><span class="st">  </span><span class="kw">count</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb450-3"><a href="mod-r-transform.html#cb450-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span>
<span id="cb450-4"><a href="mod-r-transform.html#cb450-4"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#9kqKGFxUhubGui2dq7x2">
Solution
</button>
<p>        b) continents,</p>
<div id="A1OheU5yYiHnduOJjhQo" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="A1OheU5yYiHnduOJjhQo-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="A1OheU5yYiHnduOJjhQo-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="mod-r-transform.html#cb451-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb451-2"><a href="mod-r-transform.html#cb451-2"></a><span class="st">  </span><span class="kw">count</span>(continent, country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb451-3"><a href="mod-r-transform.html#cb451-3"></a><span class="st">  </span><span class="kw">count</span>(continent)     <span class="co"># or</span></span>
<span id="cb451-4"><a href="mod-r-transform.html#cb451-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb451-5"><a href="mod-r-transform.html#cb451-5"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb451-6"><a href="mod-r-transform.html#cb451-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb451-7"><a href="mod-r-transform.html#cb451-7"></a><span class="co">#&gt; 1 Africa       52</span></span>
<span id="cb451-8"><a href="mod-r-transform.html#cb451-8"></a><span class="co">#&gt; 2 Americas     25</span></span>
<span id="cb451-9"><a href="mod-r-transform.html#cb451-9"></a><span class="co">#&gt; 3 Asia         33</span></span>
<span id="cb451-10"><a href="mod-r-transform.html#cb451-10"></a><span class="co">#&gt; 4 Europe       30</span></span>
<span id="cb451-11"><a href="mod-r-transform.html#cb451-11"></a><span class="co">#&gt; 5 Oceania       2</span></span>
<span id="cb451-12"><a href="mod-r-transform.html#cb451-12"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb451-13"><a href="mod-r-transform.html#cb451-13"></a><span class="st">  </span><span class="kw">distinct</span>(continent, country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb451-14"><a href="mod-r-transform.html#cb451-14"></a><span class="st">  </span><span class="kw">count</span>(continent)</span>
<span id="cb451-15"><a href="mod-r-transform.html#cb451-15"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb451-16"><a href="mod-r-transform.html#cb451-16"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb451-17"><a href="mod-r-transform.html#cb451-17"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb451-18"><a href="mod-r-transform.html#cb451-18"></a><span class="co">#&gt; 1 Africa       52</span></span>
<span id="cb451-19"><a href="mod-r-transform.html#cb451-19"></a><span class="co">#&gt; 2 Americas     25</span></span>
<span id="cb451-20"><a href="mod-r-transform.html#cb451-20"></a><span class="co">#&gt; 3 Asia         33</span></span>
<span id="cb451-21"><a href="mod-r-transform.html#cb451-21"></a><span class="co">#&gt; 4 Europe       30</span></span>
<span id="cb451-22"><a href="mod-r-transform.html#cb451-22"></a><span class="co">#&gt; 5 Oceania       2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#A1OheU5yYiHnduOJjhQo">
Solution
</button>
<p>        c) countries per continent.</p>
<div id="IudmifhBblEg5jwffQ8T" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="IudmifhBblEg5jwffQ8T-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="IudmifhBblEg5jwffQ8T-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="mod-r-transform.html#cb452-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb452-2"><a href="mod-r-transform.html#cb452-2"></a><span class="st">  </span><span class="kw">distinct</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb452-3"><a href="mod-r-transform.html#cb452-3"></a><span class="st">  </span><span class="kw">pull</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb452-4"><a href="mod-r-transform.html#cb452-4"></a><span class="st">  </span><span class="kw">as.character</span>()</span>
<span id="cb452-5"><a href="mod-r-transform.html#cb452-5"></a><span class="co">#&gt; [1] &quot;Asia&quot;     &quot;Europe&quot;   &quot;Africa&quot;   &quot;Americas&quot; &quot;Oceania&quot;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#IudmifhBblEg5jwffQ8T">
Solution
</button>
<div id="5kMZNCXNr53AwRf2T2cr" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="5kMZNCXNr53AwRf2T2cr-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="5kMZNCXNr53AwRf2T2cr-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="mod-r-transform.html#cb453-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb453-2"><a href="mod-r-transform.html#cb453-2"></a><span class="st">  </span><span class="kw">distinct</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb453-3"><a href="mod-r-transform.html#cb453-3"></a><span class="st">  </span><span class="kw">pull</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb453-4"><a href="mod-r-transform.html#cb453-4"></a><span class="st">  </span><span class="kw">as.character</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#5kMZNCXNr53AwRf2T2cr">
Hint
</button>
<ol start="3" class="example" style="list-style-type: decimal">
<li><p>Retrieve a vector with all distinct continent values.</p></li>
<li><p>Subset rows to find:</p></li>
</ol>
<div id="CHr1mS4uBkQfBs3DGlNH" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CHr1mS4uBkQfBs3DGlNH-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CHr1mS4uBkQfBs3DGlNH-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="mod-r-transform.html#cb454-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb454-2"><a href="mod-r-transform.html#cb454-2"></a><span class="st">  </span><span class="kw">filter</span>(lifeExp <span class="op">&lt;</span><span class="st"> </span><span class="dv">29</span>)</span>
<span id="cb454-3"><a href="mod-r-transform.html#cb454-3"></a><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span id="cb454-4"><a href="mod-r-transform.html#cb454-4"></a><span class="co">#&gt;   country     continent  year lifeExp     pop gdpPercap</span></span>
<span id="cb454-5"><a href="mod-r-transform.html#cb454-5"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb454-6"><a href="mod-r-transform.html#cb454-6"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8 8425333      779.</span></span>
<span id="cb454-7"><a href="mod-r-transform.html#cb454-7"></a><span class="co">#&gt; 2 Rwanda      Africa     1992    23.6 7290203      737.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CHr1mS4uBkQfBs3DGlNH">
Solution
</button>
<p>        a) all rows with life expectancy less that 29 years,</p>
<div id="4VRz8p1mE8BDvzJ8eaLo" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="4VRz8p1mE8BDvzJ8eaLo-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="4VRz8p1mE8BDvzJ8eaLo-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="mod-r-transform.html#cb455-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb455-2"><a href="mod-r-transform.html#cb455-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Rwanda&quot;</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1979</span>)</span>
<span id="cb455-3"><a href="mod-r-transform.html#cb455-3"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb455-4"><a href="mod-r-transform.html#cb455-4"></a><span class="co">#&gt;   country continent  year lifeExp     pop gdpPercap</span></span>
<span id="cb455-5"><a href="mod-r-transform.html#cb455-5"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb455-6"><a href="mod-r-transform.html#cb455-6"></a><span class="co">#&gt; 1 Rwanda  Africa     1982    46.2 5507565      882.</span></span>
<span id="cb455-7"><a href="mod-r-transform.html#cb455-7"></a><span class="co">#&gt; 2 Rwanda  Africa     1987    44.0 6349365      848.</span></span>
<span id="cb455-8"><a href="mod-r-transform.html#cb455-8"></a><span class="co">#&gt; 3 Rwanda  Africa     1992    23.6 7290203      737.</span></span>
<span id="cb455-9"><a href="mod-r-transform.html#cb455-9"></a><span class="co">#&gt; 4 Rwanda  Africa     1997    36.1 7212583      590.</span></span>
<span id="cb455-10"><a href="mod-r-transform.html#cb455-10"></a><span class="co">#&gt; 5 Rwanda  Africa     2002    43.4 7852401      786.</span></span>
<span id="cb455-11"><a href="mod-r-transform.html#cb455-11"></a><span class="co">#&gt; 6 Rwanda  Africa     2007    46.2 8860588      863.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#4VRz8p1mE8BDvzJ8eaLo">
Solution
</button>
<p>        b) all rows for Rwanda after year 1979,</p>
<div id="Hq8r4QgCwNcBejUrpyfd" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Hq8r4QgCwNcBejUrpyfd-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Hq8r4QgCwNcBejUrpyfd-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="mod-r-transform.html#cb456-1"></a>gapminder <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb456-2"><a href="mod-r-transform.html#cb456-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Rwanda&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>, <span class="st">&quot;France&quot;</span>))</span>
<span id="cb456-3"><a href="mod-r-transform.html#cb456-3"></a><span class="co">#&gt; # A tibble: 36 × 6</span></span>
<span id="cb456-4"><a href="mod-r-transform.html#cb456-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb456-5"><a href="mod-r-transform.html#cb456-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb456-6"><a href="mod-r-transform.html#cb456-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb456-7"><a href="mod-r-transform.html#cb456-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb456-8"><a href="mod-r-transform.html#cb456-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb456-9"><a href="mod-r-transform.html#cb456-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb456-10"><a href="mod-r-transform.html#cb456-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb456-11"><a href="mod-r-transform.html#cb456-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb456-12"><a href="mod-r-transform.html#cb456-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb456-13"><a href="mod-r-transform.html#cb456-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb456-14"><a href="mod-r-transform.html#cb456-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb456-15"><a href="mod-r-transform.html#cb456-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb456-16"><a href="mod-r-transform.html#cb456-16"></a><span class="co">#&gt; # … with 26 more rows</span></span>
<span id="cb456-17"><a href="mod-r-transform.html#cb456-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Hq8r4QgCwNcBejUrpyfd">
Solution
</button>
<p>        c) all rows for Rwanda, Afghanistan or France.</p>
<ol start="5" class="example" style="list-style-type: decimal">
<li>Select columns</li>
</ol>
<div id="2B2qQo9Pi3KmqrxNwhQO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2B2qQo9Pi3KmqrxNwhQO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2B2qQo9Pi3KmqrxNwhQO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="mod-r-transform.html#cb457-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb457-2"><a href="mod-r-transform.html#cb457-2"></a><span class="st">  </span><span class="kw">select</span>(year, lifeExp)</span>
<span id="cb457-3"><a href="mod-r-transform.html#cb457-3"></a><span class="co">#&gt; # A tibble: 1,704 × 2</span></span>
<span id="cb457-4"><a href="mod-r-transform.html#cb457-4"></a><span class="co">#&gt;     year lifeExp</span></span>
<span id="cb457-5"><a href="mod-r-transform.html#cb457-5"></a><span class="co">#&gt;    &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb457-6"><a href="mod-r-transform.html#cb457-6"></a><span class="co">#&gt;  1  1952    28.8</span></span>
<span id="cb457-7"><a href="mod-r-transform.html#cb457-7"></a><span class="co">#&gt;  2  1957    30.3</span></span>
<span id="cb457-8"><a href="mod-r-transform.html#cb457-8"></a><span class="co">#&gt;  3  1962    32.0</span></span>
<span id="cb457-9"><a href="mod-r-transform.html#cb457-9"></a><span class="co">#&gt;  4  1967    34.0</span></span>
<span id="cb457-10"><a href="mod-r-transform.html#cb457-10"></a><span class="co">#&gt;  5  1972    36.1</span></span>
<span id="cb457-11"><a href="mod-r-transform.html#cb457-11"></a><span class="co">#&gt;  6  1977    38.4</span></span>
<span id="cb457-12"><a href="mod-r-transform.html#cb457-12"></a><span class="co">#&gt;  7  1982    39.9</span></span>
<span id="cb457-13"><a href="mod-r-transform.html#cb457-13"></a><span class="co">#&gt;  8  1987    40.8</span></span>
<span id="cb457-14"><a href="mod-r-transform.html#cb457-14"></a><span class="co">#&gt;  9  1992    41.7</span></span>
<span id="cb457-15"><a href="mod-r-transform.html#cb457-15"></a><span class="co">#&gt; 10  1997    41.8</span></span>
<span id="cb457-16"><a href="mod-r-transform.html#cb457-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb457-17"><a href="mod-r-transform.html#cb457-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2B2qQo9Pi3KmqrxNwhQO">
Solution
</button>
<p>        a) year and life expectancy,</p>
<div id="DkRS5MtX1O7HiNdUoaAw" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="DkRS5MtX1O7HiNdUoaAw-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="DkRS5MtX1O7HiNdUoaAw-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="mod-r-transform.html#cb458-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb458-2"><a href="mod-r-transform.html#cb458-2"></a><span class="st">  </span><span class="kw">select</span>(country, gdpPercap)</span>
<span id="cb458-3"><a href="mod-r-transform.html#cb458-3"></a><span class="co">#&gt; # A tibble: 1,704 × 2</span></span>
<span id="cb458-4"><a href="mod-r-transform.html#cb458-4"></a><span class="co">#&gt;    country     gdpPercap</span></span>
<span id="cb458-5"><a href="mod-r-transform.html#cb458-5"></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb458-6"><a href="mod-r-transform.html#cb458-6"></a><span class="co">#&gt;  1 Afghanistan      779.</span></span>
<span id="cb458-7"><a href="mod-r-transform.html#cb458-7"></a><span class="co">#&gt;  2 Afghanistan      821.</span></span>
<span id="cb458-8"><a href="mod-r-transform.html#cb458-8"></a><span class="co">#&gt;  3 Afghanistan      853.</span></span>
<span id="cb458-9"><a href="mod-r-transform.html#cb458-9"></a><span class="co">#&gt;  4 Afghanistan      836.</span></span>
<span id="cb458-10"><a href="mod-r-transform.html#cb458-10"></a><span class="co">#&gt;  5 Afghanistan      740.</span></span>
<span id="cb458-11"><a href="mod-r-transform.html#cb458-11"></a><span class="co">#&gt;  6 Afghanistan      786.</span></span>
<span id="cb458-12"><a href="mod-r-transform.html#cb458-12"></a><span class="co">#&gt;  7 Afghanistan      978.</span></span>
<span id="cb458-13"><a href="mod-r-transform.html#cb458-13"></a><span class="co">#&gt;  8 Afghanistan      852.</span></span>
<span id="cb458-14"><a href="mod-r-transform.html#cb458-14"></a><span class="co">#&gt;  9 Afghanistan      649.</span></span>
<span id="cb458-15"><a href="mod-r-transform.html#cb458-15"></a><span class="co">#&gt; 10 Afghanistan      635.</span></span>
<span id="cb458-16"><a href="mod-r-transform.html#cb458-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb458-17"><a href="mod-r-transform.html#cb458-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#DkRS5MtX1O7HiNdUoaAw">
Solution
</button>
<p>        b) country and GDP per capita.</p>
<div id="35qQijzx8f2UnNweQpnQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="35qQijzx8f2UnNweQpnQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="35qQijzx8f2UnNweQpnQ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="mod-r-transform.html#cb459-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb459-2"><a href="mod-r-transform.html#cb459-2"></a><span class="st">   </span><span class="kw">filter</span>((gdpPercap <span class="op">&gt;</span><span class="st"> </span><span class="dv">40000</span> <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">|</span><span class="st"> </span>(gdpPercap <span class="op">&lt;</span><span class="st"> </span><span class="dv">400</span> <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb459-3"><a href="mod-r-transform.html#cb459-3"></a><span class="st">   </span><span class="co"># print(n=Inf) %&gt;%   # if want to see the intermediate results</span></span>
<span id="cb459-4"><a href="mod-r-transform.html#cb459-4"></a><span class="st">   </span><span class="kw">select</span>(continent, country, gdpPercap) <span class="co"># %&gt;% print(n=Inf)</span></span>
<span id="cb459-5"><a href="mod-r-transform.html#cb459-5"></a><span class="co">#&gt; # A tibble: 21 × 3</span></span>
<span id="cb459-6"><a href="mod-r-transform.html#cb459-6"></a><span class="co">#&gt;    continent country           gdpPercap</span></span>
<span id="cb459-7"><a href="mod-r-transform.html#cb459-7"></a><span class="co">#&gt;    &lt;fct&gt;     &lt;fct&gt;                 &lt;dbl&gt;</span></span>
<span id="cb459-8"><a href="mod-r-transform.html#cb459-8"></a><span class="co">#&gt;  1 Africa    Burundi                339.</span></span>
<span id="cb459-9"><a href="mod-r-transform.html#cb459-9"></a><span class="co">#&gt;  2 Africa    Burundi                380.</span></span>
<span id="cb459-10"><a href="mod-r-transform.html#cb459-10"></a><span class="co">#&gt;  3 Africa    Burundi                355.</span></span>
<span id="cb459-11"><a href="mod-r-transform.html#cb459-11"></a><span class="co">#&gt;  4 Africa    Congo, Dem. Rep.       312.</span></span>
<span id="cb459-12"><a href="mod-r-transform.html#cb459-12"></a><span class="co">#&gt;  5 Africa    Congo, Dem. Rep.       241.</span></span>
<span id="cb459-13"><a href="mod-r-transform.html#cb459-13"></a><span class="co">#&gt;  6 Africa    Congo, Dem. Rep.       278.</span></span>
<span id="cb459-14"><a href="mod-r-transform.html#cb459-14"></a><span class="co">#&gt;  7 Africa    Equatorial Guinea      376.</span></span>
<span id="cb459-15"><a href="mod-r-transform.html#cb459-15"></a><span class="co">#&gt;  8 Africa    Eritrea                329.</span></span>
<span id="cb459-16"><a href="mod-r-transform.html#cb459-16"></a><span class="co">#&gt;  9 Africa    Eritrea                344.</span></span>
<span id="cb459-17"><a href="mod-r-transform.html#cb459-17"></a><span class="co">#&gt; 10 Africa    Eritrea                381.</span></span>
<span id="cb459-18"><a href="mod-r-transform.html#cb459-18"></a><span class="co">#&gt; # … with 11 more rows</span></span>
<span id="cb459-19"><a href="mod-r-transform.html#cb459-19"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#35qQijzx8f2UnNweQpnQ">
Solution
</button>
<div id="KZradlgr5bETHuOZ5wjT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="KZradlgr5bETHuOZ5wjT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="KZradlgr5bETHuOZ5wjT-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="mod-r-transform.html#cb460-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb460-2"><a href="mod-r-transform.html#cb460-2"></a><span class="st">   </span><span class="kw">filter</span>((gdpPercap <span class="op">&gt;</span><span class="st"> </span>___ <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> </span>___) <span class="op">|</span><span class="st"> </span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb460-3"><a href="mod-r-transform.html#cb460-3"></a><span class="st">   </span><span class="co"># print(n=Inf) %&gt;%   # if want to see the intermediate results</span></span>
<span id="cb460-4"><a href="mod-r-transform.html#cb460-4"></a><span class="st">   </span><span class="kw">select</span>(continent, ___, ___) <span class="co"># %&gt;% print(n=Inf)</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#KZradlgr5bETHuOZ5wjT">
Hint
</button>
<ol start="6" class="example" style="list-style-type: decimal">
<li>Subset your data set to find all rows with GDP per capita greater than 40000 in Europe or with GDP per capita less than 500 in Africa.</li>
</ol>
<div id="Bjc33SBUyDi9Wp7oF6Af" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Bjc33SBUyDi9Wp7oF6Af-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Bjc33SBUyDi9Wp7oF6Af-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="mod-r-transform.html#cb461-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb461-2"><a href="mod-r-transform.html#cb461-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> pop <span class="op">*</span><span class="st"> </span>gdpPercap)</span>
<span id="cb461-3"><a href="mod-r-transform.html#cb461-3"></a><span class="co">#&gt; # A tibble: 1,704 × 7</span></span>
<span id="cb461-4"><a href="mod-r-transform.html#cb461-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap          gdp</span></span>
<span id="cb461-5"><a href="mod-r-transform.html#cb461-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb461-6"><a href="mod-r-transform.html#cb461-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.</span></span>
<span id="cb461-7"><a href="mod-r-transform.html#cb461-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.</span></span>
<span id="cb461-8"><a href="mod-r-transform.html#cb461-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.</span></span>
<span id="cb461-9"><a href="mod-r-transform.html#cb461-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.</span></span>
<span id="cb461-10"><a href="mod-r-transform.html#cb461-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.</span></span>
<span id="cb461-11"><a href="mod-r-transform.html#cb461-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.</span></span>
<span id="cb461-12"><a href="mod-r-transform.html#cb461-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.</span></span>
<span id="cb461-13"><a href="mod-r-transform.html#cb461-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.</span></span>
<span id="cb461-14"><a href="mod-r-transform.html#cb461-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.</span></span>
<span id="cb461-15"><a href="mod-r-transform.html#cb461-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.</span></span>
<span id="cb461-16"><a href="mod-r-transform.html#cb461-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb461-17"><a href="mod-r-transform.html#cb461-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Bjc33SBUyDi9Wp7oF6Af">
Solution
</button>
<ol start="7" class="example" style="list-style-type: decimal">
<li>Use <code>mutate</code> to calculate each country’s GDP (population times GDP per capita).</li>
</ol>
<p>In general GDP numbers are large and abstract. Let us try to calculate relative numbers.</p>
<div id="g8y9whZFLqvVthQIx7go" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="g8y9whZFLqvVthQIx7go-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="g8y9whZFLqvVthQIx7go-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="mod-r-transform.html#cb462-1"></a>mean_dk &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb462-2"><a href="mod-r-transform.html#cb462-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb462-3"><a href="mod-r-transform.html#cb462-3"></a><span class="st">  </span><span class="kw">pull</span>(gdpPercap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb462-4"><a href="mod-r-transform.html#cb462-4"></a><span class="st">  </span><span class="kw">mean</span>()</span>
<span id="cb462-5"><a href="mod-r-transform.html#cb462-5"></a>dat &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb462-6"><a href="mod-r-transform.html#cb462-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdpPercapRel =</span> gdpPercap<span class="op">/</span>mean_dk)</span></code></pre></div>
<p>
The relative GDP per capita numbers are, in general, well below 1. We see that most of the countries covered by this dataset have substantially lower GDP per capita, relative to Denmark, across the entire time period.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#g8y9whZFLqvVthQIx7go">
Solution
</button>
<div id="DaAPEWfuKFJE7Gv3VnpZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="DaAPEWfuKFJE7Gv3VnpZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="DaAPEWfuKFJE7Gv3VnpZ-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="mod-r-transform.html#cb463-1"></a>dat &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb463-2"><a href="mod-r-transform.html#cb463-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdpPercapRel =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#DaAPEWfuKFJE7Gv3VnpZ">
Hint 2
</button>
<div id="Ea8T5IfCOnE4mfVDBb2E" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Ea8T5IfCOnE4mfVDBb2E-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Ea8T5IfCOnE4mfVDBb2E-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="mod-r-transform.html#cb464-1"></a>mean_dk &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb464-2"><a href="mod-r-transform.html#cb464-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb464-3"><a href="mod-r-transform.html#cb464-3"></a><span class="st">  </span><span class="kw">pull</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb464-4"><a href="mod-r-transform.html#cb464-4"></a><span class="st">  </span><span class="kw">mean</span>()</span></code></pre></div>
<p>
First you must calculate the mean of Danish <code>gdpPercap</code> and next use that to add a new column <code>gdpPercapRel</code>.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Ea8T5IfCOnE4mfVDBb2E">
Hint 1
</button>
<ol start="8" class="example" style="list-style-type: decimal">
<li><p>Use <code>mutate</code> to calculate GDP per capita relative to mean GDP per capita in Denmark over the whole period (<code>gdpPercap</code> divided by the mean of Danish <code>gdpPercap</code>). Have a look at the calculated data. Does the numbers seem reasonable? I perceive Denmark to be a “high GDP” country, so I predict that the distribution of <code>gdpPercapRel</code> is located below 1, possibly even well below.</p></li>
<li><p>Use <code>arrange</code> to order</p></li>
</ol>
<div id="pI0x5kp0qYLKd7JalYgN" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="pI0x5kp0qYLKd7JalYgN-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="pI0x5kp0qYLKd7JalYgN-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="mod-r-transform.html#cb465-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb465-2"><a href="mod-r-transform.html#cb465-2"></a><span class="st">  </span><span class="kw">arrange</span>(year, country)</span>
<span id="cb465-3"><a href="mod-r-transform.html#cb465-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb465-4"><a href="mod-r-transform.html#cb465-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb465-5"><a href="mod-r-transform.html#cb465-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb465-6"><a href="mod-r-transform.html#cb465-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb465-7"><a href="mod-r-transform.html#cb465-7"></a><span class="co">#&gt;  2 Albania     Europe     1952    55.2  1282697     1601.</span></span>
<span id="cb465-8"><a href="mod-r-transform.html#cb465-8"></a><span class="co">#&gt;  3 Algeria     Africa     1952    43.1  9279525     2449.</span></span>
<span id="cb465-9"><a href="mod-r-transform.html#cb465-9"></a><span class="co">#&gt;  4 Angola      Africa     1952    30.0  4232095     3521.</span></span>
<span id="cb465-10"><a href="mod-r-transform.html#cb465-10"></a><span class="co">#&gt;  5 Argentina   Americas   1952    62.5 17876956     5911.</span></span>
<span id="cb465-11"><a href="mod-r-transform.html#cb465-11"></a><span class="co">#&gt;  6 Australia   Oceania    1952    69.1  8691212    10040.</span></span>
<span id="cb465-12"><a href="mod-r-transform.html#cb465-12"></a><span class="co">#&gt;  7 Austria     Europe     1952    66.8  6927772     6137.</span></span>
<span id="cb465-13"><a href="mod-r-transform.html#cb465-13"></a><span class="co">#&gt;  8 Bahrain     Asia       1952    50.9   120447     9867.</span></span>
<span id="cb465-14"><a href="mod-r-transform.html#cb465-14"></a><span class="co">#&gt;  9 Bangladesh  Asia       1952    37.5 46886859      684.</span></span>
<span id="cb465-15"><a href="mod-r-transform.html#cb465-15"></a><span class="co">#&gt; 10 Belgium     Europe     1952    68    8730405     8343.</span></span>
<span id="cb465-16"><a href="mod-r-transform.html#cb465-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb465-17"><a href="mod-r-transform.html#cb465-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#pI0x5kp0qYLKd7JalYgN">
Solution
</button>
<p>        a) data by year then country, as opposed to current by country then year,</p>
<div id="uyl0WnCNXkKKQHc2bP2z" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uyl0WnCNXkKKQHc2bP2z-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uyl0WnCNXkKKQHc2bP2z-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="mod-r-transform.html#cb466-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb466-2"><a href="mod-r-transform.html#cb466-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb466-3"><a href="mod-r-transform.html#cb466-3"></a><span class="st">  </span><span class="kw">arrange</span>(lifeExp)</span>
<span id="cb466-4"><a href="mod-r-transform.html#cb466-4"></a><span class="co">#&gt; # A tibble: 142 × 6</span></span>
<span id="cb466-5"><a href="mod-r-transform.html#cb466-5"></a><span class="co">#&gt;    country                  continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb466-6"><a href="mod-r-transform.html#cb466-6"></a><span class="co">#&gt;    &lt;fct&gt;                    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb466-7"><a href="mod-r-transform.html#cb466-7"></a><span class="co">#&gt;  1 Swaziland                Africa     2007    39.6  1133066     4513.</span></span>
<span id="cb466-8"><a href="mod-r-transform.html#cb466-8"></a><span class="co">#&gt;  2 Mozambique               Africa     2007    42.1 19951656      824.</span></span>
<span id="cb466-9"><a href="mod-r-transform.html#cb466-9"></a><span class="co">#&gt;  3 Zambia                   Africa     2007    42.4 11746035     1271.</span></span>
<span id="cb466-10"><a href="mod-r-transform.html#cb466-10"></a><span class="co">#&gt;  4 Sierra Leone             Africa     2007    42.6  6144562      863.</span></span>
<span id="cb466-11"><a href="mod-r-transform.html#cb466-11"></a><span class="co">#&gt;  5 Lesotho                  Africa     2007    42.6  2012649     1569.</span></span>
<span id="cb466-12"><a href="mod-r-transform.html#cb466-12"></a><span class="co">#&gt;  6 Angola                   Africa     2007    42.7 12420476     4797.</span></span>
<span id="cb466-13"><a href="mod-r-transform.html#cb466-13"></a><span class="co">#&gt;  7 Zimbabwe                 Africa     2007    43.5 12311143      470.</span></span>
<span id="cb466-14"><a href="mod-r-transform.html#cb466-14"></a><span class="co">#&gt;  8 Afghanistan              Asia       2007    43.8 31889923      975.</span></span>
<span id="cb466-15"><a href="mod-r-transform.html#cb466-15"></a><span class="co">#&gt;  9 Central African Republic Africa     2007    44.7  4369038      706.</span></span>
<span id="cb466-16"><a href="mod-r-transform.html#cb466-16"></a><span class="co">#&gt; 10 Liberia                  Africa     2007    45.7  3193942      415.</span></span>
<span id="cb466-17"><a href="mod-r-transform.html#cb466-17"></a><span class="co">#&gt; # … with 132 more rows</span></span>
<span id="cb466-18"><a href="mod-r-transform.html#cb466-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uyl0WnCNXkKKQHc2bP2z">
Solution
</button>
<p>        b) data from 2007, sorted on life expectancy,</p>
<div id="cqOxNo0s4oagiHfIZ3LU" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="cqOxNo0s4oagiHfIZ3LU-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="cqOxNo0s4oagiHfIZ3LU-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="mod-r-transform.html#cb467-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb467-2"><a href="mod-r-transform.html#cb467-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb467-3"><a href="mod-r-transform.html#cb467-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(lifeExp))</span>
<span id="cb467-4"><a href="mod-r-transform.html#cb467-4"></a><span class="co">#&gt; # A tibble: 142 × 6</span></span>
<span id="cb467-5"><a href="mod-r-transform.html#cb467-5"></a><span class="co">#&gt;    country          continent  year lifeExp       pop gdpPercap</span></span>
<span id="cb467-6"><a href="mod-r-transform.html#cb467-6"></a><span class="co">#&gt;    &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb467-7"><a href="mod-r-transform.html#cb467-7"></a><span class="co">#&gt;  1 Japan            Asia       2007    82.6 127467972    31656.</span></span>
<span id="cb467-8"><a href="mod-r-transform.html#cb467-8"></a><span class="co">#&gt;  2 Hong Kong, China Asia       2007    82.2   6980412    39725.</span></span>
<span id="cb467-9"><a href="mod-r-transform.html#cb467-9"></a><span class="co">#&gt;  3 Iceland          Europe     2007    81.8    301931    36181.</span></span>
<span id="cb467-10"><a href="mod-r-transform.html#cb467-10"></a><span class="co">#&gt;  4 Switzerland      Europe     2007    81.7   7554661    37506.</span></span>
<span id="cb467-11"><a href="mod-r-transform.html#cb467-11"></a><span class="co">#&gt;  5 Australia        Oceania    2007    81.2  20434176    34435.</span></span>
<span id="cb467-12"><a href="mod-r-transform.html#cb467-12"></a><span class="co">#&gt;  6 Spain            Europe     2007    80.9  40448191    28821.</span></span>
<span id="cb467-13"><a href="mod-r-transform.html#cb467-13"></a><span class="co">#&gt;  7 Sweden           Europe     2007    80.9   9031088    33860.</span></span>
<span id="cb467-14"><a href="mod-r-transform.html#cb467-14"></a><span class="co">#&gt;  8 Israel           Asia       2007    80.7   6426679    25523.</span></span>
<span id="cb467-15"><a href="mod-r-transform.html#cb467-15"></a><span class="co">#&gt;  9 France           Europe     2007    80.7  61083916    30470.</span></span>
<span id="cb467-16"><a href="mod-r-transform.html#cb467-16"></a><span class="co">#&gt; 10 Canada           Americas   2007    80.7  33390141    36319.</span></span>
<span id="cb467-17"><a href="mod-r-transform.html#cb467-17"></a><span class="co">#&gt; # … with 132 more rows</span></span>
<span id="cb467-18"><a href="mod-r-transform.html#cb467-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#cqOxNo0s4oagiHfIZ3LU">
Solution
</button>
<p>        c) data from 2007, sorted on life expectancy in <strong>desc</strong>ending order. Hint: use <code>desc()</code> inside <code>arrange</code>.</p>
<ol start="10" class="example" style="list-style-type: decimal">
<li>Use <code>select</code> to</li>
</ol>
<div id="WoVqaXcIZzvlqvbMkU0f" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="WoVqaXcIZzvlqvbMkU0f-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="WoVqaXcIZzvlqvbMkU0f-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="mod-r-transform.html#cb468-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb468-2"><a href="mod-r-transform.html#cb468-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">yr =</span> year, <span class="kw">everything</span>())</span>
<span id="cb468-3"><a href="mod-r-transform.html#cb468-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb468-4"><a href="mod-r-transform.html#cb468-4"></a><span class="co">#&gt;       yr country     continent lifeExp      pop gdpPercap</span></span>
<span id="cb468-5"><a href="mod-r-transform.html#cb468-5"></a><span class="co">#&gt;    &lt;int&gt; &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb468-6"><a href="mod-r-transform.html#cb468-6"></a><span class="co">#&gt;  1  1952 Afghanistan Asia         28.8  8425333      779.</span></span>
<span id="cb468-7"><a href="mod-r-transform.html#cb468-7"></a><span class="co">#&gt;  2  1957 Afghanistan Asia         30.3  9240934      821.</span></span>
<span id="cb468-8"><a href="mod-r-transform.html#cb468-8"></a><span class="co">#&gt;  3  1962 Afghanistan Asia         32.0 10267083      853.</span></span>
<span id="cb468-9"><a href="mod-r-transform.html#cb468-9"></a><span class="co">#&gt;  4  1967 Afghanistan Asia         34.0 11537966      836.</span></span>
<span id="cb468-10"><a href="mod-r-transform.html#cb468-10"></a><span class="co">#&gt;  5  1972 Afghanistan Asia         36.1 13079460      740.</span></span>
<span id="cb468-11"><a href="mod-r-transform.html#cb468-11"></a><span class="co">#&gt;  6  1977 Afghanistan Asia         38.4 14880372      786.</span></span>
<span id="cb468-12"><a href="mod-r-transform.html#cb468-12"></a><span class="co">#&gt;  7  1982 Afghanistan Asia         39.9 12881816      978.</span></span>
<span id="cb468-13"><a href="mod-r-transform.html#cb468-13"></a><span class="co">#&gt;  8  1987 Afghanistan Asia         40.8 13867957      852.</span></span>
<span id="cb468-14"><a href="mod-r-transform.html#cb468-14"></a><span class="co">#&gt;  9  1992 Afghanistan Asia         41.7 16317921      649.</span></span>
<span id="cb468-15"><a href="mod-r-transform.html#cb468-15"></a><span class="co">#&gt; 10  1997 Afghanistan Asia         41.8 22227415      635.</span></span>
<span id="cb468-16"><a href="mod-r-transform.html#cb468-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb468-17"><a href="mod-r-transform.html#cb468-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#WoVqaXcIZzvlqvbMkU0f">
Solution
</button>
<p>        a) rename <code>year</code> to <code>yr</code> and keep all other columns (the select helper <code>everything</code> may be used),</p>
<div id="Px8NtnV1FIf6xrHQLLIu" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Px8NtnV1FIf6xrHQLLIu-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Px8NtnV1FIf6xrHQLLIu-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="mod-r-transform.html#cb469-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb469-2"><a href="mod-r-transform.html#cb469-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>pop)</span>
<span id="cb469-3"><a href="mod-r-transform.html#cb469-3"></a><span class="co">#&gt; # A tibble: 1,704 × 5</span></span>
<span id="cb469-4"><a href="mod-r-transform.html#cb469-4"></a><span class="co">#&gt;    country     continent  year lifeExp gdpPercap</span></span>
<span id="cb469-5"><a href="mod-r-transform.html#cb469-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb469-6"><a href="mod-r-transform.html#cb469-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8      779.</span></span>
<span id="cb469-7"><a href="mod-r-transform.html#cb469-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3      821.</span></span>
<span id="cb469-8"><a href="mod-r-transform.html#cb469-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0      853.</span></span>
<span id="cb469-9"><a href="mod-r-transform.html#cb469-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0      836.</span></span>
<span id="cb469-10"><a href="mod-r-transform.html#cb469-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1      740.</span></span>
<span id="cb469-11"><a href="mod-r-transform.html#cb469-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4      786.</span></span>
<span id="cb469-12"><a href="mod-r-transform.html#cb469-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9      978.</span></span>
<span id="cb469-13"><a href="mod-r-transform.html#cb469-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8      852.</span></span>
<span id="cb469-14"><a href="mod-r-transform.html#cb469-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7      649.</span></span>
<span id="cb469-15"><a href="mod-r-transform.html#cb469-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8      635.</span></span>
<span id="cb469-16"><a href="mod-r-transform.html#cb469-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb469-17"><a href="mod-r-transform.html#cb469-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Px8NtnV1FIf6xrHQLLIu">
Solution
</button>
<p>        b) remove <code>pop</code>,</p>
<div id="HroBEfT69JbwQv6rGHA1" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="HroBEfT69JbwQv6rGHA1-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="HroBEfT69JbwQv6rGHA1-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="mod-r-transform.html#cb470-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb470-2"><a href="mod-r-transform.html#cb470-2"></a><span class="st">  </span><span class="kw">select</span>(year, pop, <span class="kw">everything</span>())</span>
<span id="cb470-3"><a href="mod-r-transform.html#cb470-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb470-4"><a href="mod-r-transform.html#cb470-4"></a><span class="co">#&gt;     year      pop country     continent lifeExp gdpPercap</span></span>
<span id="cb470-5"><a href="mod-r-transform.html#cb470-5"></a><span class="co">#&gt;    &lt;int&gt;    &lt;int&gt; &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb470-6"><a href="mod-r-transform.html#cb470-6"></a><span class="co">#&gt;  1  1952  8425333 Afghanistan Asia         28.8      779.</span></span>
<span id="cb470-7"><a href="mod-r-transform.html#cb470-7"></a><span class="co">#&gt;  2  1957  9240934 Afghanistan Asia         30.3      821.</span></span>
<span id="cb470-8"><a href="mod-r-transform.html#cb470-8"></a><span class="co">#&gt;  3  1962 10267083 Afghanistan Asia         32.0      853.</span></span>
<span id="cb470-9"><a href="mod-r-transform.html#cb470-9"></a><span class="co">#&gt;  4  1967 11537966 Afghanistan Asia         34.0      836.</span></span>
<span id="cb470-10"><a href="mod-r-transform.html#cb470-10"></a><span class="co">#&gt;  5  1972 13079460 Afghanistan Asia         36.1      740.</span></span>
<span id="cb470-11"><a href="mod-r-transform.html#cb470-11"></a><span class="co">#&gt;  6  1977 14880372 Afghanistan Asia         38.4      786.</span></span>
<span id="cb470-12"><a href="mod-r-transform.html#cb470-12"></a><span class="co">#&gt;  7  1982 12881816 Afghanistan Asia         39.9      978.</span></span>
<span id="cb470-13"><a href="mod-r-transform.html#cb470-13"></a><span class="co">#&gt;  8  1987 13867957 Afghanistan Asia         40.8      852.</span></span>
<span id="cb470-14"><a href="mod-r-transform.html#cb470-14"></a><span class="co">#&gt;  9  1992 16317921 Afghanistan Asia         41.7      649.</span></span>
<span id="cb470-15"><a href="mod-r-transform.html#cb470-15"></a><span class="co">#&gt; 10  1997 22227415 Afghanistan Asia         41.8      635.</span></span>
<span id="cb470-16"><a href="mod-r-transform.html#cb470-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span>
<span id="cb470-17"><a href="mod-r-transform.html#cb470-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#HroBEfT69JbwQv6rGHA1">
Solution
</button>
<p>        c) reorder columns in order <code>year</code>, <code>pop</code>, … (remaining).</p>
<ol start="11" class="example" style="list-style-type: decimal">
<li>Use <code>group_by</code> and <code>summarize</code> to find the</li>
</ol>
<div id="67Cp0Nu0JQYvWjcCV3mC" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="67Cp0Nu0JQYvWjcCV3mC-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="67Cp0Nu0JQYvWjcCV3mC-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="mod-r-transform.html#cb471-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb471-2"><a href="mod-r-transform.html#cb471-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb471-3"><a href="mod-r-transform.html#cb471-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>())</span>
<span id="cb471-4"><a href="mod-r-transform.html#cb471-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb471-5"><a href="mod-r-transform.html#cb471-5"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb471-6"><a href="mod-r-transform.html#cb471-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb471-7"><a href="mod-r-transform.html#cb471-7"></a><span class="co">#&gt; 1 Africa      624</span></span>
<span id="cb471-8"><a href="mod-r-transform.html#cb471-8"></a><span class="co">#&gt; 2 Americas    300</span></span>
<span id="cb471-9"><a href="mod-r-transform.html#cb471-9"></a><span class="co">#&gt; 3 Asia        396</span></span>
<span id="cb471-10"><a href="mod-r-transform.html#cb471-10"></a><span class="co">#&gt; 4 Europe      360</span></span>
<span id="cb471-11"><a href="mod-r-transform.html#cb471-11"></a><span class="co">#&gt; 5 Oceania      24</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#67Cp0Nu0JQYvWjcCV3mC">
Solution
</button>
<p>        a) number of observations per continent,</p>
<div id="rVFo41aqSVCiX3pFWK6q" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="rVFo41aqSVCiX3pFWK6q-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="rVFo41aqSVCiX3pFWK6q-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="mod-r-transform.html#cb472-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-2"><a href="mod-r-transform.html#cb472-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb472-3"><a href="mod-r-transform.html#cb472-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">n_countries =</span> <span class="kw">n_distinct</span>(country))</span>
<span id="cb472-4"><a href="mod-r-transform.html#cb472-4"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb472-5"><a href="mod-r-transform.html#cb472-5"></a><span class="co">#&gt;   continent     n n_countries</span></span>
<span id="cb472-6"><a href="mod-r-transform.html#cb472-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb472-7"><a href="mod-r-transform.html#cb472-7"></a><span class="co">#&gt; 1 Africa      624          52</span></span>
<span id="cb472-8"><a href="mod-r-transform.html#cb472-8"></a><span class="co">#&gt; 2 Americas    300          25</span></span>
<span id="cb472-9"><a href="mod-r-transform.html#cb472-9"></a><span class="co">#&gt; 3 Asia        396          33</span></span>
<span id="cb472-10"><a href="mod-r-transform.html#cb472-10"></a><span class="co">#&gt; 4 Europe      360          30</span></span>
<span id="cb472-11"><a href="mod-r-transform.html#cb472-11"></a><span class="co">#&gt; 5 Oceania      24           2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#rVFo41aqSVCiX3pFWK6q">
Solution
</button>
<p>        b) number of countries per continent (use <code>n_distinct</code> inside <code>summarize</code> to count the number of distinct observations),</p>
<div id="cq7fbwZIvqQUlFooPu4o" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="cq7fbwZIvqQUlFooPu4o-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="cq7fbwZIvqQUlFooPu4o-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="mod-r-transform.html#cb473-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-2"><a href="mod-r-transform.html#cb473-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb473-3"><a href="mod-r-transform.html#cb473-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">avg_lifeExp =</span> <span class="kw">mean</span>(lifeExp))</span>
<span id="cb473-4"><a href="mod-r-transform.html#cb473-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb473-5"><a href="mod-r-transform.html#cb473-5"></a><span class="co">#&gt;   continent avg_lifeExp</span></span>
<span id="cb473-6"><a href="mod-r-transform.html#cb473-6"></a><span class="co">#&gt;   &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb473-7"><a href="mod-r-transform.html#cb473-7"></a><span class="co">#&gt; 1 Africa           48.9</span></span>
<span id="cb473-8"><a href="mod-r-transform.html#cb473-8"></a><span class="co">#&gt; 2 Americas         64.7</span></span>
<span id="cb473-9"><a href="mod-r-transform.html#cb473-9"></a><span class="co">#&gt; 3 Asia             60.1</span></span>
<span id="cb473-10"><a href="mod-r-transform.html#cb473-10"></a><span class="co">#&gt; 4 Europe           71.9</span></span>
<span id="cb473-11"><a href="mod-r-transform.html#cb473-11"></a><span class="co">#&gt; 5 Oceania          74.3</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#cq7fbwZIvqQUlFooPu4o">
Solution
</button>
<p>        c) average life expectancy by continent,</p>
<div id="UIcJeuZdPnrMUtSCfjeC" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="UIcJeuZdPnrMUtSCfjeC-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="UIcJeuZdPnrMUtSCfjeC-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="mod-r-transform.html#cb474-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-2"><a href="mod-r-transform.html#cb474-2"></a><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-3"><a href="mod-r-transform.html#cb474-3"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb474-4"><a href="mod-r-transform.html#cb474-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">min_lifeExp =</span> <span class="kw">min</span>(lifeExp), <span class="dt">max_lifeExp =</span> <span class="kw">max</span>(lifeExp))</span>
<span id="cb474-5"><a href="mod-r-transform.html#cb474-5"></a><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span id="cb474-6"><a href="mod-r-transform.html#cb474-6"></a><span class="co">#&gt;     year min_lifeExp max_lifeExp</span></span>
<span id="cb474-7"><a href="mod-r-transform.html#cb474-7"></a><span class="co">#&gt;    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb474-8"><a href="mod-r-transform.html#cb474-8"></a><span class="co">#&gt;  1  1952        28.8        65.4</span></span>
<span id="cb474-9"><a href="mod-r-transform.html#cb474-9"></a><span class="co">#&gt;  2  1957        30.3        67.8</span></span>
<span id="cb474-10"><a href="mod-r-transform.html#cb474-10"></a><span class="co">#&gt;  3  1962        32.0        69.4</span></span>
<span id="cb474-11"><a href="mod-r-transform.html#cb474-11"></a><span class="co">#&gt;  4  1967        34.0        71.4</span></span>
<span id="cb474-12"><a href="mod-r-transform.html#cb474-12"></a><span class="co">#&gt;  5  1972        36.1        73.4</span></span>
<span id="cb474-13"><a href="mod-r-transform.html#cb474-13"></a><span class="co">#&gt;  6  1977        31.2        75.4</span></span>
<span id="cb474-14"><a href="mod-r-transform.html#cb474-14"></a><span class="co">#&gt;  7  1982        39.9        77.1</span></span>
<span id="cb474-15"><a href="mod-r-transform.html#cb474-15"></a><span class="co">#&gt;  8  1987        40.8        78.7</span></span>
<span id="cb474-16"><a href="mod-r-transform.html#cb474-16"></a><span class="co">#&gt;  9  1992        41.7        79.4</span></span>
<span id="cb474-17"><a href="mod-r-transform.html#cb474-17"></a><span class="co">#&gt; 10  1997        41.8        80.7</span></span>
<span id="cb474-18"><a href="mod-r-transform.html#cb474-18"></a><span class="co">#&gt; 11  2002        42.1        82  </span></span>
<span id="cb474-19"><a href="mod-r-transform.html#cb474-19"></a><span class="co">#&gt; 12  2007        43.8        82.6</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#UIcJeuZdPnrMUtSCfjeC">
Solution
</button>
<p>        d) minimum and maximum life expectancies seen by year in Asia.</p>
<div id="x0t5pYboG286AxCKggHI" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="x0t5pYboG286AxCKggHI-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="x0t5pYboG286AxCKggHI-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="mod-r-transform.html#cb475-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb475-2"><a href="mod-r-transform.html#cb475-2"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st">                 </span><span class="co"># group by country</span></span>
<span id="cb475-3"><a href="mod-r-transform.html#cb475-3"></a><span class="st">  </span><span class="kw">select</span>(country, year, lifeExp) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># select relevant columns</span></span>
<span id="cb475-4"><a href="mod-r-transform.html#cb475-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># make sure that data is sorted correct</span></span>
<span id="cb475-5"><a href="mod-r-transform.html#cb475-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lifeExp_gain =</span> lifeExp <span class="op">-</span><span class="st"> </span><span class="kw">first</span>(lifeExp)) <span class="op">%&gt;%</span><span class="st">       </span></span>
<span id="cb475-6"><a href="mod-r-transform.html#cb475-6"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1963</span>)                   <span class="co"># just for nice printing</span></span>
<span id="cb475-7"><a href="mod-r-transform.html#cb475-7"></a><span class="co">#&gt; # A tibble: 426 × 4</span></span>
<span id="cb475-8"><a href="mod-r-transform.html#cb475-8"></a><span class="co">#&gt; # Groups:   country [142]</span></span>
<span id="cb475-9"><a href="mod-r-transform.html#cb475-9"></a><span class="co">#&gt;    country      year lifeExp lifeExp_gain</span></span>
<span id="cb475-10"><a href="mod-r-transform.html#cb475-10"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb475-11"><a href="mod-r-transform.html#cb475-11"></a><span class="co">#&gt;  1 Afghanistan  1952    28.8         0   </span></span>
<span id="cb475-12"><a href="mod-r-transform.html#cb475-12"></a><span class="co">#&gt;  2 Afghanistan  1957    30.3         1.53</span></span>
<span id="cb475-13"><a href="mod-r-transform.html#cb475-13"></a><span class="co">#&gt;  3 Afghanistan  1962    32.0         3.20</span></span>
<span id="cb475-14"><a href="mod-r-transform.html#cb475-14"></a><span class="co">#&gt;  4 Albania      1952    55.2         0   </span></span>
<span id="cb475-15"><a href="mod-r-transform.html#cb475-15"></a><span class="co">#&gt;  5 Albania      1957    59.3         4.05</span></span>
<span id="cb475-16"><a href="mod-r-transform.html#cb475-16"></a><span class="co">#&gt;  6 Albania      1962    64.8         9.59</span></span>
<span id="cb475-17"><a href="mod-r-transform.html#cb475-17"></a><span class="co">#&gt;  7 Algeria      1952    43.1         0   </span></span>
<span id="cb475-18"><a href="mod-r-transform.html#cb475-18"></a><span class="co">#&gt;  8 Algeria      1957    45.7         2.61</span></span>
<span id="cb475-19"><a href="mod-r-transform.html#cb475-19"></a><span class="co">#&gt;  9 Algeria      1962    48.3         5.23</span></span>
<span id="cb475-20"><a href="mod-r-transform.html#cb475-20"></a><span class="co">#&gt; 10 Angola       1952    30.0         0   </span></span>
<span id="cb475-21"><a href="mod-r-transform.html#cb475-21"></a><span class="co">#&gt; # … with 416 more rows</span></span>
<span id="cb475-22"><a href="mod-r-transform.html#cb475-22"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#x0t5pYboG286AxCKggHI">
Solution
</button>
<div id="QNuXbVVQDJE0DyQxF8YQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="QNuXbVVQDJE0DyQxF8YQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="QNuXbVVQDJE0DyQxF8YQ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="mod-r-transform.html#cb476-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb476-2"><a href="mod-r-transform.html#cb476-2"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st">                 </span><span class="co"># group by country</span></span>
<span id="cb476-3"><a href="mod-r-transform.html#cb476-3"></a><span class="st">  </span><span class="kw">select</span>(country, year, lifeExp) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># select relevant columns</span></span>
<span id="cb476-4"><a href="mod-r-transform.html#cb476-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># make sure that data is sorted correct</span></span>
<span id="cb476-5"><a href="mod-r-transform.html#cb476-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lifeExp_gain =</span> ___) <span class="op">%&gt;%</span><span class="st">        </span><span class="co"># define new variable</span></span>
<span id="cb476-6"><a href="mod-r-transform.html#cb476-6"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1963</span>)                   <span class="co"># just for nice printing</span></span></code></pre></div>
<p>
The <code>first</code> function may be helpful to extract the first value from a vector in each group.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#QNuXbVVQDJE0DyQxF8YQ">
Hint
</button>
<ol start="12" class="example" style="list-style-type: decimal">
<li>Sometimes you do not want to collapse the <span class="math inline">\(n\)</span> rows for each group into one row. That is, you do not want to use <code>summarize</code> but <code>mutate</code> within your groups. Try to make a new variable that is the years of life expectancy gained (lost) relative to 1952, for each individual country.</li>
</ol>
<div id="rucqHt88ZzX7AmeYkLOL" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="rucqHt88ZzX7AmeYkLOL-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="rucqHt88ZzX7AmeYkLOL-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="mod-r-transform.html#cb477-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb477-2"><a href="mod-r-transform.html#cb477-2"></a><span class="st">  </span><span class="kw">select</span>(country, year, continent, lifeExp) <span class="op">%&gt;%</span><span class="st">     </span></span>
<span id="cb477-3"><a href="mod-r-transform.html#cb477-3"></a><span class="st">  </span><span class="kw">group_by</span>(continent, country) <span class="op">%&gt;%</span><span class="st">                  </span></span>
<span id="cb477-4"><a href="mod-r-transform.html#cb477-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">le_delta =</span> lifeExp <span class="op">-</span><span class="st"> </span><span class="kw">lag</span>(lifeExp)) <span class="op">%&gt;%</span></span>
<span id="cb477-5"><a href="mod-r-transform.html#cb477-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">worst_le_delta =</span> <span class="kw">min</span>(le_delta, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb477-6"><a href="mod-r-transform.html#cb477-6"></a><span class="st">  </span><span class="kw">slice_min</span>(worst_le_delta) <span class="op">%&gt;%</span></span>
<span id="cb477-7"><a href="mod-r-transform.html#cb477-7"></a><span class="st">  </span><span class="kw">arrange</span>(worst_le_delta)</span>
<span id="cb477-8"><a href="mod-r-transform.html#cb477-8"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb477-9"><a href="mod-r-transform.html#cb477-9"></a><span class="co">#&gt; # Groups:   continent [5]</span></span>
<span id="cb477-10"><a href="mod-r-transform.html#cb477-10"></a><span class="co">#&gt;   continent country     worst_le_delta</span></span>
<span id="cb477-11"><a href="mod-r-transform.html#cb477-11"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;                &lt;dbl&gt;</span></span>
<span id="cb477-12"><a href="mod-r-transform.html#cb477-12"></a><span class="co">#&gt; 1 Africa    Rwanda             -20.4  </span></span>
<span id="cb477-13"><a href="mod-r-transform.html#cb477-13"></a><span class="co">#&gt; 2 Asia      Cambodia            -9.10 </span></span>
<span id="cb477-14"><a href="mod-r-transform.html#cb477-14"></a><span class="co">#&gt; 3 Americas  El Salvador         -1.51 </span></span>
<span id="cb477-15"><a href="mod-r-transform.html#cb477-15"></a><span class="co">#&gt; 4 Europe    Montenegro          -1.46 </span></span>
<span id="cb477-16"><a href="mod-r-transform.html#cb477-16"></a><span class="co">#&gt; 5 Oceania   Australia            0.170</span></span></code></pre></div>
<p>
Mostly you are seeing what genocide looks like in dry statistics on average life expectancy.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#rucqHt88ZzX7AmeYkLOL">
Solution
</button>
<div id="c9FwzX2biaWL47MbE1J4" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="c9FwzX2biaWL47MbE1J4-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="c9FwzX2biaWL47MbE1J4-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="mod-r-transform.html#cb478-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb478-2"><a href="mod-r-transform.html#cb478-2"></a><span class="st">  </span><span class="kw">select</span>(country, year, continent, lifeExp) <span class="op">%&gt;%</span><span class="st">             </span><span class="co"># select relevant columns</span></span>
<span id="cb478-3"><a href="mod-r-transform.html#cb478-3"></a><span class="st">  </span><span class="kw">group_by</span>(continent, country) <span class="op">%&gt;%</span><span class="st">                          </span><span class="co"># group</span></span>
<span id="cb478-4"><a href="mod-r-transform.html#cb478-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">le_delta =</span> ___) <span class="op">%&gt;%</span><span class="st">                                </span><span class="co"># within country, take (lifeExp in year i) - (lifeExp in year i - 1)</span></span>
<span id="cb478-5"><a href="mod-r-transform.html#cb478-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">worst_le_delta =</span> <span class="kw">min</span>(___, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># find lowest value</span></span>
<span id="cb478-6"><a href="mod-r-transform.html#cb478-6"></a><span class="st">  </span><span class="kw">slice_min</span>(worst_le_delta) <span class="op">%&gt;%</span><span class="st">                             </span><span class="co"># find min in each continent</span></span>
<span id="cb478-7"><a href="mod-r-transform.html#cb478-7"></a><span class="st">  </span><span class="kw">arrange</span>(worst_le_delta)                                   <span class="co"># arrange </span></span></code></pre></div>
<p>
The <code>lag</code> function is useful to select the value in the previous row. Positive values of <code>le_delta</code> means lifeExp went up, negative means it went down. Break the code into pieces, starting at the top, and inspect the intermediate results. These commands are built up gradually, with lots of errors and refinements along the way.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#c9FwzX2biaWL47MbE1J4">
Hint
</button>
<ol start="13" class="example" style="list-style-type: decimal">
<li>Which country experienced the sharpest 5-year drop in life expectancy in each continent? Recall that the Gapminder data only has data every five years, e.g. for 1952, 1957, etc. So this really means looking at life expectancy changes between adjacent timepoints.</li>
</ol>
</div>
<div id="ex-babynames1" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.2</span> Exercise (babynames)<a href="mod-r-transform.html#ex-babynames1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The package babynames contains the dataset <code>babynames</code> provided by the U.S. Social Security Administration. For each year from 1880 to 2017, the number of children of each sex given each name. All names with more than 5 uses are given (source: <a href="http://www.ssa.gov/oact/babynames/limits.html" class="uri">http://www.ssa.gov/oact/babynames/limits.html</a>).</p>
<p>Install it using</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="mod-r-transform.html#cb479-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;babynames&quot;</span>)</span></code></pre></div>
<p>We will use the skimr package to get an overview over <code>babynames</code>:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="mod-r-transform.html#cb480-1"></a><span class="kw">library</span>(babynames)</span>
<span id="cb480-2"><a href="mod-r-transform.html#cb480-2"></a><span class="kw">library</span>(skimr)</span>
<span id="cb480-3"><a href="mod-r-transform.html#cb480-3"></a><span class="kw">skim</span>(babynames)</span></code></pre></div>
<table style='width: auto;'
      class='table table-condensed'>
<caption>
<span id="tab:unnamed-chunk-359">Table 13.1: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
babynames
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1924665
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
name
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
97310
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
year
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1975
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1951
</td>
<td style="text-align:right;">
1985
</td>
<td style="text-align:right;">
2003
</td>
<td style="text-align:right;">
2017.00
</td>
<td style="text-align:left;">
▁▂▃▅▇
</td>
</tr>
<tr>
<td style="text-align:left;">
n
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
181
</td>
<td style="text-align:right;">
1533
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
99686.00
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
prop
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.08
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
</tbody>
</table>
<div id="F8M8ZXAwc4BfuoR9ATOn" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="F8M8ZXAwc4BfuoR9ATOn-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="F8M8ZXAwc4BfuoR9ATOn-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
The last line only selects the <code>n</code> column.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#F8M8ZXAwc4BfuoR9ATOn">
Solution
</button>
<ol style="list-style-type: decimal">
<li><p>Which of these is NOT a way to select the <code>name</code> and <code>n</code> columns together?</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="mod-r-transform.html#cb481-1"></a><span class="kw">select</span>(babynames, <span class="op">-</span><span class="kw">c</span>(year, sex, prop))</span>
<span id="cb481-2"><a href="mod-r-transform.html#cb481-2"></a><span class="kw">select</span>(babynames, name<span class="op">:</span>n)</span>
<span id="cb481-3"><a href="mod-r-transform.html#cb481-3"></a><span class="kw">select</span>(babynames, <span class="kw">starts_with</span>(<span class="st">&quot;n&quot;</span>))</span>
<span id="cb481-4"><a href="mod-r-transform.html#cb481-4"></a><span class="kw">select</span>(babynames, <span class="kw">ends_with</span>(<span class="st">&quot;n&quot;</span>))</span></code></pre></div></li>
<li><p>Use <code>filter</code> and the logical operators to find:</p></li>
</ol>
<div id="lOdPMcxTcHPRHysohB36" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="lOdPMcxTcHPRHysohB36-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="lOdPMcxTcHPRHysohB36-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="mod-r-transform.html#cb482-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb482-2"><a href="mod-r-transform.html#cb482-2"></a><span class="st">  </span><span class="kw">filter</span>(prop <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.08</span>)</span>
<span id="cb482-3"><a href="mod-r-transform.html#cb482-3"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb482-4"><a href="mod-r-transform.html#cb482-4"></a><span class="co">#&gt;    year sex   name        n   prop</span></span>
<span id="cb482-5"><a href="mod-r-transform.html#cb482-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt;</span></span>
<span id="cb482-6"><a href="mod-r-transform.html#cb482-6"></a><span class="co">#&gt; 1  1880 M     John     9655 0.0815</span></span>
<span id="cb482-7"><a href="mod-r-transform.html#cb482-7"></a><span class="co">#&gt; 2  1880 M     William  9532 0.0805</span></span>
<span id="cb482-8"><a href="mod-r-transform.html#cb482-8"></a><span class="co">#&gt; 3  1881 M     John     8769 0.0810</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#lOdPMcxTcHPRHysohB36">
Solution
</button>
<p>        a) all of the names where prop is greater than or equal to 0.08,</p>
<div id="qMmudc4EPoNRZ80gpw3f" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="qMmudc4EPoNRZ80gpw3f-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="qMmudc4EPoNRZ80gpw3f-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="mod-r-transform.html#cb483-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb483-2"><a href="mod-r-transform.html#cb483-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Sea&quot;</span>)</span>
<span id="cb483-3"><a href="mod-r-transform.html#cb483-3"></a><span class="co">#&gt; # A tibble: 4 × 5</span></span>
<span id="cb483-4"><a href="mod-r-transform.html#cb483-4"></a><span class="co">#&gt;    year sex   name      n       prop</span></span>
<span id="cb483-5"><a href="mod-r-transform.html#cb483-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb483-6"><a href="mod-r-transform.html#cb483-6"></a><span class="co">#&gt; 1  1982 F     Sea       5 0.00000276</span></span>
<span id="cb483-7"><a href="mod-r-transform.html#cb483-7"></a><span class="co">#&gt; 2  1985 M     Sea       6 0.00000312</span></span>
<span id="cb483-8"><a href="mod-r-transform.html#cb483-8"></a><span class="co">#&gt; 3  1986 M     Sea       5 0.0000026 </span></span>
<span id="cb483-9"><a href="mod-r-transform.html#cb483-9"></a><span class="co">#&gt; 4  1998 F     Sea       5 0.00000258</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#qMmudc4EPoNRZ80gpw3f">
Solution
</button>
<p>        b) all of the children named “Sea”.</p>
<ol start="3" style="list-style-type: decimal">
<li>Use Boolean operators to return only the rows that contain:</li>
</ol>
<div id="NZ8FJiB8Z3QTSUjzq6rZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="NZ8FJiB8Z3QTSUjzq6rZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="NZ8FJiB8Z3QTSUjzq6rZ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="mod-r-transform.html#cb484-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb484-2"><a href="mod-r-transform.html#cb484-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Sue&quot;</span>, sex <span class="op">==</span><span class="st"> &quot;M&quot;</span>)</span>
<span id="cb484-3"><a href="mod-r-transform.html#cb484-3"></a><span class="co">#&gt; # A tibble: 52 × 5</span></span>
<span id="cb484-4"><a href="mod-r-transform.html#cb484-4"></a><span class="co">#&gt;     year sex   name      n       prop</span></span>
<span id="cb484-5"><a href="mod-r-transform.html#cb484-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb484-6"><a href="mod-r-transform.html#cb484-6"></a><span class="co">#&gt;  1  1917 M     Sue       7 0.0000073 </span></span>
<span id="cb484-7"><a href="mod-r-transform.html#cb484-7"></a><span class="co">#&gt;  2  1927 M     Sue       5 0.0000043 </span></span>
<span id="cb484-8"><a href="mod-r-transform.html#cb484-8"></a><span class="co">#&gt;  3  1928 M     Sue       5 0.00000438</span></span>
<span id="cb484-9"><a href="mod-r-transform.html#cb484-9"></a><span class="co">#&gt;  4  1930 M     Sue       5 0.00000443</span></span>
<span id="cb484-10"><a href="mod-r-transform.html#cb484-10"></a><span class="co">#&gt;  5  1931 M     Sue       6 0.00000561</span></span>
<span id="cb484-11"><a href="mod-r-transform.html#cb484-11"></a><span class="co">#&gt;  6  1932 M     Sue       7 0.00000652</span></span>
<span id="cb484-12"><a href="mod-r-transform.html#cb484-12"></a><span class="co">#&gt;  7  1933 M     Sue       7 0.00000686</span></span>
<span id="cb484-13"><a href="mod-r-transform.html#cb484-13"></a><span class="co">#&gt;  8  1934 M     Sue      14 0.0000132 </span></span>
<span id="cb484-14"><a href="mod-r-transform.html#cb484-14"></a><span class="co">#&gt;  9  1935 M     Sue      13 0.0000122 </span></span>
<span id="cb484-15"><a href="mod-r-transform.html#cb484-15"></a><span class="co">#&gt; 10  1936 M     Sue       9 0.00000846</span></span>
<span id="cb484-16"><a href="mod-r-transform.html#cb484-16"></a><span class="co">#&gt; # … with 42 more rows</span></span>
<span id="cb484-17"><a href="mod-r-transform.html#cb484-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#NZ8FJiB8Z3QTSUjzq6rZ">
Solution
</button>
<p>        a) <em>boys</em> named Sue,</p>
<div id="gmOqBU7EuTXyygm1jvRh" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="gmOqBU7EuTXyygm1jvRh-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="gmOqBU7EuTXyygm1jvRh-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="mod-r-transform.html#cb485-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb485-2"><a href="mod-r-transform.html#cb485-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1880</span>, n <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span>n <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb485-3"><a href="mod-r-transform.html#cb485-3"></a><span class="co">#&gt; # A tibble: 455 × 5</span></span>
<span id="cb485-4"><a href="mod-r-transform.html#cb485-4"></a><span class="co">#&gt;     year sex   name        n      prop</span></span>
<span id="cb485-5"><a href="mod-r-transform.html#cb485-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb485-6"><a href="mod-r-transform.html#cb485-6"></a><span class="co">#&gt;  1  1880 F     Abby        6 0.0000615</span></span>
<span id="cb485-7"><a href="mod-r-transform.html#cb485-7"></a><span class="co">#&gt;  2  1880 F     Aileen      6 0.0000615</span></span>
<span id="cb485-8"><a href="mod-r-transform.html#cb485-8"></a><span class="co">#&gt;  3  1880 F     Alba        6 0.0000615</span></span>
<span id="cb485-9"><a href="mod-r-transform.html#cb485-9"></a><span class="co">#&gt;  4  1880 F     Alda        6 0.0000615</span></span>
<span id="cb485-10"><a href="mod-r-transform.html#cb485-10"></a><span class="co">#&gt;  5  1880 F     Alla        6 0.0000615</span></span>
<span id="cb485-11"><a href="mod-r-transform.html#cb485-11"></a><span class="co">#&gt;  6  1880 F     Alverta     6 0.0000615</span></span>
<span id="cb485-12"><a href="mod-r-transform.html#cb485-12"></a><span class="co">#&gt;  7  1880 F     Ara         6 0.0000615</span></span>
<span id="cb485-13"><a href="mod-r-transform.html#cb485-13"></a><span class="co">#&gt;  8  1880 F     Ardelia     6 0.0000615</span></span>
<span id="cb485-14"><a href="mod-r-transform.html#cb485-14"></a><span class="co">#&gt;  9  1880 F     Ardella     6 0.0000615</span></span>
<span id="cb485-15"><a href="mod-r-transform.html#cb485-15"></a><span class="co">#&gt; 10  1880 F     Arrie       6 0.0000615</span></span>
<span id="cb485-16"><a href="mod-r-transform.html#cb485-16"></a><span class="co">#&gt; # … with 445 more rows</span></span>
<span id="cb485-17"><a href="mod-r-transform.html#cb485-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#gmOqBU7EuTXyygm1jvRh">
Solution
</button>
<p>        b) names that were used by exactly 5 or 6 children in 1880,</p>
<div id="oUqU1RTbRJfbyAyZjreh" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oUqU1RTbRJfbyAyZjreh-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oUqU1RTbRJfbyAyZjreh-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="mod-r-transform.html#cb486-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb486-2"><a href="mod-r-transform.html#cb486-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Acura&quot;</span>, <span class="st">&quot;Lexus&quot;</span>, <span class="st">&quot;Yugo&quot;</span>))</span>
<span id="cb486-3"><a href="mod-r-transform.html#cb486-3"></a><span class="co">#&gt; # A tibble: 57 × 5</span></span>
<span id="cb486-4"><a href="mod-r-transform.html#cb486-4"></a><span class="co">#&gt;     year sex   name      n       prop</span></span>
<span id="cb486-5"><a href="mod-r-transform.html#cb486-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb486-6"><a href="mod-r-transform.html#cb486-6"></a><span class="co">#&gt;  1  1990 F     Lexus    36 0.0000175 </span></span>
<span id="cb486-7"><a href="mod-r-transform.html#cb486-7"></a><span class="co">#&gt;  2  1990 M     Lexus    12 0.00000558</span></span>
<span id="cb486-8"><a href="mod-r-transform.html#cb486-8"></a><span class="co">#&gt;  3  1991 F     Lexus   102 0.0000502 </span></span>
<span id="cb486-9"><a href="mod-r-transform.html#cb486-9"></a><span class="co">#&gt;  4  1991 M     Lexus    16 0.00000755</span></span>
<span id="cb486-10"><a href="mod-r-transform.html#cb486-10"></a><span class="co">#&gt;  5  1992 F     Lexus   193 0.0000963 </span></span>
<span id="cb486-11"><a href="mod-r-transform.html#cb486-11"></a><span class="co">#&gt;  6  1992 M     Lexus    25 0.0000119 </span></span>
<span id="cb486-12"><a href="mod-r-transform.html#cb486-12"></a><span class="co">#&gt;  7  1993 F     Lexus   285 0.000145  </span></span>
<span id="cb486-13"><a href="mod-r-transform.html#cb486-13"></a><span class="co">#&gt;  8  1993 M     Lexus    30 0.0000145 </span></span>
<span id="cb486-14"><a href="mod-r-transform.html#cb486-14"></a><span class="co">#&gt;  9  1994 F     Lexus   381 0.000195  </span></span>
<span id="cb486-15"><a href="mod-r-transform.html#cb486-15"></a><span class="co">#&gt; 10  1994 F     Acura     6 0.00000308</span></span>
<span id="cb486-16"><a href="mod-r-transform.html#cb486-16"></a><span class="co">#&gt; # … with 47 more rows</span></span>
<span id="cb486-17"><a href="mod-r-transform.html#cb486-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oUqU1RTbRJfbyAyZjreh">
Solution
</button>
<p>        c) names that are one of Acura, Lexus, or Yugo.</p>
<div id="zql85WBjU8qwH9hZ5YcY" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="zql85WBjU8qwH9hZ5YcY-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="zql85WBjU8qwH9hZ5YcY-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="mod-r-transform.html#cb487-1"></a><span class="kw">min</span>(babynames<span class="op">$</span>n)</span>
<span id="cb487-2"><a href="mod-r-transform.html#cb487-2"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb487-3"><a href="mod-r-transform.html#cb487-3"></a><span class="kw">max</span>(babynames<span class="op">$</span>n)</span>
<span id="cb487-4"><a href="mod-r-transform.html#cb487-4"></a><span class="co">#&gt; [1] 99686</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#zql85WBjU8qwH9hZ5YcY">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>What is the smallest value of n? What is the largest?</li>
</ol>
<div id="OPufx9Y6cFTTptZwIcce" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="OPufx9Y6cFTTptZwIcce-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="OPufx9Y6cFTTptZwIcce-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="mod-r-transform.html#cb488-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb488-2"><a href="mod-r-transform.html#cb488-2"></a><span class="st">  </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &quot;F&quot;</span>, year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb488-3"><a href="mod-r-transform.html#cb488-3"></a><span class="st">  </span><span class="kw">select</span>(name, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb488-4"><a href="mod-r-transform.html#cb488-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) </span>
<span id="cb488-5"><a href="mod-r-transform.html#cb488-5"></a><span class="co">#&gt; # A tibble: 18,309 × 2</span></span>
<span id="cb488-6"><a href="mod-r-transform.html#cb488-6"></a><span class="co">#&gt;    name          n</span></span>
<span id="cb488-7"><a href="mod-r-transform.html#cb488-7"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;int&gt;</span></span>
<span id="cb488-8"><a href="mod-r-transform.html#cb488-8"></a><span class="co">#&gt;  1 Emma      19738</span></span>
<span id="cb488-9"><a href="mod-r-transform.html#cb488-9"></a><span class="co">#&gt;  2 Olivia    18632</span></span>
<span id="cb488-10"><a href="mod-r-transform.html#cb488-10"></a><span class="co">#&gt;  3 Ava       15902</span></span>
<span id="cb488-11"><a href="mod-r-transform.html#cb488-11"></a><span class="co">#&gt;  4 Isabella  15100</span></span>
<span id="cb488-12"><a href="mod-r-transform.html#cb488-12"></a><span class="co">#&gt;  5 Sophia    14831</span></span>
<span id="cb488-13"><a href="mod-r-transform.html#cb488-13"></a><span class="co">#&gt;  6 Mia       13437</span></span>
<span id="cb488-14"><a href="mod-r-transform.html#cb488-14"></a><span class="co">#&gt;  7 Charlotte 12893</span></span>
<span id="cb488-15"><a href="mod-r-transform.html#cb488-15"></a><span class="co">#&gt;  8 Amelia    11800</span></span>
<span id="cb488-16"><a href="mod-r-transform.html#cb488-16"></a><span class="co">#&gt;  9 Evelyn    10675</span></span>
<span id="cb488-17"><a href="mod-r-transform.html#cb488-17"></a><span class="co">#&gt; 10 Abigail   10551</span></span>
<span id="cb488-18"><a href="mod-r-transform.html#cb488-18"></a><span class="co">#&gt; # … with 18,299 more rows</span></span>
<span id="cb488-19"><a href="mod-r-transform.html#cb488-19"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#OPufx9Y6cFTTptZwIcce">
Solution
</button>
<div id="EPAWa4jcfIMdxMCFUPKM" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="EPAWa4jcfIMdxMCFUPKM-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="EPAWa4jcfIMdxMCFUPKM-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="mod-r-transform.html#cb489-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-2"><a href="mod-r-transform.html#cb489-2"></a><span class="st">  </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-3"><a href="mod-r-transform.html#cb489-3"></a><span class="st">  </span><span class="kw">select</span>(name, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb489-4"><a href="mod-r-transform.html#cb489-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(___)) </span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#EPAWa4jcfIMdxMCFUPKM">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Write a sequence of functions that filters babynames to just the girls that were born in 2017, then select the <code>name</code> and <code>n</code> columns, then arrange the results so that the most popular names are near the top.</li>
</ol>
<div id="grTaUfg66vQYxCDcpo95" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="grTaUfg66vQYxCDcpo95-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="grTaUfg66vQYxCDcpo95-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="mod-r-transform.html#cb490-1"></a><span class="co"># for instance</span></span>
<span id="cb490-2"><a href="mod-r-transform.html#cb490-2"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb490-3"><a href="mod-r-transform.html#cb490-3"></a><span class="st">  </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &quot;M&quot;</span>, name <span class="op">==</span><span class="st"> &quot;Lars&quot;</span>)</span>
<span id="cb490-4"><a href="mod-r-transform.html#cb490-4"></a><span class="co">#&gt; # A tibble: 112 × 5</span></span>
<span id="cb490-5"><a href="mod-r-transform.html#cb490-5"></a><span class="co">#&gt;     year sex   name      n      prop</span></span>
<span id="cb490-6"><a href="mod-r-transform.html#cb490-6"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb490-7"><a href="mod-r-transform.html#cb490-7"></a><span class="co">#&gt;  1  1883 M     Lars      7 0.0000622</span></span>
<span id="cb490-8"><a href="mod-r-transform.html#cb490-8"></a><span class="co">#&gt;  2  1884 M     Lars      5 0.0000407</span></span>
<span id="cb490-9"><a href="mod-r-transform.html#cb490-9"></a><span class="co">#&gt;  3  1886 M     Lars      5 0.000042 </span></span>
<span id="cb490-10"><a href="mod-r-transform.html#cb490-10"></a><span class="co">#&gt;  4  1887 M     Lars      5 0.0000457</span></span>
<span id="cb490-11"><a href="mod-r-transform.html#cb490-11"></a><span class="co">#&gt;  5  1897 M     Lars      5 0.000041 </span></span>
<span id="cb490-12"><a href="mod-r-transform.html#cb490-12"></a><span class="co">#&gt;  6  1901 M     Lars      8 0.0000692</span></span>
<span id="cb490-13"><a href="mod-r-transform.html#cb490-13"></a><span class="co">#&gt;  7  1912 M     Lars      6 0.0000133</span></span>
<span id="cb490-14"><a href="mod-r-transform.html#cb490-14"></a><span class="co">#&gt;  8  1913 M     Lars      6 0.0000112</span></span>
<span id="cb490-15"><a href="mod-r-transform.html#cb490-15"></a><span class="co">#&gt;  9  1914 M     Lars     16 0.0000234</span></span>
<span id="cb490-16"><a href="mod-r-transform.html#cb490-16"></a><span class="co">#&gt; 10  1915 M     Lars     17 0.0000193</span></span>
<span id="cb490-17"><a href="mod-r-transform.html#cb490-17"></a><span class="co">#&gt; # … with 102 more rows</span></span>
<span id="cb490-18"><a href="mod-r-transform.html#cb490-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#grTaUfg66vQYxCDcpo95">
Solution
</button>
<ol start="6" style="list-style-type: decimal">
<li>Trim <code>babynames</code> to just the rows that contain your <code>name</code> and your <code>sex</code>.</li>
</ol>
<div id="mxcRfrVWlMw2K8KTknP1" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="mxcRfrVWlMw2K8KTknP1-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="mxcRfrVWlMw2K8KTknP1-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="mod-r-transform.html#cb491-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb491-2"><a href="mod-r-transform.html#cb491-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Khaleesi&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb491-3"><a href="mod-r-transform.html#cb491-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n), <span class="dt">first =</span> <span class="kw">min</span>(year))</span>
<span id="cb491-4"><a href="mod-r-transform.html#cb491-4"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb491-5"><a href="mod-r-transform.html#cb491-5"></a><span class="co">#&gt;   total first</span></span>
<span id="cb491-6"><a href="mod-r-transform.html#cb491-6"></a><span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb491-7"><a href="mod-r-transform.html#cb491-7"></a><span class="co">#&gt; 1  1964  2011</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#mxcRfrVWlMw2K8KTknP1">
Solution
</button>
<div id="wubuc78gv9sR2pxoICCL" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="wubuc78gv9sR2pxoICCL-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="wubuc78gv9sR2pxoICCL-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="mod-r-transform.html#cb492-1"></a>babynames ___ </span>
<span id="cb492-2"><a href="mod-r-transform.html#cb492-2"></a>  <span class="kw">filter</span>(____) ___</span>
<span id="cb492-3"><a href="mod-r-transform.html#cb492-3"></a>  <span class="kw">____</span>(<span class="dt">total =</span> ___, <span class="dt">first =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#wubuc78gv9sR2pxoICCL">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>Extract the rows where <code>name == "Khaleesi"</code>. Then use <code>summarise()</code> to find the total number of children named Khaleesi and the first year Khaleesi appeared in the data.</li>
</ol>
<div id="DA5dm3508vAzhKKmUUGv" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="DA5dm3508vAzhKKmUUGv-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="DA5dm3508vAzhKKmUUGv-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="mod-r-transform.html#cb493-1"></a>babynames <span class="op">%&gt;%</span></span>
<span id="cb493-2"><a href="mod-r-transform.html#cb493-2"></a><span class="st">  </span><span class="kw">group_by</span>(name, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb493-3"><a href="mod-r-transform.html#cb493-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb493-4"><a href="mod-r-transform.html#cb493-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total))</span>
<span id="cb493-5"><a href="mod-r-transform.html#cb493-5"></a><span class="co">#&gt; # A tibble: 107,973 × 3</span></span>
<span id="cb493-6"><a href="mod-r-transform.html#cb493-6"></a><span class="co">#&gt; # Groups:   name [97,310]</span></span>
<span id="cb493-7"><a href="mod-r-transform.html#cb493-7"></a><span class="co">#&gt;    name    sex     total</span></span>
<span id="cb493-8"><a href="mod-r-transform.html#cb493-8"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;</span></span>
<span id="cb493-9"><a href="mod-r-transform.html#cb493-9"></a><span class="co">#&gt;  1 James   M     5150472</span></span>
<span id="cb493-10"><a href="mod-r-transform.html#cb493-10"></a><span class="co">#&gt;  2 John    M     5115466</span></span>
<span id="cb493-11"><a href="mod-r-transform.html#cb493-11"></a><span class="co">#&gt;  3 Robert  M     4814815</span></span>
<span id="cb493-12"><a href="mod-r-transform.html#cb493-12"></a><span class="co">#&gt;  4 Michael M     4350824</span></span>
<span id="cb493-13"><a href="mod-r-transform.html#cb493-13"></a><span class="co">#&gt;  5 Mary    F     4123200</span></span>
<span id="cb493-14"><a href="mod-r-transform.html#cb493-14"></a><span class="co">#&gt;  6 William M     4102604</span></span>
<span id="cb493-15"><a href="mod-r-transform.html#cb493-15"></a><span class="co">#&gt;  7 David   M     3611329</span></span>
<span id="cb493-16"><a href="mod-r-transform.html#cb493-16"></a><span class="co">#&gt;  8 Joseph  M     2603445</span></span>
<span id="cb493-17"><a href="mod-r-transform.html#cb493-17"></a><span class="co">#&gt;  9 Richard M     2563082</span></span>
<span id="cb493-18"><a href="mod-r-transform.html#cb493-18"></a><span class="co">#&gt; 10 Charles M     2386048</span></span>
<span id="cb493-19"><a href="mod-r-transform.html#cb493-19"></a><span class="co">#&gt; # … with 107,963 more rows</span></span>
<span id="cb493-20"><a href="mod-r-transform.html#cb493-20"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#DA5dm3508vAzhKKmUUGv">
Solution
</button>
<div id="giHax2VrHMu4VQ9RArg7" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="giHax2VrHMu4VQ9RArg7-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="giHax2VrHMu4VQ9RArg7-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="mod-r-transform.html#cb494-1"></a>babynames <span class="op">%&gt;%</span></span>
<span id="cb494-2"><a href="mod-r-transform.html#cb494-2"></a><span class="st">  </span><span class="kw">_______</span>(name, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-3"><a href="mod-r-transform.html#cb494-3"></a><span class="st">  </span><span class="kw">_______</span>(<span class="dt">total =</span> <span class="kw">_____</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb494-4"><a href="mod-r-transform.html#cb494-4"></a><span class="st">  </span><span class="kw">_______</span>(<span class="kw">desc</span>(_____))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#giHax2VrHMu4VQ9RArg7">
Hint
</button>
<ol start="8" style="list-style-type: decimal">
<li>Use <code>group_by()</code>, <code>summarise()</code>, and <code>arrange()</code> to display the ten most popular names. Compute popularity as the <em>total</em> number of children of a single gender given a name.</li>
</ol>
<div id="7HwvBu4s3x9aiH1iJrTz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="7HwvBu4s3x9aiH1iJrTz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="7HwvBu4s3x9aiH1iJrTz-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="mod-r-transform.html#cb495-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb495-2"><a href="mod-r-transform.html#cb495-2"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb495-3"><a href="mod-r-transform.html#cb495-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n))</span>
<span id="cb495-4"><a href="mod-r-transform.html#cb495-4"></a><span class="co">#&gt; # A tibble: 138 × 2</span></span>
<span id="cb495-5"><a href="mod-r-transform.html#cb495-5"></a><span class="co">#&gt;     year  total</span></span>
<span id="cb495-6"><a href="mod-r-transform.html#cb495-6"></a><span class="co">#&gt;    &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb495-7"><a href="mod-r-transform.html#cb495-7"></a><span class="co">#&gt;  1  1880 201484</span></span>
<span id="cb495-8"><a href="mod-r-transform.html#cb495-8"></a><span class="co">#&gt;  2  1881 192696</span></span>
<span id="cb495-9"><a href="mod-r-transform.html#cb495-9"></a><span class="co">#&gt;  3  1882 221533</span></span>
<span id="cb495-10"><a href="mod-r-transform.html#cb495-10"></a><span class="co">#&gt;  4  1883 216946</span></span>
<span id="cb495-11"><a href="mod-r-transform.html#cb495-11"></a><span class="co">#&gt;  5  1884 243462</span></span>
<span id="cb495-12"><a href="mod-r-transform.html#cb495-12"></a><span class="co">#&gt;  6  1885 240854</span></span>
<span id="cb495-13"><a href="mod-r-transform.html#cb495-13"></a><span class="co">#&gt;  7  1886 255317</span></span>
<span id="cb495-14"><a href="mod-r-transform.html#cb495-14"></a><span class="co">#&gt;  8  1887 247394</span></span>
<span id="cb495-15"><a href="mod-r-transform.html#cb495-15"></a><span class="co">#&gt;  9  1888 299473</span></span>
<span id="cb495-16"><a href="mod-r-transform.html#cb495-16"></a><span class="co">#&gt; 10  1889 288946</span></span>
<span id="cb495-17"><a href="mod-r-transform.html#cb495-17"></a><span class="co">#&gt; # … with 128 more rows</span></span>
<span id="cb495-18"><a href="mod-r-transform.html#cb495-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#7HwvBu4s3x9aiH1iJrTz">
Solution
</button>
<ol start="9" style="list-style-type: decimal">
<li>Use <code>group_by()</code> to calculate the total number of children born each year over time.</li>
</ol>
<div id="41Zb0k2Tw3xlqDzgHoxt" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="41Zb0k2Tw3xlqDzgHoxt-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="41Zb0k2Tw3xlqDzgHoxt-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="mod-r-transform.html#cb496-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb496-2"><a href="mod-r-transform.html#cb496-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb496-3"><a href="mod-r-transform.html#cb496-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(n))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb496-4"><a href="mod-r-transform.html#cb496-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, sex, <span class="kw">desc</span>(prop))</span>
<span id="cb496-5"><a href="mod-r-transform.html#cb496-5"></a><span class="co">#&gt; # A tibble: 1,924,665 × 6</span></span>
<span id="cb496-6"><a href="mod-r-transform.html#cb496-6"></a><span class="co">#&gt; # Groups:   year, sex [276]</span></span>
<span id="cb496-7"><a href="mod-r-transform.html#cb496-7"></a><span class="co">#&gt;     year sex   name          n   prop  rank</span></span>
<span id="cb496-8"><a href="mod-r-transform.html#cb496-8"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb496-9"><a href="mod-r-transform.html#cb496-9"></a><span class="co">#&gt;  1  1880 F     Mary       7065 0.0724     1</span></span>
<span id="cb496-10"><a href="mod-r-transform.html#cb496-10"></a><span class="co">#&gt;  2  1880 F     Anna       2604 0.0267     2</span></span>
<span id="cb496-11"><a href="mod-r-transform.html#cb496-11"></a><span class="co">#&gt;  3  1880 F     Emma       2003 0.0205     3</span></span>
<span id="cb496-12"><a href="mod-r-transform.html#cb496-12"></a><span class="co">#&gt;  4  1880 F     Elizabeth  1939 0.0199     4</span></span>
<span id="cb496-13"><a href="mod-r-transform.html#cb496-13"></a><span class="co">#&gt;  5  1880 F     Minnie     1746 0.0179     5</span></span>
<span id="cb496-14"><a href="mod-r-transform.html#cb496-14"></a><span class="co">#&gt;  6  1880 F     Margaret   1578 0.0162     6</span></span>
<span id="cb496-15"><a href="mod-r-transform.html#cb496-15"></a><span class="co">#&gt;  7  1880 F     Ida        1472 0.0151     7</span></span>
<span id="cb496-16"><a href="mod-r-transform.html#cb496-16"></a><span class="co">#&gt;  8  1880 F     Alice      1414 0.0145     8</span></span>
<span id="cb496-17"><a href="mod-r-transform.html#cb496-17"></a><span class="co">#&gt;  9  1880 F     Bertha     1320 0.0135     9</span></span>
<span id="cb496-18"><a href="mod-r-transform.html#cb496-18"></a><span class="co">#&gt; 10  1880 F     Sarah      1288 0.0132    10</span></span>
<span id="cb496-19"><a href="mod-r-transform.html#cb496-19"></a><span class="co">#&gt; # … with 1,924,655 more rows</span></span>
<span id="cb496-20"><a href="mod-r-transform.html#cb496-20"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>
The same results if you use <code>n</code> since in the same order.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#41Zb0k2Tw3xlqDzgHoxt">
Solution
</button>
<div id="73or2Dh60u3s7PEmZCQR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="73or2Dh60u3s7PEmZCQR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="73or2Dh60u3s7PEmZCQR-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="mod-r-transform.html#cb497-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-2"><a href="mod-r-transform.html#cb497-2"></a><span class="st">  </span><span class="kw">group_by</span>(___, ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-3"><a href="mod-r-transform.html#cb497-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">rank =</span> <span class="kw">___</span>(<span class="kw">desc</span>(___))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb497-4"><a href="mod-r-transform.html#cb497-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, sex, <span class="kw">desc</span>(prop))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#73or2Dh60u3s7PEmZCQR">
Hint
</button>
<ol start="10" style="list-style-type: decimal">
<li>Column <code>prop</code> denotes the proportion given year and sex. Use <code>mutate()</code> and <code>min_rank()</code> to rank each row in babynames from <em>largest</em> <code>prop</code> to lowest <code>prop</code> given year and sex. What happens if you do the same using the <code>n</code> column?</li>
</ol>
<div id="uSvOnlLwVKRUqwTNE0hh" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uSvOnlLwVKRUqwTNE0hh-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uSvOnlLwVKRUqwTNE0hh-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="mod-r-transform.html#cb498-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb498-2"><a href="mod-r-transform.html#cb498-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb498-3"><a href="mod-r-transform.html#cb498-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(n))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb498-4"><a href="mod-r-transform.html#cb498-4"></a><span class="st">  </span><span class="kw">filter</span>(rank <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2009</span>)</span>
<span id="cb498-5"><a href="mod-r-transform.html#cb498-5"></a><span class="co">#&gt; # A tibble: 16 × 6</span></span>
<span id="cb498-6"><a href="mod-r-transform.html#cb498-6"></a><span class="co">#&gt; # Groups:   year, sex [16]</span></span>
<span id="cb498-7"><a href="mod-r-transform.html#cb498-7"></a><span class="co">#&gt;     year sex   name         n    prop  rank</span></span>
<span id="cb498-8"><a href="mod-r-transform.html#cb498-8"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb498-9"><a href="mod-r-transform.html#cb498-9"></a><span class="co">#&gt;  1  2010 F     Isabella 22905 0.0117      1</span></span>
<span id="cb498-10"><a href="mod-r-transform.html#cb498-10"></a><span class="co">#&gt;  2  2010 M     Jacob    22117 0.0108      1</span></span>
<span id="cb498-11"><a href="mod-r-transform.html#cb498-11"></a><span class="co">#&gt;  3  2011 F     Sophia   21837 0.0113      1</span></span>
<span id="cb498-12"><a href="mod-r-transform.html#cb498-12"></a><span class="co">#&gt;  4  2011 M     Jacob    20365 0.0100      1</span></span>
<span id="cb498-13"><a href="mod-r-transform.html#cb498-13"></a><span class="co">#&gt;  5  2012 F     Sophia   22304 0.0115      1</span></span>
<span id="cb498-14"><a href="mod-r-transform.html#cb498-14"></a><span class="co">#&gt;  6  2012 M     Jacob    19069 0.00941     1</span></span>
<span id="cb498-15"><a href="mod-r-transform.html#cb498-15"></a><span class="co">#&gt;  7  2013 F     Sophia   21213 0.0110      1</span></span>
<span id="cb498-16"><a href="mod-r-transform.html#cb498-16"></a><span class="co">#&gt;  8  2013 M     Noah     18241 0.00904     1</span></span>
<span id="cb498-17"><a href="mod-r-transform.html#cb498-17"></a><span class="co">#&gt;  9  2014 F     Emma     20924 0.0107      1</span></span>
<span id="cb498-18"><a href="mod-r-transform.html#cb498-18"></a><span class="co">#&gt; 10  2014 M     Noah     19286 0.00943     1</span></span>
<span id="cb498-19"><a href="mod-r-transform.html#cb498-19"></a><span class="co">#&gt; 11  2015 F     Emma     20435 0.0105      1</span></span>
<span id="cb498-20"><a href="mod-r-transform.html#cb498-20"></a><span class="co">#&gt; 12  2015 M     Noah     19613 0.00962     1</span></span>
<span id="cb498-21"><a href="mod-r-transform.html#cb498-21"></a><span class="co">#&gt; 13  2016 F     Emma     19471 0.0101      1</span></span>
<span id="cb498-22"><a href="mod-r-transform.html#cb498-22"></a><span class="co">#&gt; 14  2016 M     Noah     19082 0.00946     1</span></span>
<span id="cb498-23"><a href="mod-r-transform.html#cb498-23"></a><span class="co">#&gt; 15  2017 F     Emma     19738 0.0105      1</span></span>
<span id="cb498-24"><a href="mod-r-transform.html#cb498-24"></a><span class="co">#&gt; 16  2017 M     Liam     18728 0.00954     1</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uSvOnlLwVKRUqwTNE0hh">
Solution
</button>
<ol start="11" style="list-style-type: decimal">
<li>Filter the results to find all names with <code>rank == 1</code> after 2009.</li>
</ol>
</div>
<div id="ex-profit1" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.3</span> Exercise (profit)<a href="mod-r-transform.html#ex-profit1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>Consider the dataset profit containing quarterly financial records for each costumer, product, etc.:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="mod-r-transform.html#cb499-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb499-2"><a href="mod-r-transform.html#cb499-2"></a>path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/profit_raw.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>)</span>
<span id="cb499-3"><a href="mod-r-transform.html#cb499-3"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path)</span>
<span id="cb499-4"><a href="mod-r-transform.html#cb499-4"></a><span class="kw">skim</span>(profit)</span></code></pre></div>
<table style='width: auto;'
      class='table table-condensed'>
<caption>
<span id="tab:unnamed-chunk-379">Table 13.2: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
profit
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
24546
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Channel
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Customer ID
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Country
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Product Line
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Revenue
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1210
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Product Cost
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1139
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Customer Service Cost
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
464
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Profit
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
966
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>Note that it seems that the dataset need to be cleaned. All columns are strings (some should be numbers) and there seems to be missing values. You may start by having a view of the dataset using:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="mod-r-transform.html#cb500-1"></a><span class="kw">View</span>(profit)</span></code></pre></div>
<p>First focus on column <code>Quarter</code> which currently has 12 distinct values:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="mod-r-transform.html#cb501-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span>
<span id="cb501-2"><a href="mod-r-transform.html#cb501-2"></a><span class="co">#&gt; # A tibble: 12 × 1</span></span>
<span id="cb501-3"><a href="mod-r-transform.html#cb501-3"></a><span class="co">#&gt;    Quarter</span></span>
<span id="cb501-4"><a href="mod-r-transform.html#cb501-4"></a><span class="co">#&gt;    &lt;chr&gt;  </span></span>
<span id="cb501-5"><a href="mod-r-transform.html#cb501-5"></a><span class="co">#&gt;  1 Q3     </span></span>
<span id="cb501-6"><a href="mod-r-transform.html#cb501-6"></a><span class="co">#&gt;  2 1      </span></span>
<span id="cb501-7"><a href="mod-r-transform.html#cb501-7"></a><span class="co">#&gt;  3 Q4     </span></span>
<span id="cb501-8"><a href="mod-r-transform.html#cb501-8"></a><span class="co">#&gt;  4 Q1     </span></span>
<span id="cb501-9"><a href="mod-r-transform.html#cb501-9"></a><span class="co">#&gt;  5 Q2     </span></span>
<span id="cb501-10"><a href="mod-r-transform.html#cb501-10"></a><span class="co">#&gt;  6 2      </span></span>
<span id="cb501-11"><a href="mod-r-transform.html#cb501-11"></a><span class="co">#&gt;  7 4      </span></span>
<span id="cb501-12"><a href="mod-r-transform.html#cb501-12"></a><span class="co">#&gt;  8 q1     </span></span>
<span id="cb501-13"><a href="mod-r-transform.html#cb501-13"></a><span class="co">#&gt;  9 q4     </span></span>
<span id="cb501-14"><a href="mod-r-transform.html#cb501-14"></a><span class="co">#&gt; 10 q3     </span></span>
<span id="cb501-15"><a href="mod-r-transform.html#cb501-15"></a><span class="co">#&gt; 11 q2     </span></span>
<span id="cb501-16"><a href="mod-r-transform.html#cb501-16"></a><span class="co">#&gt; 12 3</span></span></code></pre></div>
<p>You would like it to be a numeric with values 1-4.</p>
<div id="0BX9FvMzi9aqjSVYCt9a" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="0BX9FvMzi9aqjSVYCt9a-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="0BX9FvMzi9aqjSVYCt9a-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="mod-r-transform.html#cb502-1"></a></span>
<span id="cb502-2"><a href="mod-r-transform.html#cb502-2"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb502-3"><a href="mod-r-transform.html#cb502-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(Quarter, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="st">&quot;Q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb502-4"><a href="mod-r-transform.html#cb502-4"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span>
<span id="cb502-5"><a href="mod-r-transform.html#cb502-5"></a><span class="co">#&gt; # A tibble: 4 × 1</span></span>
<span id="cb502-6"><a href="mod-r-transform.html#cb502-6"></a><span class="co">#&gt;   Quarter</span></span>
<span id="cb502-7"><a href="mod-r-transform.html#cb502-7"></a><span class="co">#&gt;     &lt;dbl&gt;</span></span>
<span id="cb502-8"><a href="mod-r-transform.html#cb502-8"></a><span class="co">#&gt; 1       3</span></span>
<span id="cb502-9"><a href="mod-r-transform.html#cb502-9"></a><span class="co">#&gt; 2       1</span></span>
<span id="cb502-10"><a href="mod-r-transform.html#cb502-10"></a><span class="co">#&gt; 3       4</span></span>
<span id="cb502-11"><a href="mod-r-transform.html#cb502-11"></a><span class="co">#&gt; 4       2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#0BX9FvMzi9aqjSVYCt9a">
Solution
</button>
<div id="TCyJ2kZ0IrE3iVPQutDZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="TCyJ2kZ0IrE3iVPQutDZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="TCyJ2kZ0IrE3iVPQutDZ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="mod-r-transform.html#cb503-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb503-2"><a href="mod-r-transform.html#cb503-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(___, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(___) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb503-3"><a href="mod-r-transform.html#cb503-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#TCyJ2kZ0IrE3iVPQutDZ">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Use <code>mutate</code>, <code>str_remove</code> and <code>as.numeric</code> to convert the column to a numeric by removing all ‘q’ and ‘Q’ values.</li>
</ol>
<p>Let us look at the next columns:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="mod-r-transform.html#cb504-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Channel) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb504-2"><a href="mod-r-transform.html#cb504-2"></a><span class="co">#&gt;  [1] &quot;ATM&quot; &quot;BRH&quot; &quot;INT&quot; &quot;MAL&quot; &quot;EML&quot; &quot;CCT&quot; &quot;TEL&quot; &quot;MOP&quot; &quot;DSA&quot; &quot;EVE&quot;</span></span>
<span id="cb504-3"><a href="mod-r-transform.html#cb504-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb504-4"><a href="mod-r-transform.html#cb504-4"></a><span class="co">#&gt;  [1] &quot;FRT&quot; &quot;MRT&quot; &quot;PBI&quot; &quot;MAM&quot; &quot;EBP&quot; &quot;RPB&quot; &quot;WEB&quot; &quot;WEM&quot; &quot;HEC&quot; &quot;STF&quot; &quot;IAS&quot; &quot;CRE&quot; &quot;INB&quot; &quot;CAM&quot; &quot;AGR&quot; &quot;SBE&quot;</span></span>
<span id="cb504-5"><a href="mod-r-transform.html#cb504-5"></a><span class="co">#&gt; [17] &quot;AFF&quot; &quot;MFN&quot;</span></span>
<span id="cb504-6"><a href="mod-r-transform.html#cb504-6"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Country) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb504-7"><a href="mod-r-transform.html#cb504-7"></a><span class="co">#&gt;  [1] &quot;USA&quot;            &quot;Canada&quot;         &quot;Great Britain&quot;  &quot;Finland&quot;        &quot;New Zealand&quot;   </span></span>
<span id="cb504-8"><a href="mod-r-transform.html#cb504-8"></a><span class="co">#&gt;  [6] &quot;Brazil&quot;         &quot;Mexico&quot;         &quot;Germany&quot;        &quot;Puerto Rico&quot;    &quot;Hong Kong&quot;     </span></span>
<span id="cb504-9"><a href="mod-r-transform.html#cb504-9"></a><span class="co">#&gt; [11] &quot;Japan&quot;          &quot;Columbia&quot;       &quot;Switzerland&quot;    &quot;Uruguay&quot;        &quot;Netherlands&quot;   </span></span>
<span id="cb504-10"><a href="mod-r-transform.html#cb504-10"></a><span class="co">#&gt; [16] &quot;Korea&quot;          &quot;Venezuela&quot;      &quot;Panama&quot;         &quot;Sweden&quot;         &quot;China&quot;         </span></span>
<span id="cb504-11"><a href="mod-r-transform.html#cb504-11"></a><span class="co">#&gt; [21] &quot;Guatemala&quot;      &quot;South Africa&quot;   &quot;Malaysia&quot;       &quot;Nigeria&quot;        &quot;Denmark&quot;       </span></span>
<span id="cb504-12"><a href="mod-r-transform.html#cb504-12"></a><span class="co">#&gt; [26] &quot;France&quot;         &quot;India&quot;          &quot;Taiwan&quot;         &quot;Norway&quot;         &quot;Chile&quot;         </span></span>
<span id="cb504-13"><a href="mod-r-transform.html#cb504-13"></a><span class="co">#&gt; [31] &quot;Indonesia&quot;      &quot;Ireland&quot;        &quot;Thailand&quot;       &quot;Peru&quot;           &quot;Spain&quot;         </span></span>
<span id="cb504-14"><a href="mod-r-transform.html#cb504-14"></a><span class="co">#&gt; [36] &quot;Belgium&quot;        &quot;Poland&quot;         &quot;Ecuador&quot;        &quot;Costa Rica&quot;     &quot;Australia&quot;     </span></span>
<span id="cb504-15"><a href="mod-r-transform.html#cb504-15"></a><span class="co">#&gt; [41] &quot;Israel&quot;         &quot;Guam&quot;           &quot;Oman&quot;           &quot;Singapore&quot;      &quot;Argentina&quot;     </span></span>
<span id="cb504-16"><a href="mod-r-transform.html#cb504-16"></a><span class="co">#&gt; [46] &quot;Czechoslovakia&quot; &quot;Philippines&quot;</span></span>
<span id="cb504-17"><a href="mod-r-transform.html#cb504-17"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb504-18"><a href="mod-r-transform.html#cb504-18"></a><span class="co">#&gt; [1] &quot;Credit Products&quot;           &quot;Deposit Products&quot;          &quot;Revolving Credit Products&quot;</span></span>
<span id="cb504-19"><a href="mod-r-transform.html#cb504-19"></a><span class="co">#&gt; [4] &quot;Other Products&quot;            &quot;Third Party Products&quot;      &quot;Fee Based Products&quot;</span></span></code></pre></div>
<p>These seem to be okay. The last columns should be numbers. Let us consider <code>Revenue</code>.</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="mod-r-transform.html#cb505-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Revenue) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dt">n =</span> <span class="dv">100</span>)</span>
<span id="cb505-2"><a href="mod-r-transform.html#cb505-2"></a><span class="co">#&gt;   [1] &quot;$ 6044&quot;  &quot;$ 4686&quot;  &quot;$ 6063&quot;  &quot;$ 4682&quot;  &quot;$ 6320&quot;  &quot;$ 2993&quot;  &quot;$ 3355&quot;  &quot;$ 5716&quot;  &quot;$ 3347&quot; </span></span>
<span id="cb505-3"><a href="mod-r-transform.html#cb505-3"></a><span class="co">#&gt;  [10] &quot;$ 2624&quot;  &quot;$ 3629&quot;  &quot;$ 5612&quot;  &quot;$ 4618&quot;  &quot;$ 2080&quot;  &quot;$ 2788&quot;  &quot;$ 2829&quot;  &quot;$ 2898&quot;  &quot;$ 5232&quot; </span></span>
<span id="cb505-4"><a href="mod-r-transform.html#cb505-4"></a><span class="co">#&gt;  [19] &quot;$ 2949&quot;  &quot;$ 5565&quot;  &quot;$ 2153&quot;  &quot;$ 3097&quot;  &quot;$ 1920&quot;  &quot;$ 4041&quot;  &quot;$ 5931&quot;  &quot;$ 1605&quot;  &quot;$ 2026&quot; </span></span>
<span id="cb505-5"><a href="mod-r-transform.html#cb505-5"></a><span class="co">#&gt;  [28] &quot;$ 1687&quot;  &quot;$ 5075&quot;  &quot;$ 4223&quot;  &quot;$ 2456&quot;  &quot;$ 1924&quot;  &quot;$ 1578&quot;  &quot;$ 3235&quot;  &quot;$ 5123&quot;  &quot;$ 1560&quot; </span></span>
<span id="cb505-6"><a href="mod-r-transform.html#cb505-6"></a><span class="co">#&gt;  [37] &quot;$ 1945&quot;  &quot;$ 6060&quot;  &quot;$ 1222&quot;  &quot;$ 1660&quot;  &quot;$ 3000&quot;  &quot;$ 2970&quot;  &quot;$ 1631&quot;  &quot;$ 1215&quot;  &quot;$ 1759&quot; </span></span>
<span id="cb505-7"><a href="mod-r-transform.html#cb505-7"></a><span class="co">#&gt;  [46] &quot;$ 3285&quot;  &quot;$ 2048&quot;  &quot;$ 2173&quot;  &quot;$ 3353&quot;  &quot;$ 1162&quot;  &quot;$ 1232&quot;  &quot;$ 1561&quot;  &quot;$ 1123&quot;  &quot;$ 1794&quot; </span></span>
<span id="cb505-8"><a href="mod-r-transform.html#cb505-8"></a><span class="co">#&gt;  [55] &quot;$ 1202&quot;  &quot;$ 1510&quot;  &quot;$ 4472&quot;  &quot;$ 2370&quot;  &quot;$ 2581&quot;  &quot;$ 2761&quot;  &quot;$ 6371&quot;  &quot;$ 1972&quot;  &quot;$ 1562&quot; </span></span>
<span id="cb505-9"><a href="mod-r-transform.html#cb505-9"></a><span class="co">#&gt;  [64] &quot;$ 2742&quot;  &quot;$ 4598&quot;  &quot;$ 5322&quot;  &quot;$ 3411&quot;  NA        &quot;$ 1569&quot;  &quot;$ 2852&quot;  &quot;$ 1622&quot;  &quot;$ 2505&quot; </span></span>
<span id="cb505-10"><a href="mod-r-transform.html#cb505-10"></a><span class="co">#&gt;  [73] &quot;$ 1596&quot;  &quot;$ 1447&quot;  &quot;$ 1690&quot;  &quot;$ 2448&quot;  &quot;$ 1593&quot;  &quot;$ 1876&quot;  &quot;$ 6591&quot;  &quot;$ 1611&quot;  &quot;$ 1254&quot; </span></span>
<span id="cb505-11"><a href="mod-r-transform.html#cb505-11"></a><span class="co">#&gt;  [82] &quot;Unknown&quot; &quot;$ 842&quot;   &quot;$ 1529&quot;  &quot;$ 1439&quot;  &quot;$ 762&quot;   &quot;$ 1959&quot;  &quot;$ 4382&quot;  &quot;$ 1407&quot;  &quot;$ 909&quot;  </span></span>
<span id="cb505-12"><a href="mod-r-transform.html#cb505-12"></a><span class="co">#&gt;  [91] &quot;$ 1549&quot;  &quot;$ 2161&quot;  &quot;$ 1331&quot;  &quot;$ 727&quot;   &quot;$ 1462&quot;  &quot;$ 1067&quot;  &quot;$ 833&quot;   &quot;$ 1675&quot;  &quot;$ 1524&quot; </span></span>
<span id="cb505-13"><a href="mod-r-transform.html#cb505-13"></a><span class="co">#&gt; [100] &quot;$ 1285&quot;</span></span></code></pre></div>
<p>Most values start with a dollar sign. Let us have a look at the other ones:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="mod-r-transform.html#cb506-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) </span>
<span id="cb506-2"><a href="mod-r-transform.html#cb506-2"></a><span class="co">#&gt; # A tibble: 95 × 9</span></span>
<span id="cb506-3"><a href="mod-r-transform.html#cb506-3"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country       `Product Line`         Revenue Produ…¹ Custo…² Profit</span></span>
<span id="cb506-4"><a href="mod-r-transform.html#cb506-4"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;                  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb506-5"><a href="mod-r-transform.html#cb506-5"></a><span class="co">#&gt;  1       3 INT     MAM           USA           Deposit Products       Unknown $ 1008  $ 246   $ 418 </span></span>
<span id="cb506-6"><a href="mod-r-transform.html#cb506-6"></a><span class="co">#&gt;  2       3 MAL     RPB           USA           Credit Products        ?       $ 1420  $ 347   $ 30  </span></span>
<span id="cb506-7"><a href="mod-r-transform.html#cb506-7"></a><span class="co">#&gt;  3       1 MAL     WEM           Great Britain Other Products         ?       $ 87    $ 19    $ -34 </span></span>
<span id="cb506-8"><a href="mod-r-transform.html#cb506-8"></a><span class="co">#&gt;  4       3 ATM     MFN           Germany       Fee Based Products     unknown $ 47    $ 6     $ 9   </span></span>
<span id="cb506-9"><a href="mod-r-transform.html#cb506-9"></a><span class="co">#&gt;  5       3 ATM     PBI           Costa Rica    Third Party Products   Unknown $ 51    $ 9     $ 6   </span></span>
<span id="cb506-10"><a href="mod-r-transform.html#cb506-10"></a><span class="co">#&gt;  6       1 ATM     PBI           Chile         Deposit Products       Unknown $ 58    $ 7     $ -9  </span></span>
<span id="cb506-11"><a href="mod-r-transform.html#cb506-11"></a><span class="co">#&gt;  7       4 CCT     MRT           Great Britain Revolving Credit Prod… ?       $ 27    $ 5     $ 16  </span></span>
<span id="cb506-12"><a href="mod-r-transform.html#cb506-12"></a><span class="co">#&gt;  8       4 ATM     MAM           Taiwan        Third Party Products   unknown $ 55    $ 9     $ 75  </span></span>
<span id="cb506-13"><a href="mod-r-transform.html#cb506-13"></a><span class="co">#&gt;  9       4 MAL     WEB           Japan         Other Products         unknown $ 40    $ 7     $ 17  </span></span>
<span id="cb506-14"><a href="mod-r-transform.html#cb506-14"></a><span class="co">#&gt; 10       2 CCT     MAM           Netherlands   Credit Products        unknown $ 14    $ 3     $ 20  </span></span>
<span id="cb506-15"><a href="mod-r-transform.html#cb506-15"></a><span class="co">#&gt; # … with 85 more rows, and abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span>
<span id="cb506-16"><a href="mod-r-transform.html#cb506-16"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span>
<span id="cb506-17"><a href="mod-r-transform.html#cb506-17"></a>na_values &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb506-18"><a href="mod-r-transform.html#cb506-18"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb506-19"><a href="mod-r-transform.html#cb506-19"></a><span class="st">  </span><span class="kw">distinct</span>(Revenue) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb506-20"><a href="mod-r-transform.html#cb506-20"></a><span class="st">  </span><span class="kw">pull</span>(Revenue)</span>
<span id="cb506-21"><a href="mod-r-transform.html#cb506-21"></a>na_values</span>
<span id="cb506-22"><a href="mod-r-transform.html#cb506-22"></a><span class="co">#&gt; [1] &quot;Unknown&quot; &quot;?&quot;       &quot;unknown&quot;</span></span></code></pre></div>
<p>The expression is a bit complex. Let us break it up. Function <code>fixed</code> just returns the fixed string ‘$’. This is necessary since the dollar sign has a special meaning in regular expressions (beyond the scope here). Function <code>str_starts</code> checks if the string starts with a dollar sign. We use the logical negation (NOT) to find the complementary set.</p>
<p>Note that different strings have been used to indicate <code>NA</code> values (Unknown, ?, unknown). Let us first use a single value to indicate <code>NA</code> (a question mark):</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="mod-r-transform.html#cb507-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb507-2"><a href="mod-r-transform.html#cb507-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_replace_all</span>(Revenue, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)))</span></code></pre></div>
<p>Next, we replace all <code>?</code> with <code>NA</code>:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="mod-r-transform.html#cb508-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb508-2"><a href="mod-r-transform.html#cb508-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">na_if</span>(Revenue, <span class="st">&quot;?&quot;</span>))</span>
<span id="cb508-3"><a href="mod-r-transform.html#cb508-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># check</span></span>
<span id="cb508-4"><a href="mod-r-transform.html#cb508-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) </span>
<span id="cb508-5"><a href="mod-r-transform.html#cb508-5"></a><span class="co">#&gt; # A tibble: 0 × 9</span></span>
<span id="cb508-6"><a href="mod-r-transform.html#cb508-6"></a><span class="co">#&gt; # … with 9 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb508-7"><a href="mod-r-transform.html#cb508-7"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;chr&gt;, Product Cost &lt;chr&gt;, Customer Service Cost &lt;chr&gt;,</span></span>
<span id="cb508-8"><a href="mod-r-transform.html#cb508-8"></a><span class="co">#&gt; #   Profit &lt;chr&gt;</span></span>
<span id="cb508-9"><a href="mod-r-transform.html#cb508-9"></a><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
<p>Finally, we remove all dollar signs:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="mod-r-transform.html#cb509-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb509-2"><a href="mod-r-transform.html#cb509-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_remove</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb509-3"><a href="mod-r-transform.html#cb509-3"></a>profit</span>
<span id="cb509-4"><a href="mod-r-transform.html#cb509-4"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb509-5"><a href="mod-r-transform.html#cb509-5"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue Product …¹ Custo…² Profit</span></span>
<span id="cb509-6"><a href="mod-r-transform.html#cb509-6"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb509-7"><a href="mod-r-transform.html#cb509-7"></a><span class="co">#&gt;  1       3 ATM     FRT           USA     Credit Products              6044 $ 3998     $ 413   $ 1633</span></span>
<span id="cb509-8"><a href="mod-r-transform.html#cb509-8"></a><span class="co">#&gt;  2       1 ATM     MRT           USA     Credit Products              4686 $ 3229     $ 643   $ 815 </span></span>
<span id="cb509-9"><a href="mod-r-transform.html#cb509-9"></a><span class="co">#&gt;  3       4 ATM     PBI           USA     Deposit Products             6063 $ 7440     $ 1842  $ -32…</span></span>
<span id="cb509-10"><a href="mod-r-transform.html#cb509-10"></a><span class="co">#&gt;  4       1 ATM     PBI           USA     Deposit Products             4682 $ 6127     $ 1118  $ -25…</span></span>
<span id="cb509-11"><a href="mod-r-transform.html#cb509-11"></a><span class="co">#&gt;  5       4 ATM     MRT           USA     Deposit Products             6320 $ 7913     $ 1854  $ -34…</span></span>
<span id="cb509-12"><a href="mod-r-transform.html#cb509-12"></a><span class="co">#&gt;  6       3 BRH     MAM           USA     Deposit Products             2993 $ 1034     $ 242   $ 1718</span></span>
<span id="cb509-13"><a href="mod-r-transform.html#cb509-13"></a><span class="co">#&gt;  7       4 BRH     PBI           USA     Revolving Credit Products    3355 $ 4355     $ 1027  $ -20…</span></span>
<span id="cb509-14"><a href="mod-r-transform.html#cb509-14"></a><span class="co">#&gt;  8       3 ATM     FRT           USA     Revolving Credit Products    5716 $ 5617     $ 876   $ -777</span></span>
<span id="cb509-15"><a href="mod-r-transform.html#cb509-15"></a><span class="co">#&gt;  9       4 BRH     PBI           USA     Deposit Products             3347 $ 4229     $ 425   $ -13…</span></span>
<span id="cb509-16"><a href="mod-r-transform.html#cb509-16"></a><span class="co">#&gt; 10       1 BRH     PBI           USA     Credit Products              2624 $ 1960     $ 264   $ 401 </span></span>
<span id="cb509-17"><a href="mod-r-transform.html#cb509-17"></a><span class="co">#&gt; # … with 24,536 more rows, and abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span>
<span id="cb509-18"><a href="mod-r-transform.html#cb509-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>As one pipe:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="mod-r-transform.html#cb510-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb510-2"><a href="mod-r-transform.html#cb510-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_replace_all</span>(Revenue, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb510-3"><a href="mod-r-transform.html#cb510-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">na_if</span>(Revenue, <span class="st">&quot;?&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb510-4"><a href="mod-r-transform.html#cb510-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_remove</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Convert the remaining columns to numeric like shown for <code>Revenue</code> above.</li>
</ol>
<div id="2X6k6ClQXsjkb6pjs5pH" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2X6k6ClQXsjkb6pjs5pH-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2X6k6ClQXsjkb6pjs5pH-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="mod-r-transform.html#cb511-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path)</span>
<span id="cb511-2"><a href="mod-r-transform.html#cb511-2"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb511-3"><a href="mod-r-transform.html#cb511-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb511-4"><a href="mod-r-transform.html#cb511-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb511-5"><a href="mod-r-transform.html#cb511-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb511-6"><a href="mod-r-transform.html#cb511-6"></a>profit</span>
<span id="cb511-7"><a href="mod-r-transform.html#cb511-7"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb511-8"><a href="mod-r-transform.html#cb511-8"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue Product …¹ Custo…² Profit</span></span>
<span id="cb511-9"><a href="mod-r-transform.html#cb511-9"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb511-10"><a href="mod-r-transform.html#cb511-10"></a><span class="co">#&gt;  1 Q3      ATM     FRT           USA     Credit Products              6044       3998     413   1633</span></span>
<span id="cb511-11"><a href="mod-r-transform.html#cb511-11"></a><span class="co">#&gt;  2 1       ATM     MRT           USA     Credit Products              4686       3229     643    815</span></span>
<span id="cb511-12"><a href="mod-r-transform.html#cb511-12"></a><span class="co">#&gt;  3 Q4      ATM     PBI           USA     Deposit Products             6063       7440    1842  -3219</span></span>
<span id="cb511-13"><a href="mod-r-transform.html#cb511-13"></a><span class="co">#&gt;  4 Q1      ATM     PBI           USA     Deposit Products             4682       6127    1118  -2563</span></span>
<span id="cb511-14"><a href="mod-r-transform.html#cb511-14"></a><span class="co">#&gt;  5 Q4      ATM     MRT           USA     Deposit Products             6320       7913    1854  -3447</span></span>
<span id="cb511-15"><a href="mod-r-transform.html#cb511-15"></a><span class="co">#&gt;  6 Q3      BRH     MAM           USA     Deposit Products             2993       1034     242   1718</span></span>
<span id="cb511-16"><a href="mod-r-transform.html#cb511-16"></a><span class="co">#&gt;  7 Q4      BRH     PBI           USA     Revolving Credit Products    3355       4355    1027  -2027</span></span>
<span id="cb511-17"><a href="mod-r-transform.html#cb511-17"></a><span class="co">#&gt;  8 Q3      ATM     FRT           USA     Revolving Credit Products    5716       5617     876   -777</span></span>
<span id="cb511-18"><a href="mod-r-transform.html#cb511-18"></a><span class="co">#&gt;  9 Q4      BRH     PBI           USA     Deposit Products             3347       4229     425  -1307</span></span>
<span id="cb511-19"><a href="mod-r-transform.html#cb511-19"></a><span class="co">#&gt; 10 Q1      BRH     PBI           USA     Credit Products              2624       1960     264    401</span></span>
<span id="cb511-20"><a href="mod-r-transform.html#cb511-20"></a><span class="co">#&gt; # … with 24,536 more rows, and abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span>
<span id="cb511-21"><a href="mod-r-transform.html#cb511-21"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2X6k6ClQXsjkb6pjs5pH">
Solution
</button>
<div id="KsB0h2ouACntFQOfInLF" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="KsB0h2ouACntFQOfInLF-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="KsB0h2ouACntFQOfInLF-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="mod-r-transform.html#cb512-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb512-2"><a href="mod-r-transform.html#cb512-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb512-3"><a href="mod-r-transform.html#cb512-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb512-4"><a href="mod-r-transform.html#cb512-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb512-5"><a href="mod-r-transform.html#cb512-5"></a>profit</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#KsB0h2ouACntFQOfInLF">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>across</code> function to apply the operations in Question 2 for a set of columns. Hint: see the examples on the help page of <code>across</code>.</li>
</ol>
<div class="modal fade bs-example-modal-lg" id="0NbLAzGY8gRMNPpulMgV" tabindex="-1" role="dialog" aria-labelledby="0NbLAzGY8gRMNPpulMgV-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="0NbLAzGY8gRMNPpulMgV-title">
Solution
</h4>
</div>
<div class="modal-body">

<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="mod-r-transform.html#cb513-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb513-2"><a href="mod-r-transform.html#cb513-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(Quarter, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="st">&quot;Q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb513-3"><a href="mod-r-transform.html#cb513-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb513-4"><a href="mod-r-transform.html#cb513-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb513-5"><a href="mod-r-transform.html#cb513-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb513-6"><a href="mod-r-transform.html#cb513-6"></a><span class="kw">skim</span>(profit)</span></code></pre></div>
<table style='width: auto;'
      class='table table-condensed'>
<caption>
<span id="tab:unnamed-chunk-392">Table 13.3: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
profit
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
24546
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Channel
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Customer ID
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Country
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Product Line
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
2.50
</td>
<td style="text-align:right;">
1.12
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
▇▇▁▇▇
</td>
</tr>
<tr>
<td style="text-align:left;">
Revenue
</td>
<td style="text-align:right;">
158
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
120.31
</td>
<td style="text-align:right;">
421.79
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
7540
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
Product Cost
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
100.04
</td>
<td style="text-align:right;">
375.58
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
9256
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
Customer Service Cost
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
17.41
</td>
<td style="text-align:right;">
67.50
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
1865
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
Profit
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
2.71
</td>
<td style="text-align:right;">
154.89
</td>
<td style="text-align:right;">
-4139
</td>
<td style="text-align:right;">
-7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3664
</td>
<td style="text-align:left;">
▁▁▇▁▁
</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#0NbLAzGY8gRMNPpulMgV">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>Write one pipe that does all the cleaning.</li>
</ol>
<div id="1ecK1yz4Xy6MUuZ1rpso" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="1ecK1yz4Xy6MUuZ1rpso-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="1ecK1yz4Xy6MUuZ1rpso-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="mod-r-transform.html#cb514-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb514-2"><a href="mod-r-transform.html#cb514-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(Profit <span class="op">-</span><span class="st"> </span>Profit_calc)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb514-3"><a href="mod-r-transform.html#cb514-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit =</span> <span class="kw">if_else</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>Diff <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>, Profit_calc, Profit, <span class="dt">missing =</span> Profit) ) </span>
<span id="cb514-4"><a href="mod-r-transform.html#cb514-4"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Diff <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="kw">is.na</span>(Profit_calc))  <span class="co"># check</span></span>
<span id="cb514-5"><a href="mod-r-transform.html#cb514-5"></a><span class="co">#&gt; # A tibble: 0 × 11</span></span>
<span id="cb514-6"><a href="mod-r-transform.html#cb514-6"></a><span class="co">#&gt; # … with 11 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb514-7"><a href="mod-r-transform.html#cb514-7"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;dbl&gt;, Product Cost &lt;dbl&gt;, Customer Service Cost &lt;dbl&gt;,</span></span>
<span id="cb514-8"><a href="mod-r-transform.html#cb514-8"></a><span class="co">#&gt; #   Profit &lt;dbl&gt;, Profit_calc &lt;dbl&gt;, Diff &lt;dbl&gt;</span></span>
<span id="cb514-9"><a href="mod-r-transform.html#cb514-9"></a><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#1ecK1yz4Xy6MUuZ1rpso">
Solution
</button>
<div id="06pD1Zks3DPPZwz8Hpzf" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="06pD1Zks3DPPZwz8Hpzf-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="06pD1Zks3DPPZwz8Hpzf-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="mod-r-transform.html#cb515-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb515-2"><a href="mod-r-transform.html#cb515-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(___)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb515-3"><a href="mod-r-transform.html#cb515-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit =</span> <span class="kw">if_else</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>Diff <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>, ___, Profit, Profit) ) </span>
<span id="cb515-4"><a href="mod-r-transform.html#cb515-4"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Diff <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="kw">is.na</span>(Profit_calc))  <span class="co"># check</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#06pD1Zks3DPPZwz8Hpzf">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Validate that revenue - product costs - customer service cost equals profit. If you see small rounding errors (less than or equal one) then recalculate the profit.</li>
</ol>
<div id="48KFFmAbgvgG02Aq2GtX" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="48KFFmAbgvgG02Aq2GtX-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="48KFFmAbgvgG02Aq2GtX-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="mod-r-transform.html#cb516-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-2"><a href="mod-r-transform.html#cb516-2"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-3"><a href="mod-r-transform.html#cb516-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-4"><a href="mod-r-transform.html#cb516-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(Revenue) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, Profit <span class="op">+</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, Revenue, Revenue),</span>
<span id="cb516-5"><a href="mod-r-transform.html#cb516-5"></a>         <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="op">-</span><span class="st"> </span>Profit <span class="op">+</span><span class="st"> </span>Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>), </span>
<span id="cb516-6"><a href="mod-r-transform.html#cb516-6"></a>         <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(<span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="op">-</span><span class="st"> </span>Profit <span class="op">+</span><span class="st"> </span>Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span>, <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-7"><a href="mod-r-transform.html#cb516-7"></a><span class="st">  </span><span class="kw">select</span>(Quarter<span class="op">:</span>Profit)</span>
<span id="cb516-8"><a href="mod-r-transform.html#cb516-8"></a></span>
<span id="cb516-9"><a href="mod-r-transform.html#cb516-9"></a><span class="co"># check - do numbers match</span></span>
<span id="cb516-10"><a href="mod-r-transform.html#cb516-10"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-11"><a href="mod-r-transform.html#cb516-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(Profit <span class="op">-</span><span class="st"> </span>Profit_calc)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb516-12"><a href="mod-r-transform.html#cb516-12"></a><span class="st">  </span><span class="kw">filter</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb516-13"><a href="mod-r-transform.html#cb516-13"></a><span class="co">#&gt; # A tibble: 0 × 11</span></span>
<span id="cb516-14"><a href="mod-r-transform.html#cb516-14"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb516-15"><a href="mod-r-transform.html#cb516-15"></a><span class="co">#&gt; # … with 11 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb516-16"><a href="mod-r-transform.html#cb516-16"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;dbl&gt;, Product Cost &lt;dbl&gt;, Customer Service Cost &lt;dbl&gt;,</span></span>
<span id="cb516-17"><a href="mod-r-transform.html#cb516-17"></a><span class="co">#&gt; #   Profit &lt;dbl&gt;, Profit_calc &lt;dbl&gt;, Diff &lt;dbl&gt;</span></span>
<span id="cb516-18"><a href="mod-r-transform.html#cb516-18"></a><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span>
<span id="cb516-19"><a href="mod-r-transform.html#cb516-19"></a></span>
<span id="cb516-20"><a href="mod-r-transform.html#cb516-20"></a><span class="co"># check - find NA values</span></span>
<span id="cb516-21"><a href="mod-r-transform.html#cb516-21"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-22"><a href="mod-r-transform.html#cb516-22"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-23"><a href="mod-r-transform.html#cb516-23"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb516-24"><a href="mod-r-transform.html#cb516-24"></a><span class="st">  </span><span class="kw">filter</span>(c_na <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb516-25"><a href="mod-r-transform.html#cb516-25"></a><span class="co">#&gt; # A tibble: 3 × 10</span></span>
<span id="cb516-26"><a href="mod-r-transform.html#cb516-26"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb516-27"><a href="mod-r-transform.html#cb516-27"></a><span class="co">#&gt;   Quarter Channel `Customer ID` Country `Product Line`          Revenue Produ…¹ Custo…² Profit  c_na</span></span>
<span id="cb516-28"><a href="mod-r-transform.html#cb516-28"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb516-29"><a href="mod-r-transform.html#cb516-29"></a><span class="co">#&gt; 1       1 EML     FRT           France  Revolving Credit Produ…       3      NA      NA     -1     2</span></span>
<span id="cb516-30"><a href="mod-r-transform.html#cb516-30"></a><span class="co">#&gt; 2       2 BRH     EBP           Guam    Fee Based Products           NA      NA       0      1     2</span></span>
<span id="cb516-31"><a href="mod-r-transform.html#cb516-31"></a><span class="co">#&gt; 3       1 MAL     MFN           Japan   Fee Based Products           NA      NA       5     21     2</span></span>
<span id="cb516-32"><a href="mod-r-transform.html#cb516-32"></a><span class="co">#&gt; # … with abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#48KFFmAbgvgG02Aq2GtX">
Solution
</button>
<div id="nxgOywW8cp8byEP6HWJb" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="nxgOywW8cp8byEP6HWJb-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="nxgOywW8cp8byEP6HWJb-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="mod-r-transform.html#cb517-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb517-2"><a href="mod-r-transform.html#cb517-2"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb517-3"><a href="mod-r-transform.html#cb517-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb517-4"><a href="mod-r-transform.html#cb517-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, Revenue, Revenue),</span>
<span id="cb517-5"><a href="mod-r-transform.html#cb517-5"></a>         <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>), </span>
<span id="cb517-6"><a href="mod-r-transform.html#cb517-6"></a>         <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb517-7"><a href="mod-r-transform.html#cb517-7"></a><span class="st">  </span><span class="kw">select</span>(Quarter<span class="op">:</span>Profit)</span></code></pre></div>
<p>
You can check you calculations using your code from Question 5.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#nxgOywW8cp8byEP6HWJb">
Hint 2
</button>
<div id="zb9hgKQIpaoI8t0ZxGz2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="zb9hgKQIpaoI8t0ZxGz2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="zb9hgKQIpaoI8t0ZxGz2-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="mod-r-transform.html#cb518-1"></a><span class="co"># To find the number of missing values (`NA`) you can create a new column </span></span>
<span id="cb518-2"><a href="mod-r-transform.html#cb518-2"></a><span class="co"># counting the number of missing values:</span></span>
<span id="cb518-3"><a href="mod-r-transform.html#cb518-3"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb518-4"><a href="mod-r-transform.html#cb518-4"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb518-5"><a href="mod-r-transform.html#cb518-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ct_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb518-6"><a href="mod-r-transform.html#cb518-6"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb518-7"><a href="mod-r-transform.html#cb518-7"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ct_na <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<p>
Recall that profit = revenue - product costs - customer service cost; that is, if a single value of these are missing then the value can be calculated using the other ones.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#zb9hgKQIpaoI8t0ZxGz2">
Hint 1
</button>
<ol start="6" style="list-style-type: decimal">
<li>Recalculate values in columns <code>Revenue</code> to <code>Profit</code> if possible.</li>
</ol>
<div id="FGwyjHPClkUfklbOfrR7" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="FGwyjHPClkUfklbOfrR7-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="FGwyjHPClkUfklbOfrR7-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="mod-r-transform.html#cb519-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb519-2"><a href="mod-r-transform.html#cb519-2"></a><span class="st">  </span><span class="kw">group_by</span>(Quarter) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb519-3"><a href="mod-r-transform.html#cb519-3"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span>
<span id="cb519-4"><a href="mod-r-transform.html#cb519-4"></a><span class="co">#&gt; # A tibble: 8 × 9</span></span>
<span id="cb519-5"><a href="mod-r-transform.html#cb519-5"></a><span class="co">#&gt; # Groups:   Quarter [4]</span></span>
<span id="cb519-6"><a href="mod-r-transform.html#cb519-6"></a><span class="co">#&gt;   Quarter Channel `Customer ID` Country `Product Line`            Revenue Product C…¹ Custo…² Profit</span></span>
<span id="cb519-7"><a href="mod-r-transform.html#cb519-7"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb519-8"><a href="mod-r-transform.html#cb519-8"></a><span class="co">#&gt; 1       1 ATM     PBI           USA     Credit Products              4821        1808     233   2780</span></span>
<span id="cb519-9"><a href="mod-r-transform.html#cb519-9"></a><span class="co">#&gt; 2       1 ATM     PBI           USA     Revolving Credit Products    4268        1638     363   2267</span></span>
<span id="cb519-10"><a href="mod-r-transform.html#cb519-10"></a><span class="co">#&gt; 3       2 ATM     FRT           USA     Credit Products              5931        3137     406   2388</span></span>
<span id="cb519-11"><a href="mod-r-transform.html#cb519-11"></a><span class="co">#&gt; 4       2 ATM     RPB           USA     Deposit Products             4864        2156     533   2175</span></span>
<span id="cb519-12"><a href="mod-r-transform.html#cb519-12"></a><span class="co">#&gt; 5       3 ATM     WEM           USA     Credit Products              5682        2112     454   3116</span></span>
<span id="cb519-13"><a href="mod-r-transform.html#cb519-13"></a><span class="co">#&gt; 6       3 ATM     WEM           USA     Deposit Products             4850        2493     253   2104</span></span>
<span id="cb519-14"><a href="mod-r-transform.html#cb519-14"></a><span class="co">#&gt; 7       4 ATM     MAM           USA     Revolving Credit Products    6699        2506     530   3663</span></span>
<span id="cb519-15"><a href="mod-r-transform.html#cb519-15"></a><span class="co">#&gt; 8       4 ATM     WEM           USA     Revolving Credit Products    5836        2114     265   3457</span></span>
<span id="cb519-16"><a href="mod-r-transform.html#cb519-16"></a><span class="co">#&gt; # … with abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#FGwyjHPClkUfklbOfrR7">
Solution
</button>
<ol start="7" style="list-style-type: decimal">
<li>Find the two best rows with highest profit in each quarter.</li>
</ol>
<div id="cTvEmkfYbrUy4YBIqCaO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="cTvEmkfYbrUy4YBIqCaO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="cTvEmkfYbrUy4YBIqCaO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="mod-r-transform.html#cb520-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb520-2"><a href="mod-r-transform.html#cb520-2"></a><span class="st">  </span><span class="kw">group_by</span>(Quarter, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb520-3"><a href="mod-r-transform.html#cb520-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb520-4"><a href="mod-r-transform.html#cb520-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span>
<span id="cb520-5"><a href="mod-r-transform.html#cb520-5"></a><span class="co">#&gt; # A tibble: 8 × 3</span></span>
<span id="cb520-6"><a href="mod-r-transform.html#cb520-6"></a><span class="co">#&gt; # Groups:   Quarter [4]</span></span>
<span id="cb520-7"><a href="mod-r-transform.html#cb520-7"></a><span class="co">#&gt;   Quarter `Customer ID` Profit</span></span>
<span id="cb520-8"><a href="mod-r-transform.html#cb520-8"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb520-9"><a href="mod-r-transform.html#cb520-9"></a><span class="co">#&gt; 1       1 MRT             3925</span></span>
<span id="cb520-10"><a href="mod-r-transform.html#cb520-10"></a><span class="co">#&gt; 2       1 WEB             3776</span></span>
<span id="cb520-11"><a href="mod-r-transform.html#cb520-11"></a><span class="co">#&gt; 3       2 FRT             7272</span></span>
<span id="cb520-12"><a href="mod-r-transform.html#cb520-12"></a><span class="co">#&gt; 4       2 MAM             6992</span></span>
<span id="cb520-13"><a href="mod-r-transform.html#cb520-13"></a><span class="co">#&gt; 5       3 WEM             6616</span></span>
<span id="cb520-14"><a href="mod-r-transform.html#cb520-14"></a><span class="co">#&gt; 6       3 RPB             3245</span></span>
<span id="cb520-15"><a href="mod-r-transform.html#cb520-15"></a><span class="co">#&gt; 7       4 EBP            10093</span></span>
<span id="cb520-16"><a href="mod-r-transform.html#cb520-16"></a><span class="co">#&gt; 8       4 WEM             8262</span></span></code></pre></div>
<p>
The results are not the same since use another group by.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#cTvEmkfYbrUy4YBIqCaO">
Solution
</button>
<div id="ITky98Z8CLGihnHBSYcT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ITky98Z8CLGihnHBSYcT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ITky98Z8CLGihnHBSYcT-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="mod-r-transform.html#cb521-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb521-2"><a href="mod-r-transform.html#cb521-2"></a><span class="st">  </span><span class="kw">group_by</span>(___, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb521-3"><a href="mod-r-transform.html#cb521-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb521-4"><a href="mod-r-transform.html#cb521-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ITky98Z8CLGihnHBSYcT">
Hint
</button>
<ol start="8" style="list-style-type: decimal">
<li>Find the two best customers with highest profit in each quarter. Is the result the same as in Question 7?</li>
</ol>
<div id="8szrqNcW2kq3tNhigIIT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="8szrqNcW2kq3tNhigIIT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="8szrqNcW2kq3tNhigIIT-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="mod-r-transform.html#cb522-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-2"><a href="mod-r-transform.html#cb522-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-3"><a href="mod-r-transform.html#cb522-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-4"><a href="mod-r-transform.html#cb522-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb522-5"><a href="mod-r-transform.html#cb522-5"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb522-6"><a href="mod-r-transform.html#cb522-6"></a><span class="co">#&gt;   `Product Line`  Profit</span></span>
<span id="cb522-7"><a href="mod-r-transform.html#cb522-7"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb522-8"><a href="mod-r-transform.html#cb522-8"></a><span class="co">#&gt; 1 Credit Products  31022</span></span>
<span id="cb522-9"><a href="mod-r-transform.html#cb522-9"></a><span class="co"># ... repeat </span></span>
<span id="cb522-10"><a href="mod-r-transform.html#cb522-10"></a></span>
<span id="cb522-11"><a href="mod-r-transform.html#cb522-11"></a><span class="co"># Using a function</span></span>
<span id="cb522-12"><a href="mod-r-transform.html#cb522-12"></a>summarise_profit  &lt;-<span class="st"> </span><span class="cf">function</span>(data, group_var, summarise_var) {</span>
<span id="cb522-13"><a href="mod-r-transform.html#cb522-13"></a>  data <span class="op">%&gt;%</span></span>
<span id="cb522-14"><a href="mod-r-transform.html#cb522-14"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="kw">across</span>({{ group_var }})) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-15"><a href="mod-r-transform.html#cb522-15"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="kw">across</span>({{ summarise_var }}, sum)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-16"><a href="mod-r-transform.html#cb522-16"></a><span class="st">    </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb522-17"><a href="mod-r-transform.html#cb522-17"></a>}</span>
<span id="cb522-18"><a href="mod-r-transform.html#cb522-18"></a><span class="kw">summarise_profit</span>(profit, <span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>, Profit)</span>
<span id="cb522-19"><a href="mod-r-transform.html#cb522-19"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb522-20"><a href="mod-r-transform.html#cb522-20"></a><span class="co">#&gt;   `Product Line`  Profit</span></span>
<span id="cb522-21"><a href="mod-r-transform.html#cb522-21"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb522-22"><a href="mod-r-transform.html#cb522-22"></a><span class="co">#&gt; 1 Credit Products  31022</span></span>
<span id="cb522-23"><a href="mod-r-transform.html#cb522-23"></a><span class="kw">summarise_profit</span>(profit, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>, Profit)</span>
<span id="cb522-24"><a href="mod-r-transform.html#cb522-24"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb522-25"><a href="mod-r-transform.html#cb522-25"></a><span class="co">#&gt;   `Customer ID` Profit</span></span>
<span id="cb522-26"><a href="mod-r-transform.html#cb522-26"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb522-27"><a href="mod-r-transform.html#cb522-27"></a><span class="co">#&gt; 1 WEM            18942</span></span>
<span id="cb522-28"><a href="mod-r-transform.html#cb522-28"></a><span class="co"># ... repeat</span></span>
<span id="cb522-29"><a href="mod-r-transform.html#cb522-29"></a></span>
<span id="cb522-30"><a href="mod-r-transform.html#cb522-30"></a><span class="co"># Using purrr package to get a single tibble (if interested in the purrr package)</span></span>
<span id="cb522-31"><a href="mod-r-transform.html#cb522-31"></a>val &lt;-<span class="st"> </span><span class="kw">names</span>(profit)[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb522-32"><a href="mod-r-transform.html#cb522-32"></a>max_profit &lt;-<span class="st"> </span><span class="kw">map_df</span>(</span>
<span id="cb522-33"><a href="mod-r-transform.html#cb522-33"></a>  val, </span>
<span id="cb522-34"><a href="mod-r-transform.html#cb522-34"></a>  <span class="op">~</span>{</span>
<span id="cb522-35"><a href="mod-r-transform.html#cb522-35"></a>      tmp &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-36"><a href="mod-r-transform.html#cb522-36"></a><span class="st">        </span><span class="kw">group_by</span>(.data[[.x]]) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-37"><a href="mod-r-transform.html#cb522-37"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit), <span class="dt">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb522-38"><a href="mod-r-transform.html#cb522-38"></a><span class="st">        </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb522-39"><a href="mod-r-transform.html#cb522-39"></a>      <span class="kw">tibble</span>(<span class="dt">by =</span> .x, </span>
<span id="cb522-40"><a href="mod-r-transform.html#cb522-40"></a>        <span class="dt">best =</span> <span class="kw">as.character</span>(tmp[[<span class="dv">1</span>,<span class="dv">1</span>]]),</span>
<span id="cb522-41"><a href="mod-r-transform.html#cb522-41"></a>        <span class="dt">profit =</span> tmp[[<span class="dv">1</span>,<span class="dv">2</span>]] </span>
<span id="cb522-42"><a href="mod-r-transform.html#cb522-42"></a>      )</span>
<span id="cb522-43"><a href="mod-r-transform.html#cb522-43"></a>    } </span>
<span id="cb522-44"><a href="mod-r-transform.html#cb522-44"></a>  )</span>
<span id="cb522-45"><a href="mod-r-transform.html#cb522-45"></a>max_profit </span>
<span id="cb522-46"><a href="mod-r-transform.html#cb522-46"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb522-47"><a href="mod-r-transform.html#cb522-47"></a><span class="co">#&gt;   by           best            profit</span></span>
<span id="cb522-48"><a href="mod-r-transform.html#cb522-48"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb522-49"><a href="mod-r-transform.html#cb522-49"></a><span class="co">#&gt; 1 Quarter      4                35268</span></span>
<span id="cb522-50"><a href="mod-r-transform.html#cb522-50"></a><span class="co">#&gt; 2 Channel      ATM              30433</span></span>
<span id="cb522-51"><a href="mod-r-transform.html#cb522-51"></a><span class="co">#&gt; 3 Customer ID  WEM              18942</span></span>
<span id="cb522-52"><a href="mod-r-transform.html#cb522-52"></a><span class="co">#&gt; 4 Country      USA              39693</span></span>
<span id="cb522-53"><a href="mod-r-transform.html#cb522-53"></a><span class="co">#&gt; 5 Product Line Credit Products  31022</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#8szrqNcW2kq3tNhigIIT">
Solution
</button>
<div id="3UaEx9ZQ7MznLwiUoeMT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="3UaEx9ZQ7MznLwiUoeMT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="3UaEx9ZQ7MznLwiUoeMT-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="mod-r-transform.html#cb523-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb523-2"><a href="mod-r-transform.html#cb523-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb523-3"><a href="mod-r-transform.html#cb523-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb523-4"><a href="mod-r-transform.html#cb523-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb523-5"><a href="mod-r-transform.html#cb523-5"></a><span class="co"># ... repeat </span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#3UaEx9ZQ7MznLwiUoeMT">
Hint
</button>
<ol start="9" style="list-style-type: decimal">
<li>Find the product line, customer, channel, country and quarter with the highest profit.</li>
</ol>
<div id="bjMaWatrpAKvvdnZ2HTQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="bjMaWatrpAKvvdnZ2HTQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="bjMaWatrpAKvvdnZ2HTQ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="mod-r-transform.html#cb524-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb524-2"><a href="mod-r-transform.html#cb524-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb524-3"><a href="mod-r-transform.html#cb524-3"></a><span class="st">  </span><span class="kw">distinct</span>(Country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb524-4"><a href="mod-r-transform.html#cb524-4"></a><span class="st">  </span><span class="kw">count</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>)</span>
<span id="cb524-5"><a href="mod-r-transform.html#cb524-5"></a><span class="co">#&gt; # A tibble: 18 × 2</span></span>
<span id="cb524-6"><a href="mod-r-transform.html#cb524-6"></a><span class="co">#&gt; # Groups:   Customer ID [18]</span></span>
<span id="cb524-7"><a href="mod-r-transform.html#cb524-7"></a><span class="co">#&gt;    `Customer ID`     n</span></span>
<span id="cb524-8"><a href="mod-r-transform.html#cb524-8"></a><span class="co">#&gt;    &lt;chr&gt;         &lt;int&gt;</span></span>
<span id="cb524-9"><a href="mod-r-transform.html#cb524-9"></a><span class="co">#&gt;  1 AFF               1</span></span>
<span id="cb524-10"><a href="mod-r-transform.html#cb524-10"></a><span class="co">#&gt;  2 AGR              16</span></span>
<span id="cb524-11"><a href="mod-r-transform.html#cb524-11"></a><span class="co">#&gt;  3 CAM               1</span></span>
<span id="cb524-12"><a href="mod-r-transform.html#cb524-12"></a><span class="co">#&gt;  4 CRE               1</span></span>
<span id="cb524-13"><a href="mod-r-transform.html#cb524-13"></a><span class="co">#&gt;  5 EBP              47</span></span>
<span id="cb524-14"><a href="mod-r-transform.html#cb524-14"></a><span class="co">#&gt;  6 FRT              47</span></span>
<span id="cb524-15"><a href="mod-r-transform.html#cb524-15"></a><span class="co">#&gt;  7 HEC               1</span></span>
<span id="cb524-16"><a href="mod-r-transform.html#cb524-16"></a><span class="co">#&gt;  8 IAS               1</span></span>
<span id="cb524-17"><a href="mod-r-transform.html#cb524-17"></a><span class="co">#&gt;  9 INB               1</span></span>
<span id="cb524-18"><a href="mod-r-transform.html#cb524-18"></a><span class="co">#&gt; 10 MAM              47</span></span>
<span id="cb524-19"><a href="mod-r-transform.html#cb524-19"></a><span class="co">#&gt; 11 MFN              30</span></span>
<span id="cb524-20"><a href="mod-r-transform.html#cb524-20"></a><span class="co">#&gt; 12 MRT              47</span></span>
<span id="cb524-21"><a href="mod-r-transform.html#cb524-21"></a><span class="co">#&gt; 13 PBI              47</span></span>
<span id="cb524-22"><a href="mod-r-transform.html#cb524-22"></a><span class="co">#&gt; 14 RPB              47</span></span>
<span id="cb524-23"><a href="mod-r-transform.html#cb524-23"></a><span class="co">#&gt; 15 SBE               1</span></span>
<span id="cb524-24"><a href="mod-r-transform.html#cb524-24"></a><span class="co">#&gt; 16 STF               2</span></span>
<span id="cb524-25"><a href="mod-r-transform.html#cb524-25"></a><span class="co">#&gt; 17 WEB              47</span></span>
<span id="cb524-26"><a href="mod-r-transform.html#cb524-26"></a><span class="co">#&gt; 18 WEM              47</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#bjMaWatrpAKvvdnZ2HTQ">
Solution
</button>
<ol start="10" style="list-style-type: decimal">
<li>Are there rows with the same customer in different countries?</li>
</ol>
<div id="ve01IGpigNBDhGEa930o" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ve01IGpigNBDhGEa930o-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ve01IGpigNBDhGEa930o-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="mod-r-transform.html#cb525-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb525-2"><a href="mod-r-transform.html#cb525-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Profit), <span class="kw">desc</span>(Revenue))</span>
<span id="cb525-3"><a href="mod-r-transform.html#cb525-3"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb525-4"><a href="mod-r-transform.html#cb525-4"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb525-5"><a href="mod-r-transform.html#cb525-5"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue Product …¹ Custo…² Profit</span></span>
<span id="cb525-6"><a href="mod-r-transform.html#cb525-6"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb525-7"><a href="mod-r-transform.html#cb525-7"></a><span class="co">#&gt;  1       4 ATM     MAM           USA     Revolving Credit Products    6699       2506     530   3663</span></span>
<span id="cb525-8"><a href="mod-r-transform.html#cb525-8"></a><span class="co">#&gt;  2       4 ATM     WEM           USA     Revolving Credit Products    5836       2114     265   3457</span></span>
<span id="cb525-9"><a href="mod-r-transform.html#cb525-9"></a><span class="co">#&gt;  3       4 ATM     MAM           USA     Credit Products              7540       3374     728   3438</span></span>
<span id="cb525-10"><a href="mod-r-transform.html#cb525-10"></a><span class="co">#&gt;  4       4 ATM     MRT           USA     Credit Products              6419       2669     618   3132</span></span>
<span id="cb525-11"><a href="mod-r-transform.html#cb525-11"></a><span class="co">#&gt;  5       3 ATM     WEM           USA     Credit Products              5682       2112     454   3116</span></span>
<span id="cb525-12"><a href="mod-r-transform.html#cb525-12"></a><span class="co">#&gt;  6       4 ATM     WEB           USA     Deposit Products             5145       1907     191   3047</span></span>
<span id="cb525-13"><a href="mod-r-transform.html#cb525-13"></a><span class="co">#&gt;  7       1 ATM     PBI           USA     Credit Products              4821       1808     233   2780</span></span>
<span id="cb525-14"><a href="mod-r-transform.html#cb525-14"></a><span class="co">#&gt;  8       4 ATM     RPB           USA     Credit Products              5828       2727     559   2542</span></span>
<span id="cb525-15"><a href="mod-r-transform.html#cb525-15"></a><span class="co">#&gt;  9       2 ATM     FRT           USA     Credit Products              5931       3137     406   2388</span></span>
<span id="cb525-16"><a href="mod-r-transform.html#cb525-16"></a><span class="co">#&gt; 10       1 ATM     PBI           USA     Revolving Credit Products    4268       1638     363   2267</span></span>
<span id="cb525-17"><a href="mod-r-transform.html#cb525-17"></a><span class="co">#&gt; # … with 24,536 more rows, and abbreviated variable names ¹​`Product Cost`, ²​`Customer Service Cost`</span></span>
<span id="cb525-18"><a href="mod-r-transform.html#cb525-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ve01IGpigNBDhGEa930o">
Solution
</button>
<ol start="11" style="list-style-type: decimal">
<li>Sort the data decreasing with respect to profit and next revenue.</li>
</ol>
<div id="n0aJbDw678IbCSSNz0r5" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="n0aJbDw678IbCSSNz0r5-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="n0aJbDw678IbCSSNz0r5-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="mod-r-transform.html#cb526-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-2"><a href="mod-r-transform.html#cb526-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-3"><a href="mod-r-transform.html#cb526-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-4"><a href="mod-r-transform.html#cb526-4"></a><span class="st">  </span><span class="co"># print() %&gt;%   # if want a peek before slicing </span></span>
<span id="cb526-5"><a href="mod-r-transform.html#cb526-5"></a><span class="st">  </span><span class="kw">slice_max</span>(cost)</span>
<span id="cb526-6"><a href="mod-r-transform.html#cb526-6"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb526-7"><a href="mod-r-transform.html#cb526-7"></a><span class="co">#&gt;   `Product Line`    cost</span></span>
<span id="cb526-8"><a href="mod-r-transform.html#cb526-8"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb526-9"><a href="mod-r-transform.html#cb526-9"></a><span class="co">#&gt; 1 Credit Products 820665</span></span>
<span id="cb526-10"><a href="mod-r-transform.html#cb526-10"></a></span>
<span id="cb526-11"><a href="mod-r-transform.html#cb526-11"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-12"><a href="mod-r-transform.html#cb526-12"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-13"><a href="mod-r-transform.html#cb526-13"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb526-14"><a href="mod-r-transform.html#cb526-14"></a><span class="st">  </span><span class="kw">slice_min</span>(cost)</span>
<span id="cb526-15"><a href="mod-r-transform.html#cb526-15"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb526-16"><a href="mod-r-transform.html#cb526-16"></a><span class="co">#&gt;   `Product Line`        cost</span></span>
<span id="cb526-17"><a href="mod-r-transform.html#cb526-17"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb526-18"><a href="mod-r-transform.html#cb526-18"></a><span class="co">#&gt; 1 Third Party Products 91796</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#n0aJbDw678IbCSSNz0r5">
Solution
</button>
<div id="BRjB8DAqjZr9NJ1OhFeA" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="BRjB8DAqjZr9NJ1OhFeA-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="BRjB8DAqjZr9NJ1OhFeA-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="mod-r-transform.html#cb527-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb527-2"><a href="mod-r-transform.html#cb527-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb527-3"><a href="mod-r-transform.html#cb527-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb527-4"><a href="mod-r-transform.html#cb527-4"></a><span class="st">  </span><span class="co"># print() %&gt;%   # if want a peek before slicing </span></span>
<span id="cb527-5"><a href="mod-r-transform.html#cb527-5"></a><span class="st">  </span><span class="kw">slice_max</span>(___)</span>
<span id="cb527-6"><a href="mod-r-transform.html#cb527-6"></a></span>
<span id="cb527-7"><a href="mod-r-transform.html#cb527-7"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb527-8"><a href="mod-r-transform.html#cb527-8"></a><span class="st">  </span>___% </span>
<span id="cb527-9"><a href="mod-r-transform.html#cb527-9"></a>  <span class="kw">slice_min</span>(cost)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#BRjB8DAqjZr9NJ1OhFeA">
Hint
</button>
<ol start="12" style="list-style-type: decimal">
<li>Which product line has the highest and lowest total cost?</li>
</ol>
<div id="lT3lsabQ3eVmXRpf37pO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="lT3lsabQ3eVmXRpf37pO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="lT3lsabQ3eVmXRpf37pO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="mod-r-transform.html#cb528-1"></a>profit <span class="op">%&gt;%</span></span>
<span id="cb528-2"><a href="mod-r-transform.html#cb528-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cust_cost_new =</span> <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> <span class="op">*</span><span class="st"> </span><span class="fl">1.05</span>, </span>
<span id="cb528-3"><a href="mod-r-transform.html#cb528-3"></a>         <span class="dt">profit_new =</span> Revenue <span class="op">-</span><span class="st"> </span>cust_cost_new <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb528-4"><a href="mod-r-transform.html#cb528-4"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb528-5"><a href="mod-r-transform.html#cb528-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cust_cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>), <span class="dt">profit =</span> <span class="kw">sum</span>(Profit), </span>
<span id="cb528-6"><a href="mod-r-transform.html#cb528-6"></a>            <span class="dt">cust_cost_new =</span> <span class="kw">sum</span>(cust_cost_new), <span class="dt">profit_new =</span> <span class="kw">sum</span>(profit_new),</span>
<span id="cb528-7"><a href="mod-r-transform.html#cb528-7"></a>            <span class="dt">profit_decrease =</span> profit_new <span class="op">-</span><span class="st"> </span>profit)</span>
<span id="cb528-8"><a href="mod-r-transform.html#cb528-8"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb528-9"><a href="mod-r-transform.html#cb528-9"></a><span class="co">#&gt;   `Product Line`            cust_cost profit cust_cost_new profit_new profit_decrease</span></span>
<span id="cb528-10"><a href="mod-r-transform.html#cb528-10"></a><span class="co">#&gt;   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb528-11"><a href="mod-r-transform.html#cb528-11"></a><span class="co">#&gt; 1 Credit Products              119612  31022       125593.     25041.          -5981.</span></span>
<span id="cb528-12"><a href="mod-r-transform.html#cb528-12"></a><span class="co">#&gt; 2 Deposit Products             114526   5408       120252.      -318.          -5726.</span></span>
<span id="cb528-13"><a href="mod-r-transform.html#cb528-13"></a><span class="co">#&gt; 3 Fee Based Products            22900   4953        24045         NA              NA </span></span>
<span id="cb528-14"><a href="mod-r-transform.html#cb528-14"></a><span class="co">#&gt; 4 Other Products                33282   7438        34946.      5774.          -1664.</span></span>
<span id="cb528-15"><a href="mod-r-transform.html#cb528-15"></a><span class="co">#&gt; 5 Revolving Credit Products        NA  15905           NA         NA              NA </span></span>
<span id="cb528-16"><a href="mod-r-transform.html#cb528-16"></a><span class="co">#&gt; 6 Third Party Products          15970   2264        16768.      1465.           -799.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#lT3lsabQ3eVmXRpf37pO">
Solution
</button>
<div id="VKcZDdMRODFAQbPuHDYL" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="VKcZDdMRODFAQbPuHDYL-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="VKcZDdMRODFAQbPuHDYL-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="mod-r-transform.html#cb529-1"></a>profit <span class="op">%&gt;%</span></span>
<span id="cb529-2"><a href="mod-r-transform.html#cb529-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cust_cost_new =</span> ___ <span class="op">*</span><span class="st"> </span><span class="fl">1.05</span>, </span>
<span id="cb529-3"><a href="mod-r-transform.html#cb529-3"></a>         <span class="dt">profit_new =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb529-4"><a href="mod-r-transform.html#cb529-4"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb529-5"><a href="mod-r-transform.html#cb529-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cust_cost =</span> <span class="kw">sum</span>(___), <span class="dt">profit =</span> <span class="kw">sum</span>(Profit), </span>
<span id="cb529-6"><a href="mod-r-transform.html#cb529-6"></a>            <span class="dt">cust_cost_new =</span> ___, <span class="dt">profit_new =</span> ___,</span>
<span id="cb529-7"><a href="mod-r-transform.html#cb529-7"></a>            <span class="dt">profit_decrease =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#VKcZDdMRODFAQbPuHDYL">
Hint
</button>
<ol start="13" style="list-style-type: decimal">
<li>Assume that customer service cost increases with 5%. How will that affect the profit for each product line?</li>
</ol>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="mod-r-transform.html#cb530-1"></a><span class="kw">rm</span>(profit)</span></code></pre></div>
</div>
<div id="ex-fish" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.4</span> Exercise (fisheries)<a href="mod-r-transform.html#ex-fish" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The dataset called <code>fisheries</code> contains world fisheries harvest for 2005. The tonnage from capture and aquaculture is listed by country.</p>
<p>You need the <code>tidyverse</code> package as usual:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="mod-r-transform.html#cb531-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb531-2"><a href="mod-r-transform.html#cb531-2"></a><span class="co"># install tfa package using remotes::install_github(&quot;bss-osca/tfa-package&quot;, upgrade = FALSE)     </span></span></code></pre></div>
<p>We load the needed datasets:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="mod-r-transform.html#cb532-1"></a>fisheries &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/fisheries.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span>
<span id="cb532-2"><a href="mod-r-transform.html#cb532-2"></a>fisheries</span>
<span id="cb532-3"><a href="mod-r-transform.html#cb532-3"></a><span class="co">#&gt; # A tibble: 216 × 4</span></span>
<span id="cb532-4"><a href="mod-r-transform.html#cb532-4"></a><span class="co">#&gt;    country             capture aquaculture  total</span></span>
<span id="cb532-5"><a href="mod-r-transform.html#cb532-5"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb532-6"><a href="mod-r-transform.html#cb532-6"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200</span></span>
<span id="cb532-7"><a href="mod-r-transform.html#cb532-7"></a><span class="co">#&gt;  2 Albania                7886         950   8836</span></span>
<span id="cb532-8"><a href="mod-r-transform.html#cb532-8"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361</span></span>
<span id="cb532-9"><a href="mod-r-transform.html#cb532-9"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067</span></span>
<span id="cb532-10"><a href="mod-r-transform.html#cb532-10"></a><span class="co">#&gt;  5 Andorra                   0           0      0</span></span>
<span id="cb532-11"><a href="mod-r-transform.html#cb532-11"></a><span class="co">#&gt;  6 Angola               486490         655 487145</span></span>
<span id="cb532-12"><a href="mod-r-transform.html#cb532-12"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010</span></span>
<span id="cb532-13"><a href="mod-r-transform.html#cb532-13"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899</span></span>
<span id="cb532-14"><a href="mod-r-transform.html#cb532-14"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139</span></span>
<span id="cb532-15"><a href="mod-r-transform.html#cb532-15"></a><span class="co">#&gt; 10 Aruba                   142           0    142</span></span>
<span id="cb532-16"><a href="mod-r-transform.html#cb532-16"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb532-17"><a href="mod-r-transform.html#cb532-17"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span>
<span id="cb532-18"><a href="mod-r-transform.html#cb532-18"></a>continents &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/continents.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span>
<span id="cb532-19"><a href="mod-r-transform.html#cb532-19"></a>continents</span>
<span id="cb532-20"><a href="mod-r-transform.html#cb532-20"></a><span class="co">#&gt; # A tibble: 247 × 2</span></span>
<span id="cb532-21"><a href="mod-r-transform.html#cb532-21"></a><span class="co">#&gt;    country           continent</span></span>
<span id="cb532-22"><a href="mod-r-transform.html#cb532-22"></a><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;    </span></span>
<span id="cb532-23"><a href="mod-r-transform.html#cb532-23"></a><span class="co">#&gt;  1 Afghanistan       Asia     </span></span>
<span id="cb532-24"><a href="mod-r-transform.html#cb532-24"></a><span class="co">#&gt;  2 Åland Islands     Europe   </span></span>
<span id="cb532-25"><a href="mod-r-transform.html#cb532-25"></a><span class="co">#&gt;  3 Albania           Europe   </span></span>
<span id="cb532-26"><a href="mod-r-transform.html#cb532-26"></a><span class="co">#&gt;  4 Algeria           Africa   </span></span>
<span id="cb532-27"><a href="mod-r-transform.html#cb532-27"></a><span class="co">#&gt;  5 American Samoa    Oceania  </span></span>
<span id="cb532-28"><a href="mod-r-transform.html#cb532-28"></a><span class="co">#&gt;  6 Andorra           Europe   </span></span>
<span id="cb532-29"><a href="mod-r-transform.html#cb532-29"></a><span class="co">#&gt;  7 Angola            Africa   </span></span>
<span id="cb532-30"><a href="mod-r-transform.html#cb532-30"></a><span class="co">#&gt;  8 Anguilla          Americas </span></span>
<span id="cb532-31"><a href="mod-r-transform.html#cb532-31"></a><span class="co">#&gt;  9 Antigua &amp; Barbuda Americas </span></span>
<span id="cb532-32"><a href="mod-r-transform.html#cb532-32"></a><span class="co">#&gt; 10 Argentina         Americas </span></span>
<span id="cb532-33"><a href="mod-r-transform.html#cb532-33"></a><span class="co">#&gt; # … with 237 more rows</span></span>
<span id="cb532-34"><a href="mod-r-transform.html#cb532-34"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>Some mean statistics:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="mod-r-transform.html#cb533-1"></a>fisheries <span class="op">%&gt;%</span></span>
<span id="cb533-2"><a href="mod-r-transform.html#cb533-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">across</span>(<span class="kw">where</span>(is.numeric), mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb533-3"><a href="mod-r-transform.html#cb533-3"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb533-4"><a href="mod-r-transform.html#cb533-4"></a><span class="co">#&gt;   capture aquaculture   total</span></span>
<span id="cb533-5"><a href="mod-r-transform.html#cb533-5"></a><span class="co">#&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb533-6"><a href="mod-r-transform.html#cb533-6"></a><span class="co">#&gt; 1 421916.     508368. 930284.</span></span></code></pre></div>
<div id="wdRH2XJToD5nAn2qotNI" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="wdRH2XJToD5nAn2qotNI-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="wdRH2XJToD5nAn2qotNI-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="mod-r-transform.html#cb534-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb534-2"><a href="mod-r-transform.html#cb534-2"></a><span class="st">  </span><span class="kw">anti_join</span>(continents)      <span class="co"># countries not belonging to a continent</span></span>
<span id="cb534-3"><a href="mod-r-transform.html#cb534-3"></a><span class="co">#&gt; # A tibble: 20 × 4</span></span>
<span id="cb534-4"><a href="mod-r-transform.html#cb534-4"></a><span class="co">#&gt;    country                          capture aquaculture   total</span></span>
<span id="cb534-5"><a href="mod-r-transform.html#cb534-5"></a><span class="co">#&gt;    &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb534-6"><a href="mod-r-transform.html#cb534-6"></a><span class="co">#&gt;  1 Antigua and Barbuda                 3000          10    3010</span></span>
<span id="cb534-7"><a href="mod-r-transform.html#cb534-7"></a><span class="co">#&gt;  2 Bosnia and Herzegovina               305        4564    4869</span></span>
<span id="cb534-8"><a href="mod-r-transform.html#cb534-8"></a><span class="co">#&gt;  3 Czech Republic                      3507       20952   24459</span></span>
<span id="cb534-9"><a href="mod-r-transform.html#cb534-9"></a><span class="co">#&gt;  4 Democratic Republic of the Congo  237372        3161  240533</span></span>
<span id="cb534-10"><a href="mod-r-transform.html#cb534-10"></a><span class="co">#&gt;  5 Eswatini                              65         100     165</span></span>
<span id="cb534-11"><a href="mod-r-transform.html#cb534-11"></a><span class="co">#&gt;  6 Federated States of Micronesia     88397           0   88397</span></span>
<span id="cb534-12"><a href="mod-r-transform.html#cb534-12"></a><span class="co">#&gt;  7 Ivory Coast                        67500        4701   72201</span></span>
<span id="cb534-13"><a href="mod-r-transform.html#cb534-13"></a><span class="co">#&gt;  8 Jersey and Guernsey                 2985        1499    4484</span></span>
<span id="cb534-14"><a href="mod-r-transform.html#cb534-14"></a><span class="co">#&gt;  9 Macao                               1500           0    1500</span></span>
<span id="cb534-15"><a href="mod-r-transform.html#cb534-15"></a><span class="co">#&gt; 10 Myanmar                          2072390     1017644 3090034</span></span>
<span id="cb534-16"><a href="mod-r-transform.html#cb534-16"></a><span class="co">#&gt; 11 North Macedonia                      306         986    1292</span></span>
<span id="cb534-17"><a href="mod-r-transform.html#cb534-17"></a><span class="co">#&gt; 12 Palestine                           3306         280    3586</span></span>
<span id="cb534-18"><a href="mod-r-transform.html#cb534-18"></a><span class="co">#&gt; 13 Republic of the Congo              86748         177   86925</span></span>
<span id="cb534-19"><a href="mod-r-transform.html#cb534-19"></a><span class="co">#&gt; 14 Saint Kitts and Nevis              65734           1   65735</span></span>
<span id="cb534-20"><a href="mod-r-transform.html#cb534-20"></a><span class="co">#&gt; 15 Saint Lucia                         2097          32    2129</span></span>
<span id="cb534-21"><a href="mod-r-transform.html#cb534-21"></a><span class="co">#&gt; 16 Saint Vincent and the Grenadines   23077           0   23077</span></span>
<span id="cb534-22"><a href="mod-r-transform.html#cb534-22"></a><span class="co">#&gt; 17 São Tomé and Príncipe              11750           0   11750</span></span>
<span id="cb534-23"><a href="mod-r-transform.html#cb534-23"></a><span class="co">#&gt; 18 Trinidad and Tobago                13027          11   13038</span></span>
<span id="cb534-24"><a href="mod-r-transform.html#cb534-24"></a><span class="co">#&gt; 19 Turks and Caicos Islands            2780           0    2780</span></span>
<span id="cb534-25"><a href="mod-r-transform.html#cb534-25"></a><span class="co">#&gt; 20 US Virgin Islands                    551           8     559</span></span>
<span id="cb534-26"><a href="mod-r-transform.html#cb534-26"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb534-27"><a href="mod-r-transform.html#cb534-27"></a><span class="st">  </span><span class="kw">print</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb534-28"><a href="mod-r-transform.html#cb534-28"></a><span class="st">  </span><span class="kw">left_join</span>(continents) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb534-29"><a href="mod-r-transform.html#cb534-29"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb534-30"><a href="mod-r-transform.html#cb534-30"></a><span class="co">#&gt; # A tibble: 216 × 4</span></span>
<span id="cb534-31"><a href="mod-r-transform.html#cb534-31"></a><span class="co">#&gt;    country             capture aquaculture  total</span></span>
<span id="cb534-32"><a href="mod-r-transform.html#cb534-32"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb534-33"><a href="mod-r-transform.html#cb534-33"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200</span></span>
<span id="cb534-34"><a href="mod-r-transform.html#cb534-34"></a><span class="co">#&gt;  2 Albania                7886         950   8836</span></span>
<span id="cb534-35"><a href="mod-r-transform.html#cb534-35"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361</span></span>
<span id="cb534-36"><a href="mod-r-transform.html#cb534-36"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067</span></span>
<span id="cb534-37"><a href="mod-r-transform.html#cb534-37"></a><span class="co">#&gt;  5 Andorra                   0           0      0</span></span>
<span id="cb534-38"><a href="mod-r-transform.html#cb534-38"></a><span class="co">#&gt;  6 Angola               486490         655 487145</span></span>
<span id="cb534-39"><a href="mod-r-transform.html#cb534-39"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010</span></span>
<span id="cb534-40"><a href="mod-r-transform.html#cb534-40"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899</span></span>
<span id="cb534-41"><a href="mod-r-transform.html#cb534-41"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139</span></span>
<span id="cb534-42"><a href="mod-r-transform.html#cb534-42"></a><span class="co">#&gt; 10 Aruba                   142           0    142</span></span>
<span id="cb534-43"><a href="mod-r-transform.html#cb534-43"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb534-44"><a href="mod-r-transform.html#cb534-44"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span>
<span id="cb534-45"><a href="mod-r-transform.html#cb534-45"></a><span class="co">#&gt; # A tibble: 216 × 5</span></span>
<span id="cb534-46"><a href="mod-r-transform.html#cb534-46"></a><span class="co">#&gt;    country             capture aquaculture  total continent</span></span>
<span id="cb534-47"><a href="mod-r-transform.html#cb534-47"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb534-48"><a href="mod-r-transform.html#cb534-48"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200 Asia     </span></span>
<span id="cb534-49"><a href="mod-r-transform.html#cb534-49"></a><span class="co">#&gt;  2 Albania                7886         950   8836 Europe   </span></span>
<span id="cb534-50"><a href="mod-r-transform.html#cb534-50"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361 Africa   </span></span>
<span id="cb534-51"><a href="mod-r-transform.html#cb534-51"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067 Oceania  </span></span>
<span id="cb534-52"><a href="mod-r-transform.html#cb534-52"></a><span class="co">#&gt;  5 Andorra                   0           0      0 Europe   </span></span>
<span id="cb534-53"><a href="mod-r-transform.html#cb534-53"></a><span class="co">#&gt;  6 Angola               486490         655 487145 Africa   </span></span>
<span id="cb534-54"><a href="mod-r-transform.html#cb534-54"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010 &lt;NA&gt;     </span></span>
<span id="cb534-55"><a href="mod-r-transform.html#cb534-55"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899 Americas </span></span>
<span id="cb534-56"><a href="mod-r-transform.html#cb534-56"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139 Asia     </span></span>
<span id="cb534-57"><a href="mod-r-transform.html#cb534-57"></a><span class="co">#&gt; 10 Aruba                   142           0    142 Americas </span></span>
<span id="cb534-58"><a href="mod-r-transform.html#cb534-58"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb534-59"><a href="mod-r-transform.html#cb534-59"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span>
<span id="cb534-60"><a href="mod-r-transform.html#cb534-60"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))   <span class="co"># same result - countries not belonging to a continent</span></span>
<span id="cb534-61"><a href="mod-r-transform.html#cb534-61"></a><span class="co">#&gt; # A tibble: 20 × 5</span></span>
<span id="cb534-62"><a href="mod-r-transform.html#cb534-62"></a><span class="co">#&gt;    country                          capture aquaculture   total continent</span></span>
<span id="cb534-63"><a href="mod-r-transform.html#cb534-63"></a><span class="co">#&gt;    &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb534-64"><a href="mod-r-transform.html#cb534-64"></a><span class="co">#&gt;  1 Antigua and Barbuda                 3000          10    3010 &lt;NA&gt;     </span></span>
<span id="cb534-65"><a href="mod-r-transform.html#cb534-65"></a><span class="co">#&gt;  2 Bosnia and Herzegovina               305        4564    4869 &lt;NA&gt;     </span></span>
<span id="cb534-66"><a href="mod-r-transform.html#cb534-66"></a><span class="co">#&gt;  3 Czech Republic                      3507       20952   24459 &lt;NA&gt;     </span></span>
<span id="cb534-67"><a href="mod-r-transform.html#cb534-67"></a><span class="co">#&gt;  4 Democratic Republic of the Congo  237372        3161  240533 &lt;NA&gt;     </span></span>
<span id="cb534-68"><a href="mod-r-transform.html#cb534-68"></a><span class="co">#&gt;  5 Eswatini                              65         100     165 &lt;NA&gt;     </span></span>
<span id="cb534-69"><a href="mod-r-transform.html#cb534-69"></a><span class="co">#&gt;  6 Federated States of Micronesia     88397           0   88397 &lt;NA&gt;     </span></span>
<span id="cb534-70"><a href="mod-r-transform.html#cb534-70"></a><span class="co">#&gt;  7 Ivory Coast                        67500        4701   72201 &lt;NA&gt;     </span></span>
<span id="cb534-71"><a href="mod-r-transform.html#cb534-71"></a><span class="co">#&gt;  8 Jersey and Guernsey                 2985        1499    4484 &lt;NA&gt;     </span></span>
<span id="cb534-72"><a href="mod-r-transform.html#cb534-72"></a><span class="co">#&gt;  9 Macao                               1500           0    1500 &lt;NA&gt;     </span></span>
<span id="cb534-73"><a href="mod-r-transform.html#cb534-73"></a><span class="co">#&gt; 10 Myanmar                          2072390     1017644 3090034 &lt;NA&gt;     </span></span>
<span id="cb534-74"><a href="mod-r-transform.html#cb534-74"></a><span class="co">#&gt; 11 North Macedonia                      306         986    1292 &lt;NA&gt;     </span></span>
<span id="cb534-75"><a href="mod-r-transform.html#cb534-75"></a><span class="co">#&gt; 12 Palestine                           3306         280    3586 &lt;NA&gt;     </span></span>
<span id="cb534-76"><a href="mod-r-transform.html#cb534-76"></a><span class="co">#&gt; 13 Republic of the Congo              86748         177   86925 &lt;NA&gt;     </span></span>
<span id="cb534-77"><a href="mod-r-transform.html#cb534-77"></a><span class="co">#&gt; 14 Saint Kitts and Nevis              65734           1   65735 &lt;NA&gt;     </span></span>
<span id="cb534-78"><a href="mod-r-transform.html#cb534-78"></a><span class="co">#&gt; 15 Saint Lucia                         2097          32    2129 &lt;NA&gt;     </span></span>
<span id="cb534-79"><a href="mod-r-transform.html#cb534-79"></a><span class="co">#&gt; 16 Saint Vincent and the Grenadines   23077           0   23077 &lt;NA&gt;     </span></span>
<span id="cb534-80"><a href="mod-r-transform.html#cb534-80"></a><span class="co">#&gt; 17 São Tomé and Príncipe              11750           0   11750 &lt;NA&gt;     </span></span>
<span id="cb534-81"><a href="mod-r-transform.html#cb534-81"></a><span class="co">#&gt; 18 Trinidad and Tobago                13027          11   13038 &lt;NA&gt;     </span></span>
<span id="cb534-82"><a href="mod-r-transform.html#cb534-82"></a><span class="co">#&gt; 19 Turks and Caicos Islands            2780           0    2780 &lt;NA&gt;     </span></span>
<span id="cb534-83"><a href="mod-r-transform.html#cb534-83"></a><span class="co">#&gt; 20 US Virgin Islands                    551           8     559 &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#wdRH2XJToD5nAn2qotNI">
Solution
</button>
<div id="uJvbajOMQKhGqvS0wQpV" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uJvbajOMQKhGqvS0wQpV-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uJvbajOMQKhGqvS0wQpV-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="mod-r-transform.html#cb535-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb535-2"><a href="mod-r-transform.html#cb535-2"></a><span class="st">  </span><span class="kw">anti_join</span>(___)      <span class="co"># countries not belonging to a continent</span></span>
<span id="cb535-3"><a href="mod-r-transform.html#cb535-3"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb535-4"><a href="mod-r-transform.html#cb535-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb535-5"><a href="mod-r-transform.html#cb535-5"></a><span class="st">  </span><span class="kw">left_join</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb535-6"><a href="mod-r-transform.html#cb535-6"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb535-7"><a href="mod-r-transform.html#cb535-7"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb535-8"><a href="mod-r-transform.html#cb535-8"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(___))   <span class="co"># same result - countries not belonging to a continent</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uJvbajOMQKhGqvS0wQpV">
Hint 2
</button>
<div id="T83eN14pj2i0bDcYVFMH" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="T83eN14pj2i0bDcYVFMH-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="T83eN14pj2i0bDcYVFMH-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<p>
You could use <code>anti_join</code> to find missing values. Use <code>left_join</code> to join the datasets.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#T83eN14pj2i0bDcYVFMH">
Hint 1
</button>
<ol style="list-style-type: decimal">
<li>Use a mutating join to add a continent column to the <code>fisheries</code> dataset. Are there some countries which do not belong to a continent?</li>
</ol>
<div id="Bd08VSWgzwxgjxCf6Uk0" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Bd08VSWgzwxgjxCf6Uk0-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Bd08VSWgzwxgjxCf6Uk0-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="mod-r-transform.html#cb536-1"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span></span>
<span id="cb536-2"><a href="mod-r-transform.html#cb536-2"></a><span class="st">  </span><span class="kw">filter</span>(total <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Bd08VSWgzwxgjxCf6Uk0">
Solution
</button>
<div id="96nNdlFNLhZ8IOWaJMvX" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="96nNdlFNLhZ8IOWaJMvX-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="96nNdlFNLhZ8IOWaJMvX-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="mod-r-transform.html#cb537-1"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span></span>
<span id="cb537-2"><a href="mod-r-transform.html#cb537-2"></a><span class="st">  </span><span class="kw">filter</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#96nNdlFNLhZ8IOWaJMvX">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>Filter out countries whose total harvest was less than 100,000 tons.</li>
</ol>
<div id="aFOeMSATv1NFZ4e3IJRR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="aFOeMSATv1NFZ4e3IJRR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="aFOeMSATv1NFZ4e3IJRR-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="mod-r-transform.html#cb538-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb538-2"><a href="mod-r-transform.html#cb538-2"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb538-3"><a href="mod-r-transform.html#cb538-3"></a><span class="co">#&gt;   country                          capture aquaculture   total continent</span></span>
<span id="cb538-4"><a href="mod-r-transform.html#cb538-4"></a><span class="co">#&gt;   &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb538-5"><a href="mod-r-transform.html#cb538-5"></a><span class="co">#&gt; 1 Democratic Republic of the Congo  237372        3161  240533 &lt;NA&gt;     </span></span>
<span id="cb538-6"><a href="mod-r-transform.html#cb538-6"></a><span class="co">#&gt; 2 Myanmar                          2072390     1017644 3090034 &lt;NA&gt;</span></span>
<span id="cb538-7"><a href="mod-r-transform.html#cb538-7"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span></span>
<span id="cb538-8"><a href="mod-r-transform.html#cb538-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">continent =</span> <span class="kw">case_when</span>(</span>
<span id="cb538-9"><a href="mod-r-transform.html#cb538-9"></a>    country <span class="op">==</span><span class="st"> &quot;Democratic Republic of the Congo&quot;</span> <span class="op">~</span><span class="st"> &quot;Africa&quot;</span>,</span>
<span id="cb538-10"><a href="mod-r-transform.html#cb538-10"></a>    country <span class="op">==</span><span class="st"> &quot;Hong Kong&quot;</span>                        <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb538-11"><a href="mod-r-transform.html#cb538-11"></a>    country <span class="op">==</span><span class="st"> &quot;Myanmar&quot;</span>                          <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb538-12"><a href="mod-r-transform.html#cb538-12"></a>    <span class="ot">TRUE</span>                                          <span class="op">~</span><span class="st"> </span>continent</span>
<span id="cb538-13"><a href="mod-r-transform.html#cb538-13"></a>    )</span>
<span id="cb538-14"><a href="mod-r-transform.html#cb538-14"></a>  )</span>
<span id="cb538-15"><a href="mod-r-transform.html#cb538-15"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb538-16"><a href="mod-r-transform.html#cb538-16"></a><span class="co">#&gt; # A tibble: 0 × 5</span></span>
<span id="cb538-17"><a href="mod-r-transform.html#cb538-17"></a><span class="co">#&gt; # … with 5 variables: country &lt;chr&gt;, capture &lt;dbl&gt;, aquaculture &lt;dbl&gt;, total &lt;dbl&gt;, continent &lt;chr&gt;</span></span>
<span id="cb538-18"><a href="mod-r-transform.html#cb538-18"></a><span class="co">#&gt; # ℹ Use `colnames()` to see all variable names</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#aFOeMSATv1NFZ4e3IJRR">
Solution
</button>
<div id="zbJrKftq5IWNqrgVn2GC" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="zbJrKftq5IWNqrgVn2GC-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="zbJrKftq5IWNqrgVn2GC-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="mod-r-transform.html#cb539-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb539-2"><a href="mod-r-transform.html#cb539-2"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span></span>
<span id="cb539-3"><a href="mod-r-transform.html#cb539-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">continent =</span> <span class="kw">case_when</span>(</span>
<span id="cb539-4"><a href="mod-r-transform.html#cb539-4"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Africa&quot;</span>,</span>
<span id="cb539-5"><a href="mod-r-transform.html#cb539-5"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb539-6"><a href="mod-r-transform.html#cb539-6"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb539-7"><a href="mod-r-transform.html#cb539-7"></a>    <span class="ot">TRUE</span>           <span class="op">~</span><span class="st"> </span>continent</span>
<span id="cb539-8"><a href="mod-r-transform.html#cb539-8"></a>    )</span>
<span id="cb539-9"><a href="mod-r-transform.html#cb539-9"></a>  )</span>
<span id="cb539-10"><a href="mod-r-transform.html#cb539-10"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#zbJrKftq5IWNqrgVn2GC">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>If still any countries not belonging to a continent then add them to the closest continent.</li>
</ol>
<div id="oqpG1dkVMJMMXePahtwQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oqpG1dkVMJMMXePahtwQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oqpG1dkVMJMMXePahtwQ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="mod-r-transform.html#cb540-1"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb540-2"><a href="mod-r-transform.html#cb540-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">aquaculture_perc =</span> aquaculture <span class="op">/</span><span class="st"> </span>total)</span></code></pre></div>
<p>
The percentage of fish harvest done using aquaculture.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oqpG1dkVMJMMXePahtwQ">
Solution
</button>
<div id="dB4ZolZzzJANXohtiFJk" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="dB4ZolZzzJANXohtiFJk-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="dB4ZolZzzJANXohtiFJk-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="mod-r-transform.html#cb541-1"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb541-2"><a href="mod-r-transform.html#cb541-2"></a><span class="st">  </span><span class="kw">mutate</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#dB4ZolZzzJANXohtiFJk">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Add column <code>aquaculture_perc = aquaculture / total</code> and explain the variable.</li>
</ol>
<div id="CHtA8jXXhelHzx1kML1l" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CHtA8jXXhelHzx1kML1l-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CHtA8jXXhelHzx1kML1l-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="mod-r-transform.html#cb542-1"></a>fisheries <span class="op">%&gt;%</span><span class="st">                 </span></span>
<span id="cb542-2"><a href="mod-r-transform.html#cb542-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st">                      </span></span>
<span id="cb542-3"><a href="mod-r-transform.html#cb542-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_ap =</span> <span class="kw">mean</span>(aquaculture_perc))           </span>
<span id="cb542-4"><a href="mod-r-transform.html#cb542-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb542-5"><a href="mod-r-transform.html#cb542-5"></a><span class="co">#&gt;   continent mean_ap</span></span>
<span id="cb542-6"><a href="mod-r-transform.html#cb542-6"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb542-7"><a href="mod-r-transform.html#cb542-7"></a><span class="co">#&gt; 1 Africa     0.0943</span></span>
<span id="cb542-8"><a href="mod-r-transform.html#cb542-8"></a><span class="co">#&gt; 2 Americas   0.192 </span></span>
<span id="cb542-9"><a href="mod-r-transform.html#cb542-9"></a><span class="co">#&gt; 3 Asia       0.367 </span></span>
<span id="cb542-10"><a href="mod-r-transform.html#cb542-10"></a><span class="co">#&gt; 4 Europe     0.165 </span></span>
<span id="cb542-11"><a href="mod-r-transform.html#cb542-11"></a><span class="co">#&gt; 5 Oceania    0.150</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CHtA8jXXhelHzx1kML1l">
Solution
</button>
<div id="96iR1vmQ8oiPA0LBYaHv" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="96iR1vmQ8oiPA0LBYaHv-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="96iR1vmQ8oiPA0LBYaHv-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="mod-r-transform.html#cb543-1"></a>fisheries <span class="op">%&gt;%</span><span class="st">                  </span><span class="co"># start with the fisheries data frame</span></span>
<span id="cb543-2"><a href="mod-r-transform.html#cb543-2"></a><span class="st">  </span>___ <span class="op">%&gt;%</span><span class="st">                      </span><span class="co"># group by continent</span></span>
<span id="cb543-3"><a href="mod-r-transform.html#cb543-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">mean_ap =</span> ___)           <span class="co"># calculate mean aquaculture</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#96iR1vmQ8oiPA0LBYaHv">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Calculate the mean aquaculture percentage (we’ll call it <code>mean_ap</code> for short) for continents in the fisheries data.</li>
</ol>
<div id="hHibPA19aD2urpbinrhK" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="hHibPA19aD2urpbinrhK-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="hHibPA19aD2urpbinrhK-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="mod-r-transform.html#cb544-1"></a>fisheries_summary_continent &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st">                 </span></span>
<span id="cb544-2"><a href="mod-r-transform.html#cb544-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st">                      </span></span>
<span id="cb544-3"><a href="mod-r-transform.html#cb544-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_ap =</span> <span class="kw">mean</span>(aquaculture_perc), <span class="dt">min_ap =</span> <span class="kw">min</span>(aquaculture_perc), <span class="dt">max_ap =</span> <span class="kw">max</span>(aquaculture_perc)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb544-4"><a href="mod-r-transform.html#cb544-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb544-5"><a href="mod-r-transform.html#cb544-5"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb544-6"><a href="mod-r-transform.html#cb544-6"></a><span class="co">#&gt;   continent mean_ap  min_ap max_ap</span></span>
<span id="cb544-7"><a href="mod-r-transform.html#cb544-7"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb544-8"><a href="mod-r-transform.html#cb544-8"></a><span class="co">#&gt; 1 Africa     0.0943 0        0.803</span></span>
<span id="cb544-9"><a href="mod-r-transform.html#cb544-9"></a><span class="co">#&gt; 2 Americas   0.192  0        0.529</span></span>
<span id="cb544-10"><a href="mod-r-transform.html#cb544-10"></a><span class="co">#&gt; 3 Asia       0.367  0        0.782</span></span>
<span id="cb544-11"><a href="mod-r-transform.html#cb544-11"></a><span class="co">#&gt; 4 Europe     0.165  0.00682  0.618</span></span>
<span id="cb544-12"><a href="mod-r-transform.html#cb544-12"></a><span class="co">#&gt; 5 Oceania    0.150  0.0197   0.357</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#hHibPA19aD2urpbinrhK">
Solution
</button>
<div id="UmPaI9HCDWvaGNY9f10f" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="UmPaI9HCDWvaGNY9f10f-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="UmPaI9HCDWvaGNY9f10f-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="mod-r-transform.html#cb545-1"></a>fisheries_summary_continent &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># start with the fisheries data frame</span></span>
<span id="cb545-2"><a href="mod-r-transform.html#cb545-2"></a><span class="st">  </span>___ <span class="op">%&gt;%</span><span class="st">                                       </span><span class="co"># group by continent</span></span>
<span id="cb545-3"><a href="mod-r-transform.html#cb545-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">mean_ap =</span> ___, <span class="dt">min_ap =</span> ___, ___)         <span class="co"># calculate mean aquaculture</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#UmPaI9HCDWvaGNY9f10f">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li>Now expand your calculations to also calculate the minimum and maximum
aquaculture percentage for continents in the fisheries data and store the summary table in a data frame called <code>fisheries_summary_continent</code>.</li>
</ol>
<div id="CN9hc3P6OSc4L1Lmjo39" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CN9hc3P6OSc4L1Lmjo39-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CN9hc3P6OSc4L1Lmjo39-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="mod-r-transform.html#cb546-1"></a>fisheries_summary_continent <span class="op">%&gt;%</span><span class="st">      </span></span>
<span id="cb546-2"><a href="mod-r-transform.html#cb546-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean_ap))                             </span>
<span id="cb546-3"><a href="mod-r-transform.html#cb546-3"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb546-4"><a href="mod-r-transform.html#cb546-4"></a><span class="co">#&gt;   continent mean_ap  min_ap max_ap</span></span>
<span id="cb546-5"><a href="mod-r-transform.html#cb546-5"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb546-6"><a href="mod-r-transform.html#cb546-6"></a><span class="co">#&gt; 1 Asia       0.367  0        0.782</span></span>
<span id="cb546-7"><a href="mod-r-transform.html#cb546-7"></a><span class="co">#&gt; 2 Americas   0.192  0        0.529</span></span>
<span id="cb546-8"><a href="mod-r-transform.html#cb546-8"></a><span class="co">#&gt; 3 Europe     0.165  0.00682  0.618</span></span>
<span id="cb546-9"><a href="mod-r-transform.html#cb546-9"></a><span class="co">#&gt; 4 Oceania    0.150  0.0197   0.357</span></span>
<span id="cb546-10"><a href="mod-r-transform.html#cb546-10"></a><span class="co">#&gt; 5 Africa     0.0943 0        0.803</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CN9hc3P6OSc4L1Lmjo39">
Solution
</button>
<div id="eOB77cVUsBlD98sfSihe" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="eOB77cVUsBlD98sfSihe-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="eOB77cVUsBlD98sfSihe-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="mod-r-transform.html#cb547-1"></a>fisheries_summary_continent <span class="op">%&gt;%</span><span class="st">      </span><span class="co"># start with the fisheries_summary_continent data frame</span></span>
<span id="cb547-2"><a href="mod-r-transform.html#cb547-2"></a><span class="st">  </span>___                                <span class="co"># order in descending order of mean_ap</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#eOB77cVUsBlD98sfSihe">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>Take the <code>fisheries_summary_continent</code> data frame and order the results in descending
order of mean aquaculture percentage.</li>
</ol>
<div id="uCQ29hjQLU1qeBXsELmE" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uCQ29hjQLU1qeBXsELmE-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uCQ29hjQLU1qeBXsELmE-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="mod-r-transform.html#cb548-1"></a><span class="kw">ggplot</span>(fisheries_summary_continent, </span>
<span id="cb548-2"><a href="mod-r-transform.html#cb548-2"></a>       <span class="kw">aes</span>(<span class="dt">y =</span> <span class="kw">reorder</span>(continent, mean_ap), <span class="dt">x =</span> mean_ap)) <span class="op">+</span></span>
<span id="cb548-3"><a href="mod-r-transform.html#cb548-3"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb548-4"><a href="mod-r-transform.html#cb548-4"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb548-5"><a href="mod-r-transform.html#cb548-5"></a>    <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb548-6"><a href="mod-r-transform.html#cb548-6"></a>    <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb548-7"><a href="mod-r-transform.html#cb548-7"></a>    <span class="dt">title =</span> <span class="st">&quot;Average share of aquaculture by continent&quot;</span>,</span>
<span id="cb548-8"><a href="mod-r-transform.html#cb548-8"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;out of total fisheries harvest&quot;</span>,</span>
<span id="cb548-9"><a href="mod-r-transform.html#cb548-9"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: bit.ly/2VrawTt&quot;</span></span>
<span id="cb548-10"><a href="mod-r-transform.html#cb548-10"></a>  ) </span></code></pre></div>
<img src="TFA_files/figure-html/unnamed-chunk-428-1.png" width="672" style="display: block; margin: auto;" />
<p>
An example plot
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uCQ29hjQLU1qeBXsELmE">
Solution
</button>
<ol start="8" style="list-style-type: decimal">
<li>If you already have read the module about visualizations, then try to make some relevant plots.</li>
</ol>
</div>
<div id="ex-company" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.5</span> Exercise (company ranking)<a href="mod-r-transform.html#ex-company" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>This exercise is a slightly modified version an exam assignment (exam 2021-A2).</em></p>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The dataset <code>companies</code>, in the <code>tfa</code> package, lists approx. 1000 of the world’s biggest companies, measured by sales, profits, assets and market value. The column/variables are:</p>
<ul>
<li><code>name</code>: the name of the company.</li>
<li><code>country</code>: the country the company is situated in.</li>
<li><code>category</code>: the products the company produces.</li>
<li><code>sales</code>: the amount of sales of the company in billion USD.</li>
<li><code>profits</code>: the profit of the company in billion USD.</li>
<li><code>assets</code>: the assets of the company in billion USD.</li>
<li><code>marketvalue</code>: the market value of the company in billion USD.</li>
</ul>
<p>You can load the dataset using:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="mod-r-transform.html#cb549-1"></a><span class="co"># remotes::install_github(&quot;bss-osca/tfa-package&quot;, build = FALSE)  # run if tfa not installed</span></span>
<span id="cb549-2"><a href="mod-r-transform.html#cb549-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb549-3"><a href="mod-r-transform.html#cb549-3"></a>companies &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/companies.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span></code></pre></div>
<p>Use the <em>dplyr</em> package in <em>tidyverse</em> to calculate relevant summary tables (data frames) and answer the following questions.</p>
<!-- Q1 -->
<div id="4PCecP9BQO30sIxfqQvk" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="4PCecP9BQO30sIxfqQvk-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="4PCecP9BQO30sIxfqQvk-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="mod-r-transform.html#cb550-1"></a>companies</span>
<span id="cb550-2"><a href="mod-r-transform.html#cb550-2"></a><span class="co">#&gt; # A tibble: 1,002 × 7</span></span>
<span id="cb550-3"><a href="mod-r-transform.html#cb550-3"></a><span class="co">#&gt;    name                country        category                    sales profits assets marketvalue</span></span>
<span id="cb550-4"><a href="mod-r-transform.html#cb550-4"></a><span class="co">#&gt;    &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;                       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb550-5"><a href="mod-r-transform.html#cb550-5"></a><span class="co">#&gt;  1 General Electric    United States  Conglomerates               134.    15.6   627.         329.</span></span>
<span id="cb550-6"><a href="mod-r-transform.html#cb550-6"></a><span class="co">#&gt;  2 Microsoft           United States  Software &amp; services          34.3    8.88   85.9        287.</span></span>
<span id="cb550-7"><a href="mod-r-transform.html#cb550-7"></a><span class="co">#&gt;  3 Pfizer              United States  Drugs &amp; biotechnology        40.4    6.2   120.         285.</span></span>
<span id="cb550-8"><a href="mod-r-transform.html#cb550-8"></a><span class="co">#&gt;  4 ExxonMobil          United States  Oil &amp; gas operations        223.    21.0   167.         277.</span></span>
<span id="cb550-9"><a href="mod-r-transform.html#cb550-9"></a><span class="co">#&gt;  5 Citigroup           United States  Banking                      94.7   17.8  1264.         255.</span></span>
<span id="cb550-10"><a href="mod-r-transform.html#cb550-10"></a><span class="co">#&gt;  6 Wal-Mart Stores     United States  Retailing                   256.     9.05  105.         244.</span></span>
<span id="cb550-11"><a href="mod-r-transform.html#cb550-11"></a><span class="co">#&gt;  7 Intel               United States  Semiconductors               30.1    5.64   47.1        197.</span></span>
<span id="cb550-12"><a href="mod-r-transform.html#cb550-12"></a><span class="co">#&gt;  8 American Intl Group United States  Insurance                    76.7    6.46  648.         195.</span></span>
<span id="cb550-13"><a href="mod-r-transform.html#cb550-13"></a><span class="co">#&gt;  9 HSBC Group          United Kingdom Banking                      44.3    6.66  758.         178.</span></span>
<span id="cb550-14"><a href="mod-r-transform.html#cb550-14"></a><span class="co">#&gt; 10 Vodafone            United Kingdom Telecommunications services  48.0  -15.5   256.         175.</span></span>
<span id="cb550-15"><a href="mod-r-transform.html#cb550-15"></a><span class="co">#&gt; # … with 992 more rows</span></span>
<span id="cb550-16"><a href="mod-r-transform.html#cb550-16"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>
1002 rows and 7 columns.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#4PCecP9BQO30sIxfqQvk">
Solution
</button>
<ol style="list-style-type: decimal">
<li>How many rows and columns do the dataset have?</li>
</ol>
<!-- Q2 -->
<div class="modal fade bs-example-modal-lg" id="Hgvjfk72NVwwdJXfrY5i" tabindex="-1" role="dialog" aria-labelledby="Hgvjfk72NVwwdJXfrY5i-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Hgvjfk72NVwwdJXfrY5i-title">
Solution
</h4>
</div>
<div class="modal-body">

<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="mod-r-transform.html#cb551-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb551-2"><a href="mod-r-transform.html#cb551-2"></a><span class="kw">skim</span>(companies)</span></code></pre></div>
<table style='width: auto;'
      class='table table-condensed'>
<caption>
<span id="tab:unnamed-chunk-431">Table 13.4: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
companies
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1002
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
name
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1002
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
country
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
category
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sales
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
15.24
</td>
<td style="text-align:right;">
23.67
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
7.96
</td>
<td style="text-align:right;">
17.09
</td>
<td style="text-align:right;">
256
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
profits
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.71
</td>
<td style="text-align:right;">
2.41
</td>
<td style="text-align:right;">
-25.83
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
0.42
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
▁▁▇▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
assets
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
57.34
</td>
<td style="text-align:right;">
136.14
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
6.74
</td>
<td style="text-align:right;">
15.03
</td>
<td style="text-align:right;">
39.63
</td>
<td style="text-align:right;">
1264
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
marketvalue
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
21.04
</td>
<td style="text-align:right;">
32.01
</td>
<td style="text-align:right;">
5.15
</td>
<td style="text-align:right;">
7.02
</td>
<td style="text-align:right;">
10.55
</td>
<td style="text-align:right;">
20.19
</td>
<td style="text-align:right;">
329
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
</tbody>
</table>
<p>
From the output we can see that there are 1002 different companies (one for each row) 27 different product categories and 42 different countries.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Hgvjfk72NVwwdJXfrY5i">
Solution
</button>
<div id="pOCG2WaatQEV4ejDBsIz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="pOCG2WaatQEV4ejDBsIz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="pOCG2WaatQEV4ejDBsIz-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="mod-r-transform.html#cb552-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb552-2"><a href="mod-r-transform.html#cb552-2"></a><span class="kw">skim</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#pOCG2WaatQEV4ejDBsIz">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>How many different companies are we considering, how many different product categories and how many different countries? Hint: the <em>skimr</em> package might be useful.</li>
</ol>
<!-- Q3 -->
<div id="jvkKN2tWLonmW6t8pYYj" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="jvkKN2tWLonmW6t8pYYj-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="jvkKN2tWLonmW6t8pYYj-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="mod-r-transform.html#cb553-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb553-2"><a href="mod-r-transform.html#cb553-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(marketvalue)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb553-3"><a href="mod-r-transform.html#cb553-3"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb553-4"><a href="mod-r-transform.html#cb553-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb553-5"><a href="mod-r-transform.html#cb553-5"></a><span class="co">#&gt; # A tibble: 3 × 7</span></span>
<span id="cb553-6"><a href="mod-r-transform.html#cb553-6"></a><span class="co">#&gt;   name             country       category              sales profits assets marketvalue</span></span>
<span id="cb553-7"><a href="mod-r-transform.html#cb553-7"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;                 &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb553-8"><a href="mod-r-transform.html#cb553-8"></a><span class="co">#&gt; 1 General Electric United States Conglomerates         134.    15.6   627.         329.</span></span>
<span id="cb553-9"><a href="mod-r-transform.html#cb553-9"></a><span class="co">#&gt; 2 Microsoft        United States Software &amp; services    34.3    8.88   85.9        287.</span></span>
<span id="cb553-10"><a href="mod-r-transform.html#cb553-10"></a><span class="co">#&gt; 3 Pfizer           United States Drugs &amp; biotechnology  40.4    6.2   120.         285.</span></span>
<span id="cb553-11"><a href="mod-r-transform.html#cb553-11"></a><span class="co"># or</span></span>
<span id="cb553-12"><a href="mod-r-transform.html#cb553-12"></a><span class="co"># companies %&gt;% </span></span>
<span id="cb553-13"><a href="mod-r-transform.html#cb553-13"></a><span class="co">#   slice_max(marketvalue, n = 3)</span></span></code></pre></div>
<p>
The 3 biggest companies are listed in the <code>name</code> column.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#jvkKN2tWLonmW6t8pYYj">
Solution
</button>
<div id="OoqnPAi531egBnndx83w" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="OoqnPAi531egBnndx83w-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="OoqnPAi531egBnndx83w-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="mod-r-transform.html#cb554-1"></a>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb554-2"><a href="mod-r-transform.html#cb554-2"></a><span class="st">   </span><span class="kw">slice_max</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#OoqnPAi531egBnndx83w">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>What are the 3 biggest companies with respect to market value?</li>
</ol>
<!-- Q4 -->
<div id="qMOx6hYsjd9TQ9pHdTZb" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="qMOx6hYsjd9TQ9pHdTZb-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="qMOx6hYsjd9TQ9pHdTZb-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="mod-r-transform.html#cb555-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb555-2"><a href="mod-r-transform.html#cb555-2"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb555-3"><a href="mod-r-transform.html#cb555-3"></a><span class="st">  </span><span class="kw">slice_max</span>(profits, <span class="dt">n =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb555-4"><a href="mod-r-transform.html#cb555-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb555-5"><a href="mod-r-transform.html#cb555-5"></a><span class="co">#&gt; # A tibble: 42 × 7</span></span>
<span id="cb555-6"><a href="mod-r-transform.html#cb555-6"></a><span class="co">#&gt; # Groups:   country [42]</span></span>
<span id="cb555-7"><a href="mod-r-transform.html#cb555-7"></a><span class="co">#&gt;    name                      country        category                    sales profits assets marke…¹</span></span>
<span id="cb555-8"><a href="mod-r-transform.html#cb555-8"></a><span class="co">#&gt;    &lt;chr&gt;                     &lt;chr&gt;          &lt;chr&gt;                       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb555-9"><a href="mod-r-transform.html#cb555-9"></a><span class="co">#&gt;  1 Natl Australia Bank       Australia      Banking                     15.3     2.69 270.     36.5 </span></span>
<span id="cb555-10"><a href="mod-r-transform.html#cb555-10"></a><span class="co">#&gt;  2 Erste Bank                Austria        Banking                      7.5     0.27 127.      8.12</span></span>
<span id="cb555-11"><a href="mod-r-transform.html#cb555-11"></a><span class="co">#&gt;  3 Dexia                     Belgium        Banking                     19.6     1.36 368.     21.6 </span></span>
<span id="cb555-12"><a href="mod-r-transform.html#cb555-12"></a><span class="co">#&gt;  4 ACE                       Bermuda        Insurance                   10.7     1.39  49.5    12.6 </span></span>
<span id="cb555-13"><a href="mod-r-transform.html#cb555-13"></a><span class="co">#&gt;  5 Petrobras-Petrsleo Brasil Brazil         Oil &amp; gas operations        22.6     2.29  27.1    35.5 </span></span>
<span id="cb555-14"><a href="mod-r-transform.html#cb555-14"></a><span class="co">#&gt;  6 Royal Bank of Canada      Canada         Banking                     18.8     2.28 305.     31.8 </span></span>
<span id="cb555-15"><a href="mod-r-transform.html#cb555-15"></a><span class="co">#&gt;  7 Garmin                    Cayman Islands Technology hardware &amp; equi…  0.57    0.18   0.86    5.19</span></span>
<span id="cb555-16"><a href="mod-r-transform.html#cb555-16"></a><span class="co">#&gt;  8 PetroChina                China          Oil &amp; gas operations        29.5     5.67  58.4    90.5 </span></span>
<span id="cb555-17"><a href="mod-r-transform.html#cb555-17"></a><span class="co">#&gt;  9 Den Danske Bank           Denmark        Banking                     12.6     1.57 309.     16.4 </span></span>
<span id="cb555-18"><a href="mod-r-transform.html#cb555-18"></a><span class="co">#&gt; 10 Nokia                     Finland        Technology hardware &amp; equi… 37.0     4.52  29.2   104.  </span></span>
<span id="cb555-19"><a href="mod-r-transform.html#cb555-19"></a><span class="co">#&gt; # … with 32 more rows, and abbreviated variable name ¹​marketvalue</span></span>
<span id="cb555-20"><a href="mod-r-transform.html#cb555-20"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>
The company with highest profit for each country is listed above. In Denmark the company is Den Danske Bank.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#qMOx6hYsjd9TQ9pHdTZb">
Solution
</button>
<div id="6UAQfZGI0Ih4yntWLS6E" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="6UAQfZGI0Ih4yntWLS6E-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="6UAQfZGI0Ih4yntWLS6E-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="mod-r-transform.html#cb556-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb556-2"><a href="mod-r-transform.html#cb556-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb556-3"><a href="mod-r-transform.html#cb556-3"></a><span class="st">  </span><span class="kw">slice_max</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb556-4"><a href="mod-r-transform.html#cb556-4"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#6UAQfZGI0Ih4yntWLS6E">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>For each country find the company with highest profit. What company has the highest profit in Denmark?</li>
</ol>
<!-- Q5 -->
<div id="NOf8S9Y1npCYc8hswj0l" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="NOf8S9Y1npCYc8hswj0l-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="NOf8S9Y1npCYc8hswj0l-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="mod-r-transform.html#cb557-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb557-2"><a href="mod-r-transform.html#cb557-2"></a><span class="st">  </span><span class="kw">group_by</span>(category) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb557-3"><a href="mod-r-transform.html#cb557-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">marketvalue =</span> <span class="kw">sum</span>(marketvalue)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb557-4"><a href="mod-r-transform.html#cb557-4"></a><span class="st">  </span><span class="kw">slice_max</span>(marketvalue, <span class="dt">n =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb557-5"><a href="mod-r-transform.html#cb557-5"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb557-6"><a href="mod-r-transform.html#cb557-6"></a><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span id="cb557-7"><a href="mod-r-transform.html#cb557-7"></a><span class="co">#&gt;   category                    marketvalue</span></span>
<span id="cb557-8"><a href="mod-r-transform.html#cb557-8"></a><span class="co">#&gt;   &lt;chr&gt;                             &lt;dbl&gt;</span></span>
<span id="cb557-9"><a href="mod-r-transform.html#cb557-9"></a><span class="co">#&gt; 1 Banking                           2858.</span></span>
<span id="cb557-10"><a href="mod-r-transform.html#cb557-10"></a><span class="co">#&gt; 2 Oil &amp; gas operations              1748.</span></span>
<span id="cb557-11"><a href="mod-r-transform.html#cb557-11"></a><span class="co">#&gt; 3 Drugs &amp; biotechnology             1732.</span></span>
<span id="cb557-12"><a href="mod-r-transform.html#cb557-12"></a><span class="co">#&gt; 4 Telecommunications services       1415.</span></span></code></pre></div>
<p>
The 4 product categories that have the highest total market value are given in the <code>category</code> column.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#NOf8S9Y1npCYc8hswj0l">
Solution
</button>
<div id="LP0KKSpeMmNwlIE9tXuz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="LP0KKSpeMmNwlIE9tXuz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="LP0KKSpeMmNwlIE9tXuz-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="mod-r-transform.html#cb558-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb558-2"><a href="mod-r-transform.html#cb558-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb558-3"><a href="mod-r-transform.html#cb558-3"></a><span class="st">  </span><span class="kw">summarise</span>(__) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb558-4"><a href="mod-r-transform.html#cb558-4"></a><span class="st">  </span><span class="kw">slice_max</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb558-5"><a href="mod-r-transform.html#cb558-5"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#LP0KKSpeMmNwlIE9tXuz">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Which 4 product categories have the highest total market value?</li>
</ol>
<!-- Q6 -->
<div id="YKfsyPjJSEgPgw3ckgsn" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="YKfsyPjJSEgPgw3ckgsn-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="YKfsyPjJSEgPgw3ckgsn-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="mod-r-transform.html#cb559-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb559-2"><a href="mod-r-transform.html#cb559-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb559-3"><a href="mod-r-transform.html#cb559-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> profits <span class="op">+</span><span class="st"> </span>assets <span class="op">+</span><span class="st"> </span>marketvalue) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb559-4"><a href="mod-r-transform.html#cb559-4"></a><span class="st">  </span><span class="kw">select</span>(name, category, value) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb559-5"><a href="mod-r-transform.html#cb559-5"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb559-6"><a href="mod-r-transform.html#cb559-6"></a><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span id="cb559-7"><a href="mod-r-transform.html#cb559-7"></a><span class="co">#&gt;   name            category                    value</span></span>
<span id="cb559-8"><a href="mod-r-transform.html#cb559-8"></a><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;                       &lt;dbl&gt;</span></span>
<span id="cb559-9"><a href="mod-r-transform.html#cb559-9"></a><span class="co">#&gt; 1 Moller-Maersk   Transportation               63.3</span></span>
<span id="cb559-10"><a href="mod-r-transform.html#cb559-10"></a><span class="co">#&gt; 2 Den Danske Bank Banking                     327. </span></span>
<span id="cb559-11"><a href="mod-r-transform.html#cb559-11"></a><span class="co">#&gt; 3 Novo-Nordisk    Drugs &amp; biotechnology        22.4</span></span>
<span id="cb559-12"><a href="mod-r-transform.html#cb559-12"></a><span class="co">#&gt; 4 TDC Group       Telecommunications services  22.4</span></span></code></pre></div>
<p>
The companies can be seen above. The company with lowest value is Novo-Nordisk (or TDC Group).
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#YKfsyPjJSEgPgw3ckgsn">
Solution
</button>
<div id="syYmZ4T9Y3j05tyJdebs" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="syYmZ4T9Y3j05tyJdebs-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="syYmZ4T9Y3j05tyJdebs-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="mod-r-transform.html#cb560-1"></a>dat &lt;-<span class="st"> </span>companies <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb560-2"><a href="mod-r-transform.html#cb560-2"></a><span class="st">  </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb560-3"><a href="mod-r-transform.html#cb560-3"></a><span class="st">  </span><span class="kw">mutate</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb560-4"><a href="mod-r-transform.html#cb560-4"></a><span class="st">  </span><span class="kw">select</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb560-5"><a href="mod-r-transform.html#cb560-5"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#syYmZ4T9Y3j05tyJdebs">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li>Create a new data frame only containing rows from Denmark and with columns <code>name</code>, <code>category</code> and a column <code>value</code> which equals the sum of columns <code>profits</code>, <code>assets</code> and <code>marketvalue</code>. Which company have the lowest value?</li>
</ol>
</div>
<div id="ex-titanic" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.6</span> Exercise (Titanic)<a href="mod-r-transform.html#ex-titanic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>This exercise is a slightly modified version an exam assignment (reexam 2021-A2).</em></p>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The dataset <code>titanic</code>, given in the appendix, lists approx. 1300 passengers on Titanic. The column/variables are:</p>
<ul>
<li><code>pclass</code>: Passenger class (1 = 1st; 2 = 2nd; 3 = 3rd).</li>
<li><code>survived</code>: Survival (0 = No; 1 = Yes).</li>
<li><code>name</code>: Name.</li>
<li><code>sex</code>: Sex.</li>
<li><code>age</code>: Age.</li>
<li><code>fare</code>: Passenger Fare.</li>
<li><code>cabin</code>: Cabin number.</li>
<li><code>embarked</code>: Port of embarkation (C = Cherbourg; Q = Queenstown; S = Southampton).</li>
<li><code>boat</code>: Lifeboat number.</li>
</ul>
<p>You can read the dataset file <code>titanic.csv</code> into the dataset <code>dat</code> using</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="mod-r-transform.html#cb561-1"></a><span class="co"># remotes::install_github(&quot;bss-osca/tfa-package&quot;, build = FALSE)  # run if tfa not installed</span></span>
<span id="cb561-2"><a href="mod-r-transform.html#cb561-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb561-3"><a href="mod-r-transform.html#cb561-3"></a>dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/titanic.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span></code></pre></div>
<p>Use the <em>dplyr</em> package in <em>tidyverse</em> to calculate relevant summary tables (data frames) and answer the following questions.</p>
<!-- Q1 -->
<div id="mI3RQdkaSDSlGhmNJ6Tj" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="mI3RQdkaSDSlGhmNJ6Tj-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="mI3RQdkaSDSlGhmNJ6Tj-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="mod-r-transform.html#cb562-1"></a>dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb562-2"><a href="mod-r-transform.html#cb562-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">male =</span> <span class="kw">if_else</span>(sex <span class="op">==</span><span class="st"> &quot;male&quot;</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>))</span>
<span id="cb562-3"><a href="mod-r-transform.html#cb562-3"></a>dat</span>
<span id="cb562-4"><a href="mod-r-transform.html#cb562-4"></a><span class="co">#&gt; # A tibble: 1,309 × 10</span></span>
<span id="cb562-5"><a href="mod-r-transform.html#cb562-5"></a><span class="co">#&gt;    pclass survived name                                  sex     age  fare cabin embar…¹ boat  male </span></span>
<span id="cb562-6"><a href="mod-r-transform.html#cb562-6"></a><span class="co">#&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                                 &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;lgl&gt;</span></span>
<span id="cb562-7"><a href="mod-r-transform.html#cb562-7"></a><span class="co">#&gt;  1      1        1 Allen, Miss. Elisabeth Walton         fema… 29    211.  B5    S       2     FALSE</span></span>
<span id="cb562-8"><a href="mod-r-transform.html#cb562-8"></a><span class="co">#&gt;  2      1        1 Allison, Master. Hudson Trevor        male   0.92 152.  C22 … S       11    TRUE </span></span>
<span id="cb562-9"><a href="mod-r-transform.html#cb562-9"></a><span class="co">#&gt;  3      1        0 Allison, Miss. Helen Loraine          fema…  2    152.  C22 … S       &lt;NA&gt;  FALSE</span></span>
<span id="cb562-10"><a href="mod-r-transform.html#cb562-10"></a><span class="co">#&gt;  4      1        0 Allison, Mr. Hudson Joshua Creighton  male  30    152.  C22 … S       &lt;NA&gt;  TRUE </span></span>
<span id="cb562-11"><a href="mod-r-transform.html#cb562-11"></a><span class="co">#&gt;  5      1        0 Allison, Mrs. Hudson J C (Bessie Wal… fema… 25    152.  C22 … S       &lt;NA&gt;  FALSE</span></span>
<span id="cb562-12"><a href="mod-r-transform.html#cb562-12"></a><span class="co">#&gt;  6      1        1 Anderson, Mr. Harry                   male  48     26.6 E12   S       3     TRUE </span></span>
<span id="cb562-13"><a href="mod-r-transform.html#cb562-13"></a><span class="co">#&gt;  7      1        1 Andrews, Miss. Kornelia Theodosia     fema… 63     78.0 D7    S       10    FALSE</span></span>
<span id="cb562-14"><a href="mod-r-transform.html#cb562-14"></a><span class="co">#&gt;  8      1        0 Andrews, Mr. Thomas Jr                male  39      0   A36   S       &lt;NA&gt;  TRUE </span></span>
<span id="cb562-15"><a href="mod-r-transform.html#cb562-15"></a><span class="co">#&gt;  9      1        1 Appleton, Mrs. Edward Dale (Charlott… fema… 53     51.5 C101  S       D     FALSE</span></span>
<span id="cb562-16"><a href="mod-r-transform.html#cb562-16"></a><span class="co">#&gt; 10      1        0 Artagaveytia, Mr. Ramon               male  71     49.5 &lt;NA&gt;  C       &lt;NA&gt;  TRUE </span></span>
<span id="cb562-17"><a href="mod-r-transform.html#cb562-17"></a><span class="co">#&gt; # … with 1,299 more rows, and abbreviated variable name ¹​embarked</span></span>
<span id="cb562-18"><a href="mod-r-transform.html#cb562-18"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>
We use <code>if_else</code> to set the new column.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#mI3RQdkaSDSlGhmNJ6Tj">
Solution
</button>
<div id="Wv0uZoQJPI7HHL1lRb61" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Wv0uZoQJPI7HHL1lRb61-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Wv0uZoQJPI7HHL1lRb61-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="mod-r-transform.html#cb563-1"></a>dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb563-2"><a href="mod-r-transform.html#cb563-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">male =</span> <span class="kw">if_else</span>(___))</span>
<span id="cb563-3"><a href="mod-r-transform.html#cb563-3"></a>dat</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Wv0uZoQJPI7HHL1lRb61">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Create a new column named <code>male</code> which is true if the person is a male.</li>
</ol>
<!-- Q2 -->
<div class="modal fade bs-example-modal-lg" id="B1wUnY60QCnVXv41Y6G8" tabindex="-1" role="dialog" aria-labelledby="B1wUnY60QCnVXv41Y6G8-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="B1wUnY60QCnVXv41Y6G8-title">
Solution
</h4>
</div>
<div class="modal-body">

<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="mod-r-transform.html#cb564-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb564-2"><a href="mod-r-transform.html#cb564-2"></a><span class="kw">skim</span>(dat)</span></code></pre></div>
<table style='width: auto;'
      class='table table-condensed'>
<caption>
<span id="tab:unnamed-chunk-444">Table 13.5: </span>Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
dat
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1309
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
logical
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
name
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1307
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
cabin
</td>
<td style="text-align:right;">
1014
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
186
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
embarked
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
boat
</td>
<td style="text-align:right;">
823
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
male
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:left;">
TRU: 843, FAL: 466
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
pclass
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
2.29
</td>
<td style="text-align:right;">
0.84
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
▃▁▃▁▇
</td>
</tr>
<tr>
<td style="text-align:left;">
survived
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
▇▁▁▁▅
</td>
</tr>
<tr>
<td style="text-align:left;">
age
</td>
<td style="text-align:right;">
263
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
29.88
</td>
<td style="text-align:right;">
14.41
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:right;">
28.0
</td>
<td style="text-align:right;">
39.0
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:left;">
▂▇▅▂▁
</td>
</tr>
<tr>
<td style="text-align:left;">
fare
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
33.30
</td>
<td style="text-align:right;">
51.76
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
14.4
</td>
<td style="text-align:right;">
31.3
</td>
<td style="text-align:right;">
512
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
</tbody>
</table>
<p>
From the output we can consider 1309 persons of which approx 64% are males. Approx. 38% of the passangers survived.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#B1wUnY60QCnVXv41Y6G8">
Solution
</button>
<div id="9Z3djNh3aGBHbQdwWFkW" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="9Z3djNh3aGBHbQdwWFkW-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="9Z3djNh3aGBHbQdwWFkW-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="mod-r-transform.html#cb565-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb565-2"><a href="mod-r-transform.html#cb565-2"></a>___</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#9Z3djNh3aGBHbQdwWFkW">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>How many persons are we considering, how many men (in percentage) and how many survived?</li>
</ol>
<!-- Q3 -->
<div id="8E76ejR9qz1XnWFTIxhk" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="8E76ejR9qz1XnWFTIxhk-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="8E76ejR9qz1XnWFTIxhk-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="mod-r-transform.html#cb566-1"></a>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-2"><a href="mod-r-transform.html#cb566-2"></a><span class="st">  </span><span class="kw">group_by</span>(sex, survived) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-3"><a href="mod-r-transform.html#cb566-3"></a><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-4"><a href="mod-r-transform.html#cb566-4"></a><span class="st">  </span><span class="kw">group_by</span>(sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-5"><a href="mod-r-transform.html#cb566-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rate =</span> n<span class="op">/</span><span class="kw">sum</span>(n))</span>
<span id="cb566-6"><a href="mod-r-transform.html#cb566-6"></a><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span id="cb566-7"><a href="mod-r-transform.html#cb566-7"></a><span class="co">#&gt; # Groups:   sex [2]</span></span>
<span id="cb566-8"><a href="mod-r-transform.html#cb566-8"></a><span class="co">#&gt;   sex    survived     n  rate</span></span>
<span id="cb566-9"><a href="mod-r-transform.html#cb566-9"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb566-10"><a href="mod-r-transform.html#cb566-10"></a><span class="co">#&gt; 1 female        0   127 0.273</span></span>
<span id="cb566-11"><a href="mod-r-transform.html#cb566-11"></a><span class="co">#&gt; 2 female        1   339 0.727</span></span>
<span id="cb566-12"><a href="mod-r-transform.html#cb566-12"></a><span class="co">#&gt; 3 male          0   682 0.809</span></span>
<span id="cb566-13"><a href="mod-r-transform.html#cb566-13"></a><span class="co">#&gt; 4 male          1   161 0.191</span></span>
<span id="cb566-14"><a href="mod-r-transform.html#cb566-14"></a><span class="co"># Alternatively</span></span>
<span id="cb566-15"><a href="mod-r-transform.html#cb566-15"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-16"><a href="mod-r-transform.html#cb566-16"></a><span class="st">  </span><span class="kw">group_by</span>(male) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-17"><a href="mod-r-transform.html#cb566-17"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">survived =</span> <span class="kw">sum</span>(survived)<span class="op">/</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb566-18"><a href="mod-r-transform.html#cb566-18"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb566-19"><a href="mod-r-transform.html#cb566-19"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb566-20"><a href="mod-r-transform.html#cb566-20"></a><span class="co">#&gt;   male  survived</span></span>
<span id="cb566-21"><a href="mod-r-transform.html#cb566-21"></a><span class="co">#&gt;   &lt;lgl&gt;    &lt;dbl&gt;</span></span>
<span id="cb566-22"><a href="mod-r-transform.html#cb566-22"></a><span class="co">#&gt; 1 FALSE    0.727</span></span>
<span id="cb566-23"><a href="mod-r-transform.html#cb566-23"></a><span class="co">#&gt; 2 TRUE     0.191</span></span></code></pre></div>
<p>
The survival rate for women and men are 73 and 19 percent, respectively.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#8E76ejR9qz1XnWFTIxhk">
Solution
</button>
<div id="0OS7F9PDWtWQID3mxuIF" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="0OS7F9PDWtWQID3mxuIF-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="0OS7F9PDWtWQID3mxuIF-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="mod-r-transform.html#cb567-1"></a>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb567-2"><a href="mod-r-transform.html#cb567-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb567-3"><a href="mod-r-transform.html#cb567-3"></a><span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb567-4"><a href="mod-r-transform.html#cb567-4"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb567-5"><a href="mod-r-transform.html#cb567-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rate =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#0OS7F9PDWtWQID3mxuIF">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>How many of the females survived in percent (and how many males)?</li>
</ol>
<!-- Q4 -->
<div id="JKcd6U2exxuTMOwgPTkj" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="JKcd6U2exxuTMOwgPTkj-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="JKcd6U2exxuTMOwgPTkj-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="mod-r-transform.html#cb568-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb568-2"><a href="mod-r-transform.html#cb568-2"></a><span class="st">  </span><span class="kw">filter</span>(age <span class="op">&lt;</span><span class="st"> </span><span class="dv">19</span>, survived <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb568-3"><a href="mod-r-transform.html#cb568-3"></a><span class="st">  </span><span class="kw">nrow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb568-4"><a href="mod-r-transform.html#cb568-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb568-5"><a href="mod-r-transform.html#cb568-5"></a><span class="co">#&gt; [1] 95</span></span></code></pre></div>
<p>
95 childern survived.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#JKcd6U2exxuTMOwgPTkj">
Solution
</button>
<div id="TPOfg3SV9IC7qL3dlXVk" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="TPOfg3SV9IC7qL3dlXVk-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="TPOfg3SV9IC7qL3dlXVk-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="mod-r-transform.html#cb569-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb569-2"><a href="mod-r-transform.html#cb569-2"></a><span class="st">  </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb569-3"><a href="mod-r-transform.html#cb569-3"></a><span class="st">  </span><span class="kw">nrow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb569-4"><a href="mod-r-transform.html#cb569-4"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#TPOfg3SV9IC7qL3dlXVk">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Define children as people with age below 19. How many children survived?</li>
</ol>
<!-- Q5 -->
<div id="spVnBNP50O9saSX3kg7b" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="spVnBNP50O9saSX3kg7b-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="spVnBNP50O9saSX3kg7b-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="mod-r-transform.html#cb570-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb570-2"><a href="mod-r-transform.html#cb570-2"></a><span class="st">  </span><span class="kw">group_by</span>(pclass) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb570-3"><a href="mod-r-transform.html#cb570-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">rate =</span> <span class="kw">sum</span>(survived)<span class="op">/</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb570-4"><a href="mod-r-transform.html#cb570-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb570-5"><a href="mod-r-transform.html#cb570-5"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb570-6"><a href="mod-r-transform.html#cb570-6"></a><span class="co">#&gt;   pclass  rate</span></span>
<span id="cb570-7"><a href="mod-r-transform.html#cb570-7"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb570-8"><a href="mod-r-transform.html#cb570-8"></a><span class="co">#&gt; 1      1 0.619</span></span>
<span id="cb570-9"><a href="mod-r-transform.html#cb570-9"></a><span class="co">#&gt; 2      2 0.430</span></span>
<span id="cb570-10"><a href="mod-r-transform.html#cb570-10"></a><span class="co">#&gt; 3      3 0.255</span></span></code></pre></div>
<p>
There seems to be a big difference in survival rate between first class (62%) and third class (26%).
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#spVnBNP50O9saSX3kg7b">
Solution
</button>
<div id="eLgZHu2toKPVY4JE6yLv" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="eLgZHu2toKPVY4JE6yLv-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="eLgZHu2toKPVY4JE6yLv-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="mod-r-transform.html#cb571-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb571-2"><a href="mod-r-transform.html#cb571-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb571-3"><a href="mod-r-transform.html#cb571-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">rate =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb571-4"><a href="mod-r-transform.html#cb571-4"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#eLgZHu2toKPVY4JE6yLv">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Did relatively more people survive at first class compared to third class?</li>
</ol>
<!-- Q6 -->
<div id="oPnFm5Dy2XfHUrU8Jl2v" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oPnFm5Dy2XfHUrU8Jl2v-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oPnFm5Dy2XfHUrU8Jl2v-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="mod-r-transform.html#cb572-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb572-2"><a href="mod-r-transform.html#cb572-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(boat)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb572-3"><a href="mod-r-transform.html#cb572-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">rate =</span> <span class="dv">1</span><span class="op">-</span><span class="kw">sum</span>(survived)<span class="op">/</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb572-4"><a href="mod-r-transform.html#cb572-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb572-5"><a href="mod-r-transform.html#cb572-5"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb572-6"><a href="mod-r-transform.html#cb572-6"></a><span class="co">#&gt;     rate</span></span>
<span id="cb572-7"><a href="mod-r-transform.html#cb572-7"></a><span class="co">#&gt;    &lt;dbl&gt;</span></span>
<span id="cb572-8"><a href="mod-r-transform.html#cb572-8"></a><span class="co">#&gt; 1 0.0185</span></span></code></pre></div>
<p>
The survival rate when entered the lifeboat was high. Only 1.85% died.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oPnFm5Dy2XfHUrU8Jl2v">
Solution
</button>
<div id="gP8vEj0FzieE5IXmGJwU" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="gP8vEj0FzieE5IXmGJwU-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="gP8vEj0FzieE5IXmGJwU-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="mod-r-transform.html#cb573-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb573-2"><a href="mod-r-transform.html#cb573-2"></a><span class="st">  </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb573-3"><a href="mod-r-transform.html#cb573-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">rate =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb573-4"><a href="mod-r-transform.html#cb573-4"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#gP8vEj0FzieE5IXmGJwU">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li>How many persons that entered a lifeboat did die in percent?</li>
</ol>
<!-- Q7 -->
<div id="yqy7JwdyyjOfFJqgmJdc" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="yqy7JwdyyjOfFJqgmJdc-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="yqy7JwdyyjOfFJqgmJdc-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="mod-r-transform.html#cb574-1"></a>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb574-2"><a href="mod-r-transform.html#cb574-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(name, <span class="st">&quot;Hansen&quot;</span>))</span>
<span id="cb574-3"><a href="mod-r-transform.html#cb574-3"></a><span class="co">#&gt; # A tibble: 6 × 10</span></span>
<span id="cb574-4"><a href="mod-r-transform.html#cb574-4"></a><span class="co">#&gt;   pclass survived name                                   sex     age  fare cabin embar…¹ boat  male </span></span>
<span id="cb574-5"><a href="mod-r-transform.html#cb574-5"></a><span class="co">#&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                                  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;lgl&gt;</span></span>
<span id="cb574-6"><a href="mod-r-transform.html#cb574-6"></a><span class="co">#&gt; 1      3        0 Hansen, Mr. Claus Peter                male     41 14.1  &lt;NA&gt;  S       &lt;NA&gt;  TRUE </span></span>
<span id="cb574-7"><a href="mod-r-transform.html#cb574-7"></a><span class="co">#&gt; 2      3        0 Hansen, Mr. Henrik Juul                male     26  7.85 &lt;NA&gt;  S       &lt;NA&gt;  TRUE </span></span>
<span id="cb574-8"><a href="mod-r-transform.html#cb574-8"></a><span class="co">#&gt; 3      3        0 Hansen, Mr. Henry Damsgaard            male     21  7.85 &lt;NA&gt;  S       &lt;NA&gt;  TRUE </span></span>
<span id="cb574-9"><a href="mod-r-transform.html#cb574-9"></a><span class="co">#&gt; 4      3        1 Hansen, Mrs. Claus Peter (Jennie L Ho… fema…    45 14.1  &lt;NA&gt;  S       11    FALSE</span></span>
<span id="cb574-10"><a href="mod-r-transform.html#cb574-10"></a><span class="co">#&gt; 5      3        0 Moen, Mr. Sigurd Hansen                male     25  7.65 F G73 S       &lt;NA&gt;  TRUE </span></span>
<span id="cb574-11"><a href="mod-r-transform.html#cb574-11"></a><span class="co">#&gt; 6      3        0 Nysveen, Mr. Johan Hansen              male     61  6.24 &lt;NA&gt;  S       &lt;NA&gt;  TRUE </span></span>
<span id="cb574-12"><a href="mod-r-transform.html#cb574-12"></a><span class="co">#&gt; # … with abbreviated variable name ¹​embarked</span></span></code></pre></div>
<p>
Only a single person survived.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#yqy7JwdyyjOfFJqgmJdc">
Solution
</button>
<div id="EFsm1ktt7yuGtpR4rKEp" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="EFsm1ktt7yuGtpR4rKEp-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="EFsm1ktt7yuGtpR4rKEp-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="mod-r-transform.html#cb575-1"></a>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb575-2"><a href="mod-r-transform.html#cb575-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(___))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#EFsm1ktt7yuGtpR4rKEp">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>How many persons with <code>Hansen</code> in their name survived?</li>
</ol>
</div>
<div id="ex-r-covid" class="section level3 hasAnchor">
<h3><span class="header-section-number">13.5.7</span> Exercise (covid)<a href="mod-r-transform.html#ex-r-covid" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>This exercise is a slightly modified version an exam assignment (reexam 2022-A2).</em></p>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>Consider COVID-19 data obtained from Our World in Data in the file <code>covid.csv</code>. The dataset contains data from different countries. Some of the columns/variables are:</p>
<ul>
<li><code>cases</code>: New confirmed cases of COVID-19.
<ul>
<li><code>deaths</code>: New deaths attributed to COVID-19.</li>
<li><code>icu_patients</code>: Number of COVID-19 patients in intensive care units (ICUs) on a given day.</li>
<li><code>hosp_patients</code>: Number of COVID-19 patients in hospital on a given day.</li>
<li><code>tests</code>: Total tests for COVID-19.</li>
<li><code>positive_rate</code>: The share of COVID-19 tests that are positive, given as a rolling 7-day average.</li>
<li><code>vac</code>: Total number of people who received at least one vaccine dose.</li>
<li><code>fully_vac</code>: Total number of people who received all doses prescribed by the vaccination protocol.</li>
<li><code>population</code>: Country population.</li>
</ul></li>
</ul>
<p>Other columns are <code>date</code>, <code>country</code>, <code>month</code> and <code>year</code>. You can read the dataset file using</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="mod-r-transform.html#cb576-1"></a><span class="co"># remotes::install_github(&quot;bss-osca/tfa-package&quot;, build = FALSE)  # run if tfa not installed</span></span>
<span id="cb576-2"><a href="mod-r-transform.html#cb576-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb576-3"><a href="mod-r-transform.html#cb576-3"></a>dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/covid.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span></code></pre></div>
<p>Use the <em>dplyr</em> package in <em>tidyverse</em> to calculate relevant summary tables (tibbles/data frames) and answer the following questions.</p>
<!-- Q1 -->
<div id="zE5drBVMpTEGp1PaWgVY" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="zE5drBVMpTEGp1PaWgVY-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="zE5drBVMpTEGp1PaWgVY-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="mod-r-transform.html#cb577-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb577-2"><a href="mod-r-transform.html#cb577-2"></a><span class="st">   </span><span class="kw">distinct</span>(country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb577-3"><a href="mod-r-transform.html#cb577-3"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb577-4"><a href="mod-r-transform.html#cb577-4"></a><span class="co">#&gt; # A tibble: 4 × 1</span></span>
<span id="cb577-5"><a href="mod-r-transform.html#cb577-5"></a><span class="co">#&gt;   country       </span></span>
<span id="cb577-6"><a href="mod-r-transform.html#cb577-6"></a><span class="co">#&gt;   &lt;chr&gt;         </span></span>
<span id="cb577-7"><a href="mod-r-transform.html#cb577-7"></a><span class="co">#&gt; 1 Denmark       </span></span>
<span id="cb577-8"><a href="mod-r-transform.html#cb577-8"></a><span class="co">#&gt; 2 Germany       </span></span>
<span id="cb577-9"><a href="mod-r-transform.html#cb577-9"></a><span class="co">#&gt; 3 Norway        </span></span>
<span id="cb577-10"><a href="mod-r-transform.html#cb577-10"></a><span class="co">#&gt; 4 United Kingdom</span></span>
<span id="cb577-11"><a href="mod-r-transform.html#cb577-11"></a></span>
<span id="cb577-12"><a href="mod-r-transform.html#cb577-12"></a>res2 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb577-13"><a href="mod-r-transform.html#cb577-13"></a><span class="st">   </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb577-14"><a href="mod-r-transform.html#cb577-14"></a><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">start =</span> <span class="kw">min</span>(date), <span class="dt">end =</span> <span class="kw">max</span>(date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb577-15"><a href="mod-r-transform.html#cb577-15"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb577-16"><a href="mod-r-transform.html#cb577-16"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb577-17"><a href="mod-r-transform.html#cb577-17"></a><span class="co">#&gt;   start      end       </span></span>
<span id="cb577-18"><a href="mod-r-transform.html#cb577-18"></a><span class="co">#&gt;   &lt;date&gt;     &lt;date&gt;    </span></span>
<span id="cb577-19"><a href="mod-r-transform.html#cb577-19"></a><span class="co">#&gt; 1 2020-01-27 2021-11-24</span></span></code></pre></div>
<p>
We have a total of 4 countries with data from 2020-01-27 to 2021-11-24.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#zE5drBVMpTEGp1PaWgVY">
Solution
</button>
<div id="qJ2omr40arR2PMT8TGUu" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="qJ2omr40arR2PMT8TGUu-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="qJ2omr40arR2PMT8TGUu-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="mod-r-transform.html#cb578-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb578-2"><a href="mod-r-transform.html#cb578-2"></a><span class="st">   </span><span class="kw">distinct</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb578-3"><a href="mod-r-transform.html#cb578-3"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb578-4"><a href="mod-r-transform.html#cb578-4"></a></span>
<span id="cb578-5"><a href="mod-r-transform.html#cb578-5"></a>res2 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb578-6"><a href="mod-r-transform.html#cb578-6"></a><span class="st">   </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb578-7"><a href="mod-r-transform.html#cb578-7"></a><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">start =</span> ___, <span class="dt">end =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb578-8"><a href="mod-r-transform.html#cb578-8"></a><span class="st">   </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#qJ2omr40arR2PMT8TGUu">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Which countries are considered and what is the timespan of the data?</li>
</ol>
<!-- Q2 -->
<div id="Vh3gn12ZmjGnQAbpm54x" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Vh3gn12ZmjGnQAbpm54x-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Vh3gn12ZmjGnQAbpm54x-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="mod-r-transform.html#cb579-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb579-2"><a href="mod-r-transform.html#cb579-2"></a><span class="st">   </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>, date <span class="op">==</span><span class="st"> &quot;2021-11-22&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb579-3"><a href="mod-r-transform.html#cb579-3"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb579-4"><a href="mod-r-transform.html#cb579-4"></a><span class="co">#&gt; # A tibble: 1 × 13</span></span>
<span id="cb579-5"><a href="mod-r-transform.html#cb579-5"></a><span class="co">#&gt;   date       country cases deaths icu_pat…¹ hosp_…² tests posit…³    vac fully…⁴ popul…⁵ month  year</span></span>
<span id="cb579-6"><a href="mod-r-transform.html#cb579-6"></a><span class="co">#&gt;   &lt;date&gt;     &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb579-7"><a href="mod-r-transform.html#cb579-7"></a><span class="co">#&gt; 1 2021-11-22 Denmark  3810      6        NA      NA    NA      NA 4.54e6 4441376 5813302    11  2021</span></span>
<span id="cb579-8"><a href="mod-r-transform.html#cb579-8"></a><span class="co">#&gt; # … with abbreviated variable names ¹​icu_patients, ²​hosp_patients, ³​positive_rate, ⁴​fully_vac,</span></span>
<span id="cb579-9"><a href="mod-r-transform.html#cb579-9"></a><span class="co">#&gt; #   ⁵​population</span></span></code></pre></div>
<p>
The number of confirmed cases was 3810.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Vh3gn12ZmjGnQAbpm54x">
Solution
</button>
<div id="5DRmqcO8ssKVUnuapoHV" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="5DRmqcO8ssKVUnuapoHV-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="5DRmqcO8ssKVUnuapoHV-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="mod-r-transform.html#cb580-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb580-2"><a href="mod-r-transform.html#cb580-2"></a><span class="st">   </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb580-3"><a href="mod-r-transform.html#cb580-3"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#5DRmqcO8ssKVUnuapoHV">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>What is the number of new confirmed cases November 22nd, 2021 in Denmark?</li>
</ol>
<!-- Q3 -->
<div id="IriMzhEeLnKG4Z0HHo7G" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="IriMzhEeLnKG4Z0HHo7G-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="IriMzhEeLnKG4Z0HHo7G-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="mod-r-transform.html#cb581-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb581-2"><a href="mod-r-transform.html#cb581-2"></a><span class="st">   </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span></span>
<span id="cb581-3"><a href="mod-r-transform.html#cb581-3"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">total_cases =</span> <span class="kw">cumsum</span>(<span class="kw">replace_na</span>(cases, <span class="dv">0</span>)),</span>
<span id="cb581-4"><a href="mod-r-transform.html#cb581-4"></a>          <span class="dt">total_deaths =</span> <span class="kw">cumsum</span>(<span class="kw">replace_na</span>(deaths, <span class="dv">0</span>))) <span class="op">%&gt;%</span></span>
<span id="cb581-5"><a href="mod-r-transform.html#cb581-5"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb581-6"><a href="mod-r-transform.html#cb581-6"></a><span class="co">#&gt; # A tibble: 2,628 × 15</span></span>
<span id="cb581-7"><a href="mod-r-transform.html#cb581-7"></a><span class="co">#&gt; # Groups:   country [4]</span></span>
<span id="cb581-8"><a href="mod-r-transform.html#cb581-8"></a><span class="co">#&gt;    date       country cases deaths icu_pat…¹ hosp_…² tests posit…³   vac fully…⁴ popul…⁵ month  year</span></span>
<span id="cb581-9"><a href="mod-r-transform.html#cb581-9"></a><span class="co">#&gt;    &lt;date&gt;     &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb581-10"><a href="mod-r-transform.html#cb581-10"></a><span class="co">#&gt;  1 2020-02-02 Denmark    NA     NA        NA      NA     1      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-11"><a href="mod-r-transform.html#cb581-11"></a><span class="co">#&gt;  2 2020-02-03 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-12"><a href="mod-r-transform.html#cb581-12"></a><span class="co">#&gt;  3 2020-02-04 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-13"><a href="mod-r-transform.html#cb581-13"></a><span class="co">#&gt;  4 2020-02-05 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-14"><a href="mod-r-transform.html#cb581-14"></a><span class="co">#&gt;  5 2020-02-06 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-15"><a href="mod-r-transform.html#cb581-15"></a><span class="co">#&gt;  6 2020-02-07 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-16"><a href="mod-r-transform.html#cb581-16"></a><span class="co">#&gt;  7 2020-02-08 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-17"><a href="mod-r-transform.html#cb581-17"></a><span class="co">#&gt;  8 2020-02-09 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-18"><a href="mod-r-transform.html#cb581-18"></a><span class="co">#&gt;  9 2020-02-10 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-19"><a href="mod-r-transform.html#cb581-19"></a><span class="co">#&gt; 10 2020-02-11 Denmark    NA     NA        NA      NA    NA      NA    NA      NA 5813302     2  2020</span></span>
<span id="cb581-20"><a href="mod-r-transform.html#cb581-20"></a><span class="co">#&gt; # … with 2,618 more rows, 2 more variables: total_cases &lt;dbl&gt;, total_deaths &lt;dbl&gt;, and abbreviated</span></span>
<span id="cb581-21"><a href="mod-r-transform.html#cb581-21"></a><span class="co">#&gt; #   variable names ¹​icu_patients, ²​hosp_patients, ³​positive_rate, ⁴​fully_vac, ⁵​population</span></span>
<span id="cb581-22"><a href="mod-r-transform.html#cb581-22"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span>
<span id="cb581-23"><a href="mod-r-transform.html#cb581-23"></a></span>
<span id="cb581-24"><a href="mod-r-transform.html#cb581-24"></a>res2 &lt;-<span class="st"> </span>res1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb581-25"><a href="mod-r-transform.html#cb581-25"></a><span class="st">   </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Norway&quot;</span>, date <span class="op">==</span><span class="st"> &quot;2021-10-10&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb581-26"><a href="mod-r-transform.html#cb581-26"></a><span class="st">   </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;total&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb581-27"><a href="mod-r-transform.html#cb581-27"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb581-28"><a href="mod-r-transform.html#cb581-28"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb581-29"><a href="mod-r-transform.html#cb581-29"></a><span class="co">#&gt; # Groups:   country [1]</span></span>
<span id="cb581-30"><a href="mod-r-transform.html#cb581-30"></a><span class="co">#&gt;   country total_cases total_deaths</span></span>
<span id="cb581-31"><a href="mod-r-transform.html#cb581-31"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb581-32"><a href="mod-r-transform.html#cb581-32"></a><span class="co">#&gt; 1 Norway       193562          871</span></span></code></pre></div>
<p>
The total number of deaths in Norway up to 10th October 2021 is 871.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#IriMzhEeLnKG4Z0HHo7G">
Solution
</button>
<div id="RxJm8UWsMSRi3hffUHN6" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="RxJm8UWsMSRi3hffUHN6-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="RxJm8UWsMSRi3hffUHN6-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="mod-r-transform.html#cb582-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb582-2"><a href="mod-r-transform.html#cb582-2"></a><span class="st">   </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span></span>
<span id="cb582-3"><a href="mod-r-transform.html#cb582-3"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">total_cases =</span> <span class="kw">cumsum</span>(<span class="kw">replace_na</span>(cases, <span class="dv">0</span>)),</span>
<span id="cb582-4"><a href="mod-r-transform.html#cb582-4"></a>          <span class="dt">total_deaths =</span> ___) <span class="op">%&gt;%</span></span>
<span id="cb582-5"><a href="mod-r-transform.html#cb582-5"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb582-6"><a href="mod-r-transform.html#cb582-6"></a></span>
<span id="cb582-7"><a href="mod-r-transform.html#cb582-7"></a>res2 &lt;-<span class="st"> </span>res1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb582-8"><a href="mod-r-transform.html#cb582-8"></a><span class="st">   </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb582-9"><a href="mod-r-transform.html#cb582-9"></a><span class="st">   </span><span class="kw">select</span>(<span class="kw">contains</span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb582-10"><a href="mod-r-transform.html#cb582-10"></a><span class="st">   </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#RxJm8UWsMSRi3hffUHN6">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>Calculate the total number of confirmed cases and deaths. Hint: you may use the <code>cumsum</code> function to add all cases up until a given date. You may here consider <code>NA</code> values in the <code>cases</code> and <code>deaths</code> columns as equal to zero (e.g. using <code>replace_na(cases, 0)</code>). What is the total number of deaths in Norway up to October 10th, 2021?</li>
</ol>
<!-- Q4 -->
<div id="F2TKDkFPh78zyl1yltDG" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="F2TKDkFPh78zyl1yltDG-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="F2TKDkFPh78zyl1yltDG-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb583-1"><a href="mod-r-transform.html#cb583-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb583-2"><a href="mod-r-transform.html#cb583-2"></a><span class="st">   </span><span class="kw">group_by</span>(country, month, year, population) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-3"><a href="mod-r-transform.html#cb583-3"></a><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">tests =</span> <span class="kw">max</span>(tests, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(tests, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-4"><a href="mod-r-transform.html#cb583-4"></a><span class="st">   </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-5"><a href="mod-r-transform.html#cb583-5"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">testsCap =</span> tests<span class="op">/</span>population) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-6"><a href="mod-r-transform.html#cb583-6"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(year), month) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-7"><a href="mod-r-transform.html#cb583-7"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb583-8"><a href="mod-r-transform.html#cb583-8"></a><span class="co">#&gt; # A tibble: 90 × 6</span></span>
<span id="cb583-9"><a href="mod-r-transform.html#cb583-9"></a><span class="co">#&gt;    country        month  year population    tests testsCap</span></span>
<span id="cb583-10"><a href="mod-r-transform.html#cb583-10"></a><span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb583-11"><a href="mod-r-transform.html#cb583-11"></a><span class="co">#&gt;  1 Denmark            1  2021    5813302  2863482   0.493 </span></span>
<span id="cb583-12"><a href="mod-r-transform.html#cb583-12"></a><span class="co">#&gt;  2 Germany            1  2021   83900471  4684292   0.0558</span></span>
<span id="cb583-13"><a href="mod-r-transform.html#cb583-13"></a><span class="co">#&gt;  3 Norway             1  2021    5465629   581599   0.106 </span></span>
<span id="cb583-14"><a href="mod-r-transform.html#cb583-14"></a><span class="co">#&gt;  4 United Kingdom     1  2021   68207114 16382170   0.240 </span></span>
<span id="cb583-15"><a href="mod-r-transform.html#cb583-15"></a><span class="co">#&gt;  5 Denmark            2  2021    5813302  3357579   0.578 </span></span>
<span id="cb583-16"><a href="mod-r-transform.html#cb583-16"></a><span class="co">#&gt;  6 Germany            2  2021   83900471  3335631   0.0398</span></span>
<span id="cb583-17"><a href="mod-r-transform.html#cb583-17"></a><span class="co">#&gt;  7 Norway             2  2021    5465629   429646   0.0786</span></span>
<span id="cb583-18"><a href="mod-r-transform.html#cb583-18"></a><span class="co">#&gt;  8 United Kingdom     2  2021   68207114 15305191   0.224 </span></span>
<span id="cb583-19"><a href="mod-r-transform.html#cb583-19"></a><span class="co">#&gt;  9 Denmark            3  2021    5813302  4881781   0.840 </span></span>
<span id="cb583-20"><a href="mod-r-transform.html#cb583-20"></a><span class="co">#&gt; 10 Germany            3  2021   83900471  4068985   0.0485</span></span>
<span id="cb583-21"><a href="mod-r-transform.html#cb583-21"></a><span class="co">#&gt; # … with 80 more rows</span></span>
<span id="cb583-22"><a href="mod-r-transform.html#cb583-22"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span>
<span id="cb583-23"><a href="mod-r-transform.html#cb583-23"></a></span>
<span id="cb583-24"><a href="mod-r-transform.html#cb583-24"></a>res2 &lt;-<span class="st"> </span>res1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-25"><a href="mod-r-transform.html#cb583-25"></a><span class="st">   </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2021</span>, month <span class="op">==</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-26"><a href="mod-r-transform.html#cb583-26"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(testsCap)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb583-27"><a href="mod-r-transform.html#cb583-27"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb583-28"><a href="mod-r-transform.html#cb583-28"></a><span class="co">#&gt; # A tibble: 4 × 6</span></span>
<span id="cb583-29"><a href="mod-r-transform.html#cb583-29"></a><span class="co">#&gt;   country        month  year population    tests testsCap</span></span>
<span id="cb583-30"><a href="mod-r-transform.html#cb583-30"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb583-31"><a href="mod-r-transform.html#cb583-31"></a><span class="co">#&gt; 1 Denmark            3  2021    5813302  4881781   0.840 </span></span>
<span id="cb583-32"><a href="mod-r-transform.html#cb583-32"></a><span class="co">#&gt; 2 United Kingdom     3  2021   68207114 33279694   0.488 </span></span>
<span id="cb583-33"><a href="mod-r-transform.html#cb583-33"></a><span class="co">#&gt; 3 Norway             3  2021    5465629   791345   0.145 </span></span>
<span id="cb583-34"><a href="mod-r-transform.html#cb583-34"></a><span class="co">#&gt; 4 Germany            3  2021   83900471  4068985   0.0485</span></span></code></pre></div>
<p>
The highest number of tests per capita in March 2021 was in Denmark.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#F2TKDkFPh78zyl1yltDG">
Solution
</button>
<div id="bLk4tlswKB97Tor4jyJi" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="bLk4tlswKB97Tor4jyJi-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="bLk4tlswKB97Tor4jyJi-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="mod-r-transform.html#cb584-1"></a>res1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb584-2"><a href="mod-r-transform.html#cb584-2"></a><span class="st">   </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-3"><a href="mod-r-transform.html#cb584-3"></a><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">tests =</span> <span class="kw">max</span>(___, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(___, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-4"><a href="mod-r-transform.html#cb584-4"></a><span class="st">   </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-5"><a href="mod-r-transform.html#cb584-5"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">testsCap =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-6"><a href="mod-r-transform.html#cb584-6"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(___), month) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-7"><a href="mod-r-transform.html#cb584-7"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb584-8"><a href="mod-r-transform.html#cb584-8"></a></span>
<span id="cb584-9"><a href="mod-r-transform.html#cb584-9"></a>res2 &lt;-<span class="st"> </span>res1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-10"><a href="mod-r-transform.html#cb584-10"></a><span class="st">   </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-11"><a href="mod-r-transform.html#cb584-11"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb584-12"><a href="mod-r-transform.html#cb584-12"></a><span class="st">   </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#bLk4tlswKB97Tor4jyJi">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>For each country calculate the number of tests done in each month in a given year. Which country had the highest number of tests per capita in March 2021?</li>
</ol>
<!-- Q5 -->
<div id="a2RdnXs0RTnHaBoaGnbx" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="a2RdnXs0RTnHaBoaGnbx-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="a2RdnXs0RTnHaBoaGnbx-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="mod-r-transform.html#cb585-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb585-2"><a href="mod-r-transform.html#cb585-2"></a><span class="st">   </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;United Kingdom&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb585-3"><a href="mod-r-transform.html#cb585-3"></a><span class="st">   </span><span class="kw">group_by</span>(country, year, month) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb585-4"><a href="mod-r-transform.html#cb585-4"></a><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">icu =</span> <span class="kw">max</span>(icu_patients, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb585-5"><a href="mod-r-transform.html#cb585-5"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(icu)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb585-6"><a href="mod-r-transform.html#cb585-6"></a><span class="st">   </span><span class="kw">print</span>()</span>
<span id="cb585-7"><a href="mod-r-transform.html#cb585-7"></a><span class="co">#&gt; # A tibble: 23 × 4</span></span>
<span id="cb585-8"><a href="mod-r-transform.html#cb585-8"></a><span class="co">#&gt; # Groups:   country, year [2]</span></span>
<span id="cb585-9"><a href="mod-r-transform.html#cb585-9"></a><span class="co">#&gt;    country         year month   icu</span></span>
<span id="cb585-10"><a href="mod-r-transform.html#cb585-10"></a><span class="co">#&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb585-11"><a href="mod-r-transform.html#cb585-11"></a><span class="co">#&gt;  1 United Kingdom  2021     1  4077</span></span>
<span id="cb585-12"><a href="mod-r-transform.html#cb585-12"></a><span class="co">#&gt;  2 United Kingdom  2021     2  3726</span></span>
<span id="cb585-13"><a href="mod-r-transform.html#cb585-13"></a><span class="co">#&gt;  3 United Kingdom  2020     4  3301</span></span>
<span id="cb585-14"><a href="mod-r-transform.html#cb585-14"></a><span class="co">#&gt;  4 United Kingdom  2020     5  2178</span></span>
<span id="cb585-15"><a href="mod-r-transform.html#cb585-15"></a><span class="co">#&gt;  5 United Kingdom  2020    12  2122</span></span>
<span id="cb585-16"><a href="mod-r-transform.html#cb585-16"></a><span class="co">#&gt;  6 United Kingdom  2021     3  1806</span></span>
<span id="cb585-17"><a href="mod-r-transform.html#cb585-17"></a><span class="co">#&gt;  7 United Kingdom  2020    11  1489</span></span>
<span id="cb585-18"><a href="mod-r-transform.html#cb585-18"></a><span class="co">#&gt;  8 United Kingdom  2021     9  1081</span></span>
<span id="cb585-19"><a href="mod-r-transform.html#cb585-19"></a><span class="co">#&gt;  9 United Kingdom  2021    11  1034</span></span>
<span id="cb585-20"><a href="mod-r-transform.html#cb585-20"></a><span class="co">#&gt; 10 United Kingdom  2021     8  1014</span></span>
<span id="cb585-21"><a href="mod-r-transform.html#cb585-21"></a><span class="co">#&gt; # … with 13 more rows</span></span>
<span id="cb585-22"><a href="mod-r-transform.html#cb585-22"></a><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>
The highest number of ICU patients on a given day was in January (4077 patients).
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#a2RdnXs0RTnHaBoaGnbx">
Solution
</button>
<div id="B0NlZA5s9dRvb4WgUcTq" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="B0NlZA5s9dRvb4WgUcTq-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="B0NlZA5s9dRvb4WgUcTq-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="mod-r-transform.html#cb586-1"></a>res &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></span>
<span id="cb586-2"><a href="mod-r-transform.html#cb586-2"></a><span class="st">   </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb586-3"><a href="mod-r-transform.html#cb586-3"></a><span class="st">   </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb586-4"><a href="mod-r-transform.html#cb586-4"></a><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">icu =</span> <span class="kw">max</span>(___, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb586-5"><a href="mod-r-transform.html#cb586-5"></a><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb586-6"><a href="mod-r-transform.html#cb586-6"></a><span class="st">   </span><span class="kw">print</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#B0NlZA5s9dRvb4WgUcTq">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Consider United Kingdom. Which month had the highest number of ICU patients on a given day?</li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mod-r-io.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mod-r-plot.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bss-osca/tfa/edit/master/book/13_r-transform.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
