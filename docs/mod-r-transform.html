<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 17 Transforming data | Tools for Analytics (TFA)</title>
  <meta name="description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 17 Transforming data | Tools for Analytics (TFA)" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bss-osca.github.io/tfa/" />
  <meta property="og:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />
  <meta property="og:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="github-repo" content="bss-osca/tfa" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 17 Transforming data | Tools for Analytics (TFA)" />
  
  <meta name="twitter:description" content="Course notes for the ‘Tools for Analytics’ course" />
  <meta name="twitter:image" content="https://bss-osca.github.io/tfa//assets/logo.png" />

<meta name="author" content="Lars Relund Nielsen" />


<meta name="date" content="2021-11-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="mod-r-io.html"/>
<link rel="next" href="mod-r-plot.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/font-awesome-5.3.1/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-5.3.1/css/v4-shims.min.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<link href="libs/minichart-0.2.2/minicharts.css" rel="stylesheet" />
<script src="libs/minichart-0.2.2/leaflet.minicharts.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.19/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<html>
<head>
<script>
  $(document).ready(function() {

  // Section anchors
  $('.section h1, .section h2, .section h3, .section h4, .section h5').each(function() {
    anchor = '#' + $(this).parent().attr('id');
    $(this).addClass("hasAnchor").prepend('<a href="' + anchor + '" class="anchor"></a>');
  });
});
</script>
<script src="https://hypothes.is/embed.js" async></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
</html>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="img/logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the book</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lo-intro"><i class="fa fa-check"></i><b>1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.2</b> Purpose for the book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-vs-vba"><i class="fa fa-check"></i><b>1.3</b> R vs Excel/VBA</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#computer"><i class="fa fa-check"></i><b>1.4</b> How a computer works</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i><b>1.5</b> How this book is organized</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ack"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Getting started with VBA</b></span></li>
<li class="chapter" data-level="2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html"><i class="fa fa-check"></i><b>2</b> An introduction to VBA</a><ul>
<li class="chapter" data-level="2.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#lo-vba-intro"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-what"><i class="fa fa-check"></i><b>2.2</b> What is VBA</a></li>
<li class="chapter" data-level="2.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-hello"><i class="fa fa-check"></i><b>2.3</b> Your first program</a></li>
<li class="chapter" data-level="2.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#vba-macro"><i class="fa fa-check"></i><b>2.4</b> The macro recorder</a></li>
<li class="chapter" data-level="2.5" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#a-short-overview"><i class="fa fa-check"></i><b>2.5</b> A short overview</a></li>
<li class="chapter" data-level="2.6" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#rc-vba-intro"><i class="fa fa-check"></i><b>2.6</b> Recap</a></li>
<li class="chapter" data-level="2.7" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-intro"><i class="fa fa-check"></i><b>2.7</b> Exercises</a><ul>
<li class="chapter" data-level="2.7.1" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-hello"><i class="fa fa-check"></i><b>2.7.1</b> Exercise - Hello</a></li>
<li class="chapter" data-level="2.7.2" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-macro"><i class="fa fa-check"></i><b>2.7.2</b> Exercise - Record a macro</a></li>
<li class="chapter" data-level="2.7.3" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-user-input"><i class="fa fa-check"></i><b>2.7.3</b> Exercise - User input</a></li>
<li class="chapter" data-level="2.7.4" data-path="mod-vba-intro.html"><a href="mod-vba-intro.html#ex-vba-max-min"><i class="fa fa-check"></i><b>2.7.4</b> Exercise - Max and min number</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Programming in VBA</b></span></li>
<li class="chapter" data-level="3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html"><i class="fa fa-check"></i><b>3</b> Data types and variables</a><ul>
<li class="chapter" data-level="3.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#lo-vba-datatypes"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-datatypes"><i class="fa fa-check"></i><b>3.2</b> Datatypes</a><ul>
<li class="chapter" data-level="3.2.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#collections"><i class="fa fa-check"></i><b>3.2.1</b> Collections</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#vba-code-structure"><i class="fa fa-check"></i><b>3.3</b> How do I structure my code?</a></li>
<li class="chapter" data-level="3.4" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#recap"><i class="fa fa-check"></i><b>3.4</b> Recap</a></li>
<li class="chapter" data-level="3.5" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-datatypes"><i class="fa fa-check"></i><b>3.5</b> Exercises</a><ul>
<li class="chapter" data-level="3.5.1" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-search-products"><i class="fa fa-check"></i><b>3.5.1</b> Exercise - Product search</a></li>
<li class="chapter" data-level="3.5.2" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-arrays"><i class="fa fa-check"></i><b>3.5.2</b> Exercise - Read arrays</a></li>
<li class="chapter" data-level="3.5.3" data-path="mod-vba-datatypes.html"><a href="mod-vba-datatypes.html#ex-vba-read-collections"><i class="fa fa-check"></i><b>3.5.3</b> Exercise - Read collections</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html"><i class="fa fa-check"></i><b>4</b> Procedures</a><ul>
<li class="chapter" data-level="4.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#lo-vba-procedures"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-procedures"><i class="fa fa-check"></i><b>4.2</b> Procedures</a></li>
<li class="chapter" data-level="4.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#vba-debug"><i class="fa fa-check"></i><b>4.3</b> How do I debug my code?</a></li>
<li class="chapter" data-level="4.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#recap-1"><i class="fa fa-check"></i><b>4.4</b> Recap</a></li>
<li class="chapter" data-level="4.5" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-procedures"><i class="fa fa-check"></i><b>4.5</b> Exercises</a><ul>
<li class="chapter" data-level="4.5.1" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-subs"><i class="fa fa-check"></i><b>4.5.1</b> Exercise - Subs</a></li>
<li class="chapter" data-level="4.5.2" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-functions"><i class="fa fa-check"></i><b>4.5.2</b> Exercise - Functions</a></li>
<li class="chapter" data-level="4.5.3" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-worksheet-functions"><i class="fa fa-check"></i><b>4.5.3</b> Exercise - Worksheet functions</a></li>
<li class="chapter" data-level="4.5.4" data-path="mod-vba-procedures.html"><a href="mod-vba-procedures.html#ex-vba-byref"><i class="fa fa-check"></i><b>4.5.4</b> Exercise - <code>ByRef</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html"><i class="fa fa-check"></i><b>5</b> Loops and conditional statements</a><ul>
<li class="chapter" data-level="5.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#lo-vba-loops-cond"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-cond"><i class="fa fa-check"></i><b>5.2</b> Conditional statements</a></li>
<li class="chapter" data-level="5.3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#vba-loops"><i class="fa fa-check"></i><b>5.3</b> Loops</a></li>
<li class="chapter" data-level="5.4" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#recap-2"><i class="fa fa-check"></i><b>5.4</b> Recap</a></li>
<li class="chapter" data-level="5.5" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops-cond"><i class="fa fa-check"></i><b>5.5</b> Exercises</a><ul>
<li class="chapter" data-level="5.5.1" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-loops"><i class="fa fa-check"></i><b>5.5.1</b> Exercise - Loops</a></li>
<li class="chapter" data-level="5.5.2" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-flight"><i class="fa fa-check"></i><b>5.5.2</b> Exercise - Flight search</a></li>
<li class="chapter" data-level="5.5.3" data-path="mod-vba-loops-cond.html"><a href="mod-vba-loops-cond.html#ex-vba-job-seq"><i class="fa fa-check"></i><b>5.5.3</b> Exercise - Job sequencing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html"><i class="fa fa-check"></i><b>6</b> Object model</a><ul>
<li class="chapter" data-level="6.1" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#lo-vba-object-model"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#vba-object-model"><i class="fa fa-check"></i><b>6.2</b> Object model</a></li>
<li class="chapter" data-level="6.3" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#recap-3"><i class="fa fa-check"></i><b>6.3</b> Recap</a></li>
<li class="chapter" data-level="6.4" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#ex-vba-object-model"><i class="fa fa-check"></i><b>6.4</b> Exercises</a><ul>
<li class="chapter" data-level="6.4.1" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#ex-vba-worksheets"><i class="fa fa-check"></i><b>6.4.1</b> Exercise - Worksheets</a></li>
<li class="chapter" data-level="6.4.2" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#ex-vba-ranges"><i class="fa fa-check"></i><b>6.4.2</b> Exercise - Ranges</a></li>
<li class="chapter" data-level="6.4.3" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#ex-vba-collections"><i class="fa fa-check"></i><b>6.4.3</b> Exercise - Collections</a></li>
<li class="chapter" data-level="6.4.4" data-path="mod-vba-object-model.html"><a href="mod-vba-object-model.html#ex-vba-production-plan"><i class="fa fa-check"></i><b>6.4.4</b> Exercise - Production plan</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Extra topics in VBA</b></span></li>
<li class="chapter" data-level="7" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html"><i class="fa fa-check"></i><b>7</b> Generating random numbers</a><ul>
<li class="chapter" data-level="7.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#lo-vba-random-numbers"><i class="fa fa-check"></i><b>7.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-random-numbers"><i class="fa fa-check"></i><b>7.2</b> Generating random numbers</a></li>
<li class="chapter" data-level="7.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#vba-simulation"><i class="fa fa-check"></i><b>7.3</b> Simulation</a></li>
<li class="chapter" data-level="7.4" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#recap-4"><i class="fa fa-check"></i><b>7.4</b> Recap</a></li>
<li class="chapter" data-level="7.5" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-random-numbers"><i class="fa fa-check"></i><b>7.5</b> Exercises</a><ul>
<li class="chapter" data-level="7.5.1" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-generate"><i class="fa fa-check"></i><b>7.5.1</b> Exercise - Generating random numbers</a></li>
<li class="chapter" data-level="7.5.2" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-tsp"><i class="fa fa-check"></i><b>7.5.2</b> Exercise - Traveling salesman problem</a></li>
<li class="chapter" data-level="7.5.3" data-path="mod-vba-random-numbers.html"><a href="mod-vba-random-numbers.html#ex-vba-bakery"><i class="fa fa-check"></i><b>7.5.3</b> Exercise - Dan’s bakery</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mod-vba-useful-procedures.html"><a href="mod-vba-useful-procedures.html"><i class="fa fa-check"></i><b>8</b> Useful VBA procedures</a></li>
<li class="chapter" data-level="9" data-path="mod-vba-other-topics.html"><a href="mod-vba-other-topics.html"><i class="fa fa-check"></i><b>9</b> Other topics</a></li>
<li class="part"><span><b>IV VBA project</b></span></li>
<li class="chapter" data-level="10" data-path="vba-project.html"><a href="vba-project.html"><i class="fa fa-check"></i><b>10</b> VBA project</a><ul>
<li class="chapter" data-level="10.1" data-path="vba-project.html"><a href="vba-project.html#lo-vba-project"><i class="fa fa-check"></i><b>10.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="vba-project.html"><a href="vba-project.html#vba-project-1"><i class="fa fa-check"></i><b>10.2</b> VBA project</a></li>
</ul></li>
<li class="part"><span><b>V Getting started with R</b></span></li>
<li class="chapter" data-level="11" data-path="mod-r-install.html"><a href="mod-r-install.html"><i class="fa fa-check"></i><b>11</b> Setting up R</a><ul>
<li class="chapter" data-level="11.1" data-path="mod-r-install.html"><a href="mod-r-install.html#lo-r-install"><i class="fa fa-check"></i><b>11.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="11.2" data-path="mod-r-install.html"><a href="mod-r-install.html#r-install"><i class="fa fa-check"></i><b>11.2</b> Install R and RStudio</a><ul>
<li class="chapter" data-level="11.2.1" data-path="mod-r-install.html"><a href="mod-r-install.html#test-your-installation"><i class="fa fa-check"></i><b>11.2.1</b> Test your installation</a></li>
<li class="chapter" data-level="11.2.2" data-path="mod-r-install.html"><a href="mod-r-install.html#add-on-packages"><i class="fa fa-check"></i><b>11.2.2</b> Add-on packages</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="mod-r-install.html"><a href="mod-r-install.html#r-cloud"><i class="fa fa-check"></i><b>11.3</b> Setup and test RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html"><i class="fa fa-check"></i><b>12</b> R basics and workflows</a><ul>
<li class="chapter" data-level="12.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#lo-r-workflow"><i class="fa fa-check"></i><b>12.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="12.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#working-with-r-at-the-command-line-in-rstudio"><i class="fa fa-check"></i><b>12.2</b> Working with R at the command line in RStudio</a></li>
<li class="chapter" data-level="12.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#your-first-datacamp-course"><i class="fa fa-check"></i><b>12.3</b> Your first DataCamp course</a></li>
<li class="chapter" data-level="12.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#pipes"><i class="fa fa-check"></i><b>12.4</b> Pipes</a></li>
<li class="chapter" data-level="12.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rprojs"><i class="fa fa-check"></i><b>12.5</b> RStudio projects</a><ul>
<li class="chapter" data-level="12.5.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#storing-your-code-in-a-script-file"><i class="fa fa-check"></i><b>12.5.1</b> Storing your code in a script file</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#rc-r-workflow"><i class="fa fa-check"></i><b>12.6</b> Recap</a></li>
<li class="chapter" data-level="12.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-r-workflow"><i class="fa fa-check"></i><b>12.7</b> Exercises</a><ul>
<li class="chapter" data-level="12.7.1" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-group-work"><i class="fa fa-check"></i><b>12.7.1</b> Exercise (group work)</a></li>
<li class="chapter" data-level="12.7.2" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-piping"><i class="fa fa-check"></i><b>12.7.2</b> Exercise (piping)</a></li>
<li class="chapter" data-level="12.7.3" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-working-dir"><i class="fa fa-check"></i><b>12.7.3</b> Exercise (working dir)</a></li>
<li class="chapter" data-level="12.7.4" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-vectors"><i class="fa fa-check"></i><b>12.7.4</b> Exercise (vectors)</a></li>
<li class="chapter" data-level="12.7.5" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-matrices"><i class="fa fa-check"></i><b>12.7.5</b> Exercise (matrices)</a></li>
<li class="chapter" data-level="12.7.6" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-data-frames"><i class="fa fa-check"></i><b>12.7.6</b> Exercise (data frames)</a></li>
<li class="chapter" data-level="12.7.7" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#exercise-lists"><i class="fa fa-check"></i><b>12.7.7</b> Exercise (lists)</a></li>
<li class="chapter" data-level="12.7.8" data-path="mod-r-workflow.html"><a href="mod-r-workflow.html#ex-strings"><i class="fa fa-check"></i><b>12.7.8</b> Exercise (string management)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI Programming in R</b></span></li>
<li class="chapter" data-level="13" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html"><i class="fa fa-check"></i><b>13</b> Loops and conditionals</a><ul>
<li class="chapter" data-level="13.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#lo-loops"><i class="fa fa-check"></i><b>13.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="13.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-dc-loops-cond"><i class="fa fa-check"></i><b>13.2</b> Conditionals and control flow</a></li>
<li class="chapter" data-level="13.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#r-loops"><i class="fa fa-check"></i><b>13.3</b> Loops</a></li>
<li class="chapter" data-level="13.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#rc-r-loops-cond"><i class="fa fa-check"></i><b>13.4</b> Recap</a></li>
<li class="chapter" data-level="13.5" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-r-loops-cond"><i class="fa fa-check"></i><b>13.5</b> Exercises</a><ul>
<li class="chapter" data-level="13.5.1" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#exercise-conditional-expressions"><i class="fa fa-check"></i><b>13.5.1</b> Exercise (conditional expressions)</a></li>
<li class="chapter" data-level="13.5.2" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#exercise-loops"><i class="fa fa-check"></i><b>13.5.2</b> Exercise (loops)</a></li>
<li class="chapter" data-level="13.5.3" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#ex-dist"><i class="fa fa-check"></i><b>13.5.3</b> Exercise (calculating distances)</a></li>
<li class="chapter" data-level="13.5.4" data-path="mod-r-loops-cond.html"><a href="mod-r-loops-cond.html#exercise-expand_grid"><i class="fa fa-check"></i><b>13.5.4</b> Exercise (<code>expand_grid</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="mod-r-functions.html"><a href="mod-r-functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a><ul>
<li class="chapter" data-level="14.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#lo-r-functions"><i class="fa fa-check"></i><b>14.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="14.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-dc-functions"><i class="fa fa-check"></i><b>14.2</b> DataCamp course</a></li>
<li class="chapter" data-level="14.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-extra"><i class="fa fa-check"></i><b>14.3</b> Functions returning multiple objects</a></li>
<li class="chapter" data-level="14.4" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-arg"><i class="fa fa-check"></i><b>14.4</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="14.5" data-path="mod-r-functions.html"><a href="mod-r-functions.html#r-functions-doc"><i class="fa fa-check"></i><b>14.5</b> Documenting your functions</a></li>
<li class="chapter" data-level="14.6" data-path="mod-r-functions.html"><a href="mod-r-functions.html#rc-functions"><i class="fa fa-check"></i><b>14.6</b> Recap</a></li>
<li class="chapter" data-level="14.7" data-path="mod-r-functions.html"><a href="mod-r-functions.html#ex-r-functions"><i class="fa fa-check"></i><b>14.7</b> Exercises</a><ul>
<li class="chapter" data-level="14.7.1" data-path="mod-r-functions.html"><a href="mod-r-functions.html#exercise-defining-functions"><i class="fa fa-check"></i><b>14.7.1</b> Exercise (defining functions)</a></li>
<li class="chapter" data-level="14.7.2" data-path="mod-r-functions.html"><a href="mod-r-functions.html#exercise-scope"><i class="fa fa-check"></i><b>14.7.2</b> Exercise (scope)</a></li>
<li class="chapter" data-level="14.7.3" data-path="mod-r-functions.html"><a href="mod-r-functions.html#exercise-job-sequencing"><i class="fa fa-check"></i><b>14.7.3</b> Exercise (job sequencing)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII IO, tidy and transform</b></span></li>
<li class="chapter" data-level="15" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html"><i class="fa fa-check"></i><b>15</b> Introduction to tidyverse and RMarkdown</a><ul>
<li class="chapter" data-level="15.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#lo-tidyverse-intro"><i class="fa fa-check"></i><b>15.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="15.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tidyverse-intro"><i class="fa fa-check"></i><b>15.2</b> The tidyverse package</a></li>
<li class="chapter" data-level="15.3" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-markdown-intro"><i class="fa fa-check"></i><b>15.3</b> Writing reproducible reports</a></li>
<li class="chapter" data-level="15.4" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#r-tibbles-intro"><i class="fa fa-check"></i><b>15.4</b> Tibbles</a></li>
<li class="chapter" data-level="15.5" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#rc-tidyverse-intro"><i class="fa fa-check"></i><b>15.5</b> Recap</a></li>
<li class="chapter" data-level="15.6" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#ex-tidyverse-intro"><i class="fa fa-check"></i><b>15.6</b> Exercises</a><ul>
<li class="chapter" data-level="15.6.1" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-your-first-rmarkdown-exercise"><i class="fa fa-check"></i><b>15.6.1</b> Exercise (your first RMarkdown exercise)</a></li>
<li class="chapter" data-level="15.6.2" data-path="mod-r-tidyverse-intro.html"><a href="mod-r-tidyverse-intro.html#exercise-tibbles"><i class="fa fa-check"></i><b>15.6.2</b> Exercise (tibbles)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="mod-r-io.html"><a href="mod-r-io.html"><i class="fa fa-check"></i><b>16</b> Importing and exporting data</a><ul>
<li class="chapter" data-level="16.1" data-path="mod-r-io.html"><a href="mod-r-io.html#lo-r-io"><i class="fa fa-check"></i><b>16.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="16.2" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-csv"><i class="fa fa-check"></i><b>16.2</b> CSV files</a><ul>
<li class="chapter" data-level="16.2.1" data-path="mod-r-io.html"><a href="mod-r-io.html#reading-a-csv-file"><i class="fa fa-check"></i><b>16.2.1</b> Reading a CSV file</a></li>
<li class="chapter" data-level="16.2.2" data-path="mod-r-io.html"><a href="mod-r-io.html#writing-to-csv-files"><i class="fa fa-check"></i><b>16.2.2</b> Writing to CSV files</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-excel"><i class="fa fa-check"></i><b>16.3</b> Excel</a></li>
<li class="chapter" data-level="16.4" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-google"><i class="fa fa-check"></i><b>16.4</b> Google Sheets</a></li>
<li class="chapter" data-level="16.5" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-text"><i class="fa fa-check"></i><b>16.5</b> Text files</a></li>
<li class="chapter" data-level="16.6" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-r"><i class="fa fa-check"></i><b>16.6</b> R’s native binary format</a></li>
<li class="chapter" data-level="16.7" data-path="mod-r-io.html"><a href="mod-r-io.html#r-io-json"><i class="fa fa-check"></i><b>16.7</b> Json</a></li>
<li class="chapter" data-level="16.8" data-path="mod-r-io.html"><a href="mod-r-io.html#rc-r-io"><i class="fa fa-check"></i><b>16.8</b> Recap</a></li>
<li class="chapter" data-level="16.9" data-path="mod-r-io.html"><a href="mod-r-io.html#ex-r-io"><i class="fa fa-check"></i><b>16.9</b> Exercises</a><ul>
<li class="chapter" data-level="16.9.1" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-statistikbanken"><i class="fa fa-check"></i><b>16.9.1</b> Exercise (Statistikbanken)</a></li>
<li class="chapter" data-level="16.9.2" data-path="mod-r-io.html"><a href="mod-r-io.html#exercise-tuples-in-opl"><i class="fa fa-check"></i><b>16.9.2</b> Exercise (tuples in OPL)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="mod-r-transform.html"><a href="mod-r-transform.html"><i class="fa fa-check"></i><b>17</b> Transforming data</a><ul>
<li class="chapter" data-level="17.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#lo-r-transform"><i class="fa fa-check"></i><b>17.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="17.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-tidyverse"><i class="fa fa-check"></i><b>17.2</b> Working with data in the tidyverse</a></li>
<li class="chapter" data-level="17.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#r-transform-joins"><i class="fa fa-check"></i><b>17.3</b> </a></li>
<li class="chapter" data-level="17.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#rc-r-transform"><i class="fa fa-check"></i><b>17.4</b> Recap</a></li>
<li class="chapter" data-level="17.5" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-r-transform"><i class="fa fa-check"></i><b>17.5</b> Exercises</a><ul>
<li class="chapter" data-level="17.5.1" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-gapminder1"><i class="fa fa-check"></i><b>17.5.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="17.5.2" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-babynames1"><i class="fa fa-check"></i><b>17.5.2</b> Exercise (babynames)</a></li>
<li class="chapter" data-level="17.5.3" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-profit1"><i class="fa fa-check"></i><b>17.5.3</b> Exercise (profit)</a></li>
<li class="chapter" data-level="17.5.4" data-path="mod-r-transform.html"><a href="mod-r-transform.html#ex-fish"><i class="fa fa-check"></i><b>17.5.4</b> Exercise (fisheries)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VIII Visualization</b></span></li>
<li class="chapter" data-level="18" data-path="mod-r-plot.html"><a href="mod-r-plot.html"><i class="fa fa-check"></i><b>18</b> Data visualization using ggplot</a><ul>
<li class="chapter" data-level="18.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#lo-plot"><i class="fa fa-check"></i><b>18.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="18.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-intro"><i class="fa fa-check"></i><b>18.2</b> Introduction to data visualization</a></li>
<li class="chapter" data-level="18.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-multi"><i class="fa fa-check"></i><b>18.3</b> Combining plots into one using <em>patchwork</em></a></li>
<li class="chapter" data-level="18.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#r-plot-save"><i class="fa fa-check"></i><b>18.4</b> Saving graphics</a></li>
<li class="chapter" data-level="18.5" data-path="mod-r-plot.html"><a href="mod-r-plot.html#rc-r-plot"><i class="fa fa-check"></i><b>18.5</b> Recap</a></li>
<li class="chapter" data-level="18.6" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-r-plot"><i class="fa fa-check"></i><b>18.6</b> Exercises</a><ul>
<li class="chapter" data-level="18.6.1" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-gapminder2"><i class="fa fa-check"></i><b>18.6.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="18.6.2" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-profit2"><i class="fa fa-check"></i><b>18.6.2</b> Exercise (profit)</a></li>
<li class="chapter" data-level="18.6.3" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-covid19"><i class="fa fa-check"></i><b>18.6.3</b> Exercise (COVID-19)</a></li>
<li class="chapter" data-level="18.6.4" data-path="mod-r-plot.html"><a href="mod-r-plot.html#ex-lego"><i class="fa fa-check"></i><b>18.6.4</b> Exercise (Lego and sales)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IX R project</b></span></li>
<li class="chapter" data-level="19" data-path="mod-r-project.html"><a href="mod-r-project.html"><i class="fa fa-check"></i><b>19</b> Mandatory R project</a><ul>
<li class="chapter" data-level="19.1" data-path="mod-r-project.html"><a href="mod-r-project.html#lo-project"><i class="fa fa-check"></i><b>19.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="19.2" data-path="mod-r-project.html"><a href="mod-r-project.html#r-project"><i class="fa fa-check"></i><b>19.2</b> R project</a></li>
</ul></li>
<li class="part"><span><b>X Extra</b></span></li>
<li class="chapter" data-level="20" data-path="mod-r-maps.html"><a href="mod-r-maps.html"><i class="fa fa-check"></i><b>20</b> Spatial data and maps</a><ul>
<li class="chapter" data-level="20.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#lo-maps"><i class="fa fa-check"></i><b>20.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="20.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#sec-map-api-key"><i class="fa fa-check"></i><b>20.2</b> Services for obtatining spatial data</a></li>
<li class="chapter" data-level="20.3" data-path="mod-r-maps.html"><a href="mod-r-maps.html#calculating-distances"><i class="fa fa-check"></i><b>20.3</b> Calculating distances</a><ul>
<li class="chapter" data-level="20.3.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps"><i class="fa fa-check"></i><b>20.3.1</b> Using Google Maps</a></li>
<li class="chapter" data-level="20.3.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-bing-maps"><i class="fa fa-check"></i><b>20.3.2</b> Using Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="mod-r-maps.html"><a href="mod-r-maps.html#geocoding-and-reverse-geocoding"><i class="fa fa-check"></i><b>20.4</b> Geocoding and reverse geocoding</a><ul>
<li class="chapter" data-level="20.4.1" data-path="mod-r-maps.html"><a href="mod-r-maps.html#using-google-maps-1"><i class="fa fa-check"></i><b>20.4.1</b> Using Google maps</a></li>
<li class="chapter" data-level="20.4.2" data-path="mod-r-maps.html"><a href="mod-r-maps.html#use-bing-maps"><i class="fa fa-check"></i><b>20.4.2</b> Use Bing Maps</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="mod-r-maps.html"><a href="mod-r-maps.html#adding-markers-and-routes-to-a-map"><i class="fa fa-check"></i><b>20.5</b> Adding markers and routes to a map</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="mod-r-excel.html"><a href="mod-r-excel.html"><i class="fa fa-check"></i><b>21</b> Using R in Excel and Excel in R</a></li>
<li class="chapter" data-level="22" data-path="mod-r-opl.html"><a href="mod-r-opl.html"><i class="fa fa-check"></i><b>22</b> Run an OPL model from R</a></li>
<li class="chapter" data-level="23" data-path="mod-r-simulation.html"><a href="mod-r-simulation.html"><i class="fa fa-check"></i><b>23</b> Simulation in R</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="groups.html"><a href="groups.html"><i class="fa fa-check"></i><b>A</b> Working in groups</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#joint-r-project-structure"><i class="fa fa-check"></i>Joint R project structure</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#using-git"><i class="fa fa-check"></i>Using Git together with GitHub</a><ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#register-a-free-github-account"><i class="fa fa-check"></i>Register a free GitHub account</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#check-your-installation"><i class="fa fa-check"></i>Check your installation</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#setup-projects-using-git-and-github"><i class="fa fa-check"></i>Setup projects using Git and GitHub</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="annotate.html"><a href="annotate.html"><i class="fa fa-check"></i><b>B</b> Annotate the course notes</a></li>
<li class="chapter" data-level="C" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>C</b> Getting help</a></li>
<li class="chapter" data-level="D" data-path="coding-convention.html"><a href="coding-convention.html"><i class="fa fa-check"></i><b>D</b> Coding/naming convention</a><ul>
<li class="chapter" data-level="D.1" data-path="coding-convention.html"><a href="coding-convention.html#commenting-your-code"><i class="fa fa-check"></i><b>D.1</b> Commenting your code</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="lg-course.html"><a href="lg-course.html"><i class="fa fa-check"></i><b>E</b> Learning goals</a></li>
<li class="chapter" data-level="F" data-path="sec:ba.html"><a href="sec:ba.html"><i class="fa fa-check"></i><b>F</b> Business Analytics</a></li>
<li class="chapter" data-level="G" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i><b>G</b> Colophon</a></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#ack">
    License: CC BY-NC-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-nc fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tools for Analytics (TFA)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mod-r-transform" class="section level1">
<h1><span class="header-section-number">Module 17</span> Transforming data</h1>
<p>In this module, we consider transformation of data. In general raw data may be messy and need to be structured in a <strong>tidy</strong> way. Tidying your data means storing it in a structured form suitable for analysis. This is done using a tibble (data frame) where each column is a variable, and each row is an observation. Tidy data is important because the consistent structure lets you focus your struggle on questions about the data.</p>
<p>Given a raw dataset the first step is to clean it and and transform it to a tidy format. Given tidy data, you next often need to <strong>transform</strong> it. Transformation includes narrowing in on observations of interest (e.g. only observations from a specific year or warehouse), creating new variables based on existing variables (like the cost of using the machine that day given idle time). Together, tidying and transforming are called <strong>wrangling</strong>, because it can be a hard process to get your data in the right form.</p>
<p>In this chapter, you will learn how to work with tibbles using the <a href="https://dplyr.tidyverse.org/">dplyr package</a> which is a part of the <a href="https://www.tidyverse.org">tidyverse</a>.</p>
<p>We are all different and you may like different learning styles compared to others. In the learning path diagram, there may be links to alternative online content. Note this is an alternative to the standard learning path that you may use instead. The learning path may also have extra content, that is not a part of syllabus, you can have a look at.</p>
<div id="htmlwidget-304e8ea2086f6f1d3acf" style="width:100%;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-304e8ea2086f6f1d3acf">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"💡 Transform\\n(dplyr)\", URL = \"#r-transform-tidyverse\", tooltip = \"Working with data in the tidyverse\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"0,2!\"] \n  \"2\" [label = \"📖 Joins\", URL = \"#r-transform-joins\", tooltip = \"Mutating and filtering joins\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"2,2!\"] \n  \"3\" [label = \"💻 Exercises\", URL = \"#ex-r-transform\", tooltip = \"Exercises\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"DarkSeaGreen4\", pos = \"4,2!\"] \n  \"4\" [label = \"🎬 dplyr\", URL = \"https://www.youtube.com/watch?v=aywFompr1F4\", tooltip = \"Roger Peng provides a good introduction to the dplyr R package\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"-0.75,4!\"] \n  \"5\" [label = \"📖 dplyr\", URL = \"https://bookdown.org/rdpeng/rprogdatascience/managing-data-frames-with-the-dplyr-package.html\", tooltip = \"Chapter 12 in Peng (2018) provides a nice introduction to dplyr\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"rect\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"DarkOrange4\", pos = \"0.75,4!\"] \n  \"6\" [label = \"💡 Working\\nwith data\", URL = \"https://app.datacamp.com/learn/courses/working-with-data-in-the-tidyverse\", tooltip = \"An alternative interactive DataCamp course is Working with Data in the Tidyverse which may be good to take if you need more training.\", style = \"filled\", fixedsize = \"FALSE\", fontsize = \"11\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica-bold\", shape = \"egg\", margin = \"0.2\", height = \"\", width = \"0.5\", fillcolor = \"PeachPuff3\", pos = \"2.5,4!\"] \n  \"7\" [label = \"\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"0.5\", fontname = \"Helvetica\", shape = \"rect\", margin = \"\", height = \"1\", width = \"6\", fillcolor = \"#F0F8FF\", pos = \"1.9,-0.09!\"] \n  \"8\" [label = \"Color:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", margin = \"\", height = \"0\", width = \"0.8\", fillcolor = \"#FFFFFE\", pos = \"-0.73,0.25!\"] \n  \"9\" [label = \"mandatory\", URL = \"\", tooltip = \"Mandatory syllabus.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", margin = \"\", height = \"\", width = \"0.8\", fillcolor = \"DarkSeaGreen4\", pos = \"-0.5,-0.15!\"] \n  \"10\" [label = \"alternative\", URL = \"\", tooltip = \"Alternative syllabus if you prefer another learning style.\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", margin = \"\", height = \"\", width = \"0.8\", fillcolor = \"DarkOrange4\", pos = \"0.5,-0.15!\"] \n  \"11\" [label = \"extra\", URL = \"\", tooltip = \"Extra learning if you are interested (not part of syllabus).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", margin = \"\", height = \"\", width = \"0.8\", fillcolor = \"PeachPuff3\", pos = \"1.5,-0.15!\"] \n  \"12\" [label = \"Shape:\", URL = \"\", tooltip = \" \", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"black\", penwidth = \"0\", fontname = \"Helvetica\", shape = \"none\", margin = \"\", height = \"0\", width = \"1\", fillcolor = \"#FFFFFE\", pos = \"2.7,0.25!\"] \n  \"13\" [label = \"non-interactive\", URL = \"\", tooltip = \"Non-interactive learning content (e.g. reading).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"rect\", margin = \"\", height = \"\", width = \"1\", fillcolor = \"Grey40\", pos = \"3,-0.15!\"] \n  \"14\" [label = \"interactive\", URL = \"\", tooltip = \"Interactive learning content (tutorial, exercises etc.).\", style = \"filled\", fixedsize = \"true\", fontsize = \"9\", fontcolor = \"white\", penwidth = \"2\", fontname = \"Helvetica\", shape = \"egg\", margin = \"\", height = \"\", width = \"1\", fillcolor = \"Grey40\", pos = \"4.25,-0.15!\"] \n\"1\"->\"2\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"4\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"5\" [color = \"black\", arrowhead = \"vee\"] \n\"1\"->\"6\" [color = \"black\", arrowhead = \"vee\"] \n\"2\"->\"3\" [color = \"black\", arrowhead = \"vee\"] \n\"2\"->\"6\" [color = \"black\", arrowhead = \"vee\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<!-- * Roger Peng provides a good video giving an [Introduction to the dplyr R package][video-dplyr].  -->
<!-- * [Chapter 12](https://bookdown.org/rdpeng/rprogdatascience/managing-data-frames-with-the-dplyr-package.html) in @rdpeng provides a nice introduction to dplyr.  -->
<!-- * An alternative interactive DataCamp course is [Working with Data in the Tidyverse][datacamp-r-dplyr-bakeoff] which may be good to take if you need more training. -->
<div id="lo-r-transform" class="section level2">
<h2><span class="header-section-number">17.1</span> Learning outcomes</h2>
<p>By the end of this module, you are expected to be able to:</p>
<ul>
<li>Describe what tidy and wangling is.</li>
<li>Apply the most common string functions.</li>
<li>Apply tidy operations to data.</li>
<li>Transform data.</li>
<li>Clean data.</li>
</ul>
<p>The learning outcomes relate to the <a href="lg-course.html#lg-course">overall learning goals</a> number 7, 11-14 and 18 of the course.</p>
<!-- SOLO increasing: identify · memorise · name · do simple procedure · collect data · -->
<!-- enumerate · describe · interpret · formulate · list · paraphrase · combine · do -->
<!-- algorithms · compare · contrast · explain causes · analyse · relate · derive · -->
<!-- evaluate · apply · argue · theorise · generalise · hypothesise · solve · reflect -->
</div>
<div id="r-transform-tidyverse" class="section level2">
<h2><span class="header-section-number">17.2</span> Working with data in the tidyverse</h2>
<p>An excellent introduction on how to transform data using the tidyverse is given in the interactive DataCamp course <a href="https://learn.datacamp.com/courses/data-manipulation-with-dplyr">Data Manipulation with dplyr</a>. Please complete the course before continuing.</p>
<!-- ## Tidy  -->
<!-- ## Wangling -->
<!-- https://learn.datacamp.com/projects/758 -->
<!-- https://learn.datacamp.com/courses/dealing-with-missing-data-in-r -->
<!-- https://learn.datacamp.com/courses/introduction-to-the-tidyverse -->
</div>
<div id="r-transform-joins" class="section level2">
<h2><span class="header-section-number">17.3</span> </h2>
<p>Mutating joins allow you to combine variables from multiple tables. There are four types of mutating join, which differ in their behavior when a match is not found. We’ll illustrate each with a simple example:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="mod-r-transform.html#cb306-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</span>
<span id="cb306-2"><a href="mod-r-transform.html#cb306-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">a =</span> <span class="dv">10</span>, <span class="dt">b =</span> <span class="st">&quot;a&quot;</span>)</span>
<span id="cb306-3"><a href="mod-r-transform.html#cb306-3"></a>df1</span>
<span id="cb306-4"><a href="mod-r-transform.html#cb306-4"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb306-5"><a href="mod-r-transform.html#cb306-5"></a><span class="co">#&gt;       x     y</span></span>
<span id="cb306-6"><a href="mod-r-transform.html#cb306-6"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb306-7"><a href="mod-r-transform.html#cb306-7"></a><span class="co">#&gt; 1     1     2</span></span>
<span id="cb306-8"><a href="mod-r-transform.html#cb306-8"></a><span class="co">#&gt; 2     2     1</span></span>
<span id="cb306-9"><a href="mod-r-transform.html#cb306-9"></a>df2</span>
<span id="cb306-10"><a href="mod-r-transform.html#cb306-10"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb306-11"><a href="mod-r-transform.html#cb306-11"></a><span class="co">#&gt;       x     a b    </span></span>
<span id="cb306-12"><a href="mod-r-transform.html#cb306-12"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb306-13"><a href="mod-r-transform.html#cb306-13"></a><span class="co">#&gt; 1     3    10 a    </span></span>
<span id="cb306-14"><a href="mod-r-transform.html#cb306-14"></a><span class="co">#&gt; 2     1    10 a</span></span></code></pre></div>
<p>Note that column <code>x</code> is present in both tables and used when joining them.</p>
<ul>
<li><p><code>inner_join(df1, df2)</code> only includes observations that match in both <code>df1</code> and <code>df2</code>.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="mod-r-transform.html#cb307-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb307-2"><a href="mod-r-transform.html#cb307-2"></a><span class="st">  </span><span class="kw">inner_join</span>(df2) </span>
<span id="cb307-3"><a href="mod-r-transform.html#cb307-3"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb307-4"><a href="mod-r-transform.html#cb307-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb307-5"><a href="mod-r-transform.html#cb307-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb307-6"><a href="mod-r-transform.html#cb307-6"></a><span class="co">#&gt; 1     1     2    10 a</span></span></code></pre></div></li>
<li><p><code>left_join(df1, df2)</code> includes all observations in <code>df1</code>, regardless of whether
they match or not. This is the most commonly used join because it ensures
that you don’t lose observations from your primary table.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="mod-r-transform.html#cb308-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb308-2"><a href="mod-r-transform.html#cb308-2"></a><span class="st">  </span><span class="kw">left_join</span>(df2)</span>
<span id="cb308-3"><a href="mod-r-transform.html#cb308-3"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb308-4"><a href="mod-r-transform.html#cb308-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb308-5"><a href="mod-r-transform.html#cb308-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb308-6"><a href="mod-r-transform.html#cb308-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb308-7"><a href="mod-r-transform.html#cb308-7"></a><span class="co">#&gt; 2     2     1    NA &lt;NA&gt;</span></span></code></pre></div></li>
<li><p><code>right_join(df1, df2)</code> includes all observations in <code>df2</code>. It’s equivalent to
<code>left_join(df2, df1)</code>, but the columns and rows will be ordered differently.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="mod-r-transform.html#cb309-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb309-2"><a href="mod-r-transform.html#cb309-2"></a><span class="st">  </span><span class="kw">right_join</span>(df2)</span>
<span id="cb309-3"><a href="mod-r-transform.html#cb309-3"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb309-4"><a href="mod-r-transform.html#cb309-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb309-5"><a href="mod-r-transform.html#cb309-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb309-6"><a href="mod-r-transform.html#cb309-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb309-7"><a href="mod-r-transform.html#cb309-7"></a><span class="co">#&gt; 2     3    NA    10 a</span></span>
<span id="cb309-8"><a href="mod-r-transform.html#cb309-8"></a>df2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb309-9"><a href="mod-r-transform.html#cb309-9"></a><span class="st">  </span><span class="kw">left_join</span>(df1)</span>
<span id="cb309-10"><a href="mod-r-transform.html#cb309-10"></a><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span id="cb309-11"><a href="mod-r-transform.html#cb309-11"></a><span class="co">#&gt;       x     a b         y</span></span>
<span id="cb309-12"><a href="mod-r-transform.html#cb309-12"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb309-13"><a href="mod-r-transform.html#cb309-13"></a><span class="co">#&gt; 1     3    10 a        NA</span></span>
<span id="cb309-14"><a href="mod-r-transform.html#cb309-14"></a><span class="co">#&gt; 2     1    10 a         2</span></span></code></pre></div></li>
<li><p><code>full_join()</code> includes all observations from <code>df1</code> and <code>df2</code>.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="mod-r-transform.html#cb310-1"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb310-2"><a href="mod-r-transform.html#cb310-2"></a><span class="st">  </span><span class="kw">full_join</span>(df2)</span>
<span id="cb310-3"><a href="mod-r-transform.html#cb310-3"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb310-4"><a href="mod-r-transform.html#cb310-4"></a><span class="co">#&gt;       x     y     a b    </span></span>
<span id="cb310-5"><a href="mod-r-transform.html#cb310-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb310-6"><a href="mod-r-transform.html#cb310-6"></a><span class="co">#&gt; 1     1     2    10 a    </span></span>
<span id="cb310-7"><a href="mod-r-transform.html#cb310-7"></a><span class="co">#&gt; 2     2     1    NA &lt;NA&gt; </span></span>
<span id="cb310-8"><a href="mod-r-transform.html#cb310-8"></a><span class="co">#&gt; 3     3    NA    10 a</span></span></code></pre></div></li>
</ul>
<p>The left, right and full joins are collectively know as <strong>outer joins</strong>. When a row doesn’t match in an outer join, the new variables are filled in with missing values.</p>
<p>While mutating joins are primarily used to add new variables, they can also generate new observations. If a match is not unique, a join will add all possible combinations (the Cartesian product) of the matching observations:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="mod-r-transform.html#cb311-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</span>
<span id="cb311-2"><a href="mod-r-transform.html#cb311-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb311-3"><a href="mod-r-transform.html#cb311-3"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb311-4"><a href="mod-r-transform.html#cb311-4"></a><span class="st">  </span><span class="kw">left_join</span>(df2)</span>
<span id="cb311-5"><a href="mod-r-transform.html#cb311-5"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb311-6"><a href="mod-r-transform.html#cb311-6"></a><span class="co">#&gt;       x     y z    </span></span>
<span id="cb311-7"><a href="mod-r-transform.html#cb311-7"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;</span></span>
<span id="cb311-8"><a href="mod-r-transform.html#cb311-8"></a><span class="co">#&gt; 1     1     1 a    </span></span>
<span id="cb311-9"><a href="mod-r-transform.html#cb311-9"></a><span class="co">#&gt; 2     1     1 b    </span></span>
<span id="cb311-10"><a href="mod-r-transform.html#cb311-10"></a><span class="co">#&gt; 3     1     2 a    </span></span>
<span id="cb311-11"><a href="mod-r-transform.html#cb311-11"></a><span class="co">#&gt; 4     1     2 b    </span></span>
<span id="cb311-12"><a href="mod-r-transform.html#cb311-12"></a><span class="co">#&gt; 5     2     3 a</span></span></code></pre></div>
<p>Filtering joins match observations in the same way as mutating joins, but affect the observations, not the variables. There are two types:</p>
<ul>
<li><code>semi_join(df1, df2)</code> <strong>keeps</strong> all observations in <code>df1</code> that have a match in <code>df2</code>.</li>
<li><code>anti_join(df1, df2)</code> <strong>drops</strong> all observations in <code>df1</code> that have a match in <code>df2</code>.</li>
</ul>
<p>These are most useful for diagnosing join mismatches. If you’re worried about what observations your joins will match, start with a <code>semi_join()</code> or <code>anti_join()</code>. <code>semi_join()</code> and <code>anti_join()</code> never duplicate; they only remove observations.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="mod-r-transform.html#cb312-1"></a>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb312-2"><a href="mod-r-transform.html#cb312-2"></a>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))</span>
<span id="cb312-3"><a href="mod-r-transform.html#cb312-3"></a></span>
<span id="cb312-4"><a href="mod-r-transform.html#cb312-4"></a><span class="co"># Four rows to start with:</span></span>
<span id="cb312-5"><a href="mod-r-transform.html#cb312-5"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb312-6"><a href="mod-r-transform.html#cb312-6"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb312-7"><a href="mod-r-transform.html#cb312-7"></a><span class="co"># And we get four rows after the join</span></span>
<span id="cb312-8"><a href="mod-r-transform.html#cb312-8"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(df2, <span class="dt">by =</span> <span class="st">&quot;x&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb312-9"><a href="mod-r-transform.html#cb312-9"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb312-10"><a href="mod-r-transform.html#cb312-10"></a><span class="co"># But only two rows actually match</span></span>
<span id="cb312-11"><a href="mod-r-transform.html#cb312-11"></a>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">semi_join</span>(df2, <span class="dt">by =</span> <span class="st">&quot;x&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">nrow</span>()</span>
<span id="cb312-12"><a href="mod-r-transform.html#cb312-12"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div id="rc-r-transform" class="section level2">
<h2><span class="header-section-number">17.4</span> Recap</h2>
<ul>
<li><p>We consider transformation of tidy data where data are stored using a tibble (data frame) where each column is a variable, and each row is an observation/case.</p></li>
<li><p>Tidy data is important because the consistent structure lets you focus your struggle on questions about the data.</p></li>
<li><p>Transformation includes narrowing in on observations of interest (e.g. only observations from a specific year or warehouse), creating new variables based on existing variables (like the cost of using the machine that day given idle time).</p></li>
<li><p>Tidying and transforming are called wrangling, because it can be a hard process to get your data in the right form.</p></li>
<li><p>The package dplyr provides a consistent set of verbs that helps you solve the most common data manipulation challenges:</p>
<ul>
<li>The <code>filter</code> function chooses rows (cases/observations) that meet a specific criteria.</li>
<li>The <code>select</code> function chooses columns (variables) based on their names.</li>
<li>The <code>arrange</code> function reorders the rows.</li>
<li>The <code>transmute</code> function adds/modifies columns (variables) and drops existing ones.</li>
<li>The <code>mutate</code> function adds/modifies columns (variables).</li>
<li>The <code>group_by</code> function groups variables for groupwise operations.</li>
<li>The <code>ungroup</code> function removes the current grouping.</li>
<li>The <code>count</code> function counts rows based on a grouping.</li>
<li>The <code>summarise</code> function reduces multiple values down to a single summary.</li>
<li>The <code>distinct</code> function selects unique/distinct rows.</li>
<li>The <code>pull</code> function can be used to extract columns as vectors (it is similar to $).</li>
</ul></li>
<li><p>Some nice to know functions to use inside e.g. <code>summarise</code> or <code>mutate</code> are</p>
<ul>
<li>The <code>n()</code> function counts the number of rows in a group.</li>
<li>The <code>n_distinct</code> counts the number of unique rows in a group.</li>
<li>The <code>first</code> function considers the first row in a group (remember to order it as needed).</li>
<li>The <code>slice_min</code> and <code>slice_max</code> functions select rows with highest or lowest values of a variable.</li>
<li>The <code>across</code> function makes it easy to apply the same transformation to multiple columns.</li>
</ul></li>
<li><p>Use <code>print(n = Inf)</code> in a pipe to print all rows.</p></li>
<li><p>Use the pipe operator <code>%&gt;%</code> to connect operations.</p></li>
<li><p>Use functions <code>glimpse</code>, <code>tail</code>, <code>head</code>, <code>View</code> to have a look at the data.</p></li>
<li><p>The <code>skim</code> function in the skimr package provides an approach to summary statistics.</p></li>
<li><p>Use <code>as.character</code>, <code>as.numeric</code>, etc. to convert data to a different type.</p></li>
<li><p>Use <code>nrow</code> and <code>ncol</code> functions to get the number of rows and columns of the data.</p></li>
<li><p>The ‘Data transformation with dplyr’ cheatsheet is very useful. Find the newest version in RStudio <strong>Help &gt; Cheatsheets</strong>.</p></li>
</ul>
<p>You may also have a look at the <a href="https://bss-osca.github.io/tfa/slides/07-03_r-transform-slides.html">slides for this module</a>.</p>
</div>
<div id="ex-r-transform" class="section level2">
<h2><span class="header-section-number">17.5</span> Exercises</h2>
<p>Below you will find a set of exercises. Always have a look at the exercises before you meet in your study group and try to solve them yourself. Are you stuck, see the <a href="help.html#help">help page</a>. Some of the solutions to each exercise can be seen by pressing the button at each question. Beware, you will not learn by giving up too early. Put some effort into finding a solution!</p>
<p><a href="https://rstudio.cloud/spaces/176810/project/3034015">Link to the project on RStudio Cloud for this module</a>.</p>
<div id="ex-gapminder1" class="section level3">
<h3><span class="header-section-number">17.5.1</span> Exercise (gapminder)</h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The gapminder data set provides values for life expectancy, GDP per capita, and population, every five years, from 1952 to 2007 for 142 countries. The data can be loaded using the gapminder package:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="mod-r-transform.html#cb313-1"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb313-2"><a href="mod-r-transform.html#cb313-2"></a>gapminder</span>
<span id="cb313-3"><a href="mod-r-transform.html#cb313-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb313-4"><a href="mod-r-transform.html#cb313-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb313-5"><a href="mod-r-transform.html#cb313-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb313-6"><a href="mod-r-transform.html#cb313-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb313-7"><a href="mod-r-transform.html#cb313-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb313-8"><a href="mod-r-transform.html#cb313-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb313-9"><a href="mod-r-transform.html#cb313-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb313-10"><a href="mod-r-transform.html#cb313-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb313-11"><a href="mod-r-transform.html#cb313-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb313-12"><a href="mod-r-transform.html#cb313-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb313-13"><a href="mod-r-transform.html#cb313-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb313-14"><a href="mod-r-transform.html#cb313-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb313-15"><a href="mod-r-transform.html#cb313-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb313-16"><a href="mod-r-transform.html#cb313-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
<p>Let us try to examine the dataset (use pipes <code>%&gt;%</code> as much as possible).</p>
<div id="UL4uDIeZy6XusumA77Qm" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="UL4uDIeZy6XusumA77Qm-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="UL4uDIeZy6XusumA77Qm-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="mod-r-transform.html#cb314-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">glimpse</span>()</span>
<span id="cb314-2"><a href="mod-r-transform.html#cb314-2"></a><span class="co">#&gt; Rows: 1,704</span></span>
<span id="cb314-3"><a href="mod-r-transform.html#cb314-3"></a><span class="co">#&gt; Columns: 6</span></span>
<span id="cb314-4"><a href="mod-r-transform.html#cb314-4"></a><span class="co">#&gt; $ country   &lt;fct&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afgh…</span></span>
<span id="cb314-5"><a href="mod-r-transform.html#cb314-5"></a><span class="co">#&gt; $ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Europe, …</span></span>
<span id="cb314-6"><a href="mod-r-transform.html#cb314-6"></a><span class="co">#&gt; $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, 2002, 2007, 1952, 19…</span></span>
<span id="cb314-7"><a href="mod-r-transform.html#cb314-7"></a><span class="co">#&gt; $ lifeExp   &lt;dbl&gt; 28.8, 30.3, 32.0, 34.0, 36.1, 38.4, 39.9, 40.8, 41.7, 41.8, 42.1, 43.8, 55.2, 59…</span></span>
<span id="cb314-8"><a href="mod-r-transform.html#cb314-8"></a><span class="co">#&gt; $ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12881816, 13867957, 16…</span></span>
<span id="cb314-9"><a href="mod-r-transform.html#cb314-9"></a><span class="co">#&gt; $ gdpPercap &lt;dbl&gt; 779, 821, 853, 836, 740, 786, 978, 852, 649, 635, 727, 975, 1601, 1942, 2313, 27…</span></span>
<span id="cb314-10"><a href="mod-r-transform.html#cb314-10"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb314-11"><a href="mod-r-transform.html#cb314-11"></a><span class="co">#&gt;         country        continent        year         lifeExp          pop          </span></span>
<span id="cb314-12"><a href="mod-r-transform.html#cb314-12"></a><span class="co">#&gt;  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.6   Min.   :6.00e+04  </span></span>
<span id="cb314-13"><a href="mod-r-transform.html#cb314-13"></a><span class="co">#&gt;  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.2   1st Qu.:2.79e+06  </span></span>
<span id="cb314-14"><a href="mod-r-transform.html#cb314-14"></a><span class="co">#&gt;  Algeria    :  12   Asia    :396   Median :1980   Median :60.7   Median :7.02e+06  </span></span>
<span id="cb314-15"><a href="mod-r-transform.html#cb314-15"></a><span class="co">#&gt;  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.5   Mean   :2.96e+07  </span></span>
<span id="cb314-16"><a href="mod-r-transform.html#cb314-16"></a><span class="co">#&gt;  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.8   3rd Qu.:1.96e+07  </span></span>
<span id="cb314-17"><a href="mod-r-transform.html#cb314-17"></a><span class="co">#&gt;  Australia  :  12                  Max.   :2007   Max.   :82.6   Max.   :1.32e+09  </span></span>
<span id="cb314-18"><a href="mod-r-transform.html#cb314-18"></a><span class="co">#&gt;  (Other)    :1632                                                                  </span></span>
<span id="cb314-19"><a href="mod-r-transform.html#cb314-19"></a><span class="co">#&gt;    gdpPercap     </span></span>
<span id="cb314-20"><a href="mod-r-transform.html#cb314-20"></a><span class="co">#&gt;  Min.   :   241  </span></span>
<span id="cb314-21"><a href="mod-r-transform.html#cb314-21"></a><span class="co">#&gt;  1st Qu.:  1202  </span></span>
<span id="cb314-22"><a href="mod-r-transform.html#cb314-22"></a><span class="co">#&gt;  Median :  3532  </span></span>
<span id="cb314-23"><a href="mod-r-transform.html#cb314-23"></a><span class="co">#&gt;  Mean   :  7215  </span></span>
<span id="cb314-24"><a href="mod-r-transform.html#cb314-24"></a><span class="co">#&gt;  3rd Qu.:  9325  </span></span>
<span id="cb314-25"><a href="mod-r-transform.html#cb314-25"></a><span class="co">#&gt;  Max.   :113523  </span></span>
<span id="cb314-26"><a href="mod-r-transform.html#cb314-26"></a><span class="co">#&gt; </span></span>
<span id="cb314-27"><a href="mod-r-transform.html#cb314-27"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>()</span>
<span id="cb314-28"><a href="mod-r-transform.html#cb314-28"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb314-29"><a href="mod-r-transform.html#cb314-29"></a><span class="co">#&gt;   country  continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb314-30"><a href="mod-r-transform.html#cb314-30"></a><span class="co">#&gt;   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb314-31"><a href="mod-r-transform.html#cb314-31"></a><span class="co">#&gt; 1 Zimbabwe Africa     1982    60.4  7636524      789.</span></span>
<span id="cb314-32"><a href="mod-r-transform.html#cb314-32"></a><span class="co">#&gt; 2 Zimbabwe Africa     1987    62.4  9216418      706.</span></span>
<span id="cb314-33"><a href="mod-r-transform.html#cb314-33"></a><span class="co">#&gt; 3 Zimbabwe Africa     1992    60.4 10704340      693.</span></span>
<span id="cb314-34"><a href="mod-r-transform.html#cb314-34"></a><span class="co">#&gt; 4 Zimbabwe Africa     1997    46.8 11404948      792.</span></span>
<span id="cb314-35"><a href="mod-r-transform.html#cb314-35"></a><span class="co">#&gt; 5 Zimbabwe Africa     2002    40.0 11926563      672.</span></span>
<span id="cb314-36"><a href="mod-r-transform.html#cb314-36"></a><span class="co">#&gt; 6 Zimbabwe Africa     2007    43.5 12311143      470.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#UL4uDIeZy6XusumA77Qm">
Solution
</button>
<ol class="example" style="list-style-type: decimal">
<li><p>Use <code>glimpse</code>, <code>summary</code> and <code>tail</code> to examine the data.</p></li>
<li><p>Use <code>count</code> to count the number of</p></li>
</ol>
<div id="uQoTglgqJB50tn46AWj7" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uQoTglgqJB50tn46AWj7-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uQoTglgqJB50tn46AWj7-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="mod-r-transform.html#cb315-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb315-2"><a href="mod-r-transform.html#cb315-2"></a><span class="st">  </span><span class="kw">count</span>(country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb315-3"><a href="mod-r-transform.html#cb315-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span>
<span id="cb315-4"><a href="mod-r-transform.html#cb315-4"></a><span class="co">#&gt; [1] 142</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uQoTglgqJB50tn46AWj7">
Solution
</button>
<p>        a) countries,</p>
<div id="6YIR7vjSfHfNfPiHjZ1M" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="6YIR7vjSfHfNfPiHjZ1M-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="6YIR7vjSfHfNfPiHjZ1M-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="mod-r-transform.html#cb316-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb316-2"><a href="mod-r-transform.html#cb316-2"></a><span class="st">  </span><span class="kw">count</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb316-3"><a href="mod-r-transform.html#cb316-3"></a><span class="st">  </span><span class="kw">nrow</span>()</span>
<span id="cb316-4"><a href="mod-r-transform.html#cb316-4"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#6YIR7vjSfHfNfPiHjZ1M">
Solution
</button>
<p>        b) continents,</p>
<div id="RPXrl47JJj8yqat0mu6S" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="RPXrl47JJj8yqat0mu6S-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="RPXrl47JJj8yqat0mu6S-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="mod-r-transform.html#cb317-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb317-2"><a href="mod-r-transform.html#cb317-2"></a><span class="st">  </span><span class="kw">count</span>(continent, country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb317-3"><a href="mod-r-transform.html#cb317-3"></a><span class="st">  </span><span class="kw">count</span>(continent)     <span class="co"># or</span></span>
<span id="cb317-4"><a href="mod-r-transform.html#cb317-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb317-5"><a href="mod-r-transform.html#cb317-5"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb317-6"><a href="mod-r-transform.html#cb317-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb317-7"><a href="mod-r-transform.html#cb317-7"></a><span class="co">#&gt; 1 Africa       52</span></span>
<span id="cb317-8"><a href="mod-r-transform.html#cb317-8"></a><span class="co">#&gt; 2 Americas     25</span></span>
<span id="cb317-9"><a href="mod-r-transform.html#cb317-9"></a><span class="co">#&gt; 3 Asia         33</span></span>
<span id="cb317-10"><a href="mod-r-transform.html#cb317-10"></a><span class="co">#&gt; 4 Europe       30</span></span>
<span id="cb317-11"><a href="mod-r-transform.html#cb317-11"></a><span class="co">#&gt; 5 Oceania       2</span></span>
<span id="cb317-12"><a href="mod-r-transform.html#cb317-12"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb317-13"><a href="mod-r-transform.html#cb317-13"></a><span class="st">  </span><span class="kw">distinct</span>(continent, country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb317-14"><a href="mod-r-transform.html#cb317-14"></a><span class="st">  </span><span class="kw">count</span>(continent)</span>
<span id="cb317-15"><a href="mod-r-transform.html#cb317-15"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb317-16"><a href="mod-r-transform.html#cb317-16"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb317-17"><a href="mod-r-transform.html#cb317-17"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb317-18"><a href="mod-r-transform.html#cb317-18"></a><span class="co">#&gt; 1 Africa       52</span></span>
<span id="cb317-19"><a href="mod-r-transform.html#cb317-19"></a><span class="co">#&gt; 2 Americas     25</span></span>
<span id="cb317-20"><a href="mod-r-transform.html#cb317-20"></a><span class="co">#&gt; 3 Asia         33</span></span>
<span id="cb317-21"><a href="mod-r-transform.html#cb317-21"></a><span class="co">#&gt; 4 Europe       30</span></span>
<span id="cb317-22"><a href="mod-r-transform.html#cb317-22"></a><span class="co">#&gt; 5 Oceania       2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#RPXrl47JJj8yqat0mu6S">
Solution
</button>
<p>        c) countries per continent.</p>
<div id="fSsOZeHt8YF4lbKuawtN" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="fSsOZeHt8YF4lbKuawtN-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="fSsOZeHt8YF4lbKuawtN-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="mod-r-transform.html#cb318-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb318-2"><a href="mod-r-transform.html#cb318-2"></a><span class="st">  </span><span class="kw">distinct</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb318-3"><a href="mod-r-transform.html#cb318-3"></a><span class="st">  </span><span class="kw">pull</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb318-4"><a href="mod-r-transform.html#cb318-4"></a><span class="st">  </span><span class="kw">as.character</span>()</span>
<span id="cb318-5"><a href="mod-r-transform.html#cb318-5"></a><span class="co">#&gt; [1] &quot;Asia&quot;     &quot;Europe&quot;   &quot;Africa&quot;   &quot;Americas&quot; &quot;Oceania&quot;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#fSsOZeHt8YF4lbKuawtN">
Solution
</button>
<div id="ipu82zOiWNis7MmDcNbZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ipu82zOiWNis7MmDcNbZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ipu82zOiWNis7MmDcNbZ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="mod-r-transform.html#cb319-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb319-2"><a href="mod-r-transform.html#cb319-2"></a><span class="st">  </span><span class="kw">distinct</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb319-3"><a href="mod-r-transform.html#cb319-3"></a><span class="st">  </span><span class="kw">pull</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb319-4"><a href="mod-r-transform.html#cb319-4"></a><span class="st">  </span><span class="kw">as.character</span>()</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ipu82zOiWNis7MmDcNbZ">
Hint
</button>
<ol start="3" class="example" style="list-style-type: decimal">
<li><p>Retrieve a vector with all distinct continent values.</p></li>
<li><p>Subset rows to find:</p></li>
</ol>
<div id="hoSMpVjqRPqjchkGHCwG" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="hoSMpVjqRPqjchkGHCwG-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="hoSMpVjqRPqjchkGHCwG-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="mod-r-transform.html#cb320-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb320-2"><a href="mod-r-transform.html#cb320-2"></a><span class="st">  </span><span class="kw">filter</span>(lifeExp <span class="op">&lt;</span><span class="st"> </span><span class="dv">29</span>)</span>
<span id="cb320-3"><a href="mod-r-transform.html#cb320-3"></a><span class="co">#&gt; # A tibble: 2 × 6</span></span>
<span id="cb320-4"><a href="mod-r-transform.html#cb320-4"></a><span class="co">#&gt;   country     continent  year lifeExp     pop gdpPercap</span></span>
<span id="cb320-5"><a href="mod-r-transform.html#cb320-5"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb320-6"><a href="mod-r-transform.html#cb320-6"></a><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8 8425333      779.</span></span>
<span id="cb320-7"><a href="mod-r-transform.html#cb320-7"></a><span class="co">#&gt; 2 Rwanda      Africa     1992    23.6 7290203      737.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#hoSMpVjqRPqjchkGHCwG">
Solution
</button>
<p>        a) all rows with life expectancy less that 29 years,</p>
<div id="U2nPSvOkmC3Kglev0Nd6" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="U2nPSvOkmC3Kglev0Nd6-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="U2nPSvOkmC3Kglev0Nd6-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="mod-r-transform.html#cb321-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb321-2"><a href="mod-r-transform.html#cb321-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Rwanda&quot;</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1979</span>)</span>
<span id="cb321-3"><a href="mod-r-transform.html#cb321-3"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb321-4"><a href="mod-r-transform.html#cb321-4"></a><span class="co">#&gt;   country continent  year lifeExp     pop gdpPercap</span></span>
<span id="cb321-5"><a href="mod-r-transform.html#cb321-5"></a><span class="co">#&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb321-6"><a href="mod-r-transform.html#cb321-6"></a><span class="co">#&gt; 1 Rwanda  Africa     1982    46.2 5507565      882.</span></span>
<span id="cb321-7"><a href="mod-r-transform.html#cb321-7"></a><span class="co">#&gt; 2 Rwanda  Africa     1987    44.0 6349365      848.</span></span>
<span id="cb321-8"><a href="mod-r-transform.html#cb321-8"></a><span class="co">#&gt; 3 Rwanda  Africa     1992    23.6 7290203      737.</span></span>
<span id="cb321-9"><a href="mod-r-transform.html#cb321-9"></a><span class="co">#&gt; 4 Rwanda  Africa     1997    36.1 7212583      590.</span></span>
<span id="cb321-10"><a href="mod-r-transform.html#cb321-10"></a><span class="co">#&gt; 5 Rwanda  Africa     2002    43.4 7852401      786.</span></span>
<span id="cb321-11"><a href="mod-r-transform.html#cb321-11"></a><span class="co">#&gt; 6 Rwanda  Africa     2007    46.2 8860588      863.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#U2nPSvOkmC3Kglev0Nd6">
Solution
</button>
<p>        b) all rows for Rwanda after year 1979,</p>
<div id="09kqKGFxUhubGui2dq7x" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="09kqKGFxUhubGui2dq7x-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="09kqKGFxUhubGui2dq7x-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="mod-r-transform.html#cb322-1"></a>gapminder <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb322-2"><a href="mod-r-transform.html#cb322-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Rwanda&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>, <span class="st">&quot;France&quot;</span>))</span>
<span id="cb322-3"><a href="mod-r-transform.html#cb322-3"></a><span class="co">#&gt; # A tibble: 36 × 6</span></span>
<span id="cb322-4"><a href="mod-r-transform.html#cb322-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb322-5"><a href="mod-r-transform.html#cb322-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb322-6"><a href="mod-r-transform.html#cb322-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb322-7"><a href="mod-r-transform.html#cb322-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb322-8"><a href="mod-r-transform.html#cb322-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb322-9"><a href="mod-r-transform.html#cb322-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb322-10"><a href="mod-r-transform.html#cb322-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb322-11"><a href="mod-r-transform.html#cb322-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb322-12"><a href="mod-r-transform.html#cb322-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb322-13"><a href="mod-r-transform.html#cb322-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb322-14"><a href="mod-r-transform.html#cb322-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb322-15"><a href="mod-r-transform.html#cb322-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb322-16"><a href="mod-r-transform.html#cb322-16"></a><span class="co">#&gt; # … with 26 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#09kqKGFxUhubGui2dq7x">
Solution
</button>
<p>        c) all rows for Rwanda, Afghanistan or France.</p>
<ol start="5" class="example" style="list-style-type: decimal">
<li>Select columns</li>
</ol>
<div id="2A1OheU5yYiHnduOJjhQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2A1OheU5yYiHnduOJjhQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2A1OheU5yYiHnduOJjhQ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="mod-r-transform.html#cb323-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb323-2"><a href="mod-r-transform.html#cb323-2"></a><span class="st">  </span><span class="kw">select</span>(year, lifeExp)</span>
<span id="cb323-3"><a href="mod-r-transform.html#cb323-3"></a><span class="co">#&gt; # A tibble: 1,704 × 2</span></span>
<span id="cb323-4"><a href="mod-r-transform.html#cb323-4"></a><span class="co">#&gt;     year lifeExp</span></span>
<span id="cb323-5"><a href="mod-r-transform.html#cb323-5"></a><span class="co">#&gt;    &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb323-6"><a href="mod-r-transform.html#cb323-6"></a><span class="co">#&gt;  1  1952    28.8</span></span>
<span id="cb323-7"><a href="mod-r-transform.html#cb323-7"></a><span class="co">#&gt;  2  1957    30.3</span></span>
<span id="cb323-8"><a href="mod-r-transform.html#cb323-8"></a><span class="co">#&gt;  3  1962    32.0</span></span>
<span id="cb323-9"><a href="mod-r-transform.html#cb323-9"></a><span class="co">#&gt;  4  1967    34.0</span></span>
<span id="cb323-10"><a href="mod-r-transform.html#cb323-10"></a><span class="co">#&gt;  5  1972    36.1</span></span>
<span id="cb323-11"><a href="mod-r-transform.html#cb323-11"></a><span class="co">#&gt;  6  1977    38.4</span></span>
<span id="cb323-12"><a href="mod-r-transform.html#cb323-12"></a><span class="co">#&gt;  7  1982    39.9</span></span>
<span id="cb323-13"><a href="mod-r-transform.html#cb323-13"></a><span class="co">#&gt;  8  1987    40.8</span></span>
<span id="cb323-14"><a href="mod-r-transform.html#cb323-14"></a><span class="co">#&gt;  9  1992    41.7</span></span>
<span id="cb323-15"><a href="mod-r-transform.html#cb323-15"></a><span class="co">#&gt; 10  1997    41.8</span></span>
<span id="cb323-16"><a href="mod-r-transform.html#cb323-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2A1OheU5yYiHnduOJjhQ">
Solution
</button>
<p>        a) year and life expectancy,</p>
<div id="oIudmifhBblEg5jwffQ8" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oIudmifhBblEg5jwffQ8-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oIudmifhBblEg5jwffQ8-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="mod-r-transform.html#cb324-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb324-2"><a href="mod-r-transform.html#cb324-2"></a><span class="st">  </span><span class="kw">select</span>(country, gdpPercap)</span>
<span id="cb324-3"><a href="mod-r-transform.html#cb324-3"></a><span class="co">#&gt; # A tibble: 1,704 × 2</span></span>
<span id="cb324-4"><a href="mod-r-transform.html#cb324-4"></a><span class="co">#&gt;    country     gdpPercap</span></span>
<span id="cb324-5"><a href="mod-r-transform.html#cb324-5"></a><span class="co">#&gt;    &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb324-6"><a href="mod-r-transform.html#cb324-6"></a><span class="co">#&gt;  1 Afghanistan      779.</span></span>
<span id="cb324-7"><a href="mod-r-transform.html#cb324-7"></a><span class="co">#&gt;  2 Afghanistan      821.</span></span>
<span id="cb324-8"><a href="mod-r-transform.html#cb324-8"></a><span class="co">#&gt;  3 Afghanistan      853.</span></span>
<span id="cb324-9"><a href="mod-r-transform.html#cb324-9"></a><span class="co">#&gt;  4 Afghanistan      836.</span></span>
<span id="cb324-10"><a href="mod-r-transform.html#cb324-10"></a><span class="co">#&gt;  5 Afghanistan      740.</span></span>
<span id="cb324-11"><a href="mod-r-transform.html#cb324-11"></a><span class="co">#&gt;  6 Afghanistan      786.</span></span>
<span id="cb324-12"><a href="mod-r-transform.html#cb324-12"></a><span class="co">#&gt;  7 Afghanistan      978.</span></span>
<span id="cb324-13"><a href="mod-r-transform.html#cb324-13"></a><span class="co">#&gt;  8 Afghanistan      852.</span></span>
<span id="cb324-14"><a href="mod-r-transform.html#cb324-14"></a><span class="co">#&gt;  9 Afghanistan      649.</span></span>
<span id="cb324-15"><a href="mod-r-transform.html#cb324-15"></a><span class="co">#&gt; 10 Afghanistan      635.</span></span>
<span id="cb324-16"><a href="mod-r-transform.html#cb324-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oIudmifhBblEg5jwffQ8">
Solution
</button>
<p>        b) country and GDP per capita.</p>
<div id="T5kMZNCXNr53AwRf2T2c" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="T5kMZNCXNr53AwRf2T2c-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="T5kMZNCXNr53AwRf2T2c-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="mod-r-transform.html#cb325-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb325-2"><a href="mod-r-transform.html#cb325-2"></a><span class="st">   </span><span class="kw">filter</span>((gdpPercap <span class="op">&gt;</span><span class="st"> </span><span class="dv">40000</span> <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">|</span><span class="st"> </span>(gdpPercap <span class="op">&lt;</span><span class="st"> </span><span class="dv">400</span> <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> &quot;Africa&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb325-3"><a href="mod-r-transform.html#cb325-3"></a><span class="st">   </span><span class="co"># print(n=Inf) %&gt;%   # if want to see the intermediate results</span></span>
<span id="cb325-4"><a href="mod-r-transform.html#cb325-4"></a><span class="st">   </span><span class="kw">select</span>(continent, country, gdpPercap) <span class="co"># %&gt;% print(n=Inf)</span></span>
<span id="cb325-5"><a href="mod-r-transform.html#cb325-5"></a><span class="co">#&gt; # A tibble: 21 × 3</span></span>
<span id="cb325-6"><a href="mod-r-transform.html#cb325-6"></a><span class="co">#&gt;    continent country           gdpPercap</span></span>
<span id="cb325-7"><a href="mod-r-transform.html#cb325-7"></a><span class="co">#&gt;    &lt;fct&gt;     &lt;fct&gt;                 &lt;dbl&gt;</span></span>
<span id="cb325-8"><a href="mod-r-transform.html#cb325-8"></a><span class="co">#&gt;  1 Africa    Burundi                339.</span></span>
<span id="cb325-9"><a href="mod-r-transform.html#cb325-9"></a><span class="co">#&gt;  2 Africa    Burundi                380.</span></span>
<span id="cb325-10"><a href="mod-r-transform.html#cb325-10"></a><span class="co">#&gt;  3 Africa    Burundi                355.</span></span>
<span id="cb325-11"><a href="mod-r-transform.html#cb325-11"></a><span class="co">#&gt;  4 Africa    Congo, Dem. Rep.       312.</span></span>
<span id="cb325-12"><a href="mod-r-transform.html#cb325-12"></a><span class="co">#&gt;  5 Africa    Congo, Dem. Rep.       241.</span></span>
<span id="cb325-13"><a href="mod-r-transform.html#cb325-13"></a><span class="co">#&gt;  6 Africa    Congo, Dem. Rep.       278.</span></span>
<span id="cb325-14"><a href="mod-r-transform.html#cb325-14"></a><span class="co">#&gt;  7 Africa    Equatorial Guinea      376.</span></span>
<span id="cb325-15"><a href="mod-r-transform.html#cb325-15"></a><span class="co">#&gt;  8 Africa    Eritrea                329.</span></span>
<span id="cb325-16"><a href="mod-r-transform.html#cb325-16"></a><span class="co">#&gt;  9 Africa    Eritrea                344.</span></span>
<span id="cb325-17"><a href="mod-r-transform.html#cb325-17"></a><span class="co">#&gt; 10 Africa    Eritrea                381.</span></span>
<span id="cb325-18"><a href="mod-r-transform.html#cb325-18"></a><span class="co">#&gt; # … with 11 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#T5kMZNCXNr53AwRf2T2c">
Solution
</button>
<div id="rCHr1mS4uBkQfBs3DGlN" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="rCHr1mS4uBkQfBs3DGlN-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="rCHr1mS4uBkQfBs3DGlN-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="mod-r-transform.html#cb326-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb326-2"><a href="mod-r-transform.html#cb326-2"></a><span class="st">   </span><span class="kw">filter</span>((gdpPercap <span class="op">&gt;</span><span class="st"> </span>___ <span class="op">&amp;</span><span class="st"> </span>continent <span class="op">==</span><span class="st"> </span>___) <span class="op">|</span><span class="st"> </span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb326-3"><a href="mod-r-transform.html#cb326-3"></a><span class="st">   </span><span class="co"># print(n=Inf) %&gt;%   # if want to see the intermediate results</span></span>
<span id="cb326-4"><a href="mod-r-transform.html#cb326-4"></a><span class="st">   </span><span class="kw">select</span>(continent, ___, ___) <span class="co"># %&gt;% print(n=Inf)</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#rCHr1mS4uBkQfBs3DGlN">
Hint
</button>
<ol start="6" class="example" style="list-style-type: decimal">
<li>Subset your data set to find all rows with GDP per capita greater than 40000 in Europe or with GDP per capita less than 500 in Africa.</li>
</ol>
<div id="H4VRz8p1mE8BDvzJ8eaL" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="H4VRz8p1mE8BDvzJ8eaL-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="H4VRz8p1mE8BDvzJ8eaL-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="mod-r-transform.html#cb327-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb327-2"><a href="mod-r-transform.html#cb327-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> pop <span class="op">*</span><span class="st"> </span>gdpPercap)</span>
<span id="cb327-3"><a href="mod-r-transform.html#cb327-3"></a><span class="co">#&gt; # A tibble: 1,704 × 7</span></span>
<span id="cb327-4"><a href="mod-r-transform.html#cb327-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap          gdp</span></span>
<span id="cb327-5"><a href="mod-r-transform.html#cb327-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb327-6"><a href="mod-r-transform.html#cb327-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.  6567086330.</span></span>
<span id="cb327-7"><a href="mod-r-transform.html#cb327-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.  7585448670.</span></span>
<span id="cb327-8"><a href="mod-r-transform.html#cb327-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.  8758855797.</span></span>
<span id="cb327-9"><a href="mod-r-transform.html#cb327-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.  9648014150.</span></span>
<span id="cb327-10"><a href="mod-r-transform.html#cb327-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.  9678553274.</span></span>
<span id="cb327-11"><a href="mod-r-transform.html#cb327-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786. 11697659231.</span></span>
<span id="cb327-12"><a href="mod-r-transform.html#cb327-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978. 12598563401.</span></span>
<span id="cb327-13"><a href="mod-r-transform.html#cb327-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852. 11820990309.</span></span>
<span id="cb327-14"><a href="mod-r-transform.html#cb327-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649. 10595901589.</span></span>
<span id="cb327-15"><a href="mod-r-transform.html#cb327-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635. 14121995875.</span></span>
<span id="cb327-16"><a href="mod-r-transform.html#cb327-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#H4VRz8p1mE8BDvzJ8eaL">
Solution
</button>
<ol start="7" class="example" style="list-style-type: decimal">
<li>Use <code>mutate</code> to calculate each country’s GDP (population times GDP per capita).</li>
</ol>
<p>In general GDP numbers are large and abstract. Let us try to calculate relative numbers.</p>
<div id="oHq8r4QgCwNcBejUrpyf" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oHq8r4QgCwNcBejUrpyf-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oHq8r4QgCwNcBejUrpyf-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="mod-r-transform.html#cb328-1"></a>mean_dk &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb328-2"><a href="mod-r-transform.html#cb328-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb328-3"><a href="mod-r-transform.html#cb328-3"></a><span class="st">  </span><span class="kw">pull</span>(gdpPercap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb328-4"><a href="mod-r-transform.html#cb328-4"></a><span class="st">  </span><span class="kw">mean</span>()</span>
<span id="cb328-5"><a href="mod-r-transform.html#cb328-5"></a>dat &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb328-6"><a href="mod-r-transform.html#cb328-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdpPercapRel =</span> gdpPercap<span class="op">/</span>mean_dk)</span></code></pre></div>
<p>
The relative GDP per capita numbers are, in general, well below 1. We see that most of the countries covered by this dataset have substantially lower GDP per capita, relative to Denmark, across the entire time period.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oHq8r4QgCwNcBejUrpyf">
Solution
</button>
<div id="d2B2qQo9Pi3KmqrxNwhQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="d2B2qQo9Pi3KmqrxNwhQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="d2B2qQo9Pi3KmqrxNwhQ-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="mod-r-transform.html#cb329-1"></a>dat &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb329-2"><a href="mod-r-transform.html#cb329-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdpPercapRel =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#d2B2qQo9Pi3KmqrxNwhQ">
Hint 2
</button>
<div id="ODkRS5MtX1O7HiNdUoaA" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ODkRS5MtX1O7HiNdUoaA-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ODkRS5MtX1O7HiNdUoaA-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="mod-r-transform.html#cb330-1"></a>mean_dk &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb330-2"><a href="mod-r-transform.html#cb330-2"></a><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb330-3"><a href="mod-r-transform.html#cb330-3"></a><span class="st">  </span><span class="kw">pull</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb330-4"><a href="mod-r-transform.html#cb330-4"></a><span class="st">  </span><span class="kw">mean</span>()</span></code></pre></div>
<p>
First you must calculate the mean of Danish <code>gdpPercap</code> and next use that to add a new column <code>gdpPercapRel</code>.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ODkRS5MtX1O7HiNdUoaA">
Hint 1
</button>
<ol start="8" class="example" style="list-style-type: decimal">
<li><p>Use <code>mutate</code> to calculate GDP per capita relative to mean GDP per capita in Denmark over the whole period (<code>gdpPercap</code> divided by the mean of Danish <code>gdpPercap</code>). Have a look at the calculated data. Does the numbers seem reasonable? I perceive Denmark to be a “high GDP” country, so I predict that the distribution of <code>gdpPercapRel</code> is located below 1, possibly even well below.</p></li>
<li><p>Use <code>arrange</code> to order</p></li>
</ol>
<div id="w35qQijzx8f2UnNweQpn" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="w35qQijzx8f2UnNweQpn-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="w35qQijzx8f2UnNweQpn-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="mod-r-transform.html#cb331-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb331-2"><a href="mod-r-transform.html#cb331-2"></a><span class="st">  </span><span class="kw">arrange</span>(year, country)</span>
<span id="cb331-3"><a href="mod-r-transform.html#cb331-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb331-4"><a href="mod-r-transform.html#cb331-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb331-5"><a href="mod-r-transform.html#cb331-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb331-6"><a href="mod-r-transform.html#cb331-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb331-7"><a href="mod-r-transform.html#cb331-7"></a><span class="co">#&gt;  2 Albania     Europe     1952    55.2  1282697     1601.</span></span>
<span id="cb331-8"><a href="mod-r-transform.html#cb331-8"></a><span class="co">#&gt;  3 Algeria     Africa     1952    43.1  9279525     2449.</span></span>
<span id="cb331-9"><a href="mod-r-transform.html#cb331-9"></a><span class="co">#&gt;  4 Angola      Africa     1952    30.0  4232095     3521.</span></span>
<span id="cb331-10"><a href="mod-r-transform.html#cb331-10"></a><span class="co">#&gt;  5 Argentina   Americas   1952    62.5 17876956     5911.</span></span>
<span id="cb331-11"><a href="mod-r-transform.html#cb331-11"></a><span class="co">#&gt;  6 Australia   Oceania    1952    69.1  8691212    10040.</span></span>
<span id="cb331-12"><a href="mod-r-transform.html#cb331-12"></a><span class="co">#&gt;  7 Austria     Europe     1952    66.8  6927772     6137.</span></span>
<span id="cb331-13"><a href="mod-r-transform.html#cb331-13"></a><span class="co">#&gt;  8 Bahrain     Asia       1952    50.9   120447     9867.</span></span>
<span id="cb331-14"><a href="mod-r-transform.html#cb331-14"></a><span class="co">#&gt;  9 Bangladesh  Asia       1952    37.5 46886859      684.</span></span>
<span id="cb331-15"><a href="mod-r-transform.html#cb331-15"></a><span class="co">#&gt; 10 Belgium     Europe     1952    68    8730405     8343.</span></span>
<span id="cb331-16"><a href="mod-r-transform.html#cb331-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#w35qQijzx8f2UnNweQpn">
Solution
</button>
<p>        a) data by year then country, as opposed to current by country then year,</p>
<div id="QKZradlgr5bETHuOZ5wj" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="QKZradlgr5bETHuOZ5wj-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="QKZradlgr5bETHuOZ5wj-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="mod-r-transform.html#cb332-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb332-2"><a href="mod-r-transform.html#cb332-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb332-3"><a href="mod-r-transform.html#cb332-3"></a><span class="st">  </span><span class="kw">arrange</span>(lifeExp)</span>
<span id="cb332-4"><a href="mod-r-transform.html#cb332-4"></a><span class="co">#&gt; # A tibble: 142 × 6</span></span>
<span id="cb332-5"><a href="mod-r-transform.html#cb332-5"></a><span class="co">#&gt;    country                  continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb332-6"><a href="mod-r-transform.html#cb332-6"></a><span class="co">#&gt;    &lt;fct&gt;                    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb332-7"><a href="mod-r-transform.html#cb332-7"></a><span class="co">#&gt;  1 Swaziland                Africa     2007    39.6  1133066     4513.</span></span>
<span id="cb332-8"><a href="mod-r-transform.html#cb332-8"></a><span class="co">#&gt;  2 Mozambique               Africa     2007    42.1 19951656      824.</span></span>
<span id="cb332-9"><a href="mod-r-transform.html#cb332-9"></a><span class="co">#&gt;  3 Zambia                   Africa     2007    42.4 11746035     1271.</span></span>
<span id="cb332-10"><a href="mod-r-transform.html#cb332-10"></a><span class="co">#&gt;  4 Sierra Leone             Africa     2007    42.6  6144562      863.</span></span>
<span id="cb332-11"><a href="mod-r-transform.html#cb332-11"></a><span class="co">#&gt;  5 Lesotho                  Africa     2007    42.6  2012649     1569.</span></span>
<span id="cb332-12"><a href="mod-r-transform.html#cb332-12"></a><span class="co">#&gt;  6 Angola                   Africa     2007    42.7 12420476     4797.</span></span>
<span id="cb332-13"><a href="mod-r-transform.html#cb332-13"></a><span class="co">#&gt;  7 Zimbabwe                 Africa     2007    43.5 12311143      470.</span></span>
<span id="cb332-14"><a href="mod-r-transform.html#cb332-14"></a><span class="co">#&gt;  8 Afghanistan              Asia       2007    43.8 31889923      975.</span></span>
<span id="cb332-15"><a href="mod-r-transform.html#cb332-15"></a><span class="co">#&gt;  9 Central African Republic Africa     2007    44.7  4369038      706.</span></span>
<span id="cb332-16"><a href="mod-r-transform.html#cb332-16"></a><span class="co">#&gt; 10 Liberia                  Africa     2007    45.7  3193942      415.</span></span>
<span id="cb332-17"><a href="mod-r-transform.html#cb332-17"></a><span class="co">#&gt; # … with 132 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#QKZradlgr5bETHuOZ5wj">
Solution
</button>
<p>        b) data from 2007, sorted on life expectancy,</p>
<div id="TBjc33SBUyDi9Wp7oF6A" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="TBjc33SBUyDi9Wp7oF6A-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="TBjc33SBUyDi9Wp7oF6A-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="mod-r-transform.html#cb333-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb333-2"><a href="mod-r-transform.html#cb333-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span></span>
<span id="cb333-3"><a href="mod-r-transform.html#cb333-3"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(lifeExp))</span>
<span id="cb333-4"><a href="mod-r-transform.html#cb333-4"></a><span class="co">#&gt; # A tibble: 142 × 6</span></span>
<span id="cb333-5"><a href="mod-r-transform.html#cb333-5"></a><span class="co">#&gt;    country          continent  year lifeExp       pop gdpPercap</span></span>
<span id="cb333-6"><a href="mod-r-transform.html#cb333-6"></a><span class="co">#&gt;    &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb333-7"><a href="mod-r-transform.html#cb333-7"></a><span class="co">#&gt;  1 Japan            Asia       2007    82.6 127467972    31656.</span></span>
<span id="cb333-8"><a href="mod-r-transform.html#cb333-8"></a><span class="co">#&gt;  2 Hong Kong, China Asia       2007    82.2   6980412    39725.</span></span>
<span id="cb333-9"><a href="mod-r-transform.html#cb333-9"></a><span class="co">#&gt;  3 Iceland          Europe     2007    81.8    301931    36181.</span></span>
<span id="cb333-10"><a href="mod-r-transform.html#cb333-10"></a><span class="co">#&gt;  4 Switzerland      Europe     2007    81.7   7554661    37506.</span></span>
<span id="cb333-11"><a href="mod-r-transform.html#cb333-11"></a><span class="co">#&gt;  5 Australia        Oceania    2007    81.2  20434176    34435.</span></span>
<span id="cb333-12"><a href="mod-r-transform.html#cb333-12"></a><span class="co">#&gt;  6 Spain            Europe     2007    80.9  40448191    28821.</span></span>
<span id="cb333-13"><a href="mod-r-transform.html#cb333-13"></a><span class="co">#&gt;  7 Sweden           Europe     2007    80.9   9031088    33860.</span></span>
<span id="cb333-14"><a href="mod-r-transform.html#cb333-14"></a><span class="co">#&gt;  8 Israel           Asia       2007    80.7   6426679    25523.</span></span>
<span id="cb333-15"><a href="mod-r-transform.html#cb333-15"></a><span class="co">#&gt;  9 France           Europe     2007    80.7  61083916    30470.</span></span>
<span id="cb333-16"><a href="mod-r-transform.html#cb333-16"></a><span class="co">#&gt; 10 Canada           Americas   2007    80.7  33390141    36319.</span></span>
<span id="cb333-17"><a href="mod-r-transform.html#cb333-17"></a><span class="co">#&gt; # … with 132 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#TBjc33SBUyDi9Wp7oF6A">
Solution
</button>
<p>        c) data from 2007, sorted on life expectancy in <strong>desc</strong>ending order. Hint: use <code>desc()</code> inside <code>arrange</code>.</p>
<ol start="10" class="example" style="list-style-type: decimal">
<li>Use <code>select</code> to</li>
</ol>
<div id="fg8y9whZFLqvVthQIx7g" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="fg8y9whZFLqvVthQIx7g-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="fg8y9whZFLqvVthQIx7g-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="mod-r-transform.html#cb334-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb334-2"><a href="mod-r-transform.html#cb334-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">yr =</span> year, <span class="kw">everything</span>())</span>
<span id="cb334-3"><a href="mod-r-transform.html#cb334-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb334-4"><a href="mod-r-transform.html#cb334-4"></a><span class="co">#&gt;       yr country     continent lifeExp      pop gdpPercap</span></span>
<span id="cb334-5"><a href="mod-r-transform.html#cb334-5"></a><span class="co">#&gt;    &lt;int&gt; &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb334-6"><a href="mod-r-transform.html#cb334-6"></a><span class="co">#&gt;  1  1952 Afghanistan Asia         28.8  8425333      779.</span></span>
<span id="cb334-7"><a href="mod-r-transform.html#cb334-7"></a><span class="co">#&gt;  2  1957 Afghanistan Asia         30.3  9240934      821.</span></span>
<span id="cb334-8"><a href="mod-r-transform.html#cb334-8"></a><span class="co">#&gt;  3  1962 Afghanistan Asia         32.0 10267083      853.</span></span>
<span id="cb334-9"><a href="mod-r-transform.html#cb334-9"></a><span class="co">#&gt;  4  1967 Afghanistan Asia         34.0 11537966      836.</span></span>
<span id="cb334-10"><a href="mod-r-transform.html#cb334-10"></a><span class="co">#&gt;  5  1972 Afghanistan Asia         36.1 13079460      740.</span></span>
<span id="cb334-11"><a href="mod-r-transform.html#cb334-11"></a><span class="co">#&gt;  6  1977 Afghanistan Asia         38.4 14880372      786.</span></span>
<span id="cb334-12"><a href="mod-r-transform.html#cb334-12"></a><span class="co">#&gt;  7  1982 Afghanistan Asia         39.9 12881816      978.</span></span>
<span id="cb334-13"><a href="mod-r-transform.html#cb334-13"></a><span class="co">#&gt;  8  1987 Afghanistan Asia         40.8 13867957      852.</span></span>
<span id="cb334-14"><a href="mod-r-transform.html#cb334-14"></a><span class="co">#&gt;  9  1992 Afghanistan Asia         41.7 16317921      649.</span></span>
<span id="cb334-15"><a href="mod-r-transform.html#cb334-15"></a><span class="co">#&gt; 10  1997 Afghanistan Asia         41.8 22227415      635.</span></span>
<span id="cb334-16"><a href="mod-r-transform.html#cb334-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#fg8y9whZFLqvVthQIx7g">
Solution
</button>
<p>        a) rename <code>year</code> to <code>yr</code> and keep all other columns (the select helper <code>everything</code> may be used),</p>
<div id="oDaAPEWfuKFJE7Gv3Vnp" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oDaAPEWfuKFJE7Gv3Vnp-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oDaAPEWfuKFJE7Gv3Vnp-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="mod-r-transform.html#cb335-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb335-2"><a href="mod-r-transform.html#cb335-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>pop)</span>
<span id="cb335-3"><a href="mod-r-transform.html#cb335-3"></a><span class="co">#&gt; # A tibble: 1,704 × 5</span></span>
<span id="cb335-4"><a href="mod-r-transform.html#cb335-4"></a><span class="co">#&gt;    country     continent  year lifeExp gdpPercap</span></span>
<span id="cb335-5"><a href="mod-r-transform.html#cb335-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb335-6"><a href="mod-r-transform.html#cb335-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8      779.</span></span>
<span id="cb335-7"><a href="mod-r-transform.html#cb335-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3      821.</span></span>
<span id="cb335-8"><a href="mod-r-transform.html#cb335-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0      853.</span></span>
<span id="cb335-9"><a href="mod-r-transform.html#cb335-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0      836.</span></span>
<span id="cb335-10"><a href="mod-r-transform.html#cb335-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1      740.</span></span>
<span id="cb335-11"><a href="mod-r-transform.html#cb335-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4      786.</span></span>
<span id="cb335-12"><a href="mod-r-transform.html#cb335-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9      978.</span></span>
<span id="cb335-13"><a href="mod-r-transform.html#cb335-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8      852.</span></span>
<span id="cb335-14"><a href="mod-r-transform.html#cb335-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7      649.</span></span>
<span id="cb335-15"><a href="mod-r-transform.html#cb335-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8      635.</span></span>
<span id="cb335-16"><a href="mod-r-transform.html#cb335-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oDaAPEWfuKFJE7Gv3Vnp">
Solution
</button>
<p>        b) remove <code>pop</code>,</p>
<div id="ZEa8T5IfCOnE4mfVDBb2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ZEa8T5IfCOnE4mfVDBb2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ZEa8T5IfCOnE4mfVDBb2-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="mod-r-transform.html#cb336-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb336-2"><a href="mod-r-transform.html#cb336-2"></a><span class="st">  </span><span class="kw">select</span>(year, pop, <span class="kw">everything</span>())</span>
<span id="cb336-3"><a href="mod-r-transform.html#cb336-3"></a><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span id="cb336-4"><a href="mod-r-transform.html#cb336-4"></a><span class="co">#&gt;     year      pop country     continent lifeExp gdpPercap</span></span>
<span id="cb336-5"><a href="mod-r-transform.html#cb336-5"></a><span class="co">#&gt;    &lt;int&gt;    &lt;int&gt; &lt;fct&gt;       &lt;fct&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb336-6"><a href="mod-r-transform.html#cb336-6"></a><span class="co">#&gt;  1  1952  8425333 Afghanistan Asia         28.8      779.</span></span>
<span id="cb336-7"><a href="mod-r-transform.html#cb336-7"></a><span class="co">#&gt;  2  1957  9240934 Afghanistan Asia         30.3      821.</span></span>
<span id="cb336-8"><a href="mod-r-transform.html#cb336-8"></a><span class="co">#&gt;  3  1962 10267083 Afghanistan Asia         32.0      853.</span></span>
<span id="cb336-9"><a href="mod-r-transform.html#cb336-9"></a><span class="co">#&gt;  4  1967 11537966 Afghanistan Asia         34.0      836.</span></span>
<span id="cb336-10"><a href="mod-r-transform.html#cb336-10"></a><span class="co">#&gt;  5  1972 13079460 Afghanistan Asia         36.1      740.</span></span>
<span id="cb336-11"><a href="mod-r-transform.html#cb336-11"></a><span class="co">#&gt;  6  1977 14880372 Afghanistan Asia         38.4      786.</span></span>
<span id="cb336-12"><a href="mod-r-transform.html#cb336-12"></a><span class="co">#&gt;  7  1982 12881816 Afghanistan Asia         39.9      978.</span></span>
<span id="cb336-13"><a href="mod-r-transform.html#cb336-13"></a><span class="co">#&gt;  8  1987 13867957 Afghanistan Asia         40.8      852.</span></span>
<span id="cb336-14"><a href="mod-r-transform.html#cb336-14"></a><span class="co">#&gt;  9  1992 16317921 Afghanistan Asia         41.7      649.</span></span>
<span id="cb336-15"><a href="mod-r-transform.html#cb336-15"></a><span class="co">#&gt; 10  1997 22227415 Afghanistan Asia         41.8      635.</span></span>
<span id="cb336-16"><a href="mod-r-transform.html#cb336-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ZEa8T5IfCOnE4mfVDBb2">
Solution
</button>
<p>        c) reorder columns in order <code>year</code>, <code>pop</code>, … (remaining).</p>
<ol start="11" class="example" style="list-style-type: decimal">
<li>Use <code>group_by</code> and <code>summarize</code> to find the</li>
</ol>
<div id="EpI0x5kp0qYLKd7JalYg" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="EpI0x5kp0qYLKd7JalYg-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="EpI0x5kp0qYLKd7JalYg-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="mod-r-transform.html#cb337-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb337-2"><a href="mod-r-transform.html#cb337-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb337-3"><a href="mod-r-transform.html#cb337-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>())</span>
<span id="cb337-4"><a href="mod-r-transform.html#cb337-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb337-5"><a href="mod-r-transform.html#cb337-5"></a><span class="co">#&gt;   continent     n</span></span>
<span id="cb337-6"><a href="mod-r-transform.html#cb337-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span></span>
<span id="cb337-7"><a href="mod-r-transform.html#cb337-7"></a><span class="co">#&gt; 1 Africa      624</span></span>
<span id="cb337-8"><a href="mod-r-transform.html#cb337-8"></a><span class="co">#&gt; 2 Americas    300</span></span>
<span id="cb337-9"><a href="mod-r-transform.html#cb337-9"></a><span class="co">#&gt; 3 Asia        396</span></span>
<span id="cb337-10"><a href="mod-r-transform.html#cb337-10"></a><span class="co">#&gt; 4 Europe      360</span></span>
<span id="cb337-11"><a href="mod-r-transform.html#cb337-11"></a><span class="co">#&gt; 5 Oceania      24</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#EpI0x5kp0qYLKd7JalYg">
Solution
</button>
<p>        a) number of observations per continent,</p>
<div id="Nuyl0WnCNXkKKQHc2bP2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Nuyl0WnCNXkKKQHc2bP2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Nuyl0WnCNXkKKQHc2bP2-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="mod-r-transform.html#cb338-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb338-2"><a href="mod-r-transform.html#cb338-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb338-3"><a href="mod-r-transform.html#cb338-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">n_countries =</span> <span class="kw">n_distinct</span>(country))</span>
<span id="cb338-4"><a href="mod-r-transform.html#cb338-4"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb338-5"><a href="mod-r-transform.html#cb338-5"></a><span class="co">#&gt;   continent     n n_countries</span></span>
<span id="cb338-6"><a href="mod-r-transform.html#cb338-6"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb338-7"><a href="mod-r-transform.html#cb338-7"></a><span class="co">#&gt; 1 Africa      624          52</span></span>
<span id="cb338-8"><a href="mod-r-transform.html#cb338-8"></a><span class="co">#&gt; 2 Americas    300          25</span></span>
<span id="cb338-9"><a href="mod-r-transform.html#cb338-9"></a><span class="co">#&gt; 3 Asia        396          33</span></span>
<span id="cb338-10"><a href="mod-r-transform.html#cb338-10"></a><span class="co">#&gt; 4 Europe      360          30</span></span>
<span id="cb338-11"><a href="mod-r-transform.html#cb338-11"></a><span class="co">#&gt; 5 Oceania      24           2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Nuyl0WnCNXkKKQHc2bP2">
Solution
</button>
<p>        b) number of countries per continent (use <code>n_distinct</code> inside <code>summarize</code> to count the number of distinct observations),</p>
<div id="zcqOxNo0s4oagiHfIZ3L" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="zcqOxNo0s4oagiHfIZ3L-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="zcqOxNo0s4oagiHfIZ3L-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="mod-r-transform.html#cb339-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb339-2"><a href="mod-r-transform.html#cb339-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb339-3"><a href="mod-r-transform.html#cb339-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">avg_lifeExp =</span> <span class="kw">mean</span>(lifeExp))</span>
<span id="cb339-4"><a href="mod-r-transform.html#cb339-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb339-5"><a href="mod-r-transform.html#cb339-5"></a><span class="co">#&gt;   continent avg_lifeExp</span></span>
<span id="cb339-6"><a href="mod-r-transform.html#cb339-6"></a><span class="co">#&gt;   &lt;fct&gt;           &lt;dbl&gt;</span></span>
<span id="cb339-7"><a href="mod-r-transform.html#cb339-7"></a><span class="co">#&gt; 1 Africa           48.9</span></span>
<span id="cb339-8"><a href="mod-r-transform.html#cb339-8"></a><span class="co">#&gt; 2 Americas         64.7</span></span>
<span id="cb339-9"><a href="mod-r-transform.html#cb339-9"></a><span class="co">#&gt; 3 Asia             60.1</span></span>
<span id="cb339-10"><a href="mod-r-transform.html#cb339-10"></a><span class="co">#&gt; 4 Europe           71.9</span></span>
<span id="cb339-11"><a href="mod-r-transform.html#cb339-11"></a><span class="co">#&gt; 5 Oceania          74.3</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#zcqOxNo0s4oagiHfIZ3L">
Solution
</button>
<p>        c) average life expectancy by continent,</p>
<div id="UWoVqaXcIZzvlqvbMkU0" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="UWoVqaXcIZzvlqvbMkU0-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="UWoVqaXcIZzvlqvbMkU0-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="mod-r-transform.html#cb340-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb340-2"><a href="mod-r-transform.html#cb340-2"></a><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Asia&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb340-3"><a href="mod-r-transform.html#cb340-3"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb340-4"><a href="mod-r-transform.html#cb340-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">min_lifeExp =</span> <span class="kw">min</span>(lifeExp), <span class="dt">max_lifeExp =</span> <span class="kw">max</span>(lifeExp))</span>
<span id="cb340-5"><a href="mod-r-transform.html#cb340-5"></a><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span id="cb340-6"><a href="mod-r-transform.html#cb340-6"></a><span class="co">#&gt;     year min_lifeExp max_lifeExp</span></span>
<span id="cb340-7"><a href="mod-r-transform.html#cb340-7"></a><span class="co">#&gt;    &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb340-8"><a href="mod-r-transform.html#cb340-8"></a><span class="co">#&gt;  1  1952        28.8        65.4</span></span>
<span id="cb340-9"><a href="mod-r-transform.html#cb340-9"></a><span class="co">#&gt;  2  1957        30.3        67.8</span></span>
<span id="cb340-10"><a href="mod-r-transform.html#cb340-10"></a><span class="co">#&gt;  3  1962        32.0        69.4</span></span>
<span id="cb340-11"><a href="mod-r-transform.html#cb340-11"></a><span class="co">#&gt;  4  1967        34.0        71.4</span></span>
<span id="cb340-12"><a href="mod-r-transform.html#cb340-12"></a><span class="co">#&gt;  5  1972        36.1        73.4</span></span>
<span id="cb340-13"><a href="mod-r-transform.html#cb340-13"></a><span class="co">#&gt;  6  1977        31.2        75.4</span></span>
<span id="cb340-14"><a href="mod-r-transform.html#cb340-14"></a><span class="co">#&gt;  7  1982        39.9        77.1</span></span>
<span id="cb340-15"><a href="mod-r-transform.html#cb340-15"></a><span class="co">#&gt;  8  1987        40.8        78.7</span></span>
<span id="cb340-16"><a href="mod-r-transform.html#cb340-16"></a><span class="co">#&gt;  9  1992        41.7        79.4</span></span>
<span id="cb340-17"><a href="mod-r-transform.html#cb340-17"></a><span class="co">#&gt; 10  1997        41.8        80.7</span></span>
<span id="cb340-18"><a href="mod-r-transform.html#cb340-18"></a><span class="co">#&gt; 11  2002        42.1        82  </span></span>
<span id="cb340-19"><a href="mod-r-transform.html#cb340-19"></a><span class="co">#&gt; 12  2007        43.8        82.6</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#UWoVqaXcIZzvlqvbMkU0">
Solution
</button>
<p>        d) minimum and maximum life expectancies seen by year in Asia.</p>
<div id="fPx8NtnV1FIf6xrHQLLI" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="fPx8NtnV1FIf6xrHQLLI-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="fPx8NtnV1FIf6xrHQLLI-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="mod-r-transform.html#cb341-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb341-2"><a href="mod-r-transform.html#cb341-2"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st">                 </span><span class="co"># group by country</span></span>
<span id="cb341-3"><a href="mod-r-transform.html#cb341-3"></a><span class="st">  </span><span class="kw">select</span>(country, year, lifeExp) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># select relevant columns</span></span>
<span id="cb341-4"><a href="mod-r-transform.html#cb341-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># make sure that data is sorted correct</span></span>
<span id="cb341-5"><a href="mod-r-transform.html#cb341-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lifeExp_gain =</span> lifeExp <span class="op">-</span><span class="st"> </span><span class="kw">first</span>(lifeExp)) <span class="op">%&gt;%</span><span class="st">       </span></span>
<span id="cb341-6"><a href="mod-r-transform.html#cb341-6"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1963</span>)                   <span class="co"># just for nice printing</span></span>
<span id="cb341-7"><a href="mod-r-transform.html#cb341-7"></a><span class="co">#&gt; # A tibble: 426 × 4</span></span>
<span id="cb341-8"><a href="mod-r-transform.html#cb341-8"></a><span class="co">#&gt; # Groups:   country [142]</span></span>
<span id="cb341-9"><a href="mod-r-transform.html#cb341-9"></a><span class="co">#&gt;    country      year lifeExp lifeExp_gain</span></span>
<span id="cb341-10"><a href="mod-r-transform.html#cb341-10"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb341-11"><a href="mod-r-transform.html#cb341-11"></a><span class="co">#&gt;  1 Afghanistan  1952    28.8         0   </span></span>
<span id="cb341-12"><a href="mod-r-transform.html#cb341-12"></a><span class="co">#&gt;  2 Afghanistan  1957    30.3         1.53</span></span>
<span id="cb341-13"><a href="mod-r-transform.html#cb341-13"></a><span class="co">#&gt;  3 Afghanistan  1962    32.0         3.20</span></span>
<span id="cb341-14"><a href="mod-r-transform.html#cb341-14"></a><span class="co">#&gt;  4 Albania      1952    55.2         0   </span></span>
<span id="cb341-15"><a href="mod-r-transform.html#cb341-15"></a><span class="co">#&gt;  5 Albania      1957    59.3         4.05</span></span>
<span id="cb341-16"><a href="mod-r-transform.html#cb341-16"></a><span class="co">#&gt;  6 Albania      1962    64.8         9.59</span></span>
<span id="cb341-17"><a href="mod-r-transform.html#cb341-17"></a><span class="co">#&gt;  7 Algeria      1952    43.1         0   </span></span>
<span id="cb341-18"><a href="mod-r-transform.html#cb341-18"></a><span class="co">#&gt;  8 Algeria      1957    45.7         2.61</span></span>
<span id="cb341-19"><a href="mod-r-transform.html#cb341-19"></a><span class="co">#&gt;  9 Algeria      1962    48.3         5.23</span></span>
<span id="cb341-20"><a href="mod-r-transform.html#cb341-20"></a><span class="co">#&gt; 10 Angola       1952    30.0         0   </span></span>
<span id="cb341-21"><a href="mod-r-transform.html#cb341-21"></a><span class="co">#&gt; # … with 416 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#fPx8NtnV1FIf6xrHQLLI">
Solution
</button>
<div id="uHroBEfT69JbwQv6rGHA" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="uHroBEfT69JbwQv6rGHA-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="uHroBEfT69JbwQv6rGHA-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="mod-r-transform.html#cb342-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb342-2"><a href="mod-r-transform.html#cb342-2"></a><span class="st">  </span><span class="kw">group_by</span>(country) <span class="op">%&gt;%</span><span class="st">                 </span><span class="co"># group by country</span></span>
<span id="cb342-3"><a href="mod-r-transform.html#cb342-3"></a><span class="st">  </span><span class="kw">select</span>(country, year, lifeExp) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># select relevant columns</span></span>
<span id="cb342-4"><a href="mod-r-transform.html#cb342-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, <span class="dt">.by_group =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># make sure that data is sorted correct</span></span>
<span id="cb342-5"><a href="mod-r-transform.html#cb342-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lifeExp_gain =</span> ___) <span class="op">%&gt;%</span><span class="st">        </span><span class="co"># define new variable</span></span>
<span id="cb342-6"><a href="mod-r-transform.html#cb342-6"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1963</span>)                   <span class="co"># just for nice printing</span></span></code></pre></div>
<p>
The <code>first</code> function may be helpful to extract the first value from a vector in each group.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#uHroBEfT69JbwQv6rGHA">
Hint
</button>
<ol start="12" class="example" style="list-style-type: decimal">
<li>Sometimes you do not want to collapse the <span class="math inline">\(n\)</span> rows for each group into one row. That is, you do not want to use <code>summarize</code> but <code>mutate</code> within your groups. Try to make a new variable that is the years of life expectancy gained (lost) relative to 1952, for each individual country.</li>
</ol>
<div id="167Cp0Nu0JQYvWjcCV3m" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="167Cp0Nu0JQYvWjcCV3m-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="167Cp0Nu0JQYvWjcCV3m-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="mod-r-transform.html#cb343-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb343-2"><a href="mod-r-transform.html#cb343-2"></a><span class="st">  </span><span class="kw">select</span>(country, year, continent, lifeExp) <span class="op">%&gt;%</span><span class="st">     </span></span>
<span id="cb343-3"><a href="mod-r-transform.html#cb343-3"></a><span class="st">  </span><span class="kw">group_by</span>(continent, country) <span class="op">%&gt;%</span><span class="st">                  </span></span>
<span id="cb343-4"><a href="mod-r-transform.html#cb343-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">le_delta =</span> lifeExp <span class="op">-</span><span class="st"> </span><span class="kw">lag</span>(lifeExp)) <span class="op">%&gt;%</span></span>
<span id="cb343-5"><a href="mod-r-transform.html#cb343-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">worst_le_delta =</span> <span class="kw">min</span>(le_delta, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb343-6"><a href="mod-r-transform.html#cb343-6"></a><span class="st">  </span><span class="kw">slice_min</span>(worst_le_delta) <span class="op">%&gt;%</span></span>
<span id="cb343-7"><a href="mod-r-transform.html#cb343-7"></a><span class="st">  </span><span class="kw">arrange</span>(worst_le_delta)</span>
<span id="cb343-8"><a href="mod-r-transform.html#cb343-8"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb343-9"><a href="mod-r-transform.html#cb343-9"></a><span class="co">#&gt; # Groups:   continent [5]</span></span>
<span id="cb343-10"><a href="mod-r-transform.html#cb343-10"></a><span class="co">#&gt;   continent country     worst_le_delta</span></span>
<span id="cb343-11"><a href="mod-r-transform.html#cb343-11"></a><span class="co">#&gt;   &lt;fct&gt;     &lt;fct&gt;                &lt;dbl&gt;</span></span>
<span id="cb343-12"><a href="mod-r-transform.html#cb343-12"></a><span class="co">#&gt; 1 Africa    Rwanda             -20.4  </span></span>
<span id="cb343-13"><a href="mod-r-transform.html#cb343-13"></a><span class="co">#&gt; 2 Asia      Cambodia            -9.10 </span></span>
<span id="cb343-14"><a href="mod-r-transform.html#cb343-14"></a><span class="co">#&gt; 3 Americas  El Salvador         -1.51 </span></span>
<span id="cb343-15"><a href="mod-r-transform.html#cb343-15"></a><span class="co">#&gt; 4 Europe    Montenegro          -1.46 </span></span>
<span id="cb343-16"><a href="mod-r-transform.html#cb343-16"></a><span class="co">#&gt; 5 Oceania   Australia            0.170</span></span></code></pre></div>
<p>
Mostly you are seeing what genocide looks like in dry statistics on average life expectancy.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#167Cp0Nu0JQYvWjcCV3m">
Solution
</button>
<div id="CrVFo41aqSVCiX3pFWK6" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CrVFo41aqSVCiX3pFWK6-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CrVFo41aqSVCiX3pFWK6-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="mod-r-transform.html#cb344-1"></a>gapminder <span class="op">%&gt;%</span></span>
<span id="cb344-2"><a href="mod-r-transform.html#cb344-2"></a><span class="st">  </span><span class="kw">select</span>(country, year, continent, lifeExp) <span class="op">%&gt;%</span><span class="st">             </span><span class="co"># select relevant columns</span></span>
<span id="cb344-3"><a href="mod-r-transform.html#cb344-3"></a><span class="st">  </span><span class="kw">group_by</span>(continent, country) <span class="op">%&gt;%</span><span class="st">                          </span><span class="co"># group</span></span>
<span id="cb344-4"><a href="mod-r-transform.html#cb344-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">le_delta =</span> ___) <span class="op">%&gt;%</span><span class="st">                                </span><span class="co"># within country, take (lifeExp in year i) - (lifeExp in year i - 1)</span></span>
<span id="cb344-5"><a href="mod-r-transform.html#cb344-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">worst_le_delta =</span> <span class="kw">min</span>(___, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># find lowest value</span></span>
<span id="cb344-6"><a href="mod-r-transform.html#cb344-6"></a><span class="st">  </span><span class="kw">slice_min</span>(worst_le_delta) <span class="op">%&gt;%</span><span class="st">                             </span><span class="co"># find min in each continent</span></span>
<span id="cb344-7"><a href="mod-r-transform.html#cb344-7"></a><span class="st">  </span><span class="kw">arrange</span>(worst_le_delta)                                   <span class="co"># arrange </span></span></code></pre></div>
<p>
The <code>lag</code> function is useful to select the value in the previous row. Positive values of <code>le_delta</code> means lifeExp went up, negative means it went down. Break the code into pieces, starting at the top, and inspect the intermediate results. These commands are built up gradually, with lots of errors and refinements along the way.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CrVFo41aqSVCiX3pFWK6">
Hint
</button>
<ol start="13" class="example" style="list-style-type: decimal">
<li>Which country experienced the sharpest 5-year drop in life expectancy in each continent? Recall that the Gapminder data only has data every five years, e.g. for 1952, 1957, etc. So this really means looking at life expectancy changes between adjacent timepoints.</li>
</ol>
</div>
<div id="ex-babynames1" class="section level3">
<h3><span class="header-section-number">17.5.2</span> Exercise (babynames)</h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The package babynames contains the dataset <code>babynames</code> provided by the U.S. Social Security Administration. For each year from 1880 to 2017, the number of children of each sex given each name. All names with more than 5 uses are given (source: <a href="http://www.ssa.gov/oact/babynames/limits.html" class="uri">http://www.ssa.gov/oact/babynames/limits.html</a>).</p>
<p>Install it using</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="mod-r-transform.html#cb345-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;babynames&quot;</span>)</span></code></pre></div>
<p>We will use the skimr package to get an overview over <code>babynames</code>:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="mod-r-transform.html#cb346-1"></a><span class="kw">library</span>(babynames)</span>
<span id="cb346-2"><a href="mod-r-transform.html#cb346-2"></a><span class="kw">library</span>(skimr)</span>
<span id="cb346-3"><a href="mod-r-transform.html#cb346-3"></a><span class="kw">skim</span>(babynames)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-322">Table 17.1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">babynames</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1924665</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sex</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">name</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">15</td>
<td align="right">0</td>
<td align="right">97310</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1975</td>
<td align="right">34</td>
<td align="right">1880</td>
<td align="right">1951</td>
<td align="right">1985</td>
<td align="right">2003</td>
<td align="right">2017.00</td>
<td align="left">▁▂▃▅▇</td>
</tr>
<tr class="even">
<td align="left">n</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">181</td>
<td align="right">1533</td>
<td align="right">5</td>
<td align="right">7</td>
<td align="right">12</td>
<td align="right">32</td>
<td align="right">99686.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">prop</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.08</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<div id="qcq7fbwZIvqQUlFooPu4" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="qcq7fbwZIvqQUlFooPu4-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="qcq7fbwZIvqQUlFooPu4-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
The last line only selects the <code>n</code> column.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#qcq7fbwZIvqQUlFooPu4">
Solution
</button>
<ol style="list-style-type: decimal">
<li><p>Which of these is NOT a way to select the <code>name</code> and <code>n</code> columns together?</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="mod-r-transform.html#cb347-1"></a><span class="kw">select</span>(babynames, <span class="op">-</span><span class="kw">c</span>(year, sex, prop))</span>
<span id="cb347-2"><a href="mod-r-transform.html#cb347-2"></a><span class="kw">select</span>(babynames, name<span class="op">:</span>n)</span>
<span id="cb347-3"><a href="mod-r-transform.html#cb347-3"></a><span class="kw">select</span>(babynames, <span class="kw">starts_with</span>(<span class="st">&quot;n&quot;</span>))</span>
<span id="cb347-4"><a href="mod-r-transform.html#cb347-4"></a><span class="kw">select</span>(babynames, <span class="kw">ends_with</span>(<span class="st">&quot;n&quot;</span>))</span></code></pre></div></li>
<li><p>Use <code>filter</code> and the logical operators to find:</p></li>
</ol>
<div id="oUIcJeuZdPnrMUtSCfje" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="oUIcJeuZdPnrMUtSCfje-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="oUIcJeuZdPnrMUtSCfje-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="mod-r-transform.html#cb348-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb348-2"><a href="mod-r-transform.html#cb348-2"></a><span class="st">  </span><span class="kw">filter</span>(prop <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.08</span>)</span>
<span id="cb348-3"><a href="mod-r-transform.html#cb348-3"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb348-4"><a href="mod-r-transform.html#cb348-4"></a><span class="co">#&gt;    year sex   name        n   prop</span></span>
<span id="cb348-5"><a href="mod-r-transform.html#cb348-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt;</span></span>
<span id="cb348-6"><a href="mod-r-transform.html#cb348-6"></a><span class="co">#&gt; 1  1880 M     John     9655 0.0815</span></span>
<span id="cb348-7"><a href="mod-r-transform.html#cb348-7"></a><span class="co">#&gt; 2  1880 M     William  9532 0.0805</span></span>
<span id="cb348-8"><a href="mod-r-transform.html#cb348-8"></a><span class="co">#&gt; 3  1881 M     John     8769 0.0810</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#oUIcJeuZdPnrMUtSCfje">
Solution
</button>
<p>        a) all of the names where prop is greater than or equal to 0.08,</p>
<div id="Cx0t5pYboG286AxCKggH" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Cx0t5pYboG286AxCKggH-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Cx0t5pYboG286AxCKggH-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="mod-r-transform.html#cb349-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb349-2"><a href="mod-r-transform.html#cb349-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Sea&quot;</span>)</span>
<span id="cb349-3"><a href="mod-r-transform.html#cb349-3"></a><span class="co">#&gt; # A tibble: 4 × 5</span></span>
<span id="cb349-4"><a href="mod-r-transform.html#cb349-4"></a><span class="co">#&gt;    year sex   name      n       prop</span></span>
<span id="cb349-5"><a href="mod-r-transform.html#cb349-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb349-6"><a href="mod-r-transform.html#cb349-6"></a><span class="co">#&gt; 1  1982 F     Sea       5 0.00000276</span></span>
<span id="cb349-7"><a href="mod-r-transform.html#cb349-7"></a><span class="co">#&gt; 2  1985 M     Sea       6 0.00000312</span></span>
<span id="cb349-8"><a href="mod-r-transform.html#cb349-8"></a><span class="co">#&gt; 3  1986 M     Sea       5 0.0000026 </span></span>
<span id="cb349-9"><a href="mod-r-transform.html#cb349-9"></a><span class="co">#&gt; 4  1998 F     Sea       5 0.00000258</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Cx0t5pYboG286AxCKggH">
Solution
</button>
<p>        b) all of the children named “Sea”.</p>
<ol start="3" style="list-style-type: decimal">
<li>Use Boolean operators to return only the rows that contain:</li>
</ol>
<div id="IQNuXbVVQDJE0DyQxF8Y" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="IQNuXbVVQDJE0DyQxF8Y-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="IQNuXbVVQDJE0DyQxF8Y-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="mod-r-transform.html#cb350-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb350-2"><a href="mod-r-transform.html#cb350-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Sue&quot;</span>, sex <span class="op">==</span><span class="st"> &quot;M&quot;</span>)</span>
<span id="cb350-3"><a href="mod-r-transform.html#cb350-3"></a><span class="co">#&gt; # A tibble: 52 × 5</span></span>
<span id="cb350-4"><a href="mod-r-transform.html#cb350-4"></a><span class="co">#&gt;     year sex   name      n       prop</span></span>
<span id="cb350-5"><a href="mod-r-transform.html#cb350-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb350-6"><a href="mod-r-transform.html#cb350-6"></a><span class="co">#&gt;  1  1917 M     Sue       7 0.0000073 </span></span>
<span id="cb350-7"><a href="mod-r-transform.html#cb350-7"></a><span class="co">#&gt;  2  1927 M     Sue       5 0.0000043 </span></span>
<span id="cb350-8"><a href="mod-r-transform.html#cb350-8"></a><span class="co">#&gt;  3  1928 M     Sue       5 0.00000438</span></span>
<span id="cb350-9"><a href="mod-r-transform.html#cb350-9"></a><span class="co">#&gt;  4  1930 M     Sue       5 0.00000443</span></span>
<span id="cb350-10"><a href="mod-r-transform.html#cb350-10"></a><span class="co">#&gt;  5  1931 M     Sue       6 0.00000561</span></span>
<span id="cb350-11"><a href="mod-r-transform.html#cb350-11"></a><span class="co">#&gt;  6  1932 M     Sue       7 0.00000652</span></span>
<span id="cb350-12"><a href="mod-r-transform.html#cb350-12"></a><span class="co">#&gt;  7  1933 M     Sue       7 0.00000686</span></span>
<span id="cb350-13"><a href="mod-r-transform.html#cb350-13"></a><span class="co">#&gt;  8  1934 M     Sue      14 0.0000132 </span></span>
<span id="cb350-14"><a href="mod-r-transform.html#cb350-14"></a><span class="co">#&gt;  9  1935 M     Sue      13 0.0000122 </span></span>
<span id="cb350-15"><a href="mod-r-transform.html#cb350-15"></a><span class="co">#&gt; 10  1936 M     Sue       9 0.00000846</span></span>
<span id="cb350-16"><a href="mod-r-transform.html#cb350-16"></a><span class="co">#&gt; # … with 42 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#IQNuXbVVQDJE0DyQxF8Y">
Solution
</button>
<p>        a) <em>boys</em> named Sue,</p>
<div id="QrucqHt88ZzX7AmeYkLO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="QrucqHt88ZzX7AmeYkLO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="QrucqHt88ZzX7AmeYkLO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="mod-r-transform.html#cb351-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb351-2"><a href="mod-r-transform.html#cb351-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">1880</span>, n <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span>n <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb351-3"><a href="mod-r-transform.html#cb351-3"></a><span class="co">#&gt; # A tibble: 455 × 5</span></span>
<span id="cb351-4"><a href="mod-r-transform.html#cb351-4"></a><span class="co">#&gt;     year sex   name        n      prop</span></span>
<span id="cb351-5"><a href="mod-r-transform.html#cb351-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb351-6"><a href="mod-r-transform.html#cb351-6"></a><span class="co">#&gt;  1  1880 F     Abby        6 0.0000615</span></span>
<span id="cb351-7"><a href="mod-r-transform.html#cb351-7"></a><span class="co">#&gt;  2  1880 F     Aileen      6 0.0000615</span></span>
<span id="cb351-8"><a href="mod-r-transform.html#cb351-8"></a><span class="co">#&gt;  3  1880 F     Alba        6 0.0000615</span></span>
<span id="cb351-9"><a href="mod-r-transform.html#cb351-9"></a><span class="co">#&gt;  4  1880 F     Alda        6 0.0000615</span></span>
<span id="cb351-10"><a href="mod-r-transform.html#cb351-10"></a><span class="co">#&gt;  5  1880 F     Alla        6 0.0000615</span></span>
<span id="cb351-11"><a href="mod-r-transform.html#cb351-11"></a><span class="co">#&gt;  6  1880 F     Alverta     6 0.0000615</span></span>
<span id="cb351-12"><a href="mod-r-transform.html#cb351-12"></a><span class="co">#&gt;  7  1880 F     Ara         6 0.0000615</span></span>
<span id="cb351-13"><a href="mod-r-transform.html#cb351-13"></a><span class="co">#&gt;  8  1880 F     Ardelia     6 0.0000615</span></span>
<span id="cb351-14"><a href="mod-r-transform.html#cb351-14"></a><span class="co">#&gt;  9  1880 F     Ardella     6 0.0000615</span></span>
<span id="cb351-15"><a href="mod-r-transform.html#cb351-15"></a><span class="co">#&gt; 10  1880 F     Arrie       6 0.0000615</span></span>
<span id="cb351-16"><a href="mod-r-transform.html#cb351-16"></a><span class="co">#&gt; # … with 445 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#QrucqHt88ZzX7AmeYkLO">
Solution
</button>
<p>        b) names that were used by exactly 5 or 6 children in 1880,</p>
<div id="Lc9FwzX2biaWL47MbE1J" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Lc9FwzX2biaWL47MbE1J-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Lc9FwzX2biaWL47MbE1J-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="mod-r-transform.html#cb352-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb352-2"><a href="mod-r-transform.html#cb352-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Acura&quot;</span>, <span class="st">&quot;Lexus&quot;</span>, <span class="st">&quot;Yugo&quot;</span>))</span>
<span id="cb352-3"><a href="mod-r-transform.html#cb352-3"></a><span class="co">#&gt; # A tibble: 57 × 5</span></span>
<span id="cb352-4"><a href="mod-r-transform.html#cb352-4"></a><span class="co">#&gt;     year sex   name      n       prop</span></span>
<span id="cb352-5"><a href="mod-r-transform.html#cb352-5"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb352-6"><a href="mod-r-transform.html#cb352-6"></a><span class="co">#&gt;  1  1990 F     Lexus    36 0.0000175 </span></span>
<span id="cb352-7"><a href="mod-r-transform.html#cb352-7"></a><span class="co">#&gt;  2  1990 M     Lexus    12 0.00000558</span></span>
<span id="cb352-8"><a href="mod-r-transform.html#cb352-8"></a><span class="co">#&gt;  3  1991 F     Lexus   102 0.0000502 </span></span>
<span id="cb352-9"><a href="mod-r-transform.html#cb352-9"></a><span class="co">#&gt;  4  1991 M     Lexus    16 0.00000755</span></span>
<span id="cb352-10"><a href="mod-r-transform.html#cb352-10"></a><span class="co">#&gt;  5  1992 F     Lexus   193 0.0000963 </span></span>
<span id="cb352-11"><a href="mod-r-transform.html#cb352-11"></a><span class="co">#&gt;  6  1992 M     Lexus    25 0.0000119 </span></span>
<span id="cb352-12"><a href="mod-r-transform.html#cb352-12"></a><span class="co">#&gt;  7  1993 F     Lexus   285 0.000145  </span></span>
<span id="cb352-13"><a href="mod-r-transform.html#cb352-13"></a><span class="co">#&gt;  8  1993 M     Lexus    30 0.0000145 </span></span>
<span id="cb352-14"><a href="mod-r-transform.html#cb352-14"></a><span class="co">#&gt;  9  1994 F     Lexus   381 0.000195  </span></span>
<span id="cb352-15"><a href="mod-r-transform.html#cb352-15"></a><span class="co">#&gt; 10  1994 F     Acura     6 0.00000308</span></span>
<span id="cb352-16"><a href="mod-r-transform.html#cb352-16"></a><span class="co">#&gt; # … with 47 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Lc9FwzX2biaWL47MbE1J">
Solution
</button>
<p>        c) names that are one of Acura, Lexus, or Yugo.</p>
<div id="4F8M8ZXAwc4BfuoR9ATO" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="4F8M8ZXAwc4BfuoR9ATO-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="4F8M8ZXAwc4BfuoR9ATO-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="mod-r-transform.html#cb353-1"></a><span class="kw">min</span>(babynames<span class="op">$</span>n)</span>
<span id="cb353-2"><a href="mod-r-transform.html#cb353-2"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb353-3"><a href="mod-r-transform.html#cb353-3"></a><span class="kw">max</span>(babynames<span class="op">$</span>n)</span>
<span id="cb353-4"><a href="mod-r-transform.html#cb353-4"></a><span class="co">#&gt; [1] 99686</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#4F8M8ZXAwc4BfuoR9ATO">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>What is the smallest value of n? What is the largest?</li>
</ol>
<div id="nlOdPMcxTcHPRHysohB3" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="nlOdPMcxTcHPRHysohB3-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="nlOdPMcxTcHPRHysohB3-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="mod-r-transform.html#cb354-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-2"><a href="mod-r-transform.html#cb354-2"></a><span class="st">  </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &quot;F&quot;</span>, year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-3"><a href="mod-r-transform.html#cb354-3"></a><span class="st">  </span><span class="kw">select</span>(name, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb354-4"><a href="mod-r-transform.html#cb354-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) </span>
<span id="cb354-5"><a href="mod-r-transform.html#cb354-5"></a><span class="co">#&gt; # A tibble: 18,309 × 2</span></span>
<span id="cb354-6"><a href="mod-r-transform.html#cb354-6"></a><span class="co">#&gt;    name          n</span></span>
<span id="cb354-7"><a href="mod-r-transform.html#cb354-7"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;int&gt;</span></span>
<span id="cb354-8"><a href="mod-r-transform.html#cb354-8"></a><span class="co">#&gt;  1 Emma      19738</span></span>
<span id="cb354-9"><a href="mod-r-transform.html#cb354-9"></a><span class="co">#&gt;  2 Olivia    18632</span></span>
<span id="cb354-10"><a href="mod-r-transform.html#cb354-10"></a><span class="co">#&gt;  3 Ava       15902</span></span>
<span id="cb354-11"><a href="mod-r-transform.html#cb354-11"></a><span class="co">#&gt;  4 Isabella  15100</span></span>
<span id="cb354-12"><a href="mod-r-transform.html#cb354-12"></a><span class="co">#&gt;  5 Sophia    14831</span></span>
<span id="cb354-13"><a href="mod-r-transform.html#cb354-13"></a><span class="co">#&gt;  6 Mia       13437</span></span>
<span id="cb354-14"><a href="mod-r-transform.html#cb354-14"></a><span class="co">#&gt;  7 Charlotte 12893</span></span>
<span id="cb354-15"><a href="mod-r-transform.html#cb354-15"></a><span class="co">#&gt;  8 Amelia    11800</span></span>
<span id="cb354-16"><a href="mod-r-transform.html#cb354-16"></a><span class="co">#&gt;  9 Evelyn    10675</span></span>
<span id="cb354-17"><a href="mod-r-transform.html#cb354-17"></a><span class="co">#&gt; 10 Abigail   10551</span></span>
<span id="cb354-18"><a href="mod-r-transform.html#cb354-18"></a><span class="co">#&gt; # … with 18,299 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#nlOdPMcxTcHPRHysohB3">
Solution
</button>
<div id="6qMmudc4EPoNRZ80gpw3" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="6qMmudc4EPoNRZ80gpw3-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="6qMmudc4EPoNRZ80gpw3-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="mod-r-transform.html#cb355-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb355-2"><a href="mod-r-transform.html#cb355-2"></a><span class="st">  </span><span class="kw">filter</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb355-3"><a href="mod-r-transform.html#cb355-3"></a><span class="st">  </span><span class="kw">select</span>(name, n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb355-4"><a href="mod-r-transform.html#cb355-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(___)) </span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#6qMmudc4EPoNRZ80gpw3">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Write a sequence of functions that filters babynames to just the girls that were born in 2017, then select the <code>name</code> and <code>n</code> columns, then arrange the results so that the most popular names are near the top.</li>
</ol>
<div id="fNZ8FJiB8Z3QTSUjzq6r" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="fNZ8FJiB8Z3QTSUjzq6r-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="fNZ8FJiB8Z3QTSUjzq6r-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="mod-r-transform.html#cb356-1"></a><span class="co"># for instance</span></span>
<span id="cb356-2"><a href="mod-r-transform.html#cb356-2"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb356-3"><a href="mod-r-transform.html#cb356-3"></a><span class="st">  </span><span class="kw">filter</span>(sex <span class="op">==</span><span class="st"> &quot;M&quot;</span>, name <span class="op">==</span><span class="st"> &quot;Lars&quot;</span>)</span>
<span id="cb356-4"><a href="mod-r-transform.html#cb356-4"></a><span class="co">#&gt; # A tibble: 112 × 5</span></span>
<span id="cb356-5"><a href="mod-r-transform.html#cb356-5"></a><span class="co">#&gt;     year sex   name      n      prop</span></span>
<span id="cb356-6"><a href="mod-r-transform.html#cb356-6"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb356-7"><a href="mod-r-transform.html#cb356-7"></a><span class="co">#&gt;  1  1883 M     Lars      7 0.0000622</span></span>
<span id="cb356-8"><a href="mod-r-transform.html#cb356-8"></a><span class="co">#&gt;  2  1884 M     Lars      5 0.0000407</span></span>
<span id="cb356-9"><a href="mod-r-transform.html#cb356-9"></a><span class="co">#&gt;  3  1886 M     Lars      5 0.000042 </span></span>
<span id="cb356-10"><a href="mod-r-transform.html#cb356-10"></a><span class="co">#&gt;  4  1887 M     Lars      5 0.0000457</span></span>
<span id="cb356-11"><a href="mod-r-transform.html#cb356-11"></a><span class="co">#&gt;  5  1897 M     Lars      5 0.000041 </span></span>
<span id="cb356-12"><a href="mod-r-transform.html#cb356-12"></a><span class="co">#&gt;  6  1901 M     Lars      8 0.0000692</span></span>
<span id="cb356-13"><a href="mod-r-transform.html#cb356-13"></a><span class="co">#&gt;  7  1912 M     Lars      6 0.0000133</span></span>
<span id="cb356-14"><a href="mod-r-transform.html#cb356-14"></a><span class="co">#&gt;  8  1913 M     Lars      6 0.0000112</span></span>
<span id="cb356-15"><a href="mod-r-transform.html#cb356-15"></a><span class="co">#&gt;  9  1914 M     Lars     16 0.0000234</span></span>
<span id="cb356-16"><a href="mod-r-transform.html#cb356-16"></a><span class="co">#&gt; 10  1915 M     Lars     17 0.0000193</span></span>
<span id="cb356-17"><a href="mod-r-transform.html#cb356-17"></a><span class="co">#&gt; # … with 102 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#fNZ8FJiB8Z3QTSUjzq6r">
Solution
</button>
<ol start="6" style="list-style-type: decimal">
<li>Trim <code>babynames</code> to just the rows that contain your <code>name</code> and your <code>sex</code>.</li>
</ol>
<div id="ZgmOqBU7EuTXyygm1jvR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ZgmOqBU7EuTXyygm1jvR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ZgmOqBU7EuTXyygm1jvR-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="mod-r-transform.html#cb357-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb357-2"><a href="mod-r-transform.html#cb357-2"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">==</span><span class="st"> &quot;Khaleesi&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb357-3"><a href="mod-r-transform.html#cb357-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n), <span class="dt">first =</span> <span class="kw">min</span>(year))</span>
<span id="cb357-4"><a href="mod-r-transform.html#cb357-4"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb357-5"><a href="mod-r-transform.html#cb357-5"></a><span class="co">#&gt;   total first</span></span>
<span id="cb357-6"><a href="mod-r-transform.html#cb357-6"></a><span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb357-7"><a href="mod-r-transform.html#cb357-7"></a><span class="co">#&gt; 1  1964  2011</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ZgmOqBU7EuTXyygm1jvR">
Solution
</button>
<div id="hoUqU1RTbRJfbyAyZjre" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="hoUqU1RTbRJfbyAyZjre-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="hoUqU1RTbRJfbyAyZjre-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="mod-r-transform.html#cb358-1"></a>babynames ___ </span>
<span id="cb358-2"><a href="mod-r-transform.html#cb358-2"></a>  <span class="kw">filter</span>(____) ___</span>
<span id="cb358-3"><a href="mod-r-transform.html#cb358-3"></a>  <span class="kw">____</span>(<span class="dt">total =</span> ___, <span class="dt">first =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#hoUqU1RTbRJfbyAyZjre">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>Extract the rows where <code>name == "Khaleesi"</code>. Then use <code>summarise()</code> to find the total number of children named Khaleesi and the first year Khaleesi appeared in the data.</li>
</ol>
<div id="hzql85WBjU8qwH9hZ5Yc" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="hzql85WBjU8qwH9hZ5Yc-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="hzql85WBjU8qwH9hZ5Yc-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="mod-r-transform.html#cb359-1"></a>babynames <span class="op">%&gt;%</span></span>
<span id="cb359-2"><a href="mod-r-transform.html#cb359-2"></a><span class="st">  </span><span class="kw">group_by</span>(name, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb359-3"><a href="mod-r-transform.html#cb359-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb359-4"><a href="mod-r-transform.html#cb359-4"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total))</span>
<span id="cb359-5"><a href="mod-r-transform.html#cb359-5"></a><span class="co">#&gt; # A tibble: 107,973 × 3</span></span>
<span id="cb359-6"><a href="mod-r-transform.html#cb359-6"></a><span class="co">#&gt; # Groups:   name [97,310]</span></span>
<span id="cb359-7"><a href="mod-r-transform.html#cb359-7"></a><span class="co">#&gt;    name    sex     total</span></span>
<span id="cb359-8"><a href="mod-r-transform.html#cb359-8"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;</span></span>
<span id="cb359-9"><a href="mod-r-transform.html#cb359-9"></a><span class="co">#&gt;  1 James   M     5150472</span></span>
<span id="cb359-10"><a href="mod-r-transform.html#cb359-10"></a><span class="co">#&gt;  2 John    M     5115466</span></span>
<span id="cb359-11"><a href="mod-r-transform.html#cb359-11"></a><span class="co">#&gt;  3 Robert  M     4814815</span></span>
<span id="cb359-12"><a href="mod-r-transform.html#cb359-12"></a><span class="co">#&gt;  4 Michael M     4350824</span></span>
<span id="cb359-13"><a href="mod-r-transform.html#cb359-13"></a><span class="co">#&gt;  5 Mary    F     4123200</span></span>
<span id="cb359-14"><a href="mod-r-transform.html#cb359-14"></a><span class="co">#&gt;  6 William M     4102604</span></span>
<span id="cb359-15"><a href="mod-r-transform.html#cb359-15"></a><span class="co">#&gt;  7 David   M     3611329</span></span>
<span id="cb359-16"><a href="mod-r-transform.html#cb359-16"></a><span class="co">#&gt;  8 Joseph  M     2603445</span></span>
<span id="cb359-17"><a href="mod-r-transform.html#cb359-17"></a><span class="co">#&gt;  9 Richard M     2563082</span></span>
<span id="cb359-18"><a href="mod-r-transform.html#cb359-18"></a><span class="co">#&gt; 10 Charles M     2386048</span></span>
<span id="cb359-19"><a href="mod-r-transform.html#cb359-19"></a><span class="co">#&gt; # … with 107,963 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#hzql85WBjU8qwH9hZ5Yc">
Solution
</button>
<div id="YOPufx9Y6cFTTptZwIcc" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="YOPufx9Y6cFTTptZwIcc-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="YOPufx9Y6cFTTptZwIcc-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="mod-r-transform.html#cb360-1"></a>babynames <span class="op">%&gt;%</span></span>
<span id="cb360-2"><a href="mod-r-transform.html#cb360-2"></a><span class="st">  </span><span class="kw">_______</span>(name, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb360-3"><a href="mod-r-transform.html#cb360-3"></a><span class="st">  </span><span class="kw">_______</span>(<span class="dt">total =</span> <span class="kw">_____</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb360-4"><a href="mod-r-transform.html#cb360-4"></a><span class="st">  </span><span class="kw">_______</span>(<span class="kw">desc</span>(_____))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#YOPufx9Y6cFTTptZwIcc">
Hint
</button>
<ol start="8" style="list-style-type: decimal">
<li>Use <code>group_by()</code>, <code>summarise()</code>, and <code>arrange()</code> to display the ten most popular names. Compute popularity as the <em>total</em> number of children of a single gender given a name.</li>
</ol>
<div id="eEPAWa4jcfIMdxMCFUPK" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="eEPAWa4jcfIMdxMCFUPK-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="eEPAWa4jcfIMdxMCFUPK-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="mod-r-transform.html#cb361-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb361-2"><a href="mod-r-transform.html#cb361-2"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb361-3"><a href="mod-r-transform.html#cb361-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">sum</span>(n))</span>
<span id="cb361-4"><a href="mod-r-transform.html#cb361-4"></a><span class="co">#&gt; # A tibble: 138 × 2</span></span>
<span id="cb361-5"><a href="mod-r-transform.html#cb361-5"></a><span class="co">#&gt;     year  total</span></span>
<span id="cb361-6"><a href="mod-r-transform.html#cb361-6"></a><span class="co">#&gt;    &lt;dbl&gt;  &lt;int&gt;</span></span>
<span id="cb361-7"><a href="mod-r-transform.html#cb361-7"></a><span class="co">#&gt;  1  1880 201484</span></span>
<span id="cb361-8"><a href="mod-r-transform.html#cb361-8"></a><span class="co">#&gt;  2  1881 192696</span></span>
<span id="cb361-9"><a href="mod-r-transform.html#cb361-9"></a><span class="co">#&gt;  3  1882 221533</span></span>
<span id="cb361-10"><a href="mod-r-transform.html#cb361-10"></a><span class="co">#&gt;  4  1883 216946</span></span>
<span id="cb361-11"><a href="mod-r-transform.html#cb361-11"></a><span class="co">#&gt;  5  1884 243462</span></span>
<span id="cb361-12"><a href="mod-r-transform.html#cb361-12"></a><span class="co">#&gt;  6  1885 240854</span></span>
<span id="cb361-13"><a href="mod-r-transform.html#cb361-13"></a><span class="co">#&gt;  7  1886 255317</span></span>
<span id="cb361-14"><a href="mod-r-transform.html#cb361-14"></a><span class="co">#&gt;  8  1887 247394</span></span>
<span id="cb361-15"><a href="mod-r-transform.html#cb361-15"></a><span class="co">#&gt;  9  1888 299473</span></span>
<span id="cb361-16"><a href="mod-r-transform.html#cb361-16"></a><span class="co">#&gt; 10  1889 288946</span></span>
<span id="cb361-17"><a href="mod-r-transform.html#cb361-17"></a><span class="co">#&gt; # … with 128 more rows</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#eEPAWa4jcfIMdxMCFUPK">
Solution
</button>
<ol start="9" style="list-style-type: decimal">
<li>Use <code>group_by()</code> to calculate the total number of children born each year over time.</li>
</ol>
<div id="MgrTaUfg66vQYxCDcpo9" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="MgrTaUfg66vQYxCDcpo9-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="MgrTaUfg66vQYxCDcpo9-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="mod-r-transform.html#cb362-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb362-2"><a href="mod-r-transform.html#cb362-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb362-3"><a href="mod-r-transform.html#cb362-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(n))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb362-4"><a href="mod-r-transform.html#cb362-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, sex, <span class="kw">desc</span>(prop))</span>
<span id="cb362-5"><a href="mod-r-transform.html#cb362-5"></a><span class="co">#&gt; # A tibble: 1,924,665 × 6</span></span>
<span id="cb362-6"><a href="mod-r-transform.html#cb362-6"></a><span class="co">#&gt; # Groups:   year, sex [276]</span></span>
<span id="cb362-7"><a href="mod-r-transform.html#cb362-7"></a><span class="co">#&gt;     year sex   name          n   prop  rank</span></span>
<span id="cb362-8"><a href="mod-r-transform.html#cb362-8"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb362-9"><a href="mod-r-transform.html#cb362-9"></a><span class="co">#&gt;  1  1880 F     Mary       7065 0.0724     1</span></span>
<span id="cb362-10"><a href="mod-r-transform.html#cb362-10"></a><span class="co">#&gt;  2  1880 F     Anna       2604 0.0267     2</span></span>
<span id="cb362-11"><a href="mod-r-transform.html#cb362-11"></a><span class="co">#&gt;  3  1880 F     Emma       2003 0.0205     3</span></span>
<span id="cb362-12"><a href="mod-r-transform.html#cb362-12"></a><span class="co">#&gt;  4  1880 F     Elizabeth  1939 0.0199     4</span></span>
<span id="cb362-13"><a href="mod-r-transform.html#cb362-13"></a><span class="co">#&gt;  5  1880 F     Minnie     1746 0.0179     5</span></span>
<span id="cb362-14"><a href="mod-r-transform.html#cb362-14"></a><span class="co">#&gt;  6  1880 F     Margaret   1578 0.0162     6</span></span>
<span id="cb362-15"><a href="mod-r-transform.html#cb362-15"></a><span class="co">#&gt;  7  1880 F     Ida        1472 0.0151     7</span></span>
<span id="cb362-16"><a href="mod-r-transform.html#cb362-16"></a><span class="co">#&gt;  8  1880 F     Alice      1414 0.0145     8</span></span>
<span id="cb362-17"><a href="mod-r-transform.html#cb362-17"></a><span class="co">#&gt;  9  1880 F     Bertha     1320 0.0135     9</span></span>
<span id="cb362-18"><a href="mod-r-transform.html#cb362-18"></a><span class="co">#&gt; 10  1880 F     Sarah      1288 0.0132    10</span></span>
<span id="cb362-19"><a href="mod-r-transform.html#cb362-19"></a><span class="co">#&gt; # … with 1,924,655 more rows</span></span></code></pre></div>
<p>
The same results if you use <code>n</code> since in the same order.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#MgrTaUfg66vQYxCDcpo9">
Solution
</button>
<div id="5mxcRfrVWlMw2K8KTknP" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="5mxcRfrVWlMw2K8KTknP-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="5mxcRfrVWlMw2K8KTknP-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="mod-r-transform.html#cb363-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb363-2"><a href="mod-r-transform.html#cb363-2"></a><span class="st">  </span><span class="kw">group_by</span>(___, ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb363-3"><a href="mod-r-transform.html#cb363-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">rank =</span> <span class="kw">___</span>(<span class="kw">desc</span>(___))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb363-4"><a href="mod-r-transform.html#cb363-4"></a><span class="st">  </span><span class="kw">arrange</span>(year, sex, <span class="kw">desc</span>(prop))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#5mxcRfrVWlMw2K8KTknP">
Hint
</button>
<ol start="10" style="list-style-type: decimal">
<li>Column <code>prop</code> denotes the proportion given year and sex. Use <code>mutate()</code> and <code>min_rank()</code> to rank each row in babynames from <em>largest</em> <code>prop</code> to lowest <code>prop</code> given year and sex. What happens if you do the same using the <code>n</code> column?</li>
</ol>
<div id="1wubuc78gv9sR2pxoICC" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="1wubuc78gv9sR2pxoICC-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="1wubuc78gv9sR2pxoICC-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="mod-r-transform.html#cb364-1"></a>babynames <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb364-2"><a href="mod-r-transform.html#cb364-2"></a><span class="st">  </span><span class="kw">group_by</span>(year, sex) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb364-3"><a href="mod-r-transform.html#cb364-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rank =</span> <span class="kw">min_rank</span>(<span class="kw">desc</span>(n))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb364-4"><a href="mod-r-transform.html#cb364-4"></a><span class="st">  </span><span class="kw">filter</span>(rank <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2009</span>)</span>
<span id="cb364-5"><a href="mod-r-transform.html#cb364-5"></a><span class="co">#&gt; # A tibble: 16 × 6</span></span>
<span id="cb364-6"><a href="mod-r-transform.html#cb364-6"></a><span class="co">#&gt; # Groups:   year, sex [16]</span></span>
<span id="cb364-7"><a href="mod-r-transform.html#cb364-7"></a><span class="co">#&gt;     year sex   name         n    prop  rank</span></span>
<span id="cb364-8"><a href="mod-r-transform.html#cb364-8"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb364-9"><a href="mod-r-transform.html#cb364-9"></a><span class="co">#&gt;  1  2010 F     Isabella 22905 0.0117      1</span></span>
<span id="cb364-10"><a href="mod-r-transform.html#cb364-10"></a><span class="co">#&gt;  2  2010 M     Jacob    22117 0.0108      1</span></span>
<span id="cb364-11"><a href="mod-r-transform.html#cb364-11"></a><span class="co">#&gt;  3  2011 F     Sophia   21837 0.0113      1</span></span>
<span id="cb364-12"><a href="mod-r-transform.html#cb364-12"></a><span class="co">#&gt;  4  2011 M     Jacob    20365 0.0100      1</span></span>
<span id="cb364-13"><a href="mod-r-transform.html#cb364-13"></a><span class="co">#&gt;  5  2012 F     Sophia   22304 0.0115      1</span></span>
<span id="cb364-14"><a href="mod-r-transform.html#cb364-14"></a><span class="co">#&gt;  6  2012 M     Jacob    19069 0.00941     1</span></span>
<span id="cb364-15"><a href="mod-r-transform.html#cb364-15"></a><span class="co">#&gt;  7  2013 F     Sophia   21213 0.0110      1</span></span>
<span id="cb364-16"><a href="mod-r-transform.html#cb364-16"></a><span class="co">#&gt;  8  2013 M     Noah     18241 0.00904     1</span></span>
<span id="cb364-17"><a href="mod-r-transform.html#cb364-17"></a><span class="co">#&gt;  9  2014 F     Emma     20924 0.0107      1</span></span>
<span id="cb364-18"><a href="mod-r-transform.html#cb364-18"></a><span class="co">#&gt; 10  2014 M     Noah     19286 0.00943     1</span></span>
<span id="cb364-19"><a href="mod-r-transform.html#cb364-19"></a><span class="co">#&gt; 11  2015 F     Emma     20435 0.0105      1</span></span>
<span id="cb364-20"><a href="mod-r-transform.html#cb364-20"></a><span class="co">#&gt; 12  2015 M     Noah     19613 0.00962     1</span></span>
<span id="cb364-21"><a href="mod-r-transform.html#cb364-21"></a><span class="co">#&gt; 13  2016 F     Emma     19471 0.0101      1</span></span>
<span id="cb364-22"><a href="mod-r-transform.html#cb364-22"></a><span class="co">#&gt; 14  2016 M     Noah     19082 0.00946     1</span></span>
<span id="cb364-23"><a href="mod-r-transform.html#cb364-23"></a><span class="co">#&gt; 15  2017 F     Emma     19738 0.0105      1</span></span>
<span id="cb364-24"><a href="mod-r-transform.html#cb364-24"></a><span class="co">#&gt; 16  2017 M     Liam     18728 0.00954     1</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#1wubuc78gv9sR2pxoICC">
Solution
</button>
<ol start="11" style="list-style-type: decimal">
<li>Filter the results to find all names with <code>rank == 1</code> after 2009.</li>
</ol>
</div>
<div id="ex-profit1" class="section level3">
<h3><span class="header-section-number">17.5.3</span> Exercise (profit)</h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>Consider the dataset profit containing quarterly financial records for each costumer, product, etc.:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="mod-r-transform.html#cb365-1"></a><span class="kw">library</span>(skimr)</span>
<span id="cb365-2"><a href="mod-r-transform.html#cb365-2"></a>path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/profit_raw.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>)</span>
<span id="cb365-3"><a href="mod-r-transform.html#cb365-3"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path)</span>
<span id="cb365-4"><a href="mod-r-transform.html#cb365-4"></a><span class="kw">skim</span>(profit)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-342">Table 17.2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">profit</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">24546</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">9</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">9</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Quarter</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">12</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Channel</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Customer ID</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">18</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Country</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">14</td>
<td align="right">0</td>
<td align="right">47</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Product Line</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">14</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Revenue</td>
<td align="right">63</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">1210</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Product Cost</td>
<td align="right">61</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">1139</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Customer Service Cost</td>
<td align="right">10</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">464</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Profit</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">966</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Note that it seems that the dataset need to be cleaned. All columns are strings (some should be numbers) and there seems to be missing values. You may start by having a view of the dataset using:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="mod-r-transform.html#cb366-1"></a><span class="kw">View</span>(profit)</span></code></pre></div>
<p>First focus on column <code>Quarter</code> which currently has 12 distinct values:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="mod-r-transform.html#cb367-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span>
<span id="cb367-2"><a href="mod-r-transform.html#cb367-2"></a><span class="co">#&gt; # A tibble: 12 × 1</span></span>
<span id="cb367-3"><a href="mod-r-transform.html#cb367-3"></a><span class="co">#&gt;    Quarter</span></span>
<span id="cb367-4"><a href="mod-r-transform.html#cb367-4"></a><span class="co">#&gt;    &lt;chr&gt;  </span></span>
<span id="cb367-5"><a href="mod-r-transform.html#cb367-5"></a><span class="co">#&gt;  1 Q3     </span></span>
<span id="cb367-6"><a href="mod-r-transform.html#cb367-6"></a><span class="co">#&gt;  2 1      </span></span>
<span id="cb367-7"><a href="mod-r-transform.html#cb367-7"></a><span class="co">#&gt;  3 Q4     </span></span>
<span id="cb367-8"><a href="mod-r-transform.html#cb367-8"></a><span class="co">#&gt;  4 Q1     </span></span>
<span id="cb367-9"><a href="mod-r-transform.html#cb367-9"></a><span class="co">#&gt;  5 Q2     </span></span>
<span id="cb367-10"><a href="mod-r-transform.html#cb367-10"></a><span class="co">#&gt;  6 2      </span></span>
<span id="cb367-11"><a href="mod-r-transform.html#cb367-11"></a><span class="co">#&gt;  7 4      </span></span>
<span id="cb367-12"><a href="mod-r-transform.html#cb367-12"></a><span class="co">#&gt;  8 q1     </span></span>
<span id="cb367-13"><a href="mod-r-transform.html#cb367-13"></a><span class="co">#&gt;  9 q4     </span></span>
<span id="cb367-14"><a href="mod-r-transform.html#cb367-14"></a><span class="co">#&gt; 10 q3     </span></span>
<span id="cb367-15"><a href="mod-r-transform.html#cb367-15"></a><span class="co">#&gt; 11 q2     </span></span>
<span id="cb367-16"><a href="mod-r-transform.html#cb367-16"></a><span class="co">#&gt; 12 3</span></span></code></pre></div>
<p>You would like it to be a numeric with values 1-4.</p>
<div id="LDA5dm3508vAzhKKmUUG" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="LDA5dm3508vAzhKKmUUG-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="LDA5dm3508vAzhKKmUUG-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="mod-r-transform.html#cb368-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb368-2"><a href="mod-r-transform.html#cb368-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(Quarter, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="st">&quot;Q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb368-3"><a href="mod-r-transform.html#cb368-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span>
<span id="cb368-4"><a href="mod-r-transform.html#cb368-4"></a><span class="co">#&gt; # A tibble: 4 × 1</span></span>
<span id="cb368-5"><a href="mod-r-transform.html#cb368-5"></a><span class="co">#&gt;   Quarter</span></span>
<span id="cb368-6"><a href="mod-r-transform.html#cb368-6"></a><span class="co">#&gt;     &lt;dbl&gt;</span></span>
<span id="cb368-7"><a href="mod-r-transform.html#cb368-7"></a><span class="co">#&gt; 1       3</span></span>
<span id="cb368-8"><a href="mod-r-transform.html#cb368-8"></a><span class="co">#&gt; 2       1</span></span>
<span id="cb368-9"><a href="mod-r-transform.html#cb368-9"></a><span class="co">#&gt; 3       4</span></span>
<span id="cb368-10"><a href="mod-r-transform.html#cb368-10"></a><span class="co">#&gt; 4       2</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#LDA5dm3508vAzhKKmUUG">
Solution
</button>
<div id="vgiHax2VrHMu4VQ9RArg" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="vgiHax2VrHMu4VQ9RArg-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="vgiHax2VrHMu4VQ9RArg-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="mod-r-transform.html#cb369-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb369-2"><a href="mod-r-transform.html#cb369-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(___, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(___) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb369-3"><a href="mod-r-transform.html#cb369-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Quarter)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#vgiHax2VrHMu4VQ9RArg">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Use <code>mutate</code>, <code>str_remove</code> and <code>as.numeric</code> to convert the column to a numeric by removing all ‘q’ and ‘Q’ values.</li>
</ol>
<p>Let us look at the next columns:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="mod-r-transform.html#cb370-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Channel) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb370-2"><a href="mod-r-transform.html#cb370-2"></a><span class="co">#&gt;  [1] &quot;ATM&quot; &quot;BRH&quot; &quot;INT&quot; &quot;MAL&quot; &quot;EML&quot; &quot;CCT&quot; &quot;TEL&quot; &quot;MOP&quot; &quot;DSA&quot; &quot;EVE&quot;</span></span>
<span id="cb370-3"><a href="mod-r-transform.html#cb370-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb370-4"><a href="mod-r-transform.html#cb370-4"></a><span class="co">#&gt;  [1] &quot;FRT&quot; &quot;MRT&quot; &quot;PBI&quot; &quot;MAM&quot; &quot;EBP&quot; &quot;RPB&quot; &quot;WEB&quot; &quot;WEM&quot; &quot;HEC&quot; &quot;STF&quot; &quot;IAS&quot; &quot;CRE&quot; &quot;INB&quot; &quot;CAM&quot; &quot;AGR&quot; &quot;SBE&quot;</span></span>
<span id="cb370-5"><a href="mod-r-transform.html#cb370-5"></a><span class="co">#&gt; [17] &quot;AFF&quot; &quot;MFN&quot;</span></span>
<span id="cb370-6"><a href="mod-r-transform.html#cb370-6"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Country) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb370-7"><a href="mod-r-transform.html#cb370-7"></a><span class="co">#&gt;  [1] &quot;USA&quot;            &quot;Canada&quot;         &quot;Great Britain&quot;  &quot;Finland&quot;        &quot;New Zealand&quot;   </span></span>
<span id="cb370-8"><a href="mod-r-transform.html#cb370-8"></a><span class="co">#&gt;  [6] &quot;Brazil&quot;         &quot;Mexico&quot;         &quot;Germany&quot;        &quot;Puerto Rico&quot;    &quot;Hong Kong&quot;     </span></span>
<span id="cb370-9"><a href="mod-r-transform.html#cb370-9"></a><span class="co">#&gt; [11] &quot;Japan&quot;          &quot;Columbia&quot;       &quot;Switzerland&quot;    &quot;Uruguay&quot;        &quot;Netherlands&quot;   </span></span>
<span id="cb370-10"><a href="mod-r-transform.html#cb370-10"></a><span class="co">#&gt; [16] &quot;Korea&quot;          &quot;Venezuela&quot;      &quot;Panama&quot;         &quot;Sweden&quot;         &quot;China&quot;         </span></span>
<span id="cb370-11"><a href="mod-r-transform.html#cb370-11"></a><span class="co">#&gt; [21] &quot;Guatemala&quot;      &quot;South Africa&quot;   &quot;Malaysia&quot;       &quot;Nigeria&quot;        &quot;Denmark&quot;       </span></span>
<span id="cb370-12"><a href="mod-r-transform.html#cb370-12"></a><span class="co">#&gt; [26] &quot;France&quot;         &quot;India&quot;          &quot;Taiwan&quot;         &quot;Norway&quot;         &quot;Chile&quot;         </span></span>
<span id="cb370-13"><a href="mod-r-transform.html#cb370-13"></a><span class="co">#&gt; [31] &quot;Indonesia&quot;      &quot;Ireland&quot;        &quot;Thailand&quot;       &quot;Peru&quot;           &quot;Spain&quot;         </span></span>
<span id="cb370-14"><a href="mod-r-transform.html#cb370-14"></a><span class="co">#&gt; [36] &quot;Belgium&quot;        &quot;Poland&quot;         &quot;Ecuador&quot;        &quot;Costa Rica&quot;     &quot;Australia&quot;     </span></span>
<span id="cb370-15"><a href="mod-r-transform.html#cb370-15"></a><span class="co">#&gt; [41] &quot;Israel&quot;         &quot;Guam&quot;           &quot;Oman&quot;           &quot;Singapore&quot;      &quot;Argentina&quot;     </span></span>
<span id="cb370-16"><a href="mod-r-transform.html#cb370-16"></a><span class="co">#&gt; [46] &quot;Czechoslovakia&quot; &quot;Philippines&quot;</span></span>
<span id="cb370-17"><a href="mod-r-transform.html#cb370-17"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>()</span>
<span id="cb370-18"><a href="mod-r-transform.html#cb370-18"></a><span class="co">#&gt; [1] &quot;Credit Products&quot;           &quot;Deposit Products&quot;          &quot;Revolving Credit Products&quot;</span></span>
<span id="cb370-19"><a href="mod-r-transform.html#cb370-19"></a><span class="co">#&gt; [4] &quot;Other Products&quot;            &quot;Third Party Products&quot;      &quot;Fee Based Products&quot;</span></span></code></pre></div>
<p>These seem to be okay. The last columns should be numbers. Let us consider <code>Revenue</code>.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="mod-r-transform.html#cb371-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Revenue) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dt">n =</span> <span class="dv">100</span>)</span>
<span id="cb371-2"><a href="mod-r-transform.html#cb371-2"></a><span class="co">#&gt;   [1] &quot;$ 6044&quot;  &quot;$ 4686&quot;  &quot;$ 6063&quot;  &quot;$ 4682&quot;  &quot;$ 6320&quot;  &quot;$ 2993&quot;  &quot;$ 3355&quot;  &quot;$ 5716&quot;  &quot;$ 3347&quot; </span></span>
<span id="cb371-3"><a href="mod-r-transform.html#cb371-3"></a><span class="co">#&gt;  [10] &quot;$ 2624&quot;  &quot;$ 3629&quot;  &quot;$ 5612&quot;  &quot;$ 4618&quot;  &quot;$ 2080&quot;  &quot;$ 2788&quot;  &quot;$ 2829&quot;  &quot;$ 2898&quot;  &quot;$ 5232&quot; </span></span>
<span id="cb371-4"><a href="mod-r-transform.html#cb371-4"></a><span class="co">#&gt;  [19] &quot;$ 2949&quot;  &quot;$ 5565&quot;  &quot;$ 2153&quot;  &quot;$ 3097&quot;  &quot;$ 1920&quot;  &quot;$ 4041&quot;  &quot;$ 5931&quot;  &quot;$ 1605&quot;  &quot;$ 2026&quot; </span></span>
<span id="cb371-5"><a href="mod-r-transform.html#cb371-5"></a><span class="co">#&gt;  [28] &quot;$ 1687&quot;  &quot;$ 5075&quot;  &quot;$ 4223&quot;  &quot;$ 2456&quot;  &quot;$ 1924&quot;  &quot;$ 1578&quot;  &quot;$ 3235&quot;  &quot;$ 5123&quot;  &quot;$ 1560&quot; </span></span>
<span id="cb371-6"><a href="mod-r-transform.html#cb371-6"></a><span class="co">#&gt;  [37] &quot;$ 1945&quot;  &quot;$ 6060&quot;  &quot;$ 1222&quot;  &quot;$ 1660&quot;  &quot;$ 3000&quot;  &quot;$ 2970&quot;  &quot;$ 1631&quot;  &quot;$ 1215&quot;  &quot;$ 1759&quot; </span></span>
<span id="cb371-7"><a href="mod-r-transform.html#cb371-7"></a><span class="co">#&gt;  [46] &quot;$ 3285&quot;  &quot;$ 2048&quot;  &quot;$ 2173&quot;  &quot;$ 3353&quot;  &quot;$ 1162&quot;  &quot;$ 1232&quot;  &quot;$ 1561&quot;  &quot;$ 1123&quot;  &quot;$ 1794&quot; </span></span>
<span id="cb371-8"><a href="mod-r-transform.html#cb371-8"></a><span class="co">#&gt;  [55] &quot;$ 1202&quot;  &quot;$ 1510&quot;  &quot;$ 4472&quot;  &quot;$ 2370&quot;  &quot;$ 2581&quot;  &quot;$ 2761&quot;  &quot;$ 6371&quot;  &quot;$ 1972&quot;  &quot;$ 1562&quot; </span></span>
<span id="cb371-9"><a href="mod-r-transform.html#cb371-9"></a><span class="co">#&gt;  [64] &quot;$ 2742&quot;  &quot;$ 4598&quot;  &quot;$ 5322&quot;  &quot;$ 3411&quot;  NA        &quot;$ 1569&quot;  &quot;$ 2852&quot;  &quot;$ 1622&quot;  &quot;$ 2505&quot; </span></span>
<span id="cb371-10"><a href="mod-r-transform.html#cb371-10"></a><span class="co">#&gt;  [73] &quot;$ 1596&quot;  &quot;$ 1447&quot;  &quot;$ 1690&quot;  &quot;$ 2448&quot;  &quot;$ 1593&quot;  &quot;$ 1876&quot;  &quot;$ 6591&quot;  &quot;$ 1611&quot;  &quot;$ 1254&quot; </span></span>
<span id="cb371-11"><a href="mod-r-transform.html#cb371-11"></a><span class="co">#&gt;  [82] &quot;Unknown&quot; &quot;$ 842&quot;   &quot;$ 1529&quot;  &quot;$ 1439&quot;  &quot;$ 762&quot;   &quot;$ 1959&quot;  &quot;$ 4382&quot;  &quot;$ 1407&quot;  &quot;$ 909&quot;  </span></span>
<span id="cb371-12"><a href="mod-r-transform.html#cb371-12"></a><span class="co">#&gt;  [91] &quot;$ 1549&quot;  &quot;$ 2161&quot;  &quot;$ 1331&quot;  &quot;$ 727&quot;   &quot;$ 1462&quot;  &quot;$ 1067&quot;  &quot;$ 833&quot;   &quot;$ 1675&quot;  &quot;$ 1524&quot; </span></span>
<span id="cb371-13"><a href="mod-r-transform.html#cb371-13"></a><span class="co">#&gt; [100] &quot;$ 1285&quot;</span></span></code></pre></div>
<p>Most values start with a dollar sign. Let us have a look at the other ones:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="mod-r-transform.html#cb372-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) </span>
<span id="cb372-2"><a href="mod-r-transform.html#cb372-2"></a><span class="co">#&gt; # A tibble: 95 × 9</span></span>
<span id="cb372-3"><a href="mod-r-transform.html#cb372-3"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country       `Product Line` Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb372-4"><a href="mod-r-transform.html#cb372-4"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;           </span></span>
<span id="cb372-5"><a href="mod-r-transform.html#cb372-5"></a><span class="co">#&gt;  1       3 INT     MAM           USA           Deposit Produ… Unknown $ 1008         $ 246           </span></span>
<span id="cb372-6"><a href="mod-r-transform.html#cb372-6"></a><span class="co">#&gt;  2       3 MAL     RPB           USA           Credit Produc… ?       $ 1420         $ 347           </span></span>
<span id="cb372-7"><a href="mod-r-transform.html#cb372-7"></a><span class="co">#&gt;  3       1 MAL     WEM           Great Britain Other Products ?       $ 87           $ 19            </span></span>
<span id="cb372-8"><a href="mod-r-transform.html#cb372-8"></a><span class="co">#&gt;  4       3 ATM     MFN           Germany       Fee Based Pro… unknown $ 47           $ 6             </span></span>
<span id="cb372-9"><a href="mod-r-transform.html#cb372-9"></a><span class="co">#&gt;  5       3 ATM     PBI           Costa Rica    Third Party P… Unknown $ 51           $ 9             </span></span>
<span id="cb372-10"><a href="mod-r-transform.html#cb372-10"></a><span class="co">#&gt;  6       1 ATM     PBI           Chile         Deposit Produ… Unknown $ 58           $ 7             </span></span>
<span id="cb372-11"><a href="mod-r-transform.html#cb372-11"></a><span class="co">#&gt;  7       4 CCT     MRT           Great Britain Revolving Cre… ?       $ 27           $ 5             </span></span>
<span id="cb372-12"><a href="mod-r-transform.html#cb372-12"></a><span class="co">#&gt;  8       4 ATM     MAM           Taiwan        Third Party P… unknown $ 55           $ 9             </span></span>
<span id="cb372-13"><a href="mod-r-transform.html#cb372-13"></a><span class="co">#&gt;  9       4 MAL     WEB           Japan         Other Products unknown $ 40           $ 7             </span></span>
<span id="cb372-14"><a href="mod-r-transform.html#cb372-14"></a><span class="co">#&gt; 10       2 CCT     MAM           Netherlands   Credit Produc… unknown $ 14           $ 3             </span></span>
<span id="cb372-15"><a href="mod-r-transform.html#cb372-15"></a><span class="co">#&gt; # … with 85 more rows, and 1 more variable: Profit &lt;chr&gt;</span></span>
<span id="cb372-16"><a href="mod-r-transform.html#cb372-16"></a>na_values &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-17"><a href="mod-r-transform.html#cb372-17"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-18"><a href="mod-r-transform.html#cb372-18"></a><span class="st">  </span><span class="kw">distinct</span>(Revenue) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb372-19"><a href="mod-r-transform.html#cb372-19"></a><span class="st">  </span><span class="kw">pull</span>(Revenue)</span>
<span id="cb372-20"><a href="mod-r-transform.html#cb372-20"></a>na_values</span>
<span id="cb372-21"><a href="mod-r-transform.html#cb372-21"></a><span class="co">#&gt; [1] &quot;Unknown&quot; &quot;?&quot;       &quot;unknown&quot;</span></span></code></pre></div>
<p>The expression is a bit complex. Let us break it up. Function <code>fixed</code> just returns the fixed string ‘$’. This is necessary since the dollar sign has a special meaning in regular expressions (beyond the scope here). Function <code>str_starts</code> checks if the string starts with a dollar sign. We use the logical negation (NOT) to find the complementary set.</p>
<p>Note that different strings have been used to indicate <code>NA</code> values (Unknown, ?, unknown). Let us first use a single value to indicate <code>NA</code> (a question mark):</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="mod-r-transform.html#cb373-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb373-2"><a href="mod-r-transform.html#cb373-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_replace_all</span>(Revenue, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)))</span></code></pre></div>
<p>Next, we replace all <code>?</code> with <code>NA</code>:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="mod-r-transform.html#cb374-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb374-2"><a href="mod-r-transform.html#cb374-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">na_if</span>(Revenue, <span class="st">&quot;?&quot;</span>))</span>
<span id="cb374-3"><a href="mod-r-transform.html#cb374-3"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># check</span></span>
<span id="cb374-4"><a href="mod-r-transform.html#cb374-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_starts</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$&quot;</span>))) </span>
<span id="cb374-5"><a href="mod-r-transform.html#cb374-5"></a><span class="co">#&gt; # A tibble: 0 × 9</span></span>
<span id="cb374-6"><a href="mod-r-transform.html#cb374-6"></a><span class="co">#&gt; # … with 9 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb374-7"><a href="mod-r-transform.html#cb374-7"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;chr&gt;, Product Cost &lt;chr&gt;, Customer Service Cost &lt;chr&gt;,</span></span>
<span id="cb374-8"><a href="mod-r-transform.html#cb374-8"></a><span class="co">#&gt; #   Profit &lt;chr&gt;</span></span></code></pre></div>
<p>Finally, we remove all dollar signs:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="mod-r-transform.html#cb375-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb375-2"><a href="mod-r-transform.html#cb375-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_remove</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span>
<span id="cb375-3"><a href="mod-r-transform.html#cb375-3"></a>profit</span>
<span id="cb375-4"><a href="mod-r-transform.html#cb375-4"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb375-5"><a href="mod-r-transform.html#cb375-5"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb375-6"><a href="mod-r-transform.html#cb375-6"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;           </span></span>
<span id="cb375-7"><a href="mod-r-transform.html#cb375-7"></a><span class="co">#&gt;  1       3 ATM     FRT           USA     Credit Products              6044 $ 3998         $ 413           </span></span>
<span id="cb375-8"><a href="mod-r-transform.html#cb375-8"></a><span class="co">#&gt;  2       1 ATM     MRT           USA     Credit Products              4686 $ 3229         $ 643           </span></span>
<span id="cb375-9"><a href="mod-r-transform.html#cb375-9"></a><span class="co">#&gt;  3       4 ATM     PBI           USA     Deposit Products             6063 $ 7440         $ 1842          </span></span>
<span id="cb375-10"><a href="mod-r-transform.html#cb375-10"></a><span class="co">#&gt;  4       1 ATM     PBI           USA     Deposit Products             4682 $ 6127         $ 1118          </span></span>
<span id="cb375-11"><a href="mod-r-transform.html#cb375-11"></a><span class="co">#&gt;  5       4 ATM     MRT           USA     Deposit Products             6320 $ 7913         $ 1854          </span></span>
<span id="cb375-12"><a href="mod-r-transform.html#cb375-12"></a><span class="co">#&gt;  6       3 BRH     MAM           USA     Deposit Products             2993 $ 1034         $ 242           </span></span>
<span id="cb375-13"><a href="mod-r-transform.html#cb375-13"></a><span class="co">#&gt;  7       4 BRH     PBI           USA     Revolving Credit Products    3355 $ 4355         $ 1027          </span></span>
<span id="cb375-14"><a href="mod-r-transform.html#cb375-14"></a><span class="co">#&gt;  8       3 ATM     FRT           USA     Revolving Credit Products    5716 $ 5617         $ 876           </span></span>
<span id="cb375-15"><a href="mod-r-transform.html#cb375-15"></a><span class="co">#&gt;  9       4 BRH     PBI           USA     Deposit Products             3347 $ 4229         $ 425           </span></span>
<span id="cb375-16"><a href="mod-r-transform.html#cb375-16"></a><span class="co">#&gt; 10       1 BRH     PBI           USA     Credit Products              2624 $ 1960         $ 264           </span></span>
<span id="cb375-17"><a href="mod-r-transform.html#cb375-17"></a><span class="co">#&gt; # … with 24,536 more rows, and 1 more variable: Profit &lt;chr&gt;</span></span></code></pre></div>
<p>As one pipe:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="mod-r-transform.html#cb376-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb376-2"><a href="mod-r-transform.html#cb376-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_replace_all</span>(Revenue, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb376-3"><a href="mod-r-transform.html#cb376-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">na_if</span>(Revenue, <span class="st">&quot;?&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb376-4"><a href="mod-r-transform.html#cb376-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">str_remove</span>(Revenue, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>())</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Convert the remaining columns to numeric like shown for <code>Revenue</code> above.</li>
</ol>
<div id="77HwvBu4s3x9aiH1iJrT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="77HwvBu4s3x9aiH1iJrT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="77HwvBu4s3x9aiH1iJrT-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="mod-r-transform.html#cb377-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path)</span>
<span id="cb377-2"><a href="mod-r-transform.html#cb377-2"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb377-3"><a href="mod-r-transform.html#cb377-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb377-4"><a href="mod-r-transform.html#cb377-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb377-5"><a href="mod-r-transform.html#cb377-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb377-6"><a href="mod-r-transform.html#cb377-6"></a>profit</span>
<span id="cb377-7"><a href="mod-r-transform.html#cb377-7"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb377-8"><a href="mod-r-transform.html#cb377-8"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb377-9"><a href="mod-r-transform.html#cb377-9"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb377-10"><a href="mod-r-transform.html#cb377-10"></a><span class="co">#&gt;  1 Q3      ATM     FRT           USA     Credit Products              6044           3998              413</span></span>
<span id="cb377-11"><a href="mod-r-transform.html#cb377-11"></a><span class="co">#&gt;  2 1       ATM     MRT           USA     Credit Products              4686           3229              643</span></span>
<span id="cb377-12"><a href="mod-r-transform.html#cb377-12"></a><span class="co">#&gt;  3 Q4      ATM     PBI           USA     Deposit Products             6063           7440             1842</span></span>
<span id="cb377-13"><a href="mod-r-transform.html#cb377-13"></a><span class="co">#&gt;  4 Q1      ATM     PBI           USA     Deposit Products             4682           6127             1118</span></span>
<span id="cb377-14"><a href="mod-r-transform.html#cb377-14"></a><span class="co">#&gt;  5 Q4      ATM     MRT           USA     Deposit Products             6320           7913             1854</span></span>
<span id="cb377-15"><a href="mod-r-transform.html#cb377-15"></a><span class="co">#&gt;  6 Q3      BRH     MAM           USA     Deposit Products             2993           1034              242</span></span>
<span id="cb377-16"><a href="mod-r-transform.html#cb377-16"></a><span class="co">#&gt;  7 Q4      BRH     PBI           USA     Revolving Credit Products    3355           4355             1027</span></span>
<span id="cb377-17"><a href="mod-r-transform.html#cb377-17"></a><span class="co">#&gt;  8 Q3      ATM     FRT           USA     Revolving Credit Products    5716           5617              876</span></span>
<span id="cb377-18"><a href="mod-r-transform.html#cb377-18"></a><span class="co">#&gt;  9 Q4      BRH     PBI           USA     Deposit Products             3347           4229              425</span></span>
<span id="cb377-19"><a href="mod-r-transform.html#cb377-19"></a><span class="co">#&gt; 10 Q1      BRH     PBI           USA     Credit Products              2624           1960              264</span></span>
<span id="cb377-20"><a href="mod-r-transform.html#cb377-20"></a><span class="co">#&gt; # … with 24,536 more rows, and 1 more variable: Profit &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#77HwvBu4s3x9aiH1iJrT">
Solution
</button>
<div id="z41Zb0k2Tw3xlqDzgHox" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="z41Zb0k2Tw3xlqDzgHox-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="z41Zb0k2Tw3xlqDzgHox-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="mod-r-transform.html#cb378-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb378-2"><a href="mod-r-transform.html#cb378-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb378-3"><a href="mod-r-transform.html#cb378-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb378-4"><a href="mod-r-transform.html#cb378-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(___<span class="op">:</span>___, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb378-5"><a href="mod-r-transform.html#cb378-5"></a>profit</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#z41Zb0k2Tw3xlqDzgHox">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>across</code> function to apply the operations in Question 2 for a set of columns. Hint: see the examples on the help page of <code>across</code>.</li>
</ol>
<div id="t73or2Dh60u3s7PEmZCQ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="t73or2Dh60u3s7PEmZCQ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="t73or2Dh60u3s7PEmZCQ-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="mod-r-transform.html#cb379-1"></a>profit &lt;-<span class="st"> </span><span class="kw">read_csv</span>(path) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb379-2"><a href="mod-r-transform.html#cb379-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Quarter =</span> <span class="kw">str_remove</span>(Quarter, <span class="st">&quot;q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="st">&quot;Q&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>()) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb379-3"><a href="mod-r-transform.html#cb379-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_replace_all</span>(.x, <span class="kw">c</span>(<span class="st">&quot;unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>, <span class="st">&quot;Unknown&quot;</span> =<span class="st"> &quot;?&quot;</span>)) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb379-4"><a href="mod-r-transform.html#cb379-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">na_if</span>(.x, <span class="st">&quot;?&quot;</span>) )) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb379-5"><a href="mod-r-transform.html#cb379-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(Revenue<span class="op">:</span>Profit, <span class="op">~</span><span class="kw">str_remove</span>(.x, <span class="kw">fixed</span>(<span class="st">&quot;$ &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.numeric</span>() )) </span>
<span id="cb379-6"><a href="mod-r-transform.html#cb379-6"></a><span class="kw">skim</span>(profit)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-355">Table 17.3: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">profit</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">24546</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">9</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Channel</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Customer ID</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">18</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Country</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">14</td>
<td align="right">0</td>
<td align="right">47</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Product Line</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">14</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Quarter</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2.50</td>
<td align="right">1.12</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">▇▇▁▇▇</td>
</tr>
<tr class="even">
<td align="left">Revenue</td>
<td align="right">158</td>
<td align="right">0.99</td>
<td align="right">120.31</td>
<td align="right">421.79</td>
<td align="right">1</td>
<td align="right">12</td>
<td align="right">41</td>
<td align="right">74</td>
<td align="right">7540</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">Product Cost</td>
<td align="right">61</td>
<td align="right">1.00</td>
<td align="right">100.04</td>
<td align="right">375.58</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">29</td>
<td align="right">68</td>
<td align="right">9256</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">Customer Service Cost</td>
<td align="right">96</td>
<td align="right">1.00</td>
<td align="right">17.41</td>
<td align="right">67.50</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">12</td>
<td align="right">1865</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">Profit</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2.71</td>
<td align="right">154.89</td>
<td align="right">-4139</td>
<td align="right">-7</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">3664</td>
<td align="left">▁▁▇▁▁</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#t73or2Dh60u3s7PEmZCQ">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>Write one pipe that does all the cleaning.</li>
</ol>
<div id="RuSvOnlLwVKRUqwTNE0h" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="RuSvOnlLwVKRUqwTNE0h-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="RuSvOnlLwVKRUqwTNE0h-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="mod-r-transform.html#cb380-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb380-2"><a href="mod-r-transform.html#cb380-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(Profit <span class="op">-</span><span class="st"> </span>Profit_calc)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb380-3"><a href="mod-r-transform.html#cb380-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit =</span> <span class="kw">if_else</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>Diff <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>, Profit_calc, Profit, <span class="dt">missing =</span> Profit) ) </span>
<span id="cb380-4"><a href="mod-r-transform.html#cb380-4"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Diff <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="kw">is.na</span>(Profit_calc))  <span class="co"># check</span></span>
<span id="cb380-5"><a href="mod-r-transform.html#cb380-5"></a><span class="co">#&gt; # A tibble: 0 × 11</span></span>
<span id="cb380-6"><a href="mod-r-transform.html#cb380-6"></a><span class="co">#&gt; # … with 11 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb380-7"><a href="mod-r-transform.html#cb380-7"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;dbl&gt;, Product Cost &lt;dbl&gt;, Customer Service Cost &lt;dbl&gt;,</span></span>
<span id="cb380-8"><a href="mod-r-transform.html#cb380-8"></a><span class="co">#&gt; #   Profit &lt;dbl&gt;, Profit_calc &lt;dbl&gt;, Diff &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#RuSvOnlLwVKRUqwTNE0h">
Solution
</button>
<div id="h0BX9FvMzi9aqjSVYCt9" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="h0BX9FvMzi9aqjSVYCt9-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="h0BX9FvMzi9aqjSVYCt9-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="mod-r-transform.html#cb381-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb381-2"><a href="mod-r-transform.html#cb381-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(___)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb381-3"><a href="mod-r-transform.html#cb381-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit =</span> <span class="kw">if_else</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>Diff <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>, ___, Profit, Profit) ) </span>
<span id="cb381-4"><a href="mod-r-transform.html#cb381-4"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Diff <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="kw">is.na</span>(Profit_calc))  <span class="co"># check</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#h0BX9FvMzi9aqjSVYCt9">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Validate that revenue - product costs - customer service cost equals profit. If you see small rounding errors (less than or equal one) then recalculate the profit.</li>
</ol>
<div id="aTCyJ2kZ0IrE3iVPQutD" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="aTCyJ2kZ0IrE3iVPQutD-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="aTCyJ2kZ0IrE3iVPQutD-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="mod-r-transform.html#cb382-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-2"><a href="mod-r-transform.html#cb382-2"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-3"><a href="mod-r-transform.html#cb382-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-4"><a href="mod-r-transform.html#cb382-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(Revenue) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, Profit <span class="op">+</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, Revenue, Revenue),</span>
<span id="cb382-5"><a href="mod-r-transform.html#cb382-5"></a>         <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="op">-</span><span class="st"> </span>Profit <span class="op">+</span><span class="st"> </span>Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>), </span>
<span id="cb382-6"><a href="mod-r-transform.html#cb382-6"></a>         <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(<span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="op">-</span><span class="st"> </span>Profit <span class="op">+</span><span class="st"> </span>Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span>, <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-7"><a href="mod-r-transform.html#cb382-7"></a><span class="st">  </span><span class="kw">select</span>(Quarter<span class="op">:</span>Profit)</span>
<span id="cb382-8"><a href="mod-r-transform.html#cb382-8"></a></span>
<span id="cb382-9"><a href="mod-r-transform.html#cb382-9"></a><span class="co"># check - do numbers match</span></span>
<span id="cb382-10"><a href="mod-r-transform.html#cb382-10"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-11"><a href="mod-r-transform.html#cb382-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Profit_calc =</span> Revenue <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">-</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>, <span class="dt">Diff =</span> <span class="kw">abs</span>(Profit <span class="op">-</span><span class="st"> </span>Profit_calc)) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb382-12"><a href="mod-r-transform.html#cb382-12"></a><span class="st">  </span><span class="kw">filter</span>(Diff <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb382-13"><a href="mod-r-transform.html#cb382-13"></a><span class="co">#&gt; # A tibble: 0 × 11</span></span>
<span id="cb382-14"><a href="mod-r-transform.html#cb382-14"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb382-15"><a href="mod-r-transform.html#cb382-15"></a><span class="co">#&gt; # … with 11 variables: Quarter &lt;dbl&gt;, Channel &lt;chr&gt;, Customer ID &lt;chr&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb382-16"><a href="mod-r-transform.html#cb382-16"></a><span class="co">#&gt; #   Product Line &lt;chr&gt;, Revenue &lt;dbl&gt;, Product Cost &lt;dbl&gt;, Customer Service Cost &lt;dbl&gt;,</span></span>
<span id="cb382-17"><a href="mod-r-transform.html#cb382-17"></a><span class="co">#&gt; #   Profit &lt;dbl&gt;, Profit_calc &lt;dbl&gt;, Diff &lt;dbl&gt;</span></span>
<span id="cb382-18"><a href="mod-r-transform.html#cb382-18"></a><span class="co"># check - find NA values</span></span>
<span id="cb382-19"><a href="mod-r-transform.html#cb382-19"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-20"><a href="mod-r-transform.html#cb382-20"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-21"><a href="mod-r-transform.html#cb382-21"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb382-22"><a href="mod-r-transform.html#cb382-22"></a><span class="st">  </span><span class="kw">filter</span>(c_na <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb382-23"><a href="mod-r-transform.html#cb382-23"></a><span class="co">#&gt; # A tibble: 3 × 10</span></span>
<span id="cb382-24"><a href="mod-r-transform.html#cb382-24"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb382-25"><a href="mod-r-transform.html#cb382-25"></a><span class="co">#&gt;   Quarter Channel `Customer ID` Country `Product Line`            Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb382-26"><a href="mod-r-transform.html#cb382-26"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb382-27"><a href="mod-r-transform.html#cb382-27"></a><span class="co">#&gt; 1       1 EML     FRT           France  Revolving Credit Products       3             NA               NA</span></span>
<span id="cb382-28"><a href="mod-r-transform.html#cb382-28"></a><span class="co">#&gt; 2       2 BRH     EBP           Guam    Fee Based Products             NA             NA                0</span></span>
<span id="cb382-29"><a href="mod-r-transform.html#cb382-29"></a><span class="co">#&gt; 3       1 MAL     MFN           Japan   Fee Based Products             NA             NA                5</span></span>
<span id="cb382-30"><a href="mod-r-transform.html#cb382-30"></a><span class="co">#&gt; # … with 2 more variables: Profit &lt;dbl&gt;, c_na &lt;int&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#aTCyJ2kZ0IrE3iVPQutD">
Solution
</button>
<div id="Z2X6k6ClQXsjkb6pjs5p" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Z2X6k6ClQXsjkb6pjs5p-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Z2X6k6ClQXsjkb6pjs5p-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="mod-r-transform.html#cb383-1"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb383-2"><a href="mod-r-transform.html#cb383-2"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb383-3"><a href="mod-r-transform.html#cb383-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">c_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb383-4"><a href="mod-r-transform.html#cb383-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Revenue =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, Revenue, Revenue),</span>
<span id="cb383-5"><a href="mod-r-transform.html#cb383-5"></a>         <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, <span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>), </span>
<span id="cb383-6"><a href="mod-r-transform.html#cb383-6"></a>         <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> =<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(___) <span class="op">&amp;</span><span class="st"> </span>c_na <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ___, <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb383-7"><a href="mod-r-transform.html#cb383-7"></a><span class="st">  </span><span class="kw">select</span>(Quarter<span class="op">:</span>Profit)</span></code></pre></div>
<p>
You can check you calculations using your code from Question 5.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Z2X6k6ClQXsjkb6pjs5p">
Hint 2
</button>
<div id="HKsB0h2ouACntFQOfInL" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="HKsB0h2ouACntFQOfInL-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="HKsB0h2ouACntFQOfInL-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="mod-r-transform.html#cb384-1"></a><span class="co"># To find the number of missing values (`NA`) you can create a new column </span></span>
<span id="cb384-2"><a href="mod-r-transform.html#cb384-2"></a><span class="co"># counting the number of missing values:</span></span>
<span id="cb384-3"><a href="mod-r-transform.html#cb384-3"></a>profit &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb384-4"><a href="mod-r-transform.html#cb384-4"></a><span class="st">  </span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb384-5"><a href="mod-r-transform.html#cb384-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ct_na =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(<span class="kw">c_across</span>(Revenue<span class="op">:</span>Profit)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb384-6"><a href="mod-r-transform.html#cb384-6"></a><span class="st">  </span><span class="kw">ungroup</span>()</span>
<span id="cb384-7"><a href="mod-r-transform.html#cb384-7"></a>profit <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ct_na <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<p>
Recall that profit = revenue - product costs - customer service cost; that is, if a single value of these are missing then the value can be calculated using the other ones.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#HKsB0h2ouACntFQOfInL">
Hint 1
</button>
<ol start="6" style="list-style-type: decimal">
<li>Recalculate values in columns <code>Revenue</code> to <code>Profit</code> if possible.</li>
</ol>
<div id="F0NbLAzGY8gRMNPpulMg" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="F0NbLAzGY8gRMNPpulMg-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="F0NbLAzGY8gRMNPpulMg-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="mod-r-transform.html#cb385-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb385-2"><a href="mod-r-transform.html#cb385-2"></a><span class="st">  </span><span class="kw">group_by</span>(Quarter) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb385-3"><a href="mod-r-transform.html#cb385-3"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span>
<span id="cb385-4"><a href="mod-r-transform.html#cb385-4"></a><span class="co">#&gt; # A tibble: 8 × 9</span></span>
<span id="cb385-5"><a href="mod-r-transform.html#cb385-5"></a><span class="co">#&gt; # Groups:   Quarter [4]</span></span>
<span id="cb385-6"><a href="mod-r-transform.html#cb385-6"></a><span class="co">#&gt;   Quarter Channel `Customer ID` Country `Product Line`            Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb385-7"><a href="mod-r-transform.html#cb385-7"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb385-8"><a href="mod-r-transform.html#cb385-8"></a><span class="co">#&gt; 1       1 ATM     PBI           USA     Credit Products              4821           1808              233</span></span>
<span id="cb385-9"><a href="mod-r-transform.html#cb385-9"></a><span class="co">#&gt; 2       1 ATM     PBI           USA     Revolving Credit Products    4268           1638              363</span></span>
<span id="cb385-10"><a href="mod-r-transform.html#cb385-10"></a><span class="co">#&gt; 3       2 ATM     FRT           USA     Credit Products              5931           3137              406</span></span>
<span id="cb385-11"><a href="mod-r-transform.html#cb385-11"></a><span class="co">#&gt; 4       2 ATM     RPB           USA     Deposit Products             4864           2156              533</span></span>
<span id="cb385-12"><a href="mod-r-transform.html#cb385-12"></a><span class="co">#&gt; 5       3 ATM     WEM           USA     Credit Products              5682           2112              454</span></span>
<span id="cb385-13"><a href="mod-r-transform.html#cb385-13"></a><span class="co">#&gt; 6       3 ATM     WEM           USA     Deposit Products             4850           2493              253</span></span>
<span id="cb385-14"><a href="mod-r-transform.html#cb385-14"></a><span class="co">#&gt; 7       4 ATM     MAM           USA     Revolving Credit Products    6699           2506              530</span></span>
<span id="cb385-15"><a href="mod-r-transform.html#cb385-15"></a><span class="co">#&gt; 8       4 ATM     WEM           USA     Revolving Credit Products    5836           2114              265</span></span>
<span id="cb385-16"><a href="mod-r-transform.html#cb385-16"></a><span class="co">#&gt; # … with 1 more variable: Profit &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#F0NbLAzGY8gRMNPpulMg">
Solution
</button>
<ol start="7" style="list-style-type: decimal">
<li>Find the two best rows with highest profit in each quarter.</li>
</ol>
<div id="V1ecK1yz4Xy6MUuZ1rps" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="V1ecK1yz4Xy6MUuZ1rps-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="V1ecK1yz4Xy6MUuZ1rps-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="mod-r-transform.html#cb386-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-2"><a href="mod-r-transform.html#cb386-2"></a><span class="st">  </span><span class="kw">group_by</span>(Quarter, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-3"><a href="mod-r-transform.html#cb386-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb386-4"><a href="mod-r-transform.html#cb386-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span>
<span id="cb386-5"><a href="mod-r-transform.html#cb386-5"></a><span class="co">#&gt; # A tibble: 8 × 3</span></span>
<span id="cb386-6"><a href="mod-r-transform.html#cb386-6"></a><span class="co">#&gt; # Groups:   Quarter [4]</span></span>
<span id="cb386-7"><a href="mod-r-transform.html#cb386-7"></a><span class="co">#&gt;   Quarter `Customer ID` Profit</span></span>
<span id="cb386-8"><a href="mod-r-transform.html#cb386-8"></a><span class="co">#&gt;     &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb386-9"><a href="mod-r-transform.html#cb386-9"></a><span class="co">#&gt; 1       1 MRT             3925</span></span>
<span id="cb386-10"><a href="mod-r-transform.html#cb386-10"></a><span class="co">#&gt; 2       1 WEB             3776</span></span>
<span id="cb386-11"><a href="mod-r-transform.html#cb386-11"></a><span class="co">#&gt; 3       2 FRT             7272</span></span>
<span id="cb386-12"><a href="mod-r-transform.html#cb386-12"></a><span class="co">#&gt; 4       2 MAM             6992</span></span>
<span id="cb386-13"><a href="mod-r-transform.html#cb386-13"></a><span class="co">#&gt; 5       3 WEM             6616</span></span>
<span id="cb386-14"><a href="mod-r-transform.html#cb386-14"></a><span class="co">#&gt; 6       3 RPB             3245</span></span>
<span id="cb386-15"><a href="mod-r-transform.html#cb386-15"></a><span class="co">#&gt; 7       4 EBP            10093</span></span>
<span id="cb386-16"><a href="mod-r-transform.html#cb386-16"></a><span class="co">#&gt; 8       4 WEM             8262</span></span></code></pre></div>
<p>
The results are not the same since use another group by.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#V1ecK1yz4Xy6MUuZ1rps">
Solution
</button>
<div id="o06pD1Zks3DPPZwz8Hpz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="o06pD1Zks3DPPZwz8Hpz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="o06pD1Zks3DPPZwz8Hpz-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="mod-r-transform.html#cb387-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb387-2"><a href="mod-r-transform.html#cb387-2"></a><span class="st">  </span><span class="kw">group_by</span>(___, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb387-3"><a href="mod-r-transform.html#cb387-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb387-4"><a href="mod-r-transform.html#cb387-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#o06pD1Zks3DPPZwz8Hpz">
Hint
</button>
<ol start="8" style="list-style-type: decimal">
<li>Find the two best customers with highest profit in each quarter. Is the result the same as in Question 7?</li>
</ol>
<div id="f48KFFmAbgvgG02Aq2Gt" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="f48KFFmAbgvgG02Aq2Gt-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="f48KFFmAbgvgG02Aq2Gt-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="mod-r-transform.html#cb388-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-2"><a href="mod-r-transform.html#cb388-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-3"><a href="mod-r-transform.html#cb388-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-4"><a href="mod-r-transform.html#cb388-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb388-5"><a href="mod-r-transform.html#cb388-5"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb388-6"><a href="mod-r-transform.html#cb388-6"></a><span class="co">#&gt;   `Product Line`  Profit</span></span>
<span id="cb388-7"><a href="mod-r-transform.html#cb388-7"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb388-8"><a href="mod-r-transform.html#cb388-8"></a><span class="co">#&gt; 1 Credit Products  31022</span></span>
<span id="cb388-9"><a href="mod-r-transform.html#cb388-9"></a><span class="co"># ... repeat </span></span>
<span id="cb388-10"><a href="mod-r-transform.html#cb388-10"></a></span>
<span id="cb388-11"><a href="mod-r-transform.html#cb388-11"></a><span class="co"># Using a function</span></span>
<span id="cb388-12"><a href="mod-r-transform.html#cb388-12"></a>summarise_profit  &lt;-<span class="st"> </span><span class="cf">function</span>(data, group_var, summarise_var) {</span>
<span id="cb388-13"><a href="mod-r-transform.html#cb388-13"></a>  data <span class="op">%&gt;%</span></span>
<span id="cb388-14"><a href="mod-r-transform.html#cb388-14"></a><span class="st">    </span><span class="kw">group_by</span>(<span class="kw">across</span>({{ group_var }})) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-15"><a href="mod-r-transform.html#cb388-15"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="kw">across</span>({{ summarise_var }}, sum)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-16"><a href="mod-r-transform.html#cb388-16"></a><span class="st">    </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb388-17"><a href="mod-r-transform.html#cb388-17"></a>}</span>
<span id="cb388-18"><a href="mod-r-transform.html#cb388-18"></a><span class="kw">summarise_profit</span>(profit, <span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>, Profit)</span>
<span id="cb388-19"><a href="mod-r-transform.html#cb388-19"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb388-20"><a href="mod-r-transform.html#cb388-20"></a><span class="co">#&gt;   `Product Line`  Profit</span></span>
<span id="cb388-21"><a href="mod-r-transform.html#cb388-21"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb388-22"><a href="mod-r-transform.html#cb388-22"></a><span class="co">#&gt; 1 Credit Products  31022</span></span>
<span id="cb388-23"><a href="mod-r-transform.html#cb388-23"></a><span class="kw">summarise_profit</span>(profit, <span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>, Profit)</span>
<span id="cb388-24"><a href="mod-r-transform.html#cb388-24"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb388-25"><a href="mod-r-transform.html#cb388-25"></a><span class="co">#&gt;   `Customer ID` Profit</span></span>
<span id="cb388-26"><a href="mod-r-transform.html#cb388-26"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;dbl&gt;</span></span>
<span id="cb388-27"><a href="mod-r-transform.html#cb388-27"></a><span class="co">#&gt; 1 WEM            18942</span></span>
<span id="cb388-28"><a href="mod-r-transform.html#cb388-28"></a><span class="co"># ... repeat</span></span>
<span id="cb388-29"><a href="mod-r-transform.html#cb388-29"></a></span>
<span id="cb388-30"><a href="mod-r-transform.html#cb388-30"></a><span class="co"># Using purrr package to get a single tibble (if interested in the purrr package)</span></span>
<span id="cb388-31"><a href="mod-r-transform.html#cb388-31"></a>val &lt;-<span class="st"> </span><span class="kw">names</span>(profit)[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb388-32"><a href="mod-r-transform.html#cb388-32"></a>max_profit &lt;-<span class="st"> </span><span class="kw">map_df</span>(</span>
<span id="cb388-33"><a href="mod-r-transform.html#cb388-33"></a>  val, </span>
<span id="cb388-34"><a href="mod-r-transform.html#cb388-34"></a>  <span class="op">~</span>{</span>
<span id="cb388-35"><a href="mod-r-transform.html#cb388-35"></a>      tmp &lt;-<span class="st"> </span>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-36"><a href="mod-r-transform.html#cb388-36"></a><span class="st">        </span><span class="kw">group_by</span>(.data[[.x]]) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-37"><a href="mod-r-transform.html#cb388-37"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> <span class="kw">sum</span>(Profit), <span class="dt">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb388-38"><a href="mod-r-transform.html#cb388-38"></a><span class="st">        </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb388-39"><a href="mod-r-transform.html#cb388-39"></a>      <span class="kw">tibble</span>(<span class="dt">by =</span> .x, </span>
<span id="cb388-40"><a href="mod-r-transform.html#cb388-40"></a>        <span class="dt">best =</span> <span class="kw">as.character</span>(tmp[[<span class="dv">1</span>,<span class="dv">1</span>]]),</span>
<span id="cb388-41"><a href="mod-r-transform.html#cb388-41"></a>        <span class="dt">profit =</span> tmp[[<span class="dv">1</span>,<span class="dv">2</span>]] </span>
<span id="cb388-42"><a href="mod-r-transform.html#cb388-42"></a>      )</span>
<span id="cb388-43"><a href="mod-r-transform.html#cb388-43"></a>    } </span>
<span id="cb388-44"><a href="mod-r-transform.html#cb388-44"></a>  )</span>
<span id="cb388-45"><a href="mod-r-transform.html#cb388-45"></a>max_profit </span>
<span id="cb388-46"><a href="mod-r-transform.html#cb388-46"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb388-47"><a href="mod-r-transform.html#cb388-47"></a><span class="co">#&gt;   by           best            profit</span></span>
<span id="cb388-48"><a href="mod-r-transform.html#cb388-48"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb388-49"><a href="mod-r-transform.html#cb388-49"></a><span class="co">#&gt; 1 Quarter      4                35268</span></span>
<span id="cb388-50"><a href="mod-r-transform.html#cb388-50"></a><span class="co">#&gt; 2 Channel      ATM              30433</span></span>
<span id="cb388-51"><a href="mod-r-transform.html#cb388-51"></a><span class="co">#&gt; 3 Customer ID  WEM              18942</span></span>
<span id="cb388-52"><a href="mod-r-transform.html#cb388-52"></a><span class="co">#&gt; 4 Country      USA              39693</span></span>
<span id="cb388-53"><a href="mod-r-transform.html#cb388-53"></a><span class="co">#&gt; 5 Product Line Credit Products  31022</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#f48KFFmAbgvgG02Aq2Gt">
Solution
</button>
<div id="XnxgOywW8cp8byEP6HWJ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="XnxgOywW8cp8byEP6HWJ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="XnxgOywW8cp8byEP6HWJ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="mod-r-transform.html#cb389-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb389-2"><a href="mod-r-transform.html#cb389-2"></a><span class="st">  </span><span class="kw">group_by</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb389-3"><a href="mod-r-transform.html#cb389-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Profit =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb389-4"><a href="mod-r-transform.html#cb389-4"></a><span class="st">  </span><span class="kw">slice_max</span>(Profit)</span>
<span id="cb389-5"><a href="mod-r-transform.html#cb389-5"></a><span class="co"># ... repeat </span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#XnxgOywW8cp8byEP6HWJ">
Hint
</button>
<ol start="9" style="list-style-type: decimal">
<li>Find the product line, customer, channel, country and quarter with the highest profit.</li>
</ol>
<div id="bzb9hgKQIpaoI8t0ZxGz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="bzb9hgKQIpaoI8t0ZxGz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="bzb9hgKQIpaoI8t0ZxGz-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="mod-r-transform.html#cb390-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb390-2"><a href="mod-r-transform.html#cb390-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb390-3"><a href="mod-r-transform.html#cb390-3"></a><span class="st">  </span><span class="kw">distinct</span>(Country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb390-4"><a href="mod-r-transform.html#cb390-4"></a><span class="st">  </span><span class="kw">count</span>(<span class="st">`</span><span class="dt">Customer ID</span><span class="st">`</span>)</span>
<span id="cb390-5"><a href="mod-r-transform.html#cb390-5"></a><span class="co">#&gt; # A tibble: 18 × 2</span></span>
<span id="cb390-6"><a href="mod-r-transform.html#cb390-6"></a><span class="co">#&gt; # Groups:   Customer ID [18]</span></span>
<span id="cb390-7"><a href="mod-r-transform.html#cb390-7"></a><span class="co">#&gt;    `Customer ID`     n</span></span>
<span id="cb390-8"><a href="mod-r-transform.html#cb390-8"></a><span class="co">#&gt;    &lt;chr&gt;         &lt;int&gt;</span></span>
<span id="cb390-9"><a href="mod-r-transform.html#cb390-9"></a><span class="co">#&gt;  1 AFF               1</span></span>
<span id="cb390-10"><a href="mod-r-transform.html#cb390-10"></a><span class="co">#&gt;  2 AGR              16</span></span>
<span id="cb390-11"><a href="mod-r-transform.html#cb390-11"></a><span class="co">#&gt;  3 CAM               1</span></span>
<span id="cb390-12"><a href="mod-r-transform.html#cb390-12"></a><span class="co">#&gt;  4 CRE               1</span></span>
<span id="cb390-13"><a href="mod-r-transform.html#cb390-13"></a><span class="co">#&gt;  5 EBP              47</span></span>
<span id="cb390-14"><a href="mod-r-transform.html#cb390-14"></a><span class="co">#&gt;  6 FRT              47</span></span>
<span id="cb390-15"><a href="mod-r-transform.html#cb390-15"></a><span class="co">#&gt;  7 HEC               1</span></span>
<span id="cb390-16"><a href="mod-r-transform.html#cb390-16"></a><span class="co">#&gt;  8 IAS               1</span></span>
<span id="cb390-17"><a href="mod-r-transform.html#cb390-17"></a><span class="co">#&gt;  9 INB               1</span></span>
<span id="cb390-18"><a href="mod-r-transform.html#cb390-18"></a><span class="co">#&gt; 10 MAM              47</span></span>
<span id="cb390-19"><a href="mod-r-transform.html#cb390-19"></a><span class="co">#&gt; 11 MFN              30</span></span>
<span id="cb390-20"><a href="mod-r-transform.html#cb390-20"></a><span class="co">#&gt; 12 MRT              47</span></span>
<span id="cb390-21"><a href="mod-r-transform.html#cb390-21"></a><span class="co">#&gt; 13 PBI              47</span></span>
<span id="cb390-22"><a href="mod-r-transform.html#cb390-22"></a><span class="co">#&gt; 14 RPB              47</span></span>
<span id="cb390-23"><a href="mod-r-transform.html#cb390-23"></a><span class="co">#&gt; 15 SBE               1</span></span>
<span id="cb390-24"><a href="mod-r-transform.html#cb390-24"></a><span class="co">#&gt; 16 STF               2</span></span>
<span id="cb390-25"><a href="mod-r-transform.html#cb390-25"></a><span class="co">#&gt; 17 WEB              47</span></span>
<span id="cb390-26"><a href="mod-r-transform.html#cb390-26"></a><span class="co">#&gt; 18 WEM              47</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#bzb9hgKQIpaoI8t0ZxGz">
Solution
</button>
<ol start="10" style="list-style-type: decimal">
<li>Are there rows with the same customer in different countries?</li>
</ol>
<div id="2FGwyjHPClkUfklbOfrR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2FGwyjHPClkUfklbOfrR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2FGwyjHPClkUfklbOfrR-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="mod-r-transform.html#cb391-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb391-2"><a href="mod-r-transform.html#cb391-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Profit), <span class="kw">desc</span>(Revenue))</span>
<span id="cb391-3"><a href="mod-r-transform.html#cb391-3"></a><span class="co">#&gt; # A tibble: 24,546 × 9</span></span>
<span id="cb391-4"><a href="mod-r-transform.html#cb391-4"></a><span class="co">#&gt; # Rowwise: </span></span>
<span id="cb391-5"><a href="mod-r-transform.html#cb391-5"></a><span class="co">#&gt;    Quarter Channel `Customer ID` Country `Product Line`            Revenue `Product Cost` `Customer Servi…</span></span>
<span id="cb391-6"><a href="mod-r-transform.html#cb391-6"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                       &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb391-7"><a href="mod-r-transform.html#cb391-7"></a><span class="co">#&gt;  1       4 ATM     MAM           USA     Revolving Credit Products    6699           2506              530</span></span>
<span id="cb391-8"><a href="mod-r-transform.html#cb391-8"></a><span class="co">#&gt;  2       4 ATM     WEM           USA     Revolving Credit Products    5836           2114              265</span></span>
<span id="cb391-9"><a href="mod-r-transform.html#cb391-9"></a><span class="co">#&gt;  3       4 ATM     MAM           USA     Credit Products              7540           3374              728</span></span>
<span id="cb391-10"><a href="mod-r-transform.html#cb391-10"></a><span class="co">#&gt;  4       4 ATM     MRT           USA     Credit Products              6419           2669              618</span></span>
<span id="cb391-11"><a href="mod-r-transform.html#cb391-11"></a><span class="co">#&gt;  5       3 ATM     WEM           USA     Credit Products              5682           2112              454</span></span>
<span id="cb391-12"><a href="mod-r-transform.html#cb391-12"></a><span class="co">#&gt;  6       4 ATM     WEB           USA     Deposit Products             5145           1907              191</span></span>
<span id="cb391-13"><a href="mod-r-transform.html#cb391-13"></a><span class="co">#&gt;  7       1 ATM     PBI           USA     Credit Products              4821           1808              233</span></span>
<span id="cb391-14"><a href="mod-r-transform.html#cb391-14"></a><span class="co">#&gt;  8       4 ATM     RPB           USA     Credit Products              5828           2727              559</span></span>
<span id="cb391-15"><a href="mod-r-transform.html#cb391-15"></a><span class="co">#&gt;  9       2 ATM     FRT           USA     Credit Products              5931           3137              406</span></span>
<span id="cb391-16"><a href="mod-r-transform.html#cb391-16"></a><span class="co">#&gt; 10       1 ATM     PBI           USA     Revolving Credit Products    4268           1638              363</span></span>
<span id="cb391-17"><a href="mod-r-transform.html#cb391-17"></a><span class="co">#&gt; # … with 24,536 more rows, and 1 more variable: Profit &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2FGwyjHPClkUfklbOfrR">
Solution
</button>
<ol start="11" style="list-style-type: decimal">
<li>Sort the data decreasing with respect to profit and next revenue.</li>
</ol>
<div id="7cTvEmkfYbrUy4YBIqCa" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="7cTvEmkfYbrUy4YBIqCa-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="7cTvEmkfYbrUy4YBIqCa-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="mod-r-transform.html#cb392-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-2"><a href="mod-r-transform.html#cb392-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-3"><a href="mod-r-transform.html#cb392-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">Customer Service Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-4"><a href="mod-r-transform.html#cb392-4"></a><span class="st">  </span><span class="co"># print() %&gt;%   # if want a peek before slicing </span></span>
<span id="cb392-5"><a href="mod-r-transform.html#cb392-5"></a><span class="st">  </span><span class="kw">slice_max</span>(cost)</span>
<span id="cb392-6"><a href="mod-r-transform.html#cb392-6"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb392-7"><a href="mod-r-transform.html#cb392-7"></a><span class="co">#&gt;   `Product Line`    cost</span></span>
<span id="cb392-8"><a href="mod-r-transform.html#cb392-8"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb392-9"><a href="mod-r-transform.html#cb392-9"></a><span class="co">#&gt; 1 Credit Products 820665</span></span>
<span id="cb392-10"><a href="mod-r-transform.html#cb392-10"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-11"><a href="mod-r-transform.html#cb392-11"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-12"><a href="mod-r-transform.html#cb392-12"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Product Cost</span><span class="st">`</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb392-13"><a href="mod-r-transform.html#cb392-13"></a><span class="st">  </span><span class="kw">slice_min</span>(cost)</span>
<span id="cb392-14"><a href="mod-r-transform.html#cb392-14"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb392-15"><a href="mod-r-transform.html#cb392-15"></a><span class="co">#&gt;   `Product Line`        cost</span></span>
<span id="cb392-16"><a href="mod-r-transform.html#cb392-16"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb392-17"><a href="mod-r-transform.html#cb392-17"></a><span class="co">#&gt; 1 Third Party Products 91796</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#7cTvEmkfYbrUy4YBIqCa">
Solution
</button>
<div id="OITky98Z8CLGihnHBSYc" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="OITky98Z8CLGihnHBSYc-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="OITky98Z8CLGihnHBSYc-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="mod-r-transform.html#cb393-1"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-2"><a href="mod-r-transform.html#cb393-2"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-3"><a href="mod-r-transform.html#cb393-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cost =</span> <span class="kw">sum</span>(___)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-4"><a href="mod-r-transform.html#cb393-4"></a><span class="st">  </span><span class="co"># print() %&gt;%   # if want a peek before slicing </span></span>
<span id="cb393-5"><a href="mod-r-transform.html#cb393-5"></a><span class="st">  </span><span class="kw">slice_max</span>(___)</span>
<span id="cb393-6"><a href="mod-r-transform.html#cb393-6"></a></span>
<span id="cb393-7"><a href="mod-r-transform.html#cb393-7"></a>profit <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb393-8"><a href="mod-r-transform.html#cb393-8"></a><span class="st">  </span>___% </span>
<span id="cb393-9"><a href="mod-r-transform.html#cb393-9"></a>  <span class="kw">slice_min</span>(cost)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#OITky98Z8CLGihnHBSYc">
Hint
</button>
<ol start="12" style="list-style-type: decimal">
<li>Which product line has the highest and lowest total cost?</li>
</ol>
<div id="T8szrqNcW2kq3tNhigII" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="T8szrqNcW2kq3tNhigII-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="T8szrqNcW2kq3tNhigII-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="mod-r-transform.html#cb394-1"></a>profit <span class="op">%&gt;%</span></span>
<span id="cb394-2"><a href="mod-r-transform.html#cb394-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cust_cost_new =</span> <span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span> <span class="op">*</span><span class="st"> </span><span class="fl">1.05</span>, </span>
<span id="cb394-3"><a href="mod-r-transform.html#cb394-3"></a>         <span class="dt">profit_new =</span> Revenue <span class="op">-</span><span class="st"> </span>cust_cost_new <span class="op">-</span><span class="st"> `</span><span class="dt">Product Cost</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb394-4"><a href="mod-r-transform.html#cb394-4"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb394-5"><a href="mod-r-transform.html#cb394-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cust_cost =</span> <span class="kw">sum</span>(<span class="st">`</span><span class="dt">Customer Service Cost</span><span class="st">`</span>), <span class="dt">profit =</span> <span class="kw">sum</span>(Profit), </span>
<span id="cb394-6"><a href="mod-r-transform.html#cb394-6"></a>            <span class="dt">cust_cost_new =</span> <span class="kw">sum</span>(cust_cost_new), <span class="dt">profit_new =</span> <span class="kw">sum</span>(profit_new),</span>
<span id="cb394-7"><a href="mod-r-transform.html#cb394-7"></a>            <span class="dt">profit_decrease =</span> profit_new <span class="op">-</span><span class="st"> </span>profit)</span>
<span id="cb394-8"><a href="mod-r-transform.html#cb394-8"></a><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span id="cb394-9"><a href="mod-r-transform.html#cb394-9"></a><span class="co">#&gt;   `Product Line`            cust_cost profit cust_cost_new profit_new profit_decrease</span></span>
<span id="cb394-10"><a href="mod-r-transform.html#cb394-10"></a><span class="co">#&gt;   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb394-11"><a href="mod-r-transform.html#cb394-11"></a><span class="co">#&gt; 1 Credit Products              119612  31022       125593.     25041.          -5981.</span></span>
<span id="cb394-12"><a href="mod-r-transform.html#cb394-12"></a><span class="co">#&gt; 2 Deposit Products             114526   5408       120252.      -318.          -5726.</span></span>
<span id="cb394-13"><a href="mod-r-transform.html#cb394-13"></a><span class="co">#&gt; 3 Fee Based Products            22900   4953        24045         NA              NA </span></span>
<span id="cb394-14"><a href="mod-r-transform.html#cb394-14"></a><span class="co">#&gt; 4 Other Products                33282   7438        34946.      5774.          -1664.</span></span>
<span id="cb394-15"><a href="mod-r-transform.html#cb394-15"></a><span class="co">#&gt; 5 Revolving Credit Products        NA  15905           NA         NA              NA </span></span>
<span id="cb394-16"><a href="mod-r-transform.html#cb394-16"></a><span class="co">#&gt; 6 Third Party Products          15970   2264        16768.      1465.           -799.</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#T8szrqNcW2kq3tNhigII">
Solution
</button>
<div id="T3UaEx9ZQ7MznLwiUoeM" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="T3UaEx9ZQ7MznLwiUoeM-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="T3UaEx9ZQ7MznLwiUoeM-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="mod-r-transform.html#cb395-1"></a>profit <span class="op">%&gt;%</span></span>
<span id="cb395-2"><a href="mod-r-transform.html#cb395-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cust_cost_new =</span> ___ <span class="op">*</span><span class="st"> </span><span class="fl">1.05</span>, </span>
<span id="cb395-3"><a href="mod-r-transform.html#cb395-3"></a>         <span class="dt">profit_new =</span> ___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb395-4"><a href="mod-r-transform.html#cb395-4"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">Product Line</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb395-5"><a href="mod-r-transform.html#cb395-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cust_cost =</span> <span class="kw">sum</span>(___), <span class="dt">profit =</span> <span class="kw">sum</span>(Profit), </span>
<span id="cb395-6"><a href="mod-r-transform.html#cb395-6"></a>            <span class="dt">cust_cost_new =</span> ___, <span class="dt">profit_new =</span> ___,</span>
<span id="cb395-7"><a href="mod-r-transform.html#cb395-7"></a>            <span class="dt">profit_decrease =</span> ___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#T3UaEx9ZQ7MznLwiUoeM">
Hint
</button>
<ol start="13" style="list-style-type: decimal">
<li>Assume that customer service cost increases with 5%. How will that affect the profit for each product line?</li>
</ol>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="mod-r-transform.html#cb396-1"></a><span class="kw">rm</span>(profit)</span></code></pre></div>
</div>
<div id="ex-fish" class="section level3">
<h3><span class="header-section-number">17.5.4</span> Exercise (fisheries)</h3>
<p>Use the <em>exercise R markdown template</em> to solve this exercise (<strong>File &gt; New File &gt; R Markdown…</strong>, select <strong>From template</strong> and then <strong>TFA Exercise</strong>).</p>
<p>The dataset called <code>fisheries</code> contains world fisheries harvest for 2005. The tonnage from capture and aquaculture is listed by country.</p>
<p>You need the <code>tidyverse</code> package as usual:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="mod-r-transform.html#cb397-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb397-2"><a href="mod-r-transform.html#cb397-2"></a><span class="co"># install tfa package using remotes::install_github(&quot;bss-osca/tfa/tfa-package&quot;, upgrade = FALSE)     </span></span></code></pre></div>
<p>We load the needed datasets:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="mod-r-transform.html#cb398-1"></a>fisheries &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/fisheries.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span>
<span id="cb398-2"><a href="mod-r-transform.html#cb398-2"></a>fisheries</span>
<span id="cb398-3"><a href="mod-r-transform.html#cb398-3"></a><span class="co">#&gt; # A tibble: 216 × 4</span></span>
<span id="cb398-4"><a href="mod-r-transform.html#cb398-4"></a><span class="co">#&gt;    country             capture aquaculture  total</span></span>
<span id="cb398-5"><a href="mod-r-transform.html#cb398-5"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb398-6"><a href="mod-r-transform.html#cb398-6"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200</span></span>
<span id="cb398-7"><a href="mod-r-transform.html#cb398-7"></a><span class="co">#&gt;  2 Albania                7886         950   8836</span></span>
<span id="cb398-8"><a href="mod-r-transform.html#cb398-8"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361</span></span>
<span id="cb398-9"><a href="mod-r-transform.html#cb398-9"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067</span></span>
<span id="cb398-10"><a href="mod-r-transform.html#cb398-10"></a><span class="co">#&gt;  5 Andorra                   0           0      0</span></span>
<span id="cb398-11"><a href="mod-r-transform.html#cb398-11"></a><span class="co">#&gt;  6 Angola               486490         655 487145</span></span>
<span id="cb398-12"><a href="mod-r-transform.html#cb398-12"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010</span></span>
<span id="cb398-13"><a href="mod-r-transform.html#cb398-13"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899</span></span>
<span id="cb398-14"><a href="mod-r-transform.html#cb398-14"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139</span></span>
<span id="cb398-15"><a href="mod-r-transform.html#cb398-15"></a><span class="co">#&gt; 10 Aruba                   142           0    142</span></span>
<span id="cb398-16"><a href="mod-r-transform.html#cb398-16"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb398-17"><a href="mod-r-transform.html#cb398-17"></a>continents &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">system.file</span>(<span class="st">&quot;extdata/continents.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;tfa&quot;</span>))</span>
<span id="cb398-18"><a href="mod-r-transform.html#cb398-18"></a>continents</span>
<span id="cb398-19"><a href="mod-r-transform.html#cb398-19"></a><span class="co">#&gt; # A tibble: 247 × 2</span></span>
<span id="cb398-20"><a href="mod-r-transform.html#cb398-20"></a><span class="co">#&gt;    country           continent</span></span>
<span id="cb398-21"><a href="mod-r-transform.html#cb398-21"></a><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;    </span></span>
<span id="cb398-22"><a href="mod-r-transform.html#cb398-22"></a><span class="co">#&gt;  1 Afghanistan       Asia     </span></span>
<span id="cb398-23"><a href="mod-r-transform.html#cb398-23"></a><span class="co">#&gt;  2 Åland Islands     Europe   </span></span>
<span id="cb398-24"><a href="mod-r-transform.html#cb398-24"></a><span class="co">#&gt;  3 Albania           Europe   </span></span>
<span id="cb398-25"><a href="mod-r-transform.html#cb398-25"></a><span class="co">#&gt;  4 Algeria           Africa   </span></span>
<span id="cb398-26"><a href="mod-r-transform.html#cb398-26"></a><span class="co">#&gt;  5 American Samoa    Oceania  </span></span>
<span id="cb398-27"><a href="mod-r-transform.html#cb398-27"></a><span class="co">#&gt;  6 Andorra           Europe   </span></span>
<span id="cb398-28"><a href="mod-r-transform.html#cb398-28"></a><span class="co">#&gt;  7 Angola            Africa   </span></span>
<span id="cb398-29"><a href="mod-r-transform.html#cb398-29"></a><span class="co">#&gt;  8 Anguilla          Americas </span></span>
<span id="cb398-30"><a href="mod-r-transform.html#cb398-30"></a><span class="co">#&gt;  9 Antigua &amp; Barbuda Americas </span></span>
<span id="cb398-31"><a href="mod-r-transform.html#cb398-31"></a><span class="co">#&gt; 10 Argentina         Americas </span></span>
<span id="cb398-32"><a href="mod-r-transform.html#cb398-32"></a><span class="co">#&gt; # … with 237 more rows</span></span></code></pre></div>
<p>Some mean statistics:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="mod-r-transform.html#cb399-1"></a>fisheries <span class="op">%&gt;%</span></span>
<span id="cb399-2"><a href="mod-r-transform.html#cb399-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">across</span>(<span class="kw">where</span>(is.numeric), mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb399-3"><a href="mod-r-transform.html#cb399-3"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb399-4"><a href="mod-r-transform.html#cb399-4"></a><span class="co">#&gt;   capture aquaculture   total</span></span>
<span id="cb399-5"><a href="mod-r-transform.html#cb399-5"></a><span class="co">#&gt;     &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb399-6"><a href="mod-r-transform.html#cb399-6"></a><span class="co">#&gt; 1 421916.     508368. 930284.</span></span></code></pre></div>
<div id="TbjMaWatrpAKvvdnZ2HT" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="TbjMaWatrpAKvvdnZ2HT-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="TbjMaWatrpAKvvdnZ2HT-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="mod-r-transform.html#cb400-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb400-2"><a href="mod-r-transform.html#cb400-2"></a><span class="st">  </span><span class="kw">anti_join</span>(continents)      <span class="co"># countries not belonging to a continent</span></span>
<span id="cb400-3"><a href="mod-r-transform.html#cb400-3"></a><span class="co">#&gt; # A tibble: 20 × 4</span></span>
<span id="cb400-4"><a href="mod-r-transform.html#cb400-4"></a><span class="co">#&gt;    country                          capture aquaculture   total</span></span>
<span id="cb400-5"><a href="mod-r-transform.html#cb400-5"></a><span class="co">#&gt;    &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb400-6"><a href="mod-r-transform.html#cb400-6"></a><span class="co">#&gt;  1 Antigua and Barbuda                 3000          10    3010</span></span>
<span id="cb400-7"><a href="mod-r-transform.html#cb400-7"></a><span class="co">#&gt;  2 Bosnia and Herzegovina               305        4564    4869</span></span>
<span id="cb400-8"><a href="mod-r-transform.html#cb400-8"></a><span class="co">#&gt;  3 Czech Republic                      3507       20952   24459</span></span>
<span id="cb400-9"><a href="mod-r-transform.html#cb400-9"></a><span class="co">#&gt;  4 Democratic Republic of the Congo  237372        3161  240533</span></span>
<span id="cb400-10"><a href="mod-r-transform.html#cb400-10"></a><span class="co">#&gt;  5 Eswatini                              65         100     165</span></span>
<span id="cb400-11"><a href="mod-r-transform.html#cb400-11"></a><span class="co">#&gt;  6 Federated States of Micronesia     88397           0   88397</span></span>
<span id="cb400-12"><a href="mod-r-transform.html#cb400-12"></a><span class="co">#&gt;  7 Ivory Coast                        67500        4701   72201</span></span>
<span id="cb400-13"><a href="mod-r-transform.html#cb400-13"></a><span class="co">#&gt;  8 Jersey and Guernsey                 2985        1499    4484</span></span>
<span id="cb400-14"><a href="mod-r-transform.html#cb400-14"></a><span class="co">#&gt;  9 Macao                               1500           0    1500</span></span>
<span id="cb400-15"><a href="mod-r-transform.html#cb400-15"></a><span class="co">#&gt; 10 Myanmar                          2072390     1017644 3090034</span></span>
<span id="cb400-16"><a href="mod-r-transform.html#cb400-16"></a><span class="co">#&gt; 11 North Macedonia                      306         986    1292</span></span>
<span id="cb400-17"><a href="mod-r-transform.html#cb400-17"></a><span class="co">#&gt; 12 Palestine                           3306         280    3586</span></span>
<span id="cb400-18"><a href="mod-r-transform.html#cb400-18"></a><span class="co">#&gt; 13 Republic of the Congo              86748         177   86925</span></span>
<span id="cb400-19"><a href="mod-r-transform.html#cb400-19"></a><span class="co">#&gt; 14 Saint Kitts and Nevis              65734           1   65735</span></span>
<span id="cb400-20"><a href="mod-r-transform.html#cb400-20"></a><span class="co">#&gt; 15 Saint Lucia                         2097          32    2129</span></span>
<span id="cb400-21"><a href="mod-r-transform.html#cb400-21"></a><span class="co">#&gt; 16 Saint Vincent and the Grenadines   23077           0   23077</span></span>
<span id="cb400-22"><a href="mod-r-transform.html#cb400-22"></a><span class="co">#&gt; 17 São Tomé and Príncipe              11750           0   11750</span></span>
<span id="cb400-23"><a href="mod-r-transform.html#cb400-23"></a><span class="co">#&gt; 18 Trinidad and Tobago                13027          11   13038</span></span>
<span id="cb400-24"><a href="mod-r-transform.html#cb400-24"></a><span class="co">#&gt; 19 Turks and Caicos Islands            2780           0    2780</span></span>
<span id="cb400-25"><a href="mod-r-transform.html#cb400-25"></a><span class="co">#&gt; 20 US Virgin Islands                    551           8     559</span></span>
<span id="cb400-26"><a href="mod-r-transform.html#cb400-26"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb400-27"><a href="mod-r-transform.html#cb400-27"></a><span class="st">  </span><span class="kw">print</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb400-28"><a href="mod-r-transform.html#cb400-28"></a><span class="st">  </span><span class="kw">left_join</span>(continents) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb400-29"><a href="mod-r-transform.html#cb400-29"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb400-30"><a href="mod-r-transform.html#cb400-30"></a><span class="co">#&gt; # A tibble: 216 × 4</span></span>
<span id="cb400-31"><a href="mod-r-transform.html#cb400-31"></a><span class="co">#&gt;    country             capture aquaculture  total</span></span>
<span id="cb400-32"><a href="mod-r-transform.html#cb400-32"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb400-33"><a href="mod-r-transform.html#cb400-33"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200</span></span>
<span id="cb400-34"><a href="mod-r-transform.html#cb400-34"></a><span class="co">#&gt;  2 Albania                7886         950   8836</span></span>
<span id="cb400-35"><a href="mod-r-transform.html#cb400-35"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361</span></span>
<span id="cb400-36"><a href="mod-r-transform.html#cb400-36"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067</span></span>
<span id="cb400-37"><a href="mod-r-transform.html#cb400-37"></a><span class="co">#&gt;  5 Andorra                   0           0      0</span></span>
<span id="cb400-38"><a href="mod-r-transform.html#cb400-38"></a><span class="co">#&gt;  6 Angola               486490         655 487145</span></span>
<span id="cb400-39"><a href="mod-r-transform.html#cb400-39"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010</span></span>
<span id="cb400-40"><a href="mod-r-transform.html#cb400-40"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899</span></span>
<span id="cb400-41"><a href="mod-r-transform.html#cb400-41"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139</span></span>
<span id="cb400-42"><a href="mod-r-transform.html#cb400-42"></a><span class="co">#&gt; 10 Aruba                   142           0    142</span></span>
<span id="cb400-43"><a href="mod-r-transform.html#cb400-43"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb400-44"><a href="mod-r-transform.html#cb400-44"></a><span class="co">#&gt; # A tibble: 216 × 5</span></span>
<span id="cb400-45"><a href="mod-r-transform.html#cb400-45"></a><span class="co">#&gt;    country             capture aquaculture  total continent</span></span>
<span id="cb400-46"><a href="mod-r-transform.html#cb400-46"></a><span class="co">#&gt;    &lt;chr&gt;                 &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb400-47"><a href="mod-r-transform.html#cb400-47"></a><span class="co">#&gt;  1 Afghanistan            1000        1200   2200 Asia     </span></span>
<span id="cb400-48"><a href="mod-r-transform.html#cb400-48"></a><span class="co">#&gt;  2 Albania                7886         950   8836 Europe   </span></span>
<span id="cb400-49"><a href="mod-r-transform.html#cb400-49"></a><span class="co">#&gt;  3 Algeria               95000        1361  96361 Africa   </span></span>
<span id="cb400-50"><a href="mod-r-transform.html#cb400-50"></a><span class="co">#&gt;  4 American Samoa         3047          20   3067 Oceania  </span></span>
<span id="cb400-51"><a href="mod-r-transform.html#cb400-51"></a><span class="co">#&gt;  5 Andorra                   0           0      0 Europe   </span></span>
<span id="cb400-52"><a href="mod-r-transform.html#cb400-52"></a><span class="co">#&gt;  6 Angola               486490         655 487145 Africa   </span></span>
<span id="cb400-53"><a href="mod-r-transform.html#cb400-53"></a><span class="co">#&gt;  7 Antigua and Barbuda    3000          10   3010 &lt;NA&gt;     </span></span>
<span id="cb400-54"><a href="mod-r-transform.html#cb400-54"></a><span class="co">#&gt;  8 Argentina            755226        3673 758899 Americas </span></span>
<span id="cb400-55"><a href="mod-r-transform.html#cb400-55"></a><span class="co">#&gt;  9 Armenia                3758       16381  20139 Asia     </span></span>
<span id="cb400-56"><a href="mod-r-transform.html#cb400-56"></a><span class="co">#&gt; 10 Aruba                   142           0    142 Americas </span></span>
<span id="cb400-57"><a href="mod-r-transform.html#cb400-57"></a><span class="co">#&gt; # … with 206 more rows</span></span>
<span id="cb400-58"><a href="mod-r-transform.html#cb400-58"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))   <span class="co"># same result - countries not belonging to a continent</span></span>
<span id="cb400-59"><a href="mod-r-transform.html#cb400-59"></a><span class="co">#&gt; # A tibble: 20 × 5</span></span>
<span id="cb400-60"><a href="mod-r-transform.html#cb400-60"></a><span class="co">#&gt;    country                          capture aquaculture   total continent</span></span>
<span id="cb400-61"><a href="mod-r-transform.html#cb400-61"></a><span class="co">#&gt;    &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb400-62"><a href="mod-r-transform.html#cb400-62"></a><span class="co">#&gt;  1 Antigua and Barbuda                 3000          10    3010 &lt;NA&gt;     </span></span>
<span id="cb400-63"><a href="mod-r-transform.html#cb400-63"></a><span class="co">#&gt;  2 Bosnia and Herzegovina               305        4564    4869 &lt;NA&gt;     </span></span>
<span id="cb400-64"><a href="mod-r-transform.html#cb400-64"></a><span class="co">#&gt;  3 Czech Republic                      3507       20952   24459 &lt;NA&gt;     </span></span>
<span id="cb400-65"><a href="mod-r-transform.html#cb400-65"></a><span class="co">#&gt;  4 Democratic Republic of the Congo  237372        3161  240533 &lt;NA&gt;     </span></span>
<span id="cb400-66"><a href="mod-r-transform.html#cb400-66"></a><span class="co">#&gt;  5 Eswatini                              65         100     165 &lt;NA&gt;     </span></span>
<span id="cb400-67"><a href="mod-r-transform.html#cb400-67"></a><span class="co">#&gt;  6 Federated States of Micronesia     88397           0   88397 &lt;NA&gt;     </span></span>
<span id="cb400-68"><a href="mod-r-transform.html#cb400-68"></a><span class="co">#&gt;  7 Ivory Coast                        67500        4701   72201 &lt;NA&gt;     </span></span>
<span id="cb400-69"><a href="mod-r-transform.html#cb400-69"></a><span class="co">#&gt;  8 Jersey and Guernsey                 2985        1499    4484 &lt;NA&gt;     </span></span>
<span id="cb400-70"><a href="mod-r-transform.html#cb400-70"></a><span class="co">#&gt;  9 Macao                               1500           0    1500 &lt;NA&gt;     </span></span>
<span id="cb400-71"><a href="mod-r-transform.html#cb400-71"></a><span class="co">#&gt; 10 Myanmar                          2072390     1017644 3090034 &lt;NA&gt;     </span></span>
<span id="cb400-72"><a href="mod-r-transform.html#cb400-72"></a><span class="co">#&gt; 11 North Macedonia                      306         986    1292 &lt;NA&gt;     </span></span>
<span id="cb400-73"><a href="mod-r-transform.html#cb400-73"></a><span class="co">#&gt; 12 Palestine                           3306         280    3586 &lt;NA&gt;     </span></span>
<span id="cb400-74"><a href="mod-r-transform.html#cb400-74"></a><span class="co">#&gt; 13 Republic of the Congo              86748         177   86925 &lt;NA&gt;     </span></span>
<span id="cb400-75"><a href="mod-r-transform.html#cb400-75"></a><span class="co">#&gt; 14 Saint Kitts and Nevis              65734           1   65735 &lt;NA&gt;     </span></span>
<span id="cb400-76"><a href="mod-r-transform.html#cb400-76"></a><span class="co">#&gt; 15 Saint Lucia                         2097          32    2129 &lt;NA&gt;     </span></span>
<span id="cb400-77"><a href="mod-r-transform.html#cb400-77"></a><span class="co">#&gt; 16 Saint Vincent and the Grenadines   23077           0   23077 &lt;NA&gt;     </span></span>
<span id="cb400-78"><a href="mod-r-transform.html#cb400-78"></a><span class="co">#&gt; 17 São Tomé and Príncipe              11750           0   11750 &lt;NA&gt;     </span></span>
<span id="cb400-79"><a href="mod-r-transform.html#cb400-79"></a><span class="co">#&gt; 18 Trinidad and Tobago                13027          11   13038 &lt;NA&gt;     </span></span>
<span id="cb400-80"><a href="mod-r-transform.html#cb400-80"></a><span class="co">#&gt; 19 Turks and Caicos Islands            2780           0    2780 &lt;NA&gt;     </span></span>
<span id="cb400-81"><a href="mod-r-transform.html#cb400-81"></a><span class="co">#&gt; 20 US Virgin Islands                    551           8     559 &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#TbjMaWatrpAKvvdnZ2HT">
Solution
</button>
<div id="Qve01IGpigNBDhGEa930" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="Qve01IGpigNBDhGEa930-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="Qve01IGpigNBDhGEa930-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="mod-r-transform.html#cb401-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb401-2"><a href="mod-r-transform.html#cb401-2"></a><span class="st">  </span><span class="kw">anti_join</span>(___)      <span class="co"># countries not belonging to a continent</span></span>
<span id="cb401-3"><a href="mod-r-transform.html#cb401-3"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb401-4"><a href="mod-r-transform.html#cb401-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb401-5"><a href="mod-r-transform.html#cb401-5"></a><span class="st">  </span><span class="kw">left_join</span>(___) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb401-6"><a href="mod-r-transform.html#cb401-6"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb401-7"><a href="mod-r-transform.html#cb401-7"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb401-8"><a href="mod-r-transform.html#cb401-8"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(___))   <span class="co"># same result - countries not belonging to a continent</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#Qve01IGpigNBDhGEa930">
Hint 2
</button>
<div id="on0aJbDw678IbCSSNz0r" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="on0aJbDw678IbCSSNz0r-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="on0aJbDw678IbCSSNz0r-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<p>
You could use <code>anti_join</code> to find missing values. Use <code>left_join</code> to join the datasets.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#on0aJbDw678IbCSSNz0r">
Hint 1
</button>
<ol style="list-style-type: decimal">
<li>Use a mutating join to add a continent column to the <code>fisheries</code> dataset. Are there some countries which do not belong to a continent?</li>
</ol>
<div id="5BRjB8DAqjZr9NJ1OhFe" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="5BRjB8DAqjZr9NJ1OhFe-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="5BRjB8DAqjZr9NJ1OhFe-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="mod-r-transform.html#cb402-1"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span></span>
<span id="cb402-2"><a href="mod-r-transform.html#cb402-2"></a><span class="st">  </span><span class="kw">filter</span>(total <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#5BRjB8DAqjZr9NJ1OhFe">
Solution
</button>
<div id="AlT3lsabQ3eVmXRpf37p" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="AlT3lsabQ3eVmXRpf37p-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="AlT3lsabQ3eVmXRpf37p-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="mod-r-transform.html#cb403-1"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span></span>
<span id="cb403-2"><a href="mod-r-transform.html#cb403-2"></a><span class="st">  </span><span class="kw">filter</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#AlT3lsabQ3eVmXRpf37p">
Hint
</button>
<ol start="2" style="list-style-type: decimal">
<li>Filter out countries whose total harvest was less than 100,000 tons.</li>
</ol>
<div id="OVKcZDdMRODFAQbPuHDY" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="OVKcZDdMRODFAQbPuHDY-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="OVKcZDdMRODFAQbPuHDY-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="mod-r-transform.html#cb404-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb404-2"><a href="mod-r-transform.html#cb404-2"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb404-3"><a href="mod-r-transform.html#cb404-3"></a><span class="co">#&gt;   country                          capture aquaculture   total continent</span></span>
<span id="cb404-4"><a href="mod-r-transform.html#cb404-4"></a><span class="co">#&gt;   &lt;chr&gt;                              &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    </span></span>
<span id="cb404-5"><a href="mod-r-transform.html#cb404-5"></a><span class="co">#&gt; 1 Democratic Republic of the Congo  237372        3161  240533 &lt;NA&gt;     </span></span>
<span id="cb404-6"><a href="mod-r-transform.html#cb404-6"></a><span class="co">#&gt; 2 Myanmar                          2072390     1017644 3090034 &lt;NA&gt;</span></span>
<span id="cb404-7"><a href="mod-r-transform.html#cb404-7"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span></span>
<span id="cb404-8"><a href="mod-r-transform.html#cb404-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">continent =</span> <span class="kw">case_when</span>(</span>
<span id="cb404-9"><a href="mod-r-transform.html#cb404-9"></a>    country <span class="op">==</span><span class="st"> &quot;Democratic Republic of the Congo&quot;</span> <span class="op">~</span><span class="st"> &quot;Africa&quot;</span>,</span>
<span id="cb404-10"><a href="mod-r-transform.html#cb404-10"></a>    country <span class="op">==</span><span class="st"> &quot;Hong Kong&quot;</span>                        <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb404-11"><a href="mod-r-transform.html#cb404-11"></a>    country <span class="op">==</span><span class="st"> &quot;Myanmar&quot;</span>                          <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb404-12"><a href="mod-r-transform.html#cb404-12"></a>    <span class="ot">TRUE</span>                                          <span class="op">~</span><span class="st"> </span>continent</span>
<span id="cb404-13"><a href="mod-r-transform.html#cb404-13"></a>    )</span>
<span id="cb404-14"><a href="mod-r-transform.html#cb404-14"></a>  )</span>
<span id="cb404-15"><a href="mod-r-transform.html#cb404-15"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb404-16"><a href="mod-r-transform.html#cb404-16"></a><span class="co">#&gt; # A tibble: 0 × 5</span></span>
<span id="cb404-17"><a href="mod-r-transform.html#cb404-17"></a><span class="co">#&gt; # … with 5 variables: country &lt;chr&gt;, capture &lt;dbl&gt;, aquaculture &lt;dbl&gt;, total &lt;dbl&gt;, continent &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#OVKcZDdMRODFAQbPuHDY">
Solution
</button>
<div id="LwdRH2XJToD5nAn2qotN" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="LwdRH2XJToD5nAn2qotN-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="LwdRH2XJToD5nAn2qotN-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="mod-r-transform.html#cb405-1"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span>
<span id="cb405-2"><a href="mod-r-transform.html#cb405-2"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span></span>
<span id="cb405-3"><a href="mod-r-transform.html#cb405-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">continent =</span> <span class="kw">case_when</span>(</span>
<span id="cb405-4"><a href="mod-r-transform.html#cb405-4"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Africa&quot;</span>,</span>
<span id="cb405-5"><a href="mod-r-transform.html#cb405-5"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb405-6"><a href="mod-r-transform.html#cb405-6"></a>    country <span class="op">==</span><span class="st"> </span>___ <span class="op">~</span><span class="st"> &quot;Asia&quot;</span>,</span>
<span id="cb405-7"><a href="mod-r-transform.html#cb405-7"></a>    <span class="ot">TRUE</span>           <span class="op">~</span><span class="st"> </span>continent</span>
<span id="cb405-8"><a href="mod-r-transform.html#cb405-8"></a>    )</span>
<span id="cb405-9"><a href="mod-r-transform.html#cb405-9"></a>  )</span>
<span id="cb405-10"><a href="mod-r-transform.html#cb405-10"></a>fisheries <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">is.na</span>(continent))</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#LwdRH2XJToD5nAn2qotN">
Hint
</button>
<ol start="3" style="list-style-type: decimal">
<li>If still any countries not belonging to a continent then add them to the closest continent.</li>
</ol>
<div id="IuJvbajOMQKhGqvS0wQp" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="IuJvbajOMQKhGqvS0wQp-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="IuJvbajOMQKhGqvS0wQp-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="mod-r-transform.html#cb406-1"></a>fisheries &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb406-2"><a href="mod-r-transform.html#cb406-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">aquaculture_perc =</span> aquaculture <span class="op">/</span><span class="st"> </span>total)</span></code></pre></div>
<p>
The percentage of fish harvest done using aquaculture.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#IuJvbajOMQKhGqvS0wQp">
Solution
</button>
<div id="VT83eN14pj2i0bDcYVFM" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="VT83eN14pj2i0bDcYVFM-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="VT83eN14pj2i0bDcYVFM-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="mod-r-transform.html#cb407-1"></a>fisheries &lt;-<span class="st"> </span>___ <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb407-2"><a href="mod-r-transform.html#cb407-2"></a><span class="st">  </span><span class="kw">mutate</span>(___)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#VT83eN14pj2i0bDcYVFM">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Add column <code>aquaculture_perc = aquaculture / total</code> and explain the variable.</li>
</ol>
<div id="HBd08VSWgzwxgjxCf6Uk" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="HBd08VSWgzwxgjxCf6Uk-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="HBd08VSWgzwxgjxCf6Uk-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="mod-r-transform.html#cb408-1"></a>fisheries <span class="op">%&gt;%</span><span class="st">                 </span></span>
<span id="cb408-2"><a href="mod-r-transform.html#cb408-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st">                      </span></span>
<span id="cb408-3"><a href="mod-r-transform.html#cb408-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_ap =</span> <span class="kw">mean</span>(aquaculture_perc))           </span>
<span id="cb408-4"><a href="mod-r-transform.html#cb408-4"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb408-5"><a href="mod-r-transform.html#cb408-5"></a><span class="co">#&gt;   continent mean_ap</span></span>
<span id="cb408-6"><a href="mod-r-transform.html#cb408-6"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb408-7"><a href="mod-r-transform.html#cb408-7"></a><span class="co">#&gt; 1 Africa     0.0943</span></span>
<span id="cb408-8"><a href="mod-r-transform.html#cb408-8"></a><span class="co">#&gt; 2 Americas   0.192 </span></span>
<span id="cb408-9"><a href="mod-r-transform.html#cb408-9"></a><span class="co">#&gt; 3 Asia       0.367 </span></span>
<span id="cb408-10"><a href="mod-r-transform.html#cb408-10"></a><span class="co">#&gt; 4 Europe     0.165 </span></span>
<span id="cb408-11"><a href="mod-r-transform.html#cb408-11"></a><span class="co">#&gt; 5 Oceania    0.150</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#HBd08VSWgzwxgjxCf6Uk">
Solution
</button>
<div id="096nNdlFNLhZ8IOWaJMv" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="096nNdlFNLhZ8IOWaJMv-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="096nNdlFNLhZ8IOWaJMv-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="mod-r-transform.html#cb409-1"></a>fisheries <span class="op">%&gt;%</span><span class="st">                  </span><span class="co"># start with the fisheries data frame</span></span>
<span id="cb409-2"><a href="mod-r-transform.html#cb409-2"></a><span class="st">  </span>___ <span class="op">%&gt;%</span><span class="st">                      </span><span class="co"># group by continent</span></span>
<span id="cb409-3"><a href="mod-r-transform.html#cb409-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">mean_ap =</span> ___)           <span class="co"># calculate mean aquaculture</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#096nNdlFNLhZ8IOWaJMv">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Calculate the mean aquaculture percentage (we’ll call it <code>mean_ap</code> for short) for continents in the fisheries data.</li>
</ol>
<div id="XaFOeMSATv1NFZ4e3IJR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="XaFOeMSATv1NFZ4e3IJR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="XaFOeMSATv1NFZ4e3IJR-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="mod-r-transform.html#cb410-1"></a>fisheries_summary_continent &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st">                 </span></span>
<span id="cb410-2"><a href="mod-r-transform.html#cb410-2"></a><span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span><span class="st">                      </span></span>
<span id="cb410-3"><a href="mod-r-transform.html#cb410-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_ap =</span> <span class="kw">mean</span>(aquaculture_perc), <span class="dt">min_ap =</span> <span class="kw">min</span>(aquaculture_perc), <span class="dt">max_ap =</span> <span class="kw">max</span>(aquaculture_perc)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb410-4"><a href="mod-r-transform.html#cb410-4"></a><span class="st">  </span><span class="kw">print</span>()</span>
<span id="cb410-5"><a href="mod-r-transform.html#cb410-5"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb410-6"><a href="mod-r-transform.html#cb410-6"></a><span class="co">#&gt;   continent mean_ap  min_ap max_ap</span></span>
<span id="cb410-7"><a href="mod-r-transform.html#cb410-7"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb410-8"><a href="mod-r-transform.html#cb410-8"></a><span class="co">#&gt; 1 Africa     0.0943 0        0.803</span></span>
<span id="cb410-9"><a href="mod-r-transform.html#cb410-9"></a><span class="co">#&gt; 2 Americas   0.192  0        0.529</span></span>
<span id="cb410-10"><a href="mod-r-transform.html#cb410-10"></a><span class="co">#&gt; 3 Asia       0.367  0        0.782</span></span>
<span id="cb410-11"><a href="mod-r-transform.html#cb410-11"></a><span class="co">#&gt; 4 Europe     0.165  0.00682  0.618</span></span>
<span id="cb410-12"><a href="mod-r-transform.html#cb410-12"></a><span class="co">#&gt; 5 Oceania    0.150  0.0197   0.357</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#XaFOeMSATv1NFZ4e3IJR">
Solution
</button>
<div id="RzbJrKftq5IWNqrgVn2G" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="RzbJrKftq5IWNqrgVn2G-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="RzbJrKftq5IWNqrgVn2G-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="mod-r-transform.html#cb411-1"></a>fisheries_summary_continent &lt;-<span class="st"> </span>fisheries <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># start with the fisheries data frame</span></span>
<span id="cb411-2"><a href="mod-r-transform.html#cb411-2"></a><span class="st">  </span>___ <span class="op">%&gt;%</span><span class="st">                                       </span><span class="co"># group by continent</span></span>
<span id="cb411-3"><a href="mod-r-transform.html#cb411-3"></a><span class="st">  </span><span class="kw">___</span>(<span class="dt">mean_ap =</span> ___, <span class="dt">min_ap =</span> ___, ___)         <span class="co"># calculate mean aquaculture</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#RzbJrKftq5IWNqrgVn2G">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li>Now expand your calculations to also calculate the minimum and maximum
aquaculture percentage for continents in the fisheries data and store the summary table in a data frame called <code>fisheries_summary_continent</code>.</li>
</ol>
<div id="CoqpG1dkVMJMMXePahtw" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="CoqpG1dkVMJMMXePahtw-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="CoqpG1dkVMJMMXePahtw-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="mod-r-transform.html#cb412-1"></a>fisheries_summary_continent <span class="op">%&gt;%</span><span class="st">      </span></span>
<span id="cb412-2"><a href="mod-r-transform.html#cb412-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean_ap))                             </span>
<span id="cb412-3"><a href="mod-r-transform.html#cb412-3"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb412-4"><a href="mod-r-transform.html#cb412-4"></a><span class="co">#&gt;   continent mean_ap  min_ap max_ap</span></span>
<span id="cb412-5"><a href="mod-r-transform.html#cb412-5"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb412-6"><a href="mod-r-transform.html#cb412-6"></a><span class="co">#&gt; 1 Asia       0.367  0        0.782</span></span>
<span id="cb412-7"><a href="mod-r-transform.html#cb412-7"></a><span class="co">#&gt; 2 Americas   0.192  0        0.529</span></span>
<span id="cb412-8"><a href="mod-r-transform.html#cb412-8"></a><span class="co">#&gt; 3 Europe     0.165  0.00682  0.618</span></span>
<span id="cb412-9"><a href="mod-r-transform.html#cb412-9"></a><span class="co">#&gt; 4 Oceania    0.150  0.0197   0.357</span></span>
<span id="cb412-10"><a href="mod-r-transform.html#cb412-10"></a><span class="co">#&gt; 5 Africa     0.0943 0        0.803</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#CoqpG1dkVMJMMXePahtw">
Solution
</button>
<div id="QdB4ZolZzzJANXohtiFJ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="QdB4ZolZzzJANXohtiFJ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="QdB4ZolZzzJANXohtiFJ-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="mod-r-transform.html#cb413-1"></a>fisheries_summary_continent <span class="op">%&gt;%</span><span class="st">      </span><span class="co"># start with the fisheries_summary_continent data frame</span></span>
<span id="cb413-2"><a href="mod-r-transform.html#cb413-2"></a><span class="st">  </span>___                                <span class="co"># order in descending order of mean_ap</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#QdB4ZolZzzJANXohtiFJ">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>Take the <code>fisheries_summary_continent</code> data frame and order the results in descending
order of mean aquaculture percentage.</li>
</ol>
<div id="kCHtA8jXXhelHzx1kML1" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="kCHtA8jXXhelHzx1kML1-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="kCHtA8jXXhelHzx1kML1-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="mod-r-transform.html#cb414-1"></a><span class="kw">ggplot</span>(fisheries_summary_continent, </span>
<span id="cb414-2"><a href="mod-r-transform.html#cb414-2"></a>       <span class="kw">aes</span>(<span class="dt">y =</span> <span class="kw">reorder</span>(continent, mean_ap), <span class="dt">x =</span> mean_ap)) <span class="op">+</span></span>
<span id="cb414-3"><a href="mod-r-transform.html#cb414-3"></a><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></span>
<span id="cb414-4"><a href="mod-r-transform.html#cb414-4"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb414-5"><a href="mod-r-transform.html#cb414-5"></a>    <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb414-6"><a href="mod-r-transform.html#cb414-6"></a>    <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb414-7"><a href="mod-r-transform.html#cb414-7"></a>    <span class="dt">title =</span> <span class="st">&quot;Average share of aquaculture by continent&quot;</span>,</span>
<span id="cb414-8"><a href="mod-r-transform.html#cb414-8"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;out of total fisheries harvest&quot;</span>,</span>
<span id="cb414-9"><a href="mod-r-transform.html#cb414-9"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: bit.ly/2VrawTt&quot;</span></span>
<span id="cb414-10"><a href="mod-r-transform.html#cb414-10"></a>  ) </span></code></pre></div>
<img src="TFA_files/figure-html/unnamed-chunk-391-1.png" width="672" style="display: block; margin: auto;" />
<p>
An example plot
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#kCHtA8jXXhelHzx1kML1">
Solution
</button>
<ol start="8" style="list-style-type: decimal">
<li>If you already have read the module about visualizations, then try to make some relevant plots.</li>
</ol>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="mod-r-io.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mod-r-plot.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bss-osca/tfa/edit/master/book/07-03_r-transform.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
