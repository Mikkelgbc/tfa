<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 5 Functions | Tools for Analytics (TFA)</title>
  <meta name="description" content="Course notes for the ‘Tools for Analytics’ course (R part)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 5 Functions | Tools for Analytics (TFA)" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bss-osca.github.io/tfa/" />
  <meta property="og:image" content="https://bss-osca.github.io/tfa/assets/logo.png" />
  <meta property="og:description" content="Course notes for the ‘Tools for Analytics’ course (R part)" />
  <meta name="github-repo" content="bss-osca/tfa" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 5 Functions | Tools for Analytics (TFA)" />
  
  <meta name="twitter:description" content="Course notes for the ‘Tools for Analytics’ course (R part)" />
  <meta name="twitter:image" content="https://bss-osca.github.io/tfa/assets/logo.png" />

<meta name="author" content="Lars Relund Nielsen" />


<meta name="date" content="2020-11-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="sec-loops.html"/>
<link rel="next" href="sec-tidy-intro.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<link href="libs/font-awesome-5.3.1/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-5.3.1/css/v4-shims.min.css" rel="stylesheet" />
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<html>
<head>
<script>
  $(document).ready(function() {

  // Section anchors
  $('.section h1, .section h2, .section h3, .section h4, .section h5').each(function() {
    anchor = '#' + $(this).parent().attr('id');
    $(this).addClass("hasAnchor").prepend('<a href="' + anchor + '" class="anchor"></a>');
  });
});
</script>
<script src="https://hypothes.is/embed.js" async></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
</html>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="img/logo.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-this-book-is-organized"><i class="fa fa-check"></i><b>1.1</b> How this book is organized</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#ack"><i class="fa fa-check"></i><b>1.2</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Getting started</b></span></li>
<li class="chapter" data-level="2" data-path="sec-install.html"><a href="sec-install.html"><i class="fa fa-check"></i><b>2</b> Install R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sec-install.html"><a href="sec-install.html#lo-install"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="sec-install.html"><a href="sec-install.html#install-r"><i class="fa fa-check"></i><b>2.2</b> Install R and RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="sec-install.html"><a href="sec-install.html#test-your-installation"><i class="fa fa-check"></i><b>2.3</b> Test your installation</a></li>
<li class="chapter" data-level="2.4" data-path="sec-install.html"><a href="sec-install.html#add-on-packages"><i class="fa fa-check"></i><b>2.4</b> Add-on packages</a></li>
<li class="chapter" data-level="2.5" data-path="sec-install.html"><a href="sec-install.html#lp-install"><i class="fa fa-check"></i><b>2.5</b> Different learning paths</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sec-r-basics.html"><a href="sec-r-basics.html"><i class="fa fa-check"></i><b>3</b> R basics and workflows</a>
<ul>
<li class="chapter" data-level="3.1" data-path="sec-r-basics.html"><a href="sec-r-basics.html#lo-r-basics"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="sec-r-basics.html"><a href="sec-r-basics.html#working-with-r-at-the-command-line-in-rstudio"><i class="fa fa-check"></i><b>3.2</b> Working with R at the command line in RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="sec-r-basics.html"><a href="sec-r-basics.html#your-first-datacamp-course"><i class="fa fa-check"></i><b>3.3</b> Your first DataCamp course</a></li>
<li class="chapter" data-level="3.4" data-path="sec-r-basics.html"><a href="sec-r-basics.html#pipes"><i class="fa fa-check"></i><b>3.4</b> Pipes</a></li>
<li class="chapter" data-level="3.5" data-path="sec-r-basics.html"><a href="sec-r-basics.html#rprojs"><i class="fa fa-check"></i><b>3.5</b> RStudio projects</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="sec-r-basics.html"><a href="sec-r-basics.html#storing-your-code-in-a-script-file"><i class="fa fa-check"></i><b>3.5.1</b> Storing your code in a script file</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="sec-r-basics.html"><a href="sec-r-basics.html#global-options"><i class="fa fa-check"></i><b>3.6</b> Global options</a></li>
<li class="chapter" data-level="3.7" data-path="sec-r-basics.html"><a href="sec-r-basics.html#working-directory"><i class="fa fa-check"></i><b>3.7</b> Working directory</a></li>
<li class="chapter" data-level="3.8" data-path="sec-r-basics.html"><a href="sec-r-basics.html#lp-r-basics"><i class="fa fa-check"></i><b>3.8</b> Different learning paths</a></li>
<li class="chapter" data-level="3.9" data-path="sec-r-basics.html"><a href="sec-r-basics.html#rc-r-basics"><i class="fa fa-check"></i><b>3.9</b> Recap</a></li>
<li class="chapter" data-level="3.10" data-path="sec-r-basics.html"><a href="sec-r-basics.html#ex-r-basics"><i class="fa fa-check"></i><b>3.10</b> Exercises</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-group-work"><i class="fa fa-check"></i><b>3.10.1</b> Exercise (group work)</a></li>
<li class="chapter" data-level="3.10.2" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-install-packages"><i class="fa fa-check"></i><b>3.10.2</b> Exercise (install packages)</a></li>
<li class="chapter" data-level="3.10.3" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-piping"><i class="fa fa-check"></i><b>3.10.3</b> Exercise (piping)</a></li>
<li class="chapter" data-level="3.10.4" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-working-dir"><i class="fa fa-check"></i><b>3.10.4</b> Exercise (working dir)</a></li>
<li class="chapter" data-level="3.10.5" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-vectors"><i class="fa fa-check"></i><b>3.10.5</b> Exercise (vectors)</a></li>
<li class="chapter" data-level="3.10.6" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-matrices"><i class="fa fa-check"></i><b>3.10.6</b> Exercise (matrices)</a></li>
<li class="chapter" data-level="3.10.7" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-data-frames"><i class="fa fa-check"></i><b>3.10.7</b> Exercise (data frames)</a></li>
<li class="chapter" data-level="3.10.8" data-path="sec-r-basics.html"><a href="sec-r-basics.html#exercise-lists"><i class="fa fa-check"></i><b>3.10.8</b> Exercise (lists)</a></li>
<li class="chapter" data-level="3.10.9" data-path="sec-r-basics.html"><a href="sec-r-basics.html#ex-strings"><i class="fa fa-check"></i><b>3.10.9</b> Exercise (string management)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Programming in R</b></span></li>
<li class="chapter" data-level="4" data-path="sec-loops.html"><a href="sec-loops.html"><i class="fa fa-check"></i><b>4</b> Loops and conditionals</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sec-loops.html"><a href="sec-loops.html#lo-loops"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="sec-loops.html"><a href="sec-loops.html#conditionals-and-control-flow"><i class="fa fa-check"></i><b>4.2</b> Conditionals and control flow</a></li>
<li class="chapter" data-level="4.3" data-path="sec-loops.html"><a href="sec-loops.html#loops"><i class="fa fa-check"></i><b>4.3</b> Loops</a></li>
<li class="chapter" data-level="4.4" data-path="sec-loops.html"><a href="sec-loops.html#lp-loops"><i class="fa fa-check"></i><b>4.4</b> Different learning paths</a></li>
<li class="chapter" data-level="4.5" data-path="sec-loops.html"><a href="sec-loops.html#rc-loops"><i class="fa fa-check"></i><b>4.5</b> Recap</a></li>
<li class="chapter" data-level="4.6" data-path="sec-loops.html"><a href="sec-loops.html#ex-loops"><i class="fa fa-check"></i><b>4.6</b> Exercises</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="sec-loops.html"><a href="sec-loops.html#exercise-conditional-expressions"><i class="fa fa-check"></i><b>4.6.1</b> Exercise (conditional expressions)</a></li>
<li class="chapter" data-level="4.6.2" data-path="sec-loops.html"><a href="sec-loops.html#exercise-loops"><i class="fa fa-check"></i><b>4.6.2</b> Exercise (loops)</a></li>
<li class="chapter" data-level="4.6.3" data-path="sec-loops.html"><a href="sec-loops.html#ex-dist"><i class="fa fa-check"></i><b>4.6.3</b> Exercise (calculating distances)</a></li>
<li class="chapter" data-level="4.6.4" data-path="sec-loops.html"><a href="sec-loops.html#exercise-expand_grid"><i class="fa fa-check"></i><b>4.6.4</b> Exercise (<code>expand_grid</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sec-functions.html"><a href="sec-functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sec-functions.html"><a href="sec-functions.html#lo-functions"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="sec-functions.html"><a href="sec-functions.html#datacamp-course"><i class="fa fa-check"></i><b>5.2</b> DataCamp course</a></li>
<li class="chapter" data-level="5.3" data-path="sec-functions.html"><a href="sec-functions.html#functions-returning-multiple-objects"><i class="fa fa-check"></i><b>5.3</b> Functions returning multiple objects</a></li>
<li class="chapter" data-level="5.4" data-path="sec-functions.html"><a href="sec-functions.html#the-...-argument"><i class="fa fa-check"></i><b>5.4</b> The <code>...</code> argument</a></li>
<li class="chapter" data-level="5.5" data-path="sec-functions.html"><a href="sec-functions.html#documenting-your-functions"><i class="fa fa-check"></i><b>5.5</b> Documenting your functions</a></li>
<li class="chapter" data-level="5.6" data-path="sec-functions.html"><a href="sec-functions.html#lp-functions"><i class="fa fa-check"></i><b>5.6</b> Different learning paths</a></li>
<li class="chapter" data-level="5.7" data-path="sec-functions.html"><a href="sec-functions.html#rc-functions"><i class="fa fa-check"></i><b>5.7</b> Recap</a></li>
<li class="chapter" data-level="5.8" data-path="sec-functions.html"><a href="sec-functions.html#ex-functions"><i class="fa fa-check"></i><b>5.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="sec-functions.html"><a href="sec-functions.html#exercise-defining-functions"><i class="fa fa-check"></i><b>5.8.1</b> Exercise (defining functions)</a></li>
<li class="chapter" data-level="5.8.2" data-path="sec-functions.html"><a href="sec-functions.html#exercise-scope"><i class="fa fa-check"></i><b>5.8.2</b> Exercise (scope)</a></li>
<li class="chapter" data-level="5.8.3" data-path="sec-functions.html"><a href="sec-functions.html#exercise-job-sequencing"><i class="fa fa-check"></i><b>5.8.3</b> Exercise (job sequencing)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III IO, tidy and transform</b></span></li>
<li class="chapter" data-level="6" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html"><i class="fa fa-check"></i><b>6</b> Introduction to tidyverse and R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#lo-tidy-intro"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#the-tidyverse-package"><i class="fa fa-check"></i><b>6.2</b> The tidyverse package</a></li>
<li class="chapter" data-level="6.3" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#writing-reproducible-reports"><i class="fa fa-check"></i><b>6.3</b> Writing reproducible reports</a></li>
<li class="chapter" data-level="6.4" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#tibbles"><i class="fa fa-check"></i><b>6.4</b> Tibbles</a></li>
<li class="chapter" data-level="6.5" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#lp-tidy-intro"><i class="fa fa-check"></i><b>6.5</b> Different learning paths</a></li>
<li class="chapter" data-level="6.6" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#rc-tidy-intro"><i class="fa fa-check"></i><b>6.6</b> Recap</a></li>
<li class="chapter" data-level="6.7" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#ex-tidy-intro"><i class="fa fa-check"></i><b>6.7</b> Exercises</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#exercise-your-first-r-markdown-exercise"><i class="fa fa-check"></i><b>6.7.1</b> Exercise (your first R Markdown exercise)</a></li>
<li class="chapter" data-level="6.7.2" data-path="sec-tidy-intro.html"><a href="sec-tidy-intro.html#exercise-tibbles"><i class="fa fa-check"></i><b>6.7.2</b> Exercise (tibbles)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sec-io.html"><a href="sec-io.html"><i class="fa fa-check"></i><b>7</b> Importing and exporting data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sec-io.html"><a href="sec-io.html#lo-io"><i class="fa fa-check"></i><b>7.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="sec-io.html"><a href="sec-io.html#csv-files"><i class="fa fa-check"></i><b>7.2</b> CSV files</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="sec-io.html"><a href="sec-io.html#reading-a-csv-file"><i class="fa fa-check"></i><b>7.2.1</b> Reading a CSV file</a></li>
<li class="chapter" data-level="7.2.2" data-path="sec-io.html"><a href="sec-io.html#writing-to-csv-files"><i class="fa fa-check"></i><b>7.2.2</b> Writing to CSV files</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="sec-io.html"><a href="sec-io.html#excel"><i class="fa fa-check"></i><b>7.3</b> Excel</a></li>
<li class="chapter" data-level="7.4" data-path="sec-io.html"><a href="sec-io.html#google-sheets"><i class="fa fa-check"></i><b>7.4</b> Google Sheets</a></li>
<li class="chapter" data-level="7.5" data-path="sec-io.html"><a href="sec-io.html#text-files"><i class="fa fa-check"></i><b>7.5</b> Text files</a></li>
<li class="chapter" data-level="7.6" data-path="sec-io.html"><a href="sec-io.html#rs-native-binary-format"><i class="fa fa-check"></i><b>7.6</b> R’s native binary format</a></li>
<li class="chapter" data-level="7.7" data-path="sec-io.html"><a href="sec-io.html#json"><i class="fa fa-check"></i><b>7.7</b> Json</a></li>
<li class="chapter" data-level="7.8" data-path="sec-io.html"><a href="sec-io.html#lp-io"><i class="fa fa-check"></i><b>7.8</b> Different learning paths</a></li>
<li class="chapter" data-level="7.9" data-path="sec-io.html"><a href="sec-io.html#rc-io"><i class="fa fa-check"></i><b>7.9</b> Recap</a></li>
<li class="chapter" data-level="7.10" data-path="sec-io.html"><a href="sec-io.html#ex-io"><i class="fa fa-check"></i><b>7.10</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="sec-io.html"><a href="sec-io.html#exercise-statistikbanken"><i class="fa fa-check"></i><b>7.10.1</b> Exercise (Statistikbanken)</a></li>
<li class="chapter" data-level="7.10.2" data-path="sec-io.html"><a href="sec-io.html#exercise-tuples-in-opl"><i class="fa fa-check"></i><b>7.10.2</b> Exercise (tuples in OPL)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sec-transform.html"><a href="sec-transform.html"><i class="fa fa-check"></i><b>8</b> Transforming data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sec-transform.html"><a href="sec-transform.html#lo-transform"><i class="fa fa-check"></i><b>8.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="8.2" data-path="sec-transform.html"><a href="sec-transform.html#working-with-data-in-the-tidyverse"><i class="fa fa-check"></i><b>8.2</b> Working with data in the tidyverse</a></li>
<li class="chapter" data-level="8.3" data-path="sec-transform.html"><a href="sec-transform.html#lp-transform"><i class="fa fa-check"></i><b>8.3</b> Different learning paths</a></li>
<li class="chapter" data-level="8.4" data-path="sec-transform.html"><a href="sec-transform.html#rc-transform"><i class="fa fa-check"></i><b>8.4</b> Recap</a></li>
<li class="chapter" data-level="8.5" data-path="sec-transform.html"><a href="sec-transform.html#ex-transform"><i class="fa fa-check"></i><b>8.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="sec-transform.html"><a href="sec-transform.html#ex-gapminder1"><i class="fa fa-check"></i><b>8.5.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="8.5.2" data-path="sec-transform.html"><a href="sec-transform.html#ex-babynames1"><i class="fa fa-check"></i><b>8.5.2</b> Exercise (babynames)</a></li>
<li class="chapter" data-level="8.5.3" data-path="sec-transform.html"><a href="sec-transform.html#ex-profit1"><i class="fa fa-check"></i><b>8.5.3</b> Exercise (profit)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Visualization</b></span></li>
<li class="chapter" data-level="9" data-path="sec-plot.html"><a href="sec-plot.html"><i class="fa fa-check"></i><b>9</b> Data visualization using ggplot</a>
<ul>
<li class="chapter" data-level="9.1" data-path="sec-plot.html"><a href="sec-plot.html#lo-plot"><i class="fa fa-check"></i><b>9.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="9.2" data-path="sec-plot.html"><a href="sec-plot.html#introduction-to-data-visualization"><i class="fa fa-check"></i><b>9.2</b> Introduction to data visualization</a></li>
<li class="chapter" data-level="9.3" data-path="sec-plot.html"><a href="sec-plot.html#combining-plots-into-one-using-patchwork"><i class="fa fa-check"></i><b>9.3</b> Combining plots into one using <em>patchwork</em></a></li>
<li class="chapter" data-level="9.4" data-path="sec-plot.html"><a href="sec-plot.html#saving-graphics"><i class="fa fa-check"></i><b>9.4</b> Saving graphics</a></li>
<li class="chapter" data-level="9.5" data-path="sec-plot.html"><a href="sec-plot.html#lp-r-plot"><i class="fa fa-check"></i><b>9.5</b> Different learning paths</a></li>
<li class="chapter" data-level="9.6" data-path="sec-plot.html"><a href="sec-plot.html#rc-r-plot"><i class="fa fa-check"></i><b>9.6</b> Recap</a></li>
<li class="chapter" data-level="9.7" data-path="sec-plot.html"><a href="sec-plot.html#ex-r-plot"><i class="fa fa-check"></i><b>9.7</b> Exercises</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="sec-plot.html"><a href="sec-plot.html#ex-gapminder2"><i class="fa fa-check"></i><b>9.7.1</b> Exercise (gapminder)</a></li>
<li class="chapter" data-level="9.7.2" data-path="sec-plot.html"><a href="sec-plot.html#ex-profit2"><i class="fa fa-check"></i><b>9.7.2</b> Exercise (profit)</a></li>
<li class="chapter" data-level="9.7.3" data-path="sec-plot.html"><a href="sec-plot.html#ex-covid19"><i class="fa fa-check"></i><b>9.7.3</b> Exercise (COVID-19)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V R project in groups</b></span></li>
<li class="chapter" data-level="10" data-path="sec-project.html"><a href="sec-project.html"><i class="fa fa-check"></i><b>10</b> Mandatory R project</a>
<ul>
<li class="chapter" data-level="10.1" data-path="sec-project.html"><a href="sec-project.html#lo-project"><i class="fa fa-check"></i><b>10.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="10.2" data-path="sec-project.html"><a href="sec-project.html#r-project"><i class="fa fa-check"></i><b>10.2</b> R project</a></li>
</ul></li>
<li class="part"><span><b>VI Extra</b></span></li>
<li class="chapter" data-level="11" data-path="sec-maps.html"><a href="sec-maps.html"><i class="fa fa-check"></i><b>11</b> Spartial data and maps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="sec-maps.html"><a href="sec-maps.html#lo-maps"><i class="fa fa-check"></i><b>11.1</b> Learning outcomes</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="sec-r-excel.html"><a href="sec-r-excel.html"><i class="fa fa-check"></i><b>12</b> Using R in Excel and Excel in R</a></li>
<li class="chapter" data-level="13" data-path="sec-opl.html"><a href="sec-opl.html"><i class="fa fa-check"></i><b>13</b> Run an OPL model from R</a></li>
<li class="chapter" data-level="14" data-path="sec-simulation.html"><a href="sec-simulation.html"><i class="fa fa-check"></i><b>14</b> Simulation in R</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="groups.html"><a href="groups.html"><i class="fa fa-check"></i><b>A</b> Working in groups</a>
<ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#r-project-structure"><i class="fa fa-check"></i>R project structure</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#using-git"><i class="fa fa-check"></i>Using Git together with GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#register-a-free-github-account"><i class="fa fa-check"></i>Register a free GitHub account</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#install-git"><i class="fa fa-check"></i>Install Git</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#check-your-installation"><i class="fa fa-check"></i>Check your installation</a></li>
<li class="chapter" data-level="" data-path="groups.html"><a href="groups.html#setup-projects-using-git-and-github"><i class="fa fa-check"></i>Setup projects using Git and GitHub</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="annotate.html"><a href="annotate.html"><i class="fa fa-check"></i><b>B</b> Annotate the course notes</a></li>
<li class="chapter" data-level="C" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>C</b> Getting help</a>
<ul>
<li class="chapter" data-level="" data-path="help.html"><a href="help.html#study-café"><i class="fa fa-check"></i>Study café</a>
<ul>
<li class="chapter" data-level="" data-path="help.html"><a href="help.html#need-help---ask-a-question"><i class="fa fa-check"></i>Need help - ask a question</a></li>
<li class="chapter" data-level="" data-path="help.html"><a href="help.html#current-queue"><i class="fa fa-check"></i>Current queue</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="slides.html"><a href="slides.html"><i class="fa fa-check"></i><b>D</b> Slides</a></li>
<li class="chapter" data-level="E" data-path="lg-course.html"><a href="lg-course.html"><i class="fa fa-check"></i><b>E</b> Learning goals</a></li>
<li class="chapter" data-level="F" data-path="sec-ba.html"><a href="sec-ba.html"><i class="fa fa-check"></i><b>F</b> Business Analytics</a></li>
<li class="chapter" data-level="G" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i><b>G</b> Colophon</a></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#ack">
    License: CC BY-NC-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-nc fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tools for Analytics (TFA)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sec-functions" class="section level1" number="5">
<h1><span class="header-section-number">Module 5</span> Functions</h1>
<blockquote>
<p>To understand computations in R, two slogans are helpful:</p>
<p>Everything that exists is an object.</p>
<p>Everything that happens is a function call.</p>
<p>John Chambers</p>
</blockquote>
<p>Writing functions is a core activity of an R programmer. It represents the key step of the transition from a user to a programmer. Functions have inputs and outputs. Functions (and control structures) are what makes your code more dynamic.</p>
<p>Functions are often used to encapsulate a sequence of expressions that needs to be executed numerous times, perhaps under slightly different conditions. In programming, functional programming is a programming paradigm, a style of how code is written. Rather than repeating the code, functions and control structures allow one to build code in blocks. As a result, your code becomes more structured, more readable and much easier to maintain and debug (find errors).</p>
<div id="lo-functions" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Learning outcomes</h2>
<p>By the end of this module, you are expected to be able to:</p>
<ul>
<li>Call a function.</li>
<li>Formulate a function with different input arguments.</li>
<li>Describe why functions are important in R.</li>
<li>Set defaults for input arguments.</li>
<li>Return values from functions.</li>
<li>Explain how variable scope and precedence works.</li>
<li>Document functions.</li>
</ul>
<p>The learning outcomes relate to the <a href="lg-course.html#lg-course">overall learning goals</a> number 2, 3, 4 and 10 of the course.</p>
<!-- SOLO increasing: identify · memorize · name · do simple procedure · collect data · -->
<!-- enumerate · describe · interpret · formulate · list · paraphrase · combine · do -->
<!-- algorithms · compare · contrast · explain causes · analyze · relate · derive · -->
<!-- evaluate · apply · argue · theorize · generalize · hypothesis · solve · reflect -->
</div>
<div id="datacamp-course" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> DataCamp course</h2>
<p>An excellent introduction to functions is given in <a href="https://campus.datacamp.com/courses/intermediate-r/chapter-3-functions">Chapter 3</a> in the DataCamp course <a href="https://learn.datacamp.com/courses/intermediate-r">Intermediate R</a>. Please complete the chapter before continuing.</p>
</div>
<div id="functions-returning-multiple-objects" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Functions returning multiple objects</h2>
<p>Functions in R only return a single object. However, note that the object may be a list. That is, if you want to return multiple arguments, store them in a list. A simple example:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="sec-functions.html#cb147-1" aria-hidden="true"></a>test &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb147-2"><a href="sec-functions.html#cb147-2" aria-hidden="true"></a>  <span class="co"># the function does some stuff and calculate some results</span></span>
<span id="cb147-3"><a href="sec-functions.html#cb147-3" aria-hidden="true"></a>  res1 &lt;-<span class="st"> </span><span class="dv">45</span></span>
<span id="cb147-4"><a href="sec-functions.html#cb147-4" aria-hidden="true"></a>  res2 &lt;-<span class="st"> &quot;Success&quot;</span></span>
<span id="cb147-5"><a href="sec-functions.html#cb147-5" aria-hidden="true"></a>  res3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb147-6"><a href="sec-functions.html#cb147-6" aria-hidden="true"></a>  res4 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">cost =</span> <span class="dv">23</span>, <span class="dt">profit =</span> <span class="dv">200</span>)</span>
<span id="cb147-7"><a href="sec-functions.html#cb147-7" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">days =</span> res1, <span class="dt">run =</span> res2, <span class="dt">id =</span> res3, <span class="dt">money =</span> res4)</span>
<span id="cb147-8"><a href="sec-functions.html#cb147-8" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb147-9"><a href="sec-functions.html#cb147-9" aria-hidden="true"></a>}</span>
<span id="cb147-10"><a href="sec-functions.html#cb147-10" aria-hidden="true"></a><span class="kw">test</span>()</span>
<span id="cb147-11"><a href="sec-functions.html#cb147-11" aria-hidden="true"></a><span class="co">#&gt; $days</span></span>
<span id="cb147-12"><a href="sec-functions.html#cb147-12" aria-hidden="true"></a><span class="co">#&gt; [1] 45</span></span>
<span id="cb147-13"><a href="sec-functions.html#cb147-13" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb147-14"><a href="sec-functions.html#cb147-14" aria-hidden="true"></a><span class="co">#&gt; $run</span></span>
<span id="cb147-15"><a href="sec-functions.html#cb147-15" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;Success&quot;</span></span>
<span id="cb147-16"><a href="sec-functions.html#cb147-16" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb147-17"><a href="sec-functions.html#cb147-17" aria-hidden="true"></a><span class="co">#&gt; $id</span></span>
<span id="cb147-18"><a href="sec-functions.html#cb147-18" aria-hidden="true"></a><span class="co">#&gt; [1] 4 7 9</span></span>
<span id="cb147-19"><a href="sec-functions.html#cb147-19" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb147-20"><a href="sec-functions.html#cb147-20" aria-hidden="true"></a><span class="co">#&gt; $money</span></span>
<span id="cb147-21"><a href="sec-functions.html#cb147-21" aria-hidden="true"></a><span class="co">#&gt; $money$cost</span></span>
<span id="cb147-22"><a href="sec-functions.html#cb147-22" aria-hidden="true"></a><span class="co">#&gt; [1] 23</span></span>
<span id="cb147-23"><a href="sec-functions.html#cb147-23" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb147-24"><a href="sec-functions.html#cb147-24" aria-hidden="true"></a><span class="co">#&gt; $money$profit</span></span>
<span id="cb147-25"><a href="sec-functions.html#cb147-25" aria-hidden="true"></a><span class="co">#&gt; [1] 200</span></span></code></pre></div>
</div>
<div id="the-...-argument" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> The <code>...</code> argument</h2>
<p>The special argument <code>...</code> indicates a variable number of arguments and is usually used to pass arguments to nested functions used inside the function. Consider example:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="sec-functions.html#cb148-1" aria-hidden="true"></a>my_name &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">first =</span> <span class="st">&quot;Lars&quot;</span>, <span class="dt">last =</span> <span class="st">&quot;Nielsen&quot;</span>) {</span>
<span id="cb148-2"><a href="sec-functions.html#cb148-2" aria-hidden="true"></a>  <span class="kw">str_c</span>(first, last, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb148-3"><a href="sec-functions.html#cb148-3" aria-hidden="true"></a>}</span>
<span id="cb148-4"><a href="sec-functions.html#cb148-4" aria-hidden="true"></a><span class="kw">my_name</span>()</span>
<span id="cb148-5"><a href="sec-functions.html#cb148-5" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;Lars Nielsen&quot;</span></span>
<span id="cb148-6"><a href="sec-functions.html#cb148-6" aria-hidden="true"></a></span>
<span id="cb148-7"><a href="sec-functions.html#cb148-7" aria-hidden="true"></a>cite_text &lt;-<span class="st"> </span><span class="cf">function</span>(text, ...) {</span>
<span id="cb148-8"><a href="sec-functions.html#cb148-8" aria-hidden="true"></a>  <span class="kw">str_c</span>(text, <span class="st">&#39;, -&#39;</span>, <span class="kw">my_name</span>(...))</span>
<span id="cb148-9"><a href="sec-functions.html#cb148-9" aria-hidden="true"></a>}</span>
<span id="cb148-10"><a href="sec-functions.html#cb148-10" aria-hidden="true"></a><span class="kw">cite_text</span>(<span class="st">&quot;Learning by doing is the best way to learn how to program!&quot;</span>)</span>
<span id="cb148-11"><a href="sec-functions.html#cb148-11" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;Learning by doing is the best way to learn how to program!, -Lars Nielsen&quot;</span></span>
<span id="cb148-12"><a href="sec-functions.html#cb148-12" aria-hidden="true"></a><span class="kw">cite_text</span>(<span class="st">&quot;Learning by doing is the best way to learn how to program!&quot;</span>, <span class="dt">last =</span> <span class="st">&quot;Relund&quot;</span>)</span>
<span id="cb148-13"><a href="sec-functions.html#cb148-13" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;Learning by doing is the best way to learn how to program!, -Lars Relund&quot;</span></span>
<span id="cb148-14"><a href="sec-functions.html#cb148-14" aria-hidden="true"></a><span class="kw">cite_text</span>(<span class="st">&quot;To be or not to be&quot;</span>, <span class="dt">first =</span> <span class="st">&quot;Shakespeare&quot;</span>, <span class="dt">last =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb148-15"><a href="sec-functions.html#cb148-15" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;To be or not to be, -Shakespeare &quot;</span></span></code></pre></div>
<p>Note in the first function run, we use the defaults in <code>my_name</code>. In the second run, we change the default last name and in the last run, we change both arguments.</p>
<p>If you need to retrieve/capture the content of the <code>...</code> argument, put it in a list:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="sec-functions.html#cb149-1" aria-hidden="true"></a>test &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</span>
<span id="cb149-2"><a href="sec-functions.html#cb149-2" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">list</span>(...))</span>
<span id="cb149-3"><a href="sec-functions.html#cb149-3" aria-hidden="true"></a>}</span>
<span id="cb149-4"><a href="sec-functions.html#cb149-4" aria-hidden="true"></a><span class="kw">test</span>(<span class="dt">x =</span> <span class="dv">4</span>, <span class="dt">y =</span> <span class="st">&quot;hey&quot;</span>, <span class="dt">z =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb149-5"><a href="sec-functions.html#cb149-5" aria-hidden="true"></a><span class="co">#&gt; $x</span></span>
<span id="cb149-6"><a href="sec-functions.html#cb149-6" aria-hidden="true"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb149-7"><a href="sec-functions.html#cb149-7" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb149-8"><a href="sec-functions.html#cb149-8" aria-hidden="true"></a><span class="co">#&gt; $y</span></span>
<span id="cb149-9"><a href="sec-functions.html#cb149-9" aria-hidden="true"></a><span class="co">#&gt; [1] &quot;hey&quot;</span></span>
<span id="cb149-10"><a href="sec-functions.html#cb149-10" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb149-11"><a href="sec-functions.html#cb149-11" aria-hidden="true"></a><span class="co">#&gt; $z</span></span>
<span id="cb149-12"><a href="sec-functions.html#cb149-12" aria-hidden="true"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span></code></pre></div>
</div>
<div id="documenting-your-functions" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Documenting your functions</h2>
<p>It is always a good idea to document your functions. This is in fact always done in functions of a package. For instance try <code>?mutate</code> and see the documentation in the <strong>Help</strong> tab.</p>
<p>Assume that you have written a function</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="sec-functions.html#cb150-1" aria-hidden="true"></a>subtract &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb150-2"><a href="sec-functions.html#cb150-2" aria-hidden="true"></a>  <span class="kw">return</span>(x<span class="op">-</span>y)</span>
<span id="cb150-3"><a href="sec-functions.html#cb150-3" aria-hidden="true"></a>}</span></code></pre></div>
<p>In RStudio you can insert a <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">Roxygen</a> documentation skeleton by having the cursor at the first line of the function and go to <strong>Code &gt; Insert Roxygen Skeleton</strong> (Ctrl+Alt+Shift+R):</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="sec-functions.html#cb151-1" aria-hidden="true"></a><span class="co">#&#39; Title</span></span>
<span id="cb151-2"><a href="sec-functions.html#cb151-2" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb151-3"><a href="sec-functions.html#cb151-3" aria-hidden="true"></a><span class="co">#&#39; @param x </span></span>
<span id="cb151-4"><a href="sec-functions.html#cb151-4" aria-hidden="true"></a><span class="co">#&#39; @param y </span></span>
<span id="cb151-5"><a href="sec-functions.html#cb151-5" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb151-6"><a href="sec-functions.html#cb151-6" aria-hidden="true"></a><span class="co">#&#39; @return</span></span>
<span id="cb151-7"><a href="sec-functions.html#cb151-7" aria-hidden="true"></a><span class="co">#&#39; @export</span></span>
<span id="cb151-8"><a href="sec-functions.html#cb151-8" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb151-9"><a href="sec-functions.html#cb151-9" aria-hidden="true"></a><span class="co">#&#39; @examples</span></span>
<span id="cb151-10"><a href="sec-functions.html#cb151-10" aria-hidden="true"></a>subtract &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb151-11"><a href="sec-functions.html#cb151-11" aria-hidden="true"></a>  <span class="kw">return</span>(x<span class="op">-</span>y)</span>
<span id="cb151-12"><a href="sec-functions.html#cb151-12" aria-hidden="true"></a>}</span></code></pre></div>
<p>You now can modify your documentation to</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="sec-functions.html#cb152-1" aria-hidden="true"></a><span class="co">#&#39; Subtract two vectors</span></span>
<span id="cb152-2"><a href="sec-functions.html#cb152-2" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb152-3"><a href="sec-functions.html#cb152-3" aria-hidden="true"></a><span class="co">#&#39; @param x First vector.</span></span>
<span id="cb152-4"><a href="sec-functions.html#cb152-4" aria-hidden="true"></a><span class="co">#&#39; @param y Vector to be subtracted.</span></span>
<span id="cb152-5"><a href="sec-functions.html#cb152-5" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb152-6"><a href="sec-functions.html#cb152-6" aria-hidden="true"></a><span class="co">#&#39; @return The difference.</span></span>
<span id="cb152-7"><a href="sec-functions.html#cb152-7" aria-hidden="true"></a><span class="co">#&#39; @export</span></span>
<span id="cb152-8"><a href="sec-functions.html#cb152-8" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb152-9"><a href="sec-functions.html#cb152-9" aria-hidden="true"></a><span class="co">#&#39; @examples</span></span>
<span id="cb152-10"><a href="sec-functions.html#cb152-10" aria-hidden="true"></a><span class="co">#&#39; subtract(x = c(5,5), y = c(2,3))</span></span>
<span id="cb152-11"><a href="sec-functions.html#cb152-11" aria-hidden="true"></a>subtract &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb152-12"><a href="sec-functions.html#cb152-12" aria-hidden="true"></a>  <span class="kw">return</span>(x<span class="op">-</span>y)</span>
<span id="cb152-13"><a href="sec-functions.html#cb152-13" aria-hidden="true"></a>}</span></code></pre></div>
<p>Note</p>
<ul>
<li>Parameters/function arguments are documented using the <code>@param</code> tag.</li>
<li>Return value is documented using the <code>@return</code> tag.</li>
<li>Under the <code>@examples</code> tag you can insert some examples.</li>
<li>Ignore the <code>@export</code> tag. This is used if you include your function in your own package. Package development is beyond the scope of this course. If you are interested, have a look at the book <span class="citation">Wickham (<a href="#ref-r-pkgs" role="doc-biblioref">2015</a>)</span>.</li>
</ul>
<p>A list of further tags can be seen in the vignette <a href="https://roxygen2.r-lib.org/articles/rd.html">Rd (documentation) tags</a>.</p>
</div>
<div id="lp-functions" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Different learning paths</h2>
<p>We are all different and you may like different learning styles compared to others. You may prefer a different learning path than suggested. Here is a list of possible different learning paths that may be useful for you.</p>
<ul>
<li>For a more detailed interactive tutorial about functions see the DataCamp course <a href="https://learn.datacamp.com/courses/introduction-to-writing-functions-in-r">Introduction to Writing Functions in R</a>.</li>
<li>Hefin Rhys has a video about <a href="https://www.youtube.com/watch?v=ffPeac3BigM">Writing functions in R</a> giving examples in RStudio.</li>
<li>An introduction to functions is also given in <a href="https://bookdown.org/rdpeng/rprogdatascience/functions.html">Chapter 14</a> of <span class="citation">Peng (<a href="#ref-rdpeng" role="doc-biblioref">2018</a>)</span>.</li>
<li>A detailed tutorial on functions is given in Chapters <a href="https://stat545.com/functions-part1.html">18</a>, <a href="https://stat545.com/functions-part2.html">19</a> and <a href="https://stat545.com/functions-part3.html">20</a> of <span class="citation">Bryan (<a href="#ref-stat545" role="doc-biblioref">2017</a>)</span>.</li>
</ul>
</div>
<div id="rc-functions" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Recap</h2>
<p>Writing functions is a core activity of an R programmer. It represents the key step of the transition from a user to a programmer. Functions have inputs and outputs. Functions (and control structures) are what makes your code more dynamic.</p>
<p>Functions are often used to encapsulate a sequence of expressions that need to be executed numerous times, perhaps under slightly different conditions. In programming, functional programming is a programming paradigm, a style of how code is written. Rather than repeating the code, functions and control structures allow one to build code in blocks. As a result, your code becomes more structured, more readable and much easier to maintain and debug (find errors).</p>
<p>Functions can be defined using the <code>function()</code> directive.</p>
<p>The named arguments (input values) can have default values. Moreover, R passes arguments by value. That is, an R function cannot change the variable that you input to that function.</p>
<p>A function can be called using its name and its arguments can be specified by name or by position in the argument list.</p>
<p>Functions always return the last expression evaluated in the function body or when you use the <code>return</code> flow control statement (good coding practice).</p>
<p>Scoping refers to the rules R use to look up the value of variables. A function will first look inside the body of the function to identify all the variables. If all variables exist, no further search is required. Otherwise, R will look one level up to see if the variable exists.</p>
<p>Functions can be assigned to R objects just like any other R object.</p>
<p>Document your functions using the Roxygen skeleton!</p>
</div>
<div id="ex-functions" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Exercises</h2>
<p>Below you will find a set of exercises. Always have a look at the exercises before you meet in your study group and try to solve them yourself. Are you stuck, see the <a href="help.html#help">help page</a>. Solutions to each exercise can be seen by pressing the button at each question. Beware, you will not learn by giving up to early. Put some effort into finding a solution!</p>
<div id="exercise-defining-functions" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Exercise (defining functions)</h3>
<p><em>Solve this exercise using a script file.</em></p>
<div id="qDQQ1NQBh0jQj02PdDph" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="qDQQ1NQBh0jQj02PdDph-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="qDQQ1NQBh0jQj02PdDph-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="sec-functions.html#cb153-1" aria-hidden="true"></a><span class="co">#&#39; Computes the sum of the integers from 1 to n (inclusive).</span></span>
<span id="cb153-2"><a href="sec-functions.html#cb153-2" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb153-3"><a href="sec-functions.html#cb153-3" aria-hidden="true"></a><span class="co">#&#39; @param n Max value in the sum.</span></span>
<span id="cb153-4"><a href="sec-functions.html#cb153-4" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb153-5"><a href="sec-functions.html#cb153-5" aria-hidden="true"></a><span class="co">#&#39; @return Sum of the integers from 1 to n.</span></span>
<span id="cb153-6"><a href="sec-functions.html#cb153-6" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb153-7"><a href="sec-functions.html#cb153-7" aria-hidden="true"></a><span class="co">#&#39; @examples</span></span>
<span id="cb153-8"><a href="sec-functions.html#cb153-8" aria-hidden="true"></a><span class="co">#&#39; sum_n(30)</span></span>
<span id="cb153-9"><a href="sec-functions.html#cb153-9" aria-hidden="true"></a>sum_n &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb153-10"><a href="sec-functions.html#cb153-10" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">sum</span>(<span class="dv">1</span><span class="op">:</span>n))</span>
<span id="cb153-11"><a href="sec-functions.html#cb153-11" aria-hidden="true"></a>}</span>
<span id="cb153-12"><a href="sec-functions.html#cb153-12" aria-hidden="true"></a><span class="kw">sum_n</span>(<span class="dv">5000</span>)</span>
<span id="cb153-13"><a href="sec-functions.html#cb153-13" aria-hidden="true"></a><span class="co">#&gt; [1] 12502500</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#qDQQ1NQBh0jQj02PdDph">
Solution
</button>
<div id="tPPFNEvT2lKYfH3Qbyy5" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="tPPFNEvT2lKYfH3Qbyy5-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="tPPFNEvT2lKYfH3Qbyy5-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="sec-functions.html#cb154-1" aria-hidden="true"></a><span class="co">#&#39; Computes the sum of the integers from 1 to n (inclusive).</span></span>
<span id="cb154-2"><a href="sec-functions.html#cb154-2" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb154-3"><a href="sec-functions.html#cb154-3" aria-hidden="true"></a><span class="co">#&#39; @param n Max value in the sum.</span></span>
<span id="cb154-4"><a href="sec-functions.html#cb154-4" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb154-5"><a href="sec-functions.html#cb154-5" aria-hidden="true"></a><span class="co">#&#39; @return Sum of the integers from 1 to n.</span></span>
<span id="cb154-6"><a href="sec-functions.html#cb154-6" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb154-7"><a href="sec-functions.html#cb154-7" aria-hidden="true"></a><span class="co">#&#39; @examples</span></span>
<span id="cb154-8"><a href="sec-functions.html#cb154-8" aria-hidden="true"></a><span class="co">#&#39; sum_n(30)</span></span>
<span id="cb154-9"><a href="sec-functions.html#cb154-9" aria-hidden="true"></a>sum_n &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb154-10"><a href="sec-functions.html#cb154-10" aria-hidden="true"></a>  <span class="kw">return</span>(___)</span>
<span id="cb154-11"><a href="sec-functions.html#cb154-11" aria-hidden="true"></a>}</span>
<span id="cb154-12"><a href="sec-functions.html#cb154-12" aria-hidden="true"></a><span class="kw">sum_n</span>(<span class="dv">5000</span>)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#tPPFNEvT2lKYfH3Qbyy5">
Hint
</button>
<ol style="list-style-type: decimal">
<li>Create a function <code>sum_n</code> that for any given value, say <span class="math inline">\(n\)</span>, computes the sum of the integers from 1 to n (inclusive). Use the function to determine the sum of integers from 1 to 5000. Document your function too.</li>
</ol>
<div id="UOOJgHOznJoDVA7t5rH1" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="UOOJgHOznJoDVA7t5rH1-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="UOOJgHOznJoDVA7t5rH1-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="sec-functions.html#cb155-1" aria-hidden="true"></a><span class="co">#&#39; Computes the sum S_n = 1^2 + 2^2 + 3^2 + ... + n^2</span></span>
<span id="cb155-2"><a href="sec-functions.html#cb155-2" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb155-3"><a href="sec-functions.html#cb155-3" aria-hidden="true"></a><span class="co">#&#39; @param n Max input in sum.</span></span>
<span id="cb155-4"><a href="sec-functions.html#cb155-4" aria-hidden="true"></a><span class="co">#&#39;</span></span>
<span id="cb155-5"><a href="sec-functions.html#cb155-5" aria-hidden="true"></a><span class="co">#&#39; @return S_n</span></span>
<span id="cb155-6"><a href="sec-functions.html#cb155-6" aria-hidden="true"></a>compute_s_n &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb155-7"><a href="sec-functions.html#cb155-7" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">sum</span>((<span class="dv">1</span><span class="op">:</span>n)<span class="op">^</span><span class="dv">2</span>))</span>
<span id="cb155-8"><a href="sec-functions.html#cb155-8" aria-hidden="true"></a>}</span>
<span id="cb155-9"><a href="sec-functions.html#cb155-9" aria-hidden="true"></a><span class="kw">compute_s_n</span>(<span class="dv">10</span>)</span>
<span id="cb155-10"><a href="sec-functions.html#cb155-10" aria-hidden="true"></a><span class="co">#&gt; [1] 385</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#UOOJgHOznJoDVA7t5rH1">
Solution
</button>
<ol start="2" style="list-style-type: decimal">
<li>Write a function <code>compute_s_n</code> that for any given <span class="math inline">\(n\)</span> computes the sum <span class="math inline">\(S_n = 1^2 + 2^2 + 3^2 + \dots + n^2\)</span>. Report the value of the sum when <span class="math inline">\(n=10\)</span>.</li>
</ol>
<div id="mM1k1QFUe5B6ocdOQLns" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="mM1k1QFUe5B6ocdOQLns-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="mM1k1QFUe5B6ocdOQLns-title">
Solution 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="sec-functions.html#cb156-1" aria-hidden="true"></a>s_n &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&#39;numeric&#39;</span>, <span class="dv">25</span>)</span>
<span id="cb156-2"><a href="sec-functions.html#cb156-2" aria-hidden="true"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>) {</span>
<span id="cb156-3"><a href="sec-functions.html#cb156-3" aria-hidden="true"></a>  s_n[n] &lt;-<span class="st"> </span><span class="kw">compute_s_n</span>(n)</span>
<span id="cb156-4"><a href="sec-functions.html#cb156-4" aria-hidden="true"></a>}</span>
<span id="cb156-5"><a href="sec-functions.html#cb156-5" aria-hidden="true"></a>s_n</span>
<span id="cb156-6"><a href="sec-functions.html#cb156-6" aria-hidden="true"></a><span class="co">#&gt;  [1]    1    5   14   30   55   91  140  204  285  385  506  650  819 1015 1240 1496 1785 2109 2470</span></span>
<span id="cb156-7"><a href="sec-functions.html#cb156-7" aria-hidden="true"></a><span class="co">#&gt; [20] 2870 3311 3795 4324 4900 5525</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#mM1k1QFUe5B6ocdOQLns">
Solution 1
</button>
<div id="eaK4aBjId7Fon2s7bTYj" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="eaK4aBjId7Fon2s7bTYj-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="eaK4aBjId7Fon2s7bTYj-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="sec-functions.html#cb157-1" aria-hidden="true"></a>s_n &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&#39;numeric&#39;</span>, <span class="dv">25</span>)</span>
<span id="cb157-2"><a href="sec-functions.html#cb157-2" aria-hidden="true"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>) {</span>
<span id="cb157-3"><a href="sec-functions.html#cb157-3" aria-hidden="true"></a>  s_n[n] &lt;-<span class="st"> </span>___</span>
<span id="cb157-4"><a href="sec-functions.html#cb157-4" aria-hidden="true"></a>}</span>
<span id="cb157-5"><a href="sec-functions.html#cb157-5" aria-hidden="true"></a>s_n</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#eaK4aBjId7Fon2s7bTYj">
Hint 1
</button>
<div id="TzzObLRE013lTqaBbtnV" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="TzzObLRE013lTqaBbtnV-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="TzzObLRE013lTqaBbtnV-title">
Solution 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="sec-functions.html#cb158-1" aria-hidden="true"></a>compute_s_n_alt &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb158-2"><a href="sec-functions.html#cb158-2" aria-hidden="true"></a>  <span class="kw">return</span>(n<span class="op">*</span>(n<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>(<span class="dv">2</span><span class="op">*</span>n<span class="op">+</span><span class="dv">1</span>)<span class="op">/</span><span class="dv">6</span>)</span>
<span id="cb158-3"><a href="sec-functions.html#cb158-3" aria-hidden="true"></a>}</span>
<span id="cb158-4"><a href="sec-functions.html#cb158-4" aria-hidden="true"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>) {</span>
<span id="cb158-5"><a href="sec-functions.html#cb158-5" aria-hidden="true"></a>  <span class="cf">if</span> (s_n[n] <span class="op">!=</span><span class="st"> </span><span class="kw">compute_s_n_alt</span>(n)) {</span>
<span id="cb158-6"><a href="sec-functions.html#cb158-6" aria-hidden="true"></a>    <span class="kw">cat</span>(<span class="st">&#39;Error!&#39;</span>)</span>
<span id="cb158-7"><a href="sec-functions.html#cb158-7" aria-hidden="true"></a>    <span class="cf">break</span></span>
<span id="cb158-8"><a href="sec-functions.html#cb158-8" aria-hidden="true"></a>  }</span>
<span id="cb158-9"><a href="sec-functions.html#cb158-9" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#TzzObLRE013lTqaBbtnV">
Solution 2
</button>
<div id="QettBF7n6plwSwmsO6Hi" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="QettBF7n6plwSwmsO6Hi-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="QettBF7n6plwSwmsO6Hi-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="sec-functions.html#cb159-1" aria-hidden="true"></a>compute_s_n_alt &lt;-<span class="st"> </span><span class="cf">function</span>(n) {</span>
<span id="cb159-2"><a href="sec-functions.html#cb159-2" aria-hidden="true"></a>  <span class="kw">return</span>(n<span class="op">*</span>(n<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>___)</span>
<span id="cb159-3"><a href="sec-functions.html#cb159-3" aria-hidden="true"></a>}</span>
<span id="cb159-4"><a href="sec-functions.html#cb159-4" aria-hidden="true"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">25</span>) {</span>
<span id="cb159-5"><a href="sec-functions.html#cb159-5" aria-hidden="true"></a>  <span class="cf">if</span> (s_n[n] <span class="op">!=</span><span class="st"> </span>___) {</span>
<span id="cb159-6"><a href="sec-functions.html#cb159-6" aria-hidden="true"></a>    <span class="kw">cat</span>(<span class="st">&#39;Error!&#39;</span>)</span>
<span id="cb159-7"><a href="sec-functions.html#cb159-7" aria-hidden="true"></a>    <span class="cf">break</span></span>
<span id="cb159-8"><a href="sec-functions.html#cb159-8" aria-hidden="true"></a>  }</span>
<span id="cb159-9"><a href="sec-functions.html#cb159-9" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#QettBF7n6plwSwmsO6Hi">
Hint 2
</button>
<ol start="3" style="list-style-type: decimal">
<li>Define an empty numerical vector <code>s_n</code> of size 25 using <code>s_n &lt;- vector("numeric", 25)</code> and store in the results of <span class="math inline">\(S_1, S_2, \dots S_{25}\)</span> using a for-loop.
Confirm that the formula for the sum is <span class="math inline">\(S_n= n(n+1)(2n+1)/6\)</span> for <span class="math inline">\(n = 1, \ldots, 25\)</span>.</li>
</ol>
<div id="MN1W7s4mq2HdmOvOQHbY" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="MN1W7s4mq2HdmOvOQHbY-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="MN1W7s4mq2HdmOvOQHbY-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="sec-functions.html#cb160-1" aria-hidden="true"></a>biggest &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</span>
<span id="cb160-2"><a href="sec-functions.html#cb160-2" aria-hidden="true"></a>  <span class="cf">if</span> (a <span class="op">&gt;</span><span class="st"> </span>b) <span class="kw">return</span>(<span class="dv">1</span>)</span>
<span id="cb160-3"><a href="sec-functions.html#cb160-3" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="dv">0</span>)</span>
<span id="cb160-4"><a href="sec-functions.html#cb160-4" aria-hidden="true"></a>}</span>
<span id="cb160-5"><a href="sec-functions.html#cb160-5" aria-hidden="true"></a><span class="kw">biggest</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb160-6"><a href="sec-functions.html#cb160-6" aria-hidden="true"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb160-7"><a href="sec-functions.html#cb160-7" aria-hidden="true"></a><span class="kw">biggest</span>(<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb160-8"><a href="sec-functions.html#cb160-8" aria-hidden="true"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb160-9"><a href="sec-functions.html#cb160-9" aria-hidden="true"></a><span class="kw">biggest</span>(<span class="dv">8</span>,<span class="dv">2</span>)</span>
<span id="cb160-10"><a href="sec-functions.html#cb160-10" aria-hidden="true"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#MN1W7s4mq2HdmOvOQHbY">
Solution
</button>
<div id="2kCeWdcHDXzKK2WbkxU5" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2kCeWdcHDXzKK2WbkxU5-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2kCeWdcHDXzKK2WbkxU5-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="sec-functions.html#cb161-1" aria-hidden="true"></a>biggest &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</span>
<span id="cb161-2"><a href="sec-functions.html#cb161-2" aria-hidden="true"></a>  <span class="cf">if</span> (a <span class="op">&gt;</span><span class="st"> </span>b) ___</span>
<span id="cb161-3"><a href="sec-functions.html#cb161-3" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="dv">0</span>)</span>
<span id="cb161-4"><a href="sec-functions.html#cb161-4" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2kCeWdcHDXzKK2WbkxU5">
Hint
</button>
<ol start="4" style="list-style-type: decimal">
<li>Write a function <code>biggest</code> which takes two integers as arguments. Let the
function return 1 if the first argument is larger than the second and return 0
otherwise.</li>
</ol>
<div id="GsqqweUBi5Swqi7azcG3" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="GsqqweUBi5Swqi7azcG3-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="GsqqweUBi5Swqi7azcG3-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="sec-functions.html#cb162-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total) {</span>
<span id="cb162-2"><a href="sec-functions.html#cb162-2" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="fl">0.1</span> <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb162-3"><a href="sec-functions.html#cb162-3" aria-hidden="true"></a>}</span>
<span id="cb162-4"><a href="sec-functions.html#cb162-4" aria-hidden="true"></a><span class="kw">shipping_cost</span>(<span class="dv">450</span>)</span>
<span id="cb162-5"><a href="sec-functions.html#cb162-5" aria-hidden="true"></a><span class="co">#&gt; [1] 45</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#GsqqweUBi5Swqi7azcG3">
Solution
</button>
<div id="4sMwYVw6oNYJ5mBeQCzR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="4sMwYVw6oNYJ5mBeQCzR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="4sMwYVw6oNYJ5mBeQCzR-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="sec-functions.html#cb163-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total) {</span>
<span id="cb163-2"><a href="sec-functions.html#cb163-2" aria-hidden="true"></a>  <span class="kw">return</span>(___)</span>
<span id="cb163-3"><a href="sec-functions.html#cb163-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#4sMwYVw6oNYJ5mBeQCzR">
Hint
</button>
<ol start="5" style="list-style-type: decimal">
<li>Write a function that returns the shipping cost as 10% of the total cost of an
order (input argument).</li>
</ol>
<div id="1wsbIoxq7yY080omvMyp" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="1wsbIoxq7yY080omvMyp-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="1wsbIoxq7yY080omvMyp-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="sec-functions.html#cb164-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, <span class="dt">pct =</span> <span class="fl">0.1</span>) {</span>
<span id="cb164-2"><a href="sec-functions.html#cb164-2" aria-hidden="true"></a>  <span class="kw">return</span>(pct <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb164-3"><a href="sec-functions.html#cb164-3" aria-hidden="true"></a>}</span>
<span id="cb164-4"><a href="sec-functions.html#cb164-4" aria-hidden="true"></a><span class="kw">shipping_cost</span>(<span class="dv">450</span>)</span>
<span id="cb164-5"><a href="sec-functions.html#cb164-5" aria-hidden="true"></a><span class="co">#&gt; [1] 45</span></span>
<span id="cb164-6"><a href="sec-functions.html#cb164-6" aria-hidden="true"></a><span class="kw">shipping_cost</span>(<span class="dv">450</span>, <span class="dt">pct =</span> <span class="fl">0.2</span>)</span>
<span id="cb164-7"><a href="sec-functions.html#cb164-7" aria-hidden="true"></a><span class="co">#&gt; [1] 90</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#1wsbIoxq7yY080omvMyp">
Solution
</button>
<div id="mcxUtORwg1AUQztLhufd" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="mcxUtORwg1AUQztLhufd-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="mcxUtORwg1AUQztLhufd-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="sec-functions.html#cb165-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, <span class="dt">pct =</span> ___) {</span>
<span id="cb165-2"><a href="sec-functions.html#cb165-2" aria-hidden="true"></a>  ___</span>
<span id="cb165-3"><a href="sec-functions.html#cb165-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#mcxUtORwg1AUQztLhufd">
Hint
</button>
<ol start="6" style="list-style-type: decimal">
<li>Given Question 5, rewrite the function so the percentage is an input argument with a default of 10%.</li>
</ol>
<div id="9bGSDFeT9Gic84xMgqE2" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="9bGSDFeT9Gic84xMgqE2-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="9bGSDFeT9Gic84xMgqE2-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="sec-functions.html#cb166-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total) {</span>
<span id="cb166-2"><a href="sec-functions.html#cb166-2" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="fl">0.1</span> <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb166-3"><a href="sec-functions.html#cb166-3" aria-hidden="true"></a>}</span>
<span id="cb166-4"><a href="sec-functions.html#cb166-4" aria-hidden="true"></a></span>
<span id="cb166-5"><a href="sec-functions.html#cb166-5" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total) {</span>
<span id="cb166-6"><a href="sec-functions.html#cb166-6" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(total) <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span>)</span>
<span id="cb166-7"><a href="sec-functions.html#cb166-7" aria-hidden="true"></a>}</span>
<span id="cb166-8"><a href="sec-functions.html#cb166-8" aria-hidden="true"></a><span class="kw">gasoline_cost</span>(<span class="dv">450</span>)</span>
<span id="cb166-9"><a href="sec-functions.html#cb166-9" aria-hidden="true"></a><span class="co">#&gt; [1] 22.5</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#9bGSDFeT9Gic84xMgqE2">
Solution
</button>
<div id="apMKdxaV9qDfc3warWGb" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="apMKdxaV9qDfc3warWGb-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="apMKdxaV9qDfc3warWGb-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="sec-functions.html#cb167-1" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total) {</span>
<span id="cb167-2"><a href="sec-functions.html#cb167-2" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(___) <span class="op">*</span><span class="st"> </span>___)</span>
<span id="cb167-3"><a href="sec-functions.html#cb167-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#apMKdxaV9qDfc3warWGb">
Hint
</button>
<ol start="7" style="list-style-type: decimal">
<li>Given Question 5, the shipping cost can be split into parts. One part is gasoline which is 50% of the shipping cost. Write a function that has total cost as input argument and calculate the gasoline cost and use the function defined in Question 5 inside it.</li>
</ol>
<div id="ngTScRb0zP7rXs2silrV" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="ngTScRb0zP7rXs2silrV-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="ngTScRb0zP7rXs2silrV-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="sec-functions.html#cb168-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, <span class="dt">pct =</span> <span class="fl">0.1</span>) {</span>
<span id="cb168-2"><a href="sec-functions.html#cb168-2" aria-hidden="true"></a>  <span class="kw">return</span>(pct <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb168-3"><a href="sec-functions.html#cb168-3" aria-hidden="true"></a>}</span>
<span id="cb168-4"><a href="sec-functions.html#cb168-4" aria-hidden="true"></a></span>
<span id="cb168-5"><a href="sec-functions.html#cb168-5" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb168-6"><a href="sec-functions.html#cb168-6" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(total, ...) <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span>)</span>
<span id="cb168-7"><a href="sec-functions.html#cb168-7" aria-hidden="true"></a>}</span>
<span id="cb168-8"><a href="sec-functions.html#cb168-8" aria-hidden="true"></a><span class="kw">gasoline_cost</span>(<span class="dv">450</span>)</span>
<span id="cb168-9"><a href="sec-functions.html#cb168-9" aria-hidden="true"></a><span class="co">#&gt; [1] 22.5</span></span>
<span id="cb168-10"><a href="sec-functions.html#cb168-10" aria-hidden="true"></a><span class="kw">gasoline_cost</span>(<span class="dv">450</span>, <span class="dt">pct =</span> <span class="fl">0.2</span>)</span>
<span id="cb168-11"><a href="sec-functions.html#cb168-11" aria-hidden="true"></a><span class="co">#&gt; [1] 45</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#ngTScRb0zP7rXs2silrV">
Solution
</button>
<div id="vC1JeJwmLTPmU0dEkIuq" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="vC1JeJwmLTPmU0dEkIuq-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="vC1JeJwmLTPmU0dEkIuq-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="sec-functions.html#cb169-1" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb169-2"><a href="sec-functions.html#cb169-2" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(___) <span class="op">*</span><span class="st"> </span>___)</span>
<span id="cb169-3"><a href="sec-functions.html#cb169-3" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#vC1JeJwmLTPmU0dEkIuq">
Hint
</button>
<ol start="8" style="list-style-type: decimal">
<li>Given Question 6, the shipping cost can be split into parts. One part is gasoline which is 50% of the shipping cost. Write a function that has total cost a input argument and calculate the gasoline cost and use the function defined in Question 6 inside it. Hint: Use the <code>...</code> argument to pass arguments to <code>shipping_cost</code>.</li>
</ol>
<div id="S4ZZzKfwZg5rVDPsUfHo" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="S4ZZzKfwZg5rVDPsUfHo-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="S4ZZzKfwZg5rVDPsUfHo-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="sec-functions.html#cb170-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, <span class="dt">pct =</span> <span class="fl">0.1</span>) {</span>
<span id="cb170-2"><a href="sec-functions.html#cb170-2" aria-hidden="true"></a>  <span class="kw">return</span>(pct <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb170-3"><a href="sec-functions.html#cb170-3" aria-hidden="true"></a>}</span>
<span id="cb170-4"><a href="sec-functions.html#cb170-4" aria-hidden="true"></a></span>
<span id="cb170-5"><a href="sec-functions.html#cb170-5" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb170-6"><a href="sec-functions.html#cb170-6" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(total, ...) <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span>)</span>
<span id="cb170-7"><a href="sec-functions.html#cb170-7" aria-hidden="true"></a>}</span>
<span id="cb170-8"><a href="sec-functions.html#cb170-8" aria-hidden="true"></a></span>
<span id="cb170-9"><a href="sec-functions.html#cb170-9" aria-hidden="true"></a>costs &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb170-10"><a href="sec-functions.html#cb170-10" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">total =</span> total, <span class="dt">shipping =</span> <span class="kw">shipping_cost</span>(total, ...), <span class="dt">gasoline =</span> <span class="kw">gasoline_cost</span>(total, ...))</span>
<span id="cb170-11"><a href="sec-functions.html#cb170-11" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb170-12"><a href="sec-functions.html#cb170-12" aria-hidden="true"></a>}</span>
<span id="cb170-13"><a href="sec-functions.html#cb170-13" aria-hidden="true"></a><span class="kw">costs</span>(<span class="dv">450</span>)</span>
<span id="cb170-14"><a href="sec-functions.html#cb170-14" aria-hidden="true"></a><span class="co">#&gt; $total</span></span>
<span id="cb170-15"><a href="sec-functions.html#cb170-15" aria-hidden="true"></a><span class="co">#&gt; [1] 450</span></span>
<span id="cb170-16"><a href="sec-functions.html#cb170-16" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb170-17"><a href="sec-functions.html#cb170-17" aria-hidden="true"></a><span class="co">#&gt; $shipping</span></span>
<span id="cb170-18"><a href="sec-functions.html#cb170-18" aria-hidden="true"></a><span class="co">#&gt; [1] 45</span></span>
<span id="cb170-19"><a href="sec-functions.html#cb170-19" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb170-20"><a href="sec-functions.html#cb170-20" aria-hidden="true"></a><span class="co">#&gt; $gasoline</span></span>
<span id="cb170-21"><a href="sec-functions.html#cb170-21" aria-hidden="true"></a><span class="co">#&gt; [1] 22.5</span></span>
<span id="cb170-22"><a href="sec-functions.html#cb170-22" aria-hidden="true"></a><span class="kw">costs</span>(<span class="dv">450</span>, <span class="dt">pct =</span> <span class="fl">0.15</span>)</span>
<span id="cb170-23"><a href="sec-functions.html#cb170-23" aria-hidden="true"></a><span class="co">#&gt; $total</span></span>
<span id="cb170-24"><a href="sec-functions.html#cb170-24" aria-hidden="true"></a><span class="co">#&gt; [1] 450</span></span>
<span id="cb170-25"><a href="sec-functions.html#cb170-25" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb170-26"><a href="sec-functions.html#cb170-26" aria-hidden="true"></a><span class="co">#&gt; $shipping</span></span>
<span id="cb170-27"><a href="sec-functions.html#cb170-27" aria-hidden="true"></a><span class="co">#&gt; [1] 67.5</span></span>
<span id="cb170-28"><a href="sec-functions.html#cb170-28" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb170-29"><a href="sec-functions.html#cb170-29" aria-hidden="true"></a><span class="co">#&gt; $gasoline</span></span>
<span id="cb170-30"><a href="sec-functions.html#cb170-30" aria-hidden="true"></a><span class="co">#&gt; [1] 33.8</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#S4ZZzKfwZg5rVDPsUfHo">
Solution
</button>
<div id="FMEwP8uLq8MF2mCOKbXz" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="FMEwP8uLq8MF2mCOKbXz-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="FMEwP8uLq8MF2mCOKbXz-title">
Hint
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="sec-functions.html#cb171-1" aria-hidden="true"></a>shipping_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, <span class="dt">pct =</span> <span class="fl">0.1</span>) {</span>
<span id="cb171-2"><a href="sec-functions.html#cb171-2" aria-hidden="true"></a>  <span class="kw">return</span>(pct <span class="op">*</span><span class="st"> </span>total)</span>
<span id="cb171-3"><a href="sec-functions.html#cb171-3" aria-hidden="true"></a>}</span>
<span id="cb171-4"><a href="sec-functions.html#cb171-4" aria-hidden="true"></a></span>
<span id="cb171-5"><a href="sec-functions.html#cb171-5" aria-hidden="true"></a>gasoline_cost &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb171-6"><a href="sec-functions.html#cb171-6" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">shipping_cost</span>(total, ...) <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span>)</span>
<span id="cb171-7"><a href="sec-functions.html#cb171-7" aria-hidden="true"></a>}</span>
<span id="cb171-8"><a href="sec-functions.html#cb171-8" aria-hidden="true"></a></span>
<span id="cb171-9"><a href="sec-functions.html#cb171-9" aria-hidden="true"></a>costs &lt;-<span class="st"> </span><span class="cf">function</span>(total, ...) {</span>
<span id="cb171-10"><a href="sec-functions.html#cb171-10" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">total =</span> ___, <span class="dt">shipping =</span> ___, <span class="dt">gasoline =</span> ___)</span>
<span id="cb171-11"><a href="sec-functions.html#cb171-11" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb171-12"><a href="sec-functions.html#cb171-12" aria-hidden="true"></a>}</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#FMEwP8uLq8MF2mCOKbXz">
Hint
</button>
<ol start="9" style="list-style-type: decimal">
<li>Given Question 8, write a function <code>costs</code> that, given total cost, returns the total cost, shipping cost and gasoline cost.</li>
</ol>
</div>
<div id="exercise-scope" class="section level3" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Exercise (scope)</h3>
<div id="FjyYOp6XRG9sYYajdc3Z" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="FjyYOp6XRG9sYYajdc3Z-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="FjyYOp6XRG9sYYajdc3Z-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
That value is still 3 since <code>x</code> defined inside the function is a local variable.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#FjyYOp6XRG9sYYajdc3Z">
Solution
</button>
<ol style="list-style-type: decimal">
<li>After running the code below, what is the value of variable <code>x</code>?</li>
</ol>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="sec-functions.html#cb172-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb172-2"><a href="sec-functions.html#cb172-2" aria-hidden="true"></a>my_func &lt;-<span class="st"> </span><span class="cf">function</span>(y){</span>
<span id="cb172-3"><a href="sec-functions.html#cb172-3" aria-hidden="true"></a>  x &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb172-4"><a href="sec-functions.html#cb172-4" aria-hidden="true"></a>  <span class="kw">return</span>(y <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb172-5"><a href="sec-functions.html#cb172-5" aria-hidden="true"></a>}</span>
<span id="cb172-6"><a href="sec-functions.html#cb172-6" aria-hidden="true"></a><span class="kw">my_func</span>(<span class="dv">7</span>)</span></code></pre></div>
<div id="acc54gp9mUzUYNW4XxWR" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="acc54gp9mUzUYNW4XxWR-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="acc54gp9mUzUYNW4XxWR-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
The code runs. But it is not good coding practice to call global variables inside a function (<code>x</code>). Instead <code>x</code> should have been an argument to the function.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#acc54gp9mUzUYNW4XxWR">
Solution
</button>
<ol start="2" style="list-style-type: decimal">
<li>Is there any problems with the following code?</li>
</ol>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="sec-functions.html#cb173-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb173-2"><a href="sec-functions.html#cb173-2" aria-hidden="true"></a>my_func &lt;-<span class="st"> </span><span class="cf">function</span>(y){</span>
<span id="cb173-3"><a href="sec-functions.html#cb173-3" aria-hidden="true"></a>  <span class="kw">return</span>(y <span class="op">+</span><span class="st"> </span>x) </span>
<span id="cb173-4"><a href="sec-functions.html#cb173-4" aria-hidden="true"></a>}</span>
<span id="cb173-5"><a href="sec-functions.html#cb173-5" aria-hidden="true"></a><span class="kw">my_func</span>(<span class="dv">7</span>)</span></code></pre></div>
<div id="2229TnHkWH1f4p8epF8l" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="2229TnHkWH1f4p8epF8l-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="2229TnHkWH1f4p8epF8l-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
That value is still 3 since <code>my_func</code> has not been called yet.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#2229TnHkWH1f4p8epF8l">
Solution
</button>
<ol start="3" style="list-style-type: decimal">
<li>Have a look at the documentation for operator <code>&lt;&lt;-</code> (run <code>?'&lt;--'</code>). After running the code below, what is the value of variable <code>x</code>?</li>
</ol>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="sec-functions.html#cb174-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb174-2"><a href="sec-functions.html#cb174-2" aria-hidden="true"></a>my_func &lt;-<span class="st"> </span><span class="cf">function</span>(y){</span>
<span id="cb174-3"><a href="sec-functions.html#cb174-3" aria-hidden="true"></a>  x &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb174-4"><a href="sec-functions.html#cb174-4" aria-hidden="true"></a>  x &lt;&lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb174-5"><a href="sec-functions.html#cb174-5" aria-hidden="true"></a>  <span class="kw">return</span>(y <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb174-6"><a href="sec-functions.html#cb174-6" aria-hidden="true"></a>}</span></code></pre></div>
<div id="DGWTNmY9zF8DNMI2vZDs" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="DGWTNmY9zF8DNMI2vZDs-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="DGWTNmY9zF8DNMI2vZDs-title">
Solution
</h4>
</div>
<div class="modal-body">
<p>
That value of <code>x</code> is 5 since <code>&lt;&lt;-</code> is used to look at the parent environment. The function call returns 11 since the <code>x</code> used is the local variable. In general avoid using <code>&lt;&lt;-</code> and give local variables different names compared to global ones.
</p>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#DGWTNmY9zF8DNMI2vZDs">
Solution
</button>
<ol start="4" style="list-style-type: decimal">
<li>After running the code below, what is the value of variable <code>x</code> and output of the function call?</li>
</ol>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="sec-functions.html#cb175-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb175-2"><a href="sec-functions.html#cb175-2" aria-hidden="true"></a>my_func &lt;-<span class="st"> </span><span class="cf">function</span>(y){</span>
<span id="cb175-3"><a href="sec-functions.html#cb175-3" aria-hidden="true"></a>  x &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb175-4"><a href="sec-functions.html#cb175-4" aria-hidden="true"></a>  x &lt;&lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb175-5"><a href="sec-functions.html#cb175-5" aria-hidden="true"></a>  <span class="kw">return</span>(y <span class="op">+</span><span class="st"> </span>x)</span>
<span id="cb175-6"><a href="sec-functions.html#cb175-6" aria-hidden="true"></a>}</span>
<span id="cb175-7"><a href="sec-functions.html#cb175-7" aria-hidden="true"></a><span class="kw">my_func</span>(<span class="dv">7</span>)</span></code></pre></div>
</div>
<div id="exercise-job-sequencing" class="section level3" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> Exercise (job sequencing)</h3>
<p><em>Solve this exercise using a script file.</em></p>
<p>This exercise is based on Exercise 6.12 in <span class="citation">Wøhlk (<a href="#ref-vba-book" role="doc-biblioref">2010</a>)</span>.</p>
<p>Consider a problem of determining the best sequencing of jobs on a machine. A set of startup costs are given for 5 machines:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="sec-functions.html#cb176-1" aria-hidden="true"></a>startup_costs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">32</span>, <span class="dv">35</span>, <span class="dv">26</span>)</span>
<span id="cb176-2"><a href="sec-functions.html#cb176-2" aria-hidden="true"></a>startup_costs</span>
<span id="cb176-3"><a href="sec-functions.html#cb176-3" aria-hidden="true"></a><span class="co">#&gt; [1] 27 28 32 35 26</span></span></code></pre></div>
<p>Moreover, when changing from one job to another job, the setup costs are given as:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="sec-functions.html#cb177-1" aria-hidden="true"></a>setup_costs &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(</span>
<span id="cb177-2"><a href="sec-functions.html#cb177-2" aria-hidden="true"></a>  <span class="ot">NA</span>, <span class="dv">35</span>, <span class="dv">22</span>, <span class="dv">44</span>, <span class="dv">12</span>,</span>
<span id="cb177-3"><a href="sec-functions.html#cb177-3" aria-hidden="true"></a>  <span class="dv">49</span>, <span class="ot">NA</span>, <span class="dv">46</span>, <span class="dv">38</span>, <span class="dv">17</span>,</span>
<span id="cb177-4"><a href="sec-functions.html#cb177-4" aria-hidden="true"></a>  <span class="dv">46</span>, <span class="dv">12</span>, <span class="ot">NA</span>, <span class="dv">29</span>, <span class="dv">41</span>,</span>
<span id="cb177-5"><a href="sec-functions.html#cb177-5" aria-hidden="true"></a>  <span class="dv">23</span>, <span class="dv">37</span>, <span class="dv">31</span>, <span class="ot">NA</span>, <span class="dv">26</span>,</span>
<span id="cb177-6"><a href="sec-functions.html#cb177-6" aria-hidden="true"></a>  <span class="dv">17</span>, <span class="dv">23</span>, <span class="dv">28</span>, <span class="dv">34</span>, <span class="ot">NA</span>), </span>
<span id="cb177-7"><a href="sec-functions.html#cb177-7" aria-hidden="true"></a>  <span class="dt">byrow =</span> T, <span class="dt">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb177-8"><a href="sec-functions.html#cb177-8" aria-hidden="true"></a>setup_costs</span>
<span id="cb177-9"><a href="sec-functions.html#cb177-9" aria-hidden="true"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span></span>
<span id="cb177-10"><a href="sec-functions.html#cb177-10" aria-hidden="true"></a><span class="co">#&gt; [1,]   NA   35   22   44   12</span></span>
<span id="cb177-11"><a href="sec-functions.html#cb177-11" aria-hidden="true"></a><span class="co">#&gt; [2,]   49   NA   46   38   17</span></span>
<span id="cb177-12"><a href="sec-functions.html#cb177-12" aria-hidden="true"></a><span class="co">#&gt; [3,]   46   12   NA   29   41</span></span>
<span id="cb177-13"><a href="sec-functions.html#cb177-13" aria-hidden="true"></a><span class="co">#&gt; [4,]   23   37   31   NA   26</span></span>
<span id="cb177-14"><a href="sec-functions.html#cb177-14" aria-hidden="true"></a><span class="co">#&gt; [5,]   17   23   28   34   NA</span></span></code></pre></div>
<p>The goal of the problem is to determine a sequence of jobs which minimizes the total setup cost including the startup cost.</p>
<p>One possible way to find a sequence is the use a greedy strategy:</p>
<pre><code>Greedy Algorithm
Step 0: Start with the job which has minimal startup cost.
Step 1: Select the next job as the job not already done 
        with minimal setup cost given current job. 
Step 2: Set next job in Step 1 to current job and 
        go to Step 1 if not all jobs are done.</code></pre>
<p>In R the greedy algorithm can be implemented as:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="sec-functions.html#cb179-1" aria-hidden="true"></a>greedy &lt;-<span class="st"> </span><span class="cf">function</span>(startup, setup) {</span>
<span id="cb179-2"><a href="sec-functions.html#cb179-2" aria-hidden="true"></a>  jobs &lt;-<span class="st"> </span><span class="kw">nrow</span>(setup)</span>
<span id="cb179-3"><a href="sec-functions.html#cb179-3" aria-hidden="true"></a>  cur_job &lt;-<span class="st"> </span><span class="kw">which.min</span>(startup)</span>
<span id="cb179-4"><a href="sec-functions.html#cb179-4" aria-hidden="true"></a>  cost &lt;-<span class="st"> </span>startup[cur_job]</span>
<span id="cb179-5"><a href="sec-functions.html#cb179-5" aria-hidden="true"></a>  <span class="co"># cat(&quot;Start job:&quot;, cur_job, &quot;\n&quot;)</span></span>
<span id="cb179-6"><a href="sec-functions.html#cb179-6" aria-hidden="true"></a>  job_seq &lt;-<span class="st"> </span>cur_job</span>
<span id="cb179-7"><a href="sec-functions.html#cb179-7" aria-hidden="true"></a>  setup[, cur_job] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb179-8"><a href="sec-functions.html#cb179-8" aria-hidden="true"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(jobs<span class="dv">-1</span>)) {</span>
<span id="cb179-9"><a href="sec-functions.html#cb179-9" aria-hidden="true"></a>    next_job &lt;-<span class="st"> </span><span class="kw">which.min</span>(setup[cur_job, ])</span>
<span id="cb179-10"><a href="sec-functions.html#cb179-10" aria-hidden="true"></a>    <span class="co"># cat(&quot;Next job:&quot;, next_job, &quot;\n&quot;) </span></span>
<span id="cb179-11"><a href="sec-functions.html#cb179-11" aria-hidden="true"></a>    cost &lt;-<span class="st"> </span>cost <span class="op">+</span><span class="st"> </span>setup[cur_job, next_job]</span>
<span id="cb179-12"><a href="sec-functions.html#cb179-12" aria-hidden="true"></a>    job_seq &lt;-<span class="st"> </span><span class="kw">c</span>(job_seq, next_job)</span>
<span id="cb179-13"><a href="sec-functions.html#cb179-13" aria-hidden="true"></a>    cur_job &lt;-<span class="st"> </span>next_job</span>
<span id="cb179-14"><a href="sec-functions.html#cb179-14" aria-hidden="true"></a>    setup[, cur_job] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb179-15"><a href="sec-functions.html#cb179-15" aria-hidden="true"></a>  }</span>
<span id="cb179-16"><a href="sec-functions.html#cb179-16" aria-hidden="true"></a>  <span class="co"># print(setup)</span></span>
<span id="cb179-17"><a href="sec-functions.html#cb179-17" aria-hidden="true"></a>  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">seq =</span> job_seq, <span class="dt">cost =</span> cost))</span>
<span id="cb179-18"><a href="sec-functions.html#cb179-18" aria-hidden="true"></a>}</span>
<span id="cb179-19"><a href="sec-functions.html#cb179-19" aria-hidden="true"></a><span class="kw">greedy</span>(startup_costs, setup_costs)</span>
<span id="cb179-20"><a href="sec-functions.html#cb179-20" aria-hidden="true"></a><span class="co">#&gt; $seq</span></span>
<span id="cb179-21"><a href="sec-functions.html#cb179-21" aria-hidden="true"></a><span class="co">#&gt; [1] 5 1 3 2 4</span></span>
<span id="cb179-22"><a href="sec-functions.html#cb179-22" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb179-23"><a href="sec-functions.html#cb179-23" aria-hidden="true"></a><span class="co">#&gt; $cost</span></span>
<span id="cb179-24"><a href="sec-functions.html#cb179-24" aria-hidden="true"></a><span class="co">#&gt; [1] 115</span></span></code></pre></div>
<p>First, the job with minimum startup cost is found using function <code>which.min</code> and we define cost as the startup cost. We use <code>cat</code> to make some debugging statements and initialize <code>job_seq</code> with the first job. Next, we have to find a way of ignoring jobs already done. We do that here by setting the columns of setup cost equal to NA for jobs already done. Hence, they will not be selected by <code>which.min</code>. The <code>for</code> loop runs 4 times and selects jobs and accumulate the total cost.</p>
<p>A well-known better strategy is to:</p>
<pre><code>Better Algorithm
Step 0: Subtract minimum of startup and setup cost for each job from setup and 
        startup costs (that is columnwise)
Step 1: Call the greedy algorithm with the modified costs. Note that the total 
        cost returned has to be modified a bit.</code></pre>
<div id="SXme8JwBkS8Cf8PRcFSA" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="SXme8JwBkS8Cf8PRcFSA-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="SXme8JwBkS8Cf8PRcFSA-title">
Solution
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="sec-functions.html#cb181-1" aria-hidden="true"></a>better &lt;-<span class="st"> </span><span class="cf">function</span>(startup, setup) {</span>
<span id="cb181-2"><a href="sec-functions.html#cb181-2" aria-hidden="true"></a>  jobs &lt;-<span class="st"> </span><span class="kw">nrow</span>(setup)</span>
<span id="cb181-3"><a href="sec-functions.html#cb181-3" aria-hidden="true"></a>  min_col_val &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="kw">rbind</span>(startup, setup), <span class="dv">2</span>, min, <span class="dt">na.rm =</span> T)</span>
<span id="cb181-4"><a href="sec-functions.html#cb181-4" aria-hidden="true"></a>  startup &lt;-<span class="st"> </span>startup <span class="op">-</span><span class="st"> </span>min_col_val</span>
<span id="cb181-5"><a href="sec-functions.html#cb181-5" aria-hidden="true"></a>  min_mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rep</span>(min_col_val, jobs), </span>
<span id="cb181-6"><a href="sec-functions.html#cb181-6" aria-hidden="true"></a>                    <span class="dt">ncol =</span> jobs, <span class="dt">byrow =</span> T)</span>
<span id="cb181-7"><a href="sec-functions.html#cb181-7" aria-hidden="true"></a>  setup &lt;-<span class="st"> </span>setup <span class="op">-</span><span class="st"> </span>min_mat</span>
<span id="cb181-8"><a href="sec-functions.html#cb181-8" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">greedy</span>(startup, setup)</span>
<span id="cb181-9"><a href="sec-functions.html#cb181-9" aria-hidden="true"></a>  lst<span class="op">$</span>cost &lt;-<span class="st"> </span>lst<span class="op">$</span>cost <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>(min_col_val)</span>
<span id="cb181-10"><a href="sec-functions.html#cb181-10" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb181-11"><a href="sec-functions.html#cb181-11" aria-hidden="true"></a>}</span>
<span id="cb181-12"><a href="sec-functions.html#cb181-12" aria-hidden="true"></a><span class="kw">better</span>(startup_costs, setup_costs)</span>
<span id="cb181-13"><a href="sec-functions.html#cb181-13" aria-hidden="true"></a><span class="co">#&gt; $seq</span></span>
<span id="cb181-14"><a href="sec-functions.html#cb181-14" aria-hidden="true"></a><span class="co">#&gt; [1] 4 1 3 2 5</span></span>
<span id="cb181-15"><a href="sec-functions.html#cb181-15" aria-hidden="true"></a><span class="co">#&gt; </span></span>
<span id="cb181-16"><a href="sec-functions.html#cb181-16" aria-hidden="true"></a><span class="co">#&gt; $cost</span></span>
<span id="cb181-17"><a href="sec-functions.html#cb181-17" aria-hidden="true"></a><span class="co">#&gt; [1] 109</span></span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#SXme8JwBkS8Cf8PRcFSA">
Solution
</button>
<div id="r95tIkOR989VUcR30DqG" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="r95tIkOR989VUcR30DqG-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="r95tIkOR989VUcR30DqG-title">
Hint 2
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="sec-functions.html#cb182-1" aria-hidden="true"></a>better &lt;-<span class="st"> </span><span class="cf">function</span>(startup, setup) {</span>
<span id="cb182-2"><a href="sec-functions.html#cb182-2" aria-hidden="true"></a>  jobs &lt;-<span class="st"> </span><span class="kw">nrow</span>(setup)</span>
<span id="cb182-3"><a href="sec-functions.html#cb182-3" aria-hidden="true"></a>  min_col_val &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="kw">rbind</span>(startup, setup), <span class="dv">2</span>, min, <span class="dt">na.rm =</span> T)</span>
<span id="cb182-4"><a href="sec-functions.html#cb182-4" aria-hidden="true"></a>  startup &lt;-<span class="st"> </span>startup <span class="op">-</span><span class="st"> </span>min_col_val</span>
<span id="cb182-5"><a href="sec-functions.html#cb182-5" aria-hidden="true"></a>  min_mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rep</span>(min_col_val, jobs), </span>
<span id="cb182-6"><a href="sec-functions.html#cb182-6" aria-hidden="true"></a>                    <span class="dt">ncol =</span> jobs, <span class="dt">byrow =</span> T)</span>
<span id="cb182-7"><a href="sec-functions.html#cb182-7" aria-hidden="true"></a>  setup &lt;-<span class="st"> </span>setup <span class="op">-</span><span class="st"> </span>___</span>
<span id="cb182-8"><a href="sec-functions.html#cb182-8" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">greedy</span>(startup, setup)</span>
<span id="cb182-9"><a href="sec-functions.html#cb182-9" aria-hidden="true"></a>  lst<span class="op">$</span>cost &lt;-<span class="st"> </span>lst<span class="op">$</span>cost <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>(___)</span>
<span id="cb182-10"><a href="sec-functions.html#cb182-10" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb182-11"><a href="sec-functions.html#cb182-11" aria-hidden="true"></a>}</span>
<span id="cb182-12"><a href="sec-functions.html#cb182-12" aria-hidden="true"></a><span class="kw">better</span>(startup_costs, setup_costs)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#r95tIkOR989VUcR30DqG">
Hint 2
</button>
<div id="bbzBkFK0zRzC6FgZPjZZ" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="bbzBkFK0zRzC6FgZPjZZ-title">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">×</span>
</button>
<h4 class="modal-title" id="bbzBkFK0zRzC6FgZPjZZ-title">
Hint 1
</h4>
</div>
<div class="modal-body">
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="sec-functions.html#cb183-1" aria-hidden="true"></a>better &lt;-<span class="st"> </span><span class="cf">function</span>(startup, setup) {</span>
<span id="cb183-2"><a href="sec-functions.html#cb183-2" aria-hidden="true"></a>  jobs &lt;-<span class="st"> </span><span class="kw">nrow</span>(setup)</span>
<span id="cb183-3"><a href="sec-functions.html#cb183-3" aria-hidden="true"></a>  min_col_val &lt;-<span class="st"> </span><span class="kw">apply</span>(___)</span>
<span id="cb183-4"><a href="sec-functions.html#cb183-4" aria-hidden="true"></a>  startup &lt;-<span class="st"> </span>startup <span class="op">-</span><span class="st"> </span>___</span>
<span id="cb183-5"><a href="sec-functions.html#cb183-5" aria-hidden="true"></a>  min_mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rep</span>(min_col_val, jobs), </span>
<span id="cb183-6"><a href="sec-functions.html#cb183-6" aria-hidden="true"></a>                    <span class="dt">ncol =</span> ___, <span class="dt">byrow =</span> T)</span>
<span id="cb183-7"><a href="sec-functions.html#cb183-7" aria-hidden="true"></a>  setup &lt;-<span class="st"> </span>setup <span class="op">-</span><span class="st"> </span>___</span>
<span id="cb183-8"><a href="sec-functions.html#cb183-8" aria-hidden="true"></a>  lst &lt;-<span class="st"> </span><span class="kw">greedy</span>(___, ___)</span>
<span id="cb183-9"><a href="sec-functions.html#cb183-9" aria-hidden="true"></a>  lst<span class="op">$</span>cost &lt;-<span class="st"> </span>lst<span class="op">$</span>cost <span class="op">+</span><span class="st"> </span>___</span>
<span id="cb183-10"><a href="sec-functions.html#cb183-10" aria-hidden="true"></a>  <span class="kw">return</span>(lst)</span>
<span id="cb183-11"><a href="sec-functions.html#cb183-11" aria-hidden="true"></a>}</span>
<span id="cb183-12"><a href="sec-functions.html#cb183-12" aria-hidden="true"></a><span class="kw">better</span>(startup_costs, setup_costs)</span></code></pre></div>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal">
Close
</button>
</div>
</div>
</div>
</div>
<button class="btn btn-default btn-xs" style="float:right" data-toggle="modal" data-target="#bbzBkFK0zRzC6FgZPjZZ">
Hint 1
</button>
<p>Implement a <code>better</code> function calculating a better strategy. Hint: to find the minimum column costs, you may use <code>apply(rbind(startup, setup), 2, min, na.rm = T)</code>.</p>

</div>
</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-stat545">
<p>Bryan, J. 2017. <em>STAT 545 - Data Wrangling, Exploration, and Analysis with R</em>. <a href="https://stat545.com/">https://stat545.com/</a>.</p>
</div>
<div id="ref-rdpeng">
<p>Peng, R. D. 2018. <em>R Programming for Data Science</em>. <a href="https://bookdown.org/rdpeng/rprogdatascience/">https://bookdown.org/rdpeng/rprogdatascience/</a>.</p>
</div>
<div id="ref-r-pkgs">
<p>Wickham, Hadley. 2015. <em>R Packages: Organize, Test, Document, and Share Your Code</em>. O’Reilly Media. <a href="http://r-pkgs.had.co.nz/">http://r-pkgs.had.co.nz/</a>.</p>
</div>
<div id="ref-vba-book">
<p>Wøhlk, S. 2010. <em>VBA Programming in Business Economics</em>. DJØF Publishing.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sec-loops.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sec-tidy-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bss-osca/tfa/edit/master/book/functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
